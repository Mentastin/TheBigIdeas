\usepackage{imakeidx}
\usepackage[greek, english]{babel}
%\usepackage[T1]{fontenc}
\usepackage[utf8x]{inputenc}
\usepackage{amsthm}
%\usepackage{mbboard/texinputs/mbboard}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{stmaryrd}
\usepackage{thmtools}
\usepackage{mathtools}
\usepackage{etoolbox}
\usepackage{scalerel}
\usepackage{siunitx}
\usepackage{tikz}
\usepackage{ulem}
\usepackage{contour}
\usepackage{xcolor}
\usepackage{bbold}
\usepackage{url}
\usepackage{slashed}
\usepackage{simpler-wick}
\usepackage{tikz-feynman}
\usepackage{../tikz-uml}
\usepackage{cancel}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{csquotes}
%\usepackage{commath}
\usepackage{subcaption}
\usepackage{pgfplots}
\usepackage{tensor}
\usepackage{verbatim}
\usepackage{esint}
\usepackage[shortlabels]{enumitem}
\usepackage[skins, breakable]{tcolorbox}
%\usepackage{bbm}
%\usepackage{bm}
%\usepackage{autonum}
\usepackage{diagbox}


\usepackage{listings}
\usepackage[ruled, linesnumbered]{algorithm2e}

\usepackage[margin=1.4in]{geometry}
\usepackage[hidelinks, hypertexnames=false]{hyperref}
\usepackage[user, xr]{zref}

\makeindex[name=definition,title={Index of definitions}]

\tcbset{breakable}

\usetikzlibrary{fit, patterns, snakes, decorations.markings, trees}
\usetikzlibrary{cd}
%\usetikzlibrary{quantikz}

\usepgfmodule{nonlineartransformations}


% --- Theorems and such ---
\newtheorem{theorem}{Theorem}[part]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheoremstyle{sublemma}% 〈name〉
{3pt}% 〈Space above〉1
{3pt}% 〈Space below 〉1
{}% 〈Body font〉
{}% 〈Indent amount〉2
{\itshape}% 〈Theorem head font〉
{:}% 〈Punctuation after theorem head 〉
{.5em}% 〈Space after theorem head 〉3
{\undline{\thmname{#1}}\thmnumber{ #2}\thmnote{(#3)}}% 〈Theorem head spec (can be left empty, meaning ‘normal’ )〉
\theoremstyle{sublemma}
\newtheorem*{lemma*}{Lemma}
% --- New commands ---
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\T}{\mathbb{T}}
%\newcommand{\H}{\mathbb{H}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\G}{\mathbb{G}}

\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}

\DeclareMathOperator{\fractional}{frac}
\DeclareMathOperator{\integer}{int}

\newcommand{\ttransp}{t}
\newcommand{\transp}{\mathrm{T}}

% --- Inner products / brackets ---
\newcommand{\inner}[1]{\left\langle #1 \right\rangle}
\providecommand{\ket}[1]{\left| #1 \right\rangle}
\providecommand{\bra}[1]{\left\langle #1 \right|}
\let\abraket\braket
\providecommand{\braket}[3][\null]{%    %TOreDO!
  \ifx#1\null
       \langle#2|#3\rangle%
    \else%
       \langle#2|#1|#3\rangle%
    \fi}
\newcommand{\sbraket}[3][\null]{%    %TOreDO!
  \ifx#1\null
       \left\langle#2\vphantom{#3}\right.\left|#3\vphantom{#2}\right\rangle%
    \else%
         \left\langle#2\vphantom{#1}\vphantom{#3}\right.\left|#1\vphantom{#2}\vphantom{#3}\right|\left.#3\vphantom{#1}\vphantom{#2}\right\rangle%
    \fi}
\newcommand{\ketbra}[2]{|#1\rangle\langle#2|}
\newcommand{\sketbra}[2]{\left|#1\vphantom{#2}\right\rangle\left\langle#2\vphantom{#1}\right|}

\newcommand{\grade}[1]{\left\langle #1 \right\rangle}
% --- Set builder notation ---
\newcommand{\setbuilder}[3][\null]{%    %TOreDO!
  \ifx#1\null
       { \left\{ #2 \;\middle|\; #3 \right\} }%
    \else%
       { #1\{ #2 \;#1|\; #3 #1\} }%
    \fi}


% --- Script r ---
\def\rcurs{{\mbox{$\resizebox{.09in}{.08in}{\includegraphics[trim= 1em 0 14em 0,clip]{ScriptR}}$}}}
\def\brcurs{{\mbox{$\resizebox{.09in}{.08in}{\includegraphics[trim= 1em 0 14em 0,clip]{BoldR}}$}}}
\def\hrcurs{{\mbox{$\hat \brcurs$}}}
% --- Vector style ---
\let\point\vec
\renewcommand{\vec}[1]{\boldsymbol{\mathrm{#1}}}
%\let\ihat\hat
%\let\operator\hat
\newcommand{\vhat}[1]{\vec{\hat{#1}}}
% --- Complex vectors ---
\newcommand{\vbar}[1]{\vec{\bar{#1}}}
% --- Norm ---
\makeatletter
\DeclareDocumentCommand\braces{}{{\ifnum\z@=`}\fi\@braces}
\DeclareDocumentCommand\@braces{ s t\big t\Big t\bigg t\Bigg m m m }
{ % General braces with automatic and manual sizing
	\IfBooleanTF{#1}
	{\left#6\smash{#8}\right#7\vphantom{#8}}
	{
		\IfBooleanTF{#2}{\bigl#6{#8}\bigr#7}{
			\IfBooleanTF{#3}{\Bigl#6{#8}\Bigr#7}{
				\IfBooleanTF{#4}{\biggl#6{#8}\biggr#7}{
					\IfBooleanTF{#5}{\Biggl#6{#8}\Biggr#7}{\left#6{#8}\right#7}
				}
			}
		}
	}
	\ifnum\z@=`{\fi}
}
%\DeclareDocumentCommand\norm{ l m }{\braces#1{\lVert}{\rVert}{#2}} % Norm
\makeatother

\newcommand\swapifbranches[3]{#1{#3}{#2}}
\makeatletter
\MHInternalSyntaxOn
\patchcmd{\DeclarePairedDelimiter}{\@ifstar}{\swapifbranches\@ifstar}{}{}
\MHInternalSyntaxOff
\makeatother

\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}
% --- Algorithms ---
\let\oldnl\nl% Store \nl in \oldnl
\newcommand{\nonl}{\renewcommand{\nl}{\let\nl\oldnl}}% Remove line number for one line
\let\oldKwSty\KwSty
\renewcommand{\KwSty}[1]{\nonl\textnormal{\textbf{#1}}\unskip}
\newenvironment{centeredAlgorithm}[1][0.5]
{\par\centering
\begin{minipage}{.5\linewidth}
  \begin{algorithm}[H]
}
{
  \end{algorithm}
\end{minipage}
\par
}
\SetKw{Dots}{\hspace{1em}$\hdots$ \\}
\SetKwBlock{Subroutine}{\vspace{-1em}}{}
% --- Defining quantities ---
\newcommand{\defeq}{\coloneqq}
\newcommand{\eqdef}{\eqqcolon}
\newcommand{\defequiv}{\quad\Leftrightarrow_{\text{def}}\quad}
% --- Maths operators ---
\DeclareMathOperator{\Class}{Class}
\DeclareMathOperator{\Element}{Element}
\DeclareMathOperator{\ProperClass}{ProperClass}
\DeclareMathOperator{\Set}{Set}
\DeclareMathOperator{\Pair}{Pair}
\DeclareMathOperator{\acc}{acc}
\DeclareMathOperator\powerset{\mathcal{P}}
\DeclareMathSymbol\mesh{\mathrel}{operators}{`\#}
\newcommand\aset[1]{\mathrel{\widehat{#1}}}
\newcommand\amesh{\aset{\#}}
\newcommand\aperp{\aset{\perp}}
\newcommand{\symdiff}{\mathbin{\Delta}}

\newcommand{\sSet}[2][\null]{%    %TOreDO!
  \ifx#1\null
       { \left( #2 \right) }%
    \else%
       { #1( #2 #1) }%
    \fi}

\newcommand\inj{\rightarrowtail}
\newcommand\surj{\twoheadrightarrow}
\newcommand\bij{\twoheadrightarrowtail}

\DeclareMathOperator\incl{\iota}

\DeclareMathOperator\relconvex{conv}

\DeclareMathOperator\Card{Card}
\DeclareMathOperator\Ord{Ord}

\DeclareMathOperator\argmin{argmin}
\DeclareMathOperator\argmax{argmax}

\DeclareMathOperator{\graph}{graph}
\DeclareMathOperator{\len}{len}
\newcommand\seq[1]{\left\langle #1 \right\rangle}

\newcommand\cat[1]{\mathsf{#1}}
\DeclareMathOperator{\ob}{ob}
\DeclareMathOperator{\mor}{mor}

\DeclareMathOperator\id{id}
\DeclareMathOperator\dom{dom}
\DeclareMathOperator\codom{codom}
\DeclareMathOperator\co{co}
\DeclareMathOperator\im{im}
\DeclareMathOperator\preim{preim}
\newcommand\imf{\downarrow}
\newcommand\preimf{{\text{\hspace{0.15em}-}\downarrow}}
\DeclareMathOperator\sunp{\Rsh}

\newcommand\syq{\mathbin{\obar}}

\let\swapGate\swap
\let\swap\relax
\DeclareMathOperator\swap{swap}
\DeclareMathOperator\curry{curry}
\newcommand\constant\underline

\DeclareMathOperator\Fixedpoints{Fp}

\newcommand\leftconnections[1]{\mathop{\swarrow}#1}
\newcommand\rightconnections[1]{#1\mathop{\searrow}}

\DeclareMathSymbol\greensL{\mathrel}{symbols}{"4C}
\DeclareMathSymbol\greensR{\mathrel}{symbols}{"52}
\DeclareMathSymbol\greensH{\mathrel}{symbols}{"48}
\DeclareMathSymbol\greensD{\mathrel}{symbols}{"44}

\DeclareMathOperator\evalMap{ev}

\newcommand\commute{\leftrightarrow}

\DeclareMathOperator\Hom{Hom}

\DeclareMathOperator\Op{Op}

\DeclareMathOperator\upset{\uparrow}
\DeclareMathOperator\downset{\downarrow}
\DeclareMathOperator\upsetset{\mathcal{I}_u}
\DeclareMathOperator\downsetset{\mathcal{I}_d}

\DeclareMathOperator\DM{DM}

\DeclareMathOperator\uupset{\twoheaduparrow}
\DeclareMathOperator\ddownset{\twoheaddownarrow}

\newcommand\from\leftarrow

\let\projGate\proj
\let\proj\relax
\newcommand\proj{\pi}
\newcommand\pbCorner{\arrow[dr, phantom, "\ulcorner", pos=0.05]}
\newcommand\pbflipCorner{\arrow[dl, phantom, "\urcorner", pos=0.05]}

\newcommand\coprodMorph[2]{\left(\begin{smallmatrix}
#1 \\ #2
\end{smallmatrix}\right)}
\newcommand\coprodParallel[2]{\left(\begin{smallmatrix}
#1 \vspace{0.1em} \\ \hline \vspace{-0.1em} \\ #2
\end{smallmatrix}\right)}

\DeclareMathOperator{\Closure}{Cl}

\DeclareMathOperator{\lcm}{lcm}
%\DeclareMathOperator{\gcd}{gcd}

\DeclareMathOperator\directed{\mathcal{D}}
\newcommand{\dirvee}{\mathop{\mathchoice{%
\setlength{\unitlength}{0.95em}\linethickness{0.2mm}\raisebox{-.5em}% Display
    {\begin{picture}(1,1.5)\put(.5,0){\line(-1,3){.48}}
    \put(.5,0){\vector(1,3){.5}}\end{picture}}}{%
\setlength{\unitlength}{.7em}\linethickness{0.18mm}\raisebox{-.2em}% Text
    {\begin{picture}(1,1.5)\put(.5,0){\line(-1,3){.48}}
    \put(.5,0){\vector(1,3){.5}}\end{picture}}}{%
\setlength{\unitlength}{.7em}\raisebox{-.2em}% Script
    {\begin{picture}(1,1.5)\put(.5,0){\line(-1,3){.48}}
    \put(.5,0){\vector(1,3){.5}}\end{picture}}}{%
\setlength{\unitlength}{.7em}\raisebox{-.2em}% Scriptscript
    {\begin{picture}(1,1.5)\put(.5,0){\line(-1,3){.48}}
    \put(.5,0){\vector(1,3){.5}}\end{picture}}}}%
}

\DeclareMathOperator\ideals{\mathcal{I}}
\DeclareMathOperator\filters{\mathcal{F}}

\DeclareMathOperator\joinIr{\mathcal{J}}
\DeclareMathOperator\meetIr{\mathcal{M}}

\DeclareMathOperator\atoms{\mathcal{A}}
\DeclareMathOperator\coatoms{\mathcal{CA}}

\DeclareMathOperator\ultrafilters{\mathbb{U}}

\DeclareMathOperator\compacts{\mathcal{K}}
\newcommand\domain{\mathcal{D}}

\newcommand\pfilter{\dot}
\DeclareMathOperator\powerfilters{\mathcal{FP}}
\DeclareMathOperator\powerideals{\mathcal{IP}}
\DeclareMathOperator\powerultrafilters{\mathbb{U}\mathcal{P}}
\DeclareMathOperator\powerdirected{\mathcal{DP}}

\DeclareMathOperator\lmax{lmax}
\DeclareMathOperator\lmin{lmin}
\DeclareMathOperator\llmax{llmax}
\DeclareMathOperator\llmin{llmin}

\newcommand\imp{\multimap}

\newcommand{\charFunc}[1]{\chi_{#1}}
\newcommand{\Iverson}[2][\null]{%    %TOreDO!
  \ifx#1\null
       { \left[ #2 \right] }%
    \else%
       { #1[ #2 #1] }%
    \fi}

\newcommand\initSeq{\sqsubseteq}
\newcommand\concat{\star}
\newcommand{\reverse}[1]{{#1}^\mathrm{R}}

\DeclareMathOperator\strInterleave{interleave}
\DeclareMathOperator\strConcat{concat}
\DeclareMathOperator\tailsOf{tailsOf}
\DeclareMathOperator\splitTerms{splitTerms}
\DeclareMathOperator\syntaxTree{syntaxTree}
\DeclareMathOperator\positions{pos}
\DeclareMathOperator\treeToTerm{treeToTerm}
\DeclareMathOperator\leafAt{leafAt}
\DeclareMathOperator\varSubs{varSubs}

\DeclareMathOperator\branch{branch}

\newcommand{\joins}{\mathrel{\downarrow}}
\newcommand{\normalform}\breve

\newcommand\LB{\scalebox{0.5}[1]{LB}}
\newcommand\RB{\scalebox{0.5}[1]{RB}}
\newcommand\SEP{\scalebox{0.5}{SEP}}

\DeclareMathOperator\mflat{flat}

\newcommand\leviCivita{\varepsilon}

\DeclareMathOperator\initialPreConv{IpC}
\DeclareMathOperator\finalPreConv{FpC}
\DeclareMathOperator\initialConv{IC}
\DeclareMathOperator\finalConv{FC}

\DeclareMathOperator\convMod{M_\mathcal{C}}
\DeclareMathOperator\kentMod{M_\mathcal{K}}
\DeclareMathOperator\finDepthMod{M_\mathcal{FD}}
\DeclareMathOperator\pseudotopMod{M_{\psi\mathcal{T}}}
\DeclareMathOperator\pretopMod{M_\mathcal{PT}}
\DeclareMathOperator\topMod{M_\mathcal{T}}

\DeclareMathOperator\lconvMod{M_\text{lconv}}

\DeclareMathOperator\neighbourhood{\mathcal{N}}
\DeclareMathOperator\vicinity{\mathcal{V}}
\DeclareMathOperator\adh{adh}
\DeclareMathOperator\inh{inh}
\DeclareMathOperator{\closure}{cl}
\DeclareMathOperator{\interior}{int}
\DeclareMathOperator\topology{\mathcal{T}}
\DeclareMathOperator\Tails{Tails}
\DeclareMathOperator\TailsFilter{TailsFilter}

\DeclareMathOperator\basedMod{M}
\DeclareMathOperator\seqMod{M_\mathcal{S}}

\DeclareMathOperator\initialUniformity{I\mathcal{U}}
\DeclareMathOperator\finalUniformity{F\mathcal{U}}

\DeclareMathOperator\starFilter{star}

\DeclareMathOperator\ball{B}
\DeclareMathOperator\cball{\overline{B}}
\DeclareMathOperator\sphere{S}

\DeclareMathOperator\entourage{\mathcal{E}}
\DeclareMathOperator\uniformity{\mathcal{U}}

\newcommand\uRelEv{\mathrel{\mathrm{R}_{\evalMap}}}

\DeclareMathOperator\diam{diam}
\DeclareMathOperator\rad{rad}

\newcommand{\decRearrange}[1]{{#1}^{\ssearrow}}

\DeclareMathOperator\NF{NF}

\DeclareMathOperator{\st}{st}

\newcommand\genIdeal[1]{\left(\left(#1\right)\right)}
\newcommand\genIdealBuilder[2]{\left(\left(#1\middle|#2\right)\right)}
\DeclareMathOperator{\group}{gp}
\DeclareMathOperator\Inn{Inn}

\let\Im\relax
\DeclareMathOperator\Im{\mathfrak{I}m}
\let\Re\relax
\DeclareMathOperator\Re{\mathfrak{R}e}
\DeclareMathOperator\supp{supp}

%\renewcommand{\Re}{\operatorname{Re}}
%\renewcommand{\Im}{\operatorname{Im}}

\newcommand\commutator[2][\null]{%    %TOreDO!
  \ifx#1\null
       { \left[ #2 \right] }%
    \else%
       { #1[ #2 #1] }%
    \fi}
\newcommand\anticommutator[2][\null]{%    %TOreDO!
  \ifx#1\null
       { \left\{ #2 \right\} }%
    \else%
       { #1\{ #2 #1\} }%
    \fi}

\DeclareMathOperator{\SF}{SF}

\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\Ogroup}{O}
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\SU}{SU}
\DeclareMathOperator{\U}{U}

\DeclareMathOperator{\Iso}{Iso}

\DeclareMathOperator{\Pin}{Pin}
\DeclareMathOperator{\Spin}{Spin}

\DeclareMathOperator{\glAlg}{\mathfrak{gl}}
\DeclareMathOperator{\slAlg}{\mathfrak{sl}}
\DeclareMathOperator{\uAlg}{\mathfrak{u}}
\DeclareMathOperator{\suAlg}{\mathfrak{su}}
\DeclareMathOperator{\oAlg}{\mathfrak{o}}
\DeclareMathOperator{\soAlg}{\mathfrak{so}}

\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Ad}{Ad}
\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator\atanh{arctanh}
\DeclareMathOperator\sech{sech}
\DeclareMathOperator\csch{csch}

\DeclareMathOperator\Span{span}
\DeclareMathOperator\Lin{Lin}
\DeclareMathOperator\contLin{\mathcal{L}}
\DeclareMathOperator\codim{codim}
\DeclareMathOperator\coker{coker}
\DeclareMathOperator\coim{coim}

\DeclareMathOperator\convex{conv}
\DeclareMathOperator\cone{cone}
\DeclareMathOperator\convCone{convCone}
\DeclareMathOperator\affine{aff}
\DeclareMathOperator\balanced{bal}
\DeclareMathOperator\balancedCore{balcore}
\DeclareMathOperator\semibalanced{semibal}
\DeclareMathOperator\semibalancedCore{semibalcore}
\DeclareMathOperator\disked{cobal}
\DeclareMathOperator\relint{relint}

\DeclareMathOperator\epigraph{epi}

\newcommand{\bornConv}[1]{\mu_{#1}}
\newcommand{\vNborn}[1]{\mathcal{B}_{#1}}
\DeclareMathOperator\mackeyMod{M_\mu}

\newcommand{\pair}[1]{\left\langle #1 \right\rangle}
\newcommand{\abspair}[1]{\left|\left\langle #1 \right\rangle\right|}
\let\pol\oslash
%\DeclareMathSymbol\pol{\mathrel}{operators}{`\oslash}
\newcommand{\polarTop}[1]{\tau_{#1}}

\newcommand{\pairingAligned}{\veebar}

\newcommand{\subdiff}[1]{\partial #1}

\DeclareMathOperator\meromorphic{\mathcal{M}}

\newcommand\res{\rho}
\newcommand\spec{\sigma}
\newcommand\pspec{\sigma_\text{p}}
\newcommand\cspec{\sigma_\text{c}}
\newcommand\rspec{\sigma_\text{r}}
\newcommand\cpspec{\sigma_\text{cp}}
\newcommand\apspec{\sigma_\text{ap}}
\DeclareMathOperator\spr{spr}

\DeclareMathOperator\NumRange{W}
\DeclareMathOperator\nr{nr}

\DeclareMathOperator\Row{row}
\DeclareMathOperator\Col{col}
\DeclareMathOperator\Null{null}
\DeclareMathOperator\Rank{rank}
\DeclareMathOperator\KruskalRank{K}

\newcommand\Expval[1]{\mathbb{E}\left[#1\right]}
\newcommand\expval[1]{\left\langle #1 \right\rangle}
\newcommand\var{\Delta}
\DeclareMathOperator\E{E}
\DeclareMathOperator\Var{Var}

\DeclareMathOperator\vectorisation{vec}
\DeclareMathOperator\Tr{Tr}
\DeclareMathOperator\adj{adj}
\DeclareMathOperator\End{End}
\DeclareMathOperator\Aut{Aut}
\DeclareMathOperator\Bounded{\mathcal{B}}
\DeclareMathOperator\Compact{\mathcal{K}}
\DeclareMathOperator\Fred{\mathcal{F}}

\DeclareMathOperator\meas{\mathcal{M}}
\DeclareMathOperator\cont{\mathcal{C}}
\DeclareMathOperator\ucont{\mathcal{UC}}

\DeclareMathOperator\content{content}
\DeclareMathOperator\outerMeasure{outerMeasure}

\DeclareMathOperator\essup{essup}

\DeclareMathOperator\HLmax{\mathcal{M}}

\DeclareMathOperator\testFuncs{\mathcal{D}}
\DeclareMathOperator\dists{\mathcal{D}^\prime}

\DeclareMathOperator\Cl{Cl}
\DeclareMathOperator\cCl{\mathbb{C}l}

\DeclareMathOperator\Ind{Ind}
\DeclareMathOperator\Index{idx}

\NewDocumentCommand{\grad}{}{%
  \mathop{}\!% \mathop for good spacing before \nabla
  \nabla}
\NewDocumentCommand{\curl}{}{%
  \mathop{}\!% \mathop for good spacing before \nabla
  \nabla\times}
\DeclareMathOperator\vnabla{\vec{\nabla}}

\DeclareMathOperator\Res{Res}

\newcommand\Normals{\mathop{\mathcal{N}}\nolimits}
\newcommand\SelfAdjoints{\mathop{\mathcal{S}\hspace{-0.15em}\mathcal{A}}\nolimits}
\newcommand\Projections{\mathop{\mathcal{P}}\nolimits}
\newcommand\Unitaries{\mathop{\mathcal{U}}\nolimits}

\DeclareMathOperator\states{\mathcal{S}}

\DeclareMathSymbol{\mlq}{\mathord}{operators}{``}
\DeclareMathSymbol{\mrq}{\mathord}{operators}{`'}

\newcommand\adual[1]{{#1}^*}
\newcommand\abidual[1]{{#1}^{**}}
\newcommand\dual[1]{{#1}^*}
\newcommand\bidual[1]{{#1}^{**}}
\newcommand\tdual[1]{{#1}^\prime}
\newcommand\tbidual[1]{{#1}^{\prime\prime}}
\newcommand\comm[1]{{#1}\raisebox{-0.15em}{$\scaleobj{1.3}{\mrq}$}}

\DeclareMathOperator\Schwartz{\mathcal{S}}

\DeclareMathOperator\multiIndex{MI}

\DeclareMathOperator\Fourier{\mathcal{F}}

\DeclareMathOperator\Bernoulli{Bernoulli}
\DeclareMathOperator\Binomial{Bin}
\DeclareMathOperator\Poisson{Poisson}
\DeclareMathOperator\GammaDist{Gamma}
\DeclareMathOperator\Erlang{Erlang}
\DeclareMathOperator\Exponential{Exp}

% --- Intervals ---
\newcommand\interval[2][c]{%
\edef\inp{#1}%
\def\cCase{c}%
\def\oCase{o}%
\def\ocCase{oc}%
\def\coCase{co}%
\ifx\inp\cCase{\mathopen[#2\mathclose]}
\else \ifx\inp\oCase{\mathopen]#2\mathclose[}
\else \ifx\inp\ocCase{\mathopen]#2\mathclose]}
\else \ifx\inp\coCase{\mathopen[#2\mathclose[}
\fi\fi\fi\fi}

% --- Define custom environments ---
\newtcolorbox{note}{enhanced,sharp corners=all,colback=white,colframe=black,toprule=-1pt,bottomrule=-1pt,leftrule=1pt,rightrule=-1pt, overlay unbroken={
\draw[black,line width=1pt] (frame.north west) -- ++(.2,0);
\draw[black,line width=1pt] (frame.south west) -- ++(.2,0);
}, overlay first={
\draw[black,line width=1pt] (frame.north west) -- ++(.2,0);
}, overlay last={
\draw[black,line width=1pt] (frame.south west) -- ++(.2,0);
}, left=2mm, top=2mm, bottom=2mm}

%\newtcolorbox{practical}{enhanced,sharp corners=all,colback=white,colframe=black,toprule=0pt,bottomrule=0pt,leftrule=1pt,rightrule=0pt, overlay unbroken={
%\draw[black,line width=1pt] (frame.north west) -- ++(.2,0);
%\draw[black,line width=1pt] (frame.south west) -- ++(.2,0);
%}, overlay first={
%\draw[black,line width=1pt] (frame.north west) -- ++(.2,0);
%}, overlay last={
%\draw[black,line width=1pt] (frame.south west) -- ++(.2,0);
%}, left=2mm, top=2mm, bottom=2mm}

\newtcolorbox{example}{enhanced,sharp corners=all,colback=white,colframe=black,toprule=-1pt,bottomrule=-1pt,leftrule=1pt,rightrule=-1pt, overlay unbroken={
\draw[black,line width=1pt] (frame.north west) -- ++(.2,0);
\draw[black,line width=1pt] (frame.south west) -- ++(.2,0);
}, overlay first={
\draw[black,line width=1pt] (frame.north west) -- ++(.2,0);
}, overlay last={
\draw[black,line width=1pt] (frame.south west) -- ++(.2,0);
}, title={\underline{Example}}, attach boxed title to top,
boxed title style={empty,size=minimal,toprule=2pt,top=4pt},
coltitle=black, left=2mm, top=2mm, bottom=2mm}

\newtcolorbox{problem}{enhanced,sharp corners=all,colback=white,colframe=black,toprule=-1pt,bottomrule=-1pt,leftrule=1pt,rightrule=-1pt, overlay unbroken={
\draw[black,line width=1pt] (frame.north west) -- ++(.2,0);
\draw[black,line width=1pt] (frame.south west) -- ++(.2,0);
}, overlay first={
\draw[black,line width=1pt] (frame.north west) -- ++(.2,0);
}, overlay last={
\draw[black,line width=1pt] (frame.south west) -- ++(.2,0);
}, title={\underline{Problem statement}}, attach boxed title to top,
boxed title style={empty,size=minimal,toprule=2pt,top=4pt},
coltitle=black, left=2mm, top=2mm, bottom=2mm}

\newtcolorbox{params}{enhanced,sharp corners=all,colback=white,colframe=black,toprule=-1pt,bottomrule=-1pt,leftrule=1pt,rightrule=-1pt, overlay unbroken={
\draw[black,line width=1pt] (frame.north west) -- ++(.2,0);
\draw[black,line width=1pt] (frame.south west) -- ++(.2,0);
}, overlay first={
\draw[black,line width=1pt] (frame.north west) -- ++(.2,0);
}, overlay last={
\draw[black,line width=1pt] (frame.south west) -- ++(.2,0);
}, left=2mm, top=2mm, bottom=2mm}

\newtcolorbox{definition}{enhanced,sharp corners=all,colback=white,colframe=red,toprule=-1pt,bottomrule=-1pt,leftrule=1pt,rightrule=-1pt, overlay unbroken={
\draw[red,line width=1pt] (frame.north west) -- ++(.2,0);
\draw[red,line width=1pt] (frame.south west) -- ++(.2,0);
}, overlay first={
\draw[red,line width=1pt] (frame.north west) -- ++(.2,0);
}, overlay last={
\draw[red,line width=1pt] (frame.south west) -- ++(.2,0);
}, %title={DEF}, attach boxed title to top, boxed title style={empty,size=minimal,toprule=2pt,top=4pt}, coltitle=red, left=2mm, top=2mm, bottom=2mm
}

\newtcolorbox{eigenschap}{enhanced,sharp corners=all,colback=white,colframe=green,toprule=0pt,bottomrule=0pt,leftrule=1pt,rightrule=0pt, overlay unbroken={
\draw[green,line width=1pt] (frame.north west) -- ++(.2,0);
\draw[green,line width=1pt] (frame.south west) -- ++(.2,0);
}, overlay first={
\draw[green,line width=1pt] (frame.north west) -- ++(.2,0);
}, overlay last={
\draw[green,line width=1pt] (frame.south west) -- ++(.2,0);
}, left=2mm, top=2mm, bottom=2mm}
% --- Define underlines ---
\renewcommand{\ULdepth}{1.8pt}
\contourlength{0.9pt}
\renewcommand{\ULthickness}{.7pt}
\newcommand{\udef}[1]{%
\textcolor{red}{\uline{\phantom{#1}}}%
  \llap{\contour{white}{#1}}%
\index[definition]{#1}%
}
\newcommand{\ueig}[1]{%
\textcolor{green}{\uline{\phantom{#1}}}%
  \llap{\contour{white}{#1}}%
}
\newcommand{\undline}[1]{%
\uline{\phantom{#1}}%
  \llap{\contour{white}{#1}}%
}
% --- Important remark ---
\newcommand{\remark}[1]{\begin{center}\textbf{#1}\end{center}}
% --- Extra symbols ---
\newcommand*{\twoheadrightarrowtail}{\mathrel{\rightarrowtail\kern-1.9ex\twoheadrightarrow}}

\DeclareFontFamily{U}{mathb}{\hyphenchar\font45}
\DeclareFontShape{U}{mathb}{m}{n}{
      <5> <6> <7> <8> <9> <10> gen * mathb
      <10.95> mathb10 <12> <14.4> <17.28> <20.74> <24.88> mathb12
      }{}
\DeclareSymbolFont{mathb}{U}{mathb}{m}{n}
\DeclareFontSubstitution{U}{mathb}{m}{n}
\DeclareMathSymbol{\sqsubsetneq}    {3}{mathb}{"88}


\DeclareFontFamily{OT1}{mbb}{\hyphenchar\font45}
%
%\DeclareFontShape{OT1}{mbb}{m}{n}{
%      <5> <6> <7> <8> <9> <10> gen * mbb
%      <10.95> mbb10 <12> <14.4> mbb12 <17.28> <20.74> <24.88> mbb17
%      }{}
%\DeclareSymbolFont{mbb}{OT1}{mbb}{m}{n}
%
\DeclareFontShape{OT1}{mbb}{bx}{n}{
      <5> <6> <7> <8> <9> <10> gen * mbb
      <10.95> mbb10 <12> <14.4> mbb12 <17.28> <20.74> <24.88> mbb17
      }{}
\DeclareSymbolFont{mbb}{OT1}{mbb}{bx}{n}


\DeclareMathSymbol{\bbomega}{0}{mbb}{"B8}

\DeclareFontFamily{U} {MnSymbolA}{}
\DeclareFontShape{U}{MnSymbolA}{m}{n}{
  <-6> MnSymbolA5
  <6-7> MnSymbolA6
  <7-8> MnSymbolA7
  <8-9> MnSymbolA8
  <9-10> MnSymbolA9
  <10-12> MnSymbolA10
  <12-> MnSymbolA12}{}
\DeclareFontShape{U}{MnSymbolA}{b}{n}{
  <-6> MnSymbolA-Bold5
  <6-7> MnSymbolA-Bold6
  <7-8> MnSymbolA-Bold7
  <8-9> MnSymbolA-Bold8
  <9-10> MnSymbolA-Bold9
  <10-12> MnSymbolA-Bold10
  <12-> MnSymbolA-Bold12}{}
\DeclareSymbolFont{MnSyA}{U}{MnSymbolA}{m}{n}
\DeclareMathSymbol{\twoheaduparrow}{\mathrel}{MnSyA}{25}
\DeclareMathSymbol{\twoheaddownarrow}{\mathrel}{MnSyA}{27}


%\DeclareFontEncoding{LS1}{}{}
%\DeclareFontEncoding{LS2}{}{\noaccents@}
%\DeclareFontSubstitution{LS1}{stix}{m}{n}
%\DeclareFontSubstitution{LS2}{stix}{m}{n}
%\DeclareSymbolFont{symbols3}      {LS1}{stixbb}   {m} {n}
%\DeclareMathSymbol{\lat}                      {\mathrel}{symbols3}%{"FB}

% --- Defines pictures and graphics ---
\makeatletter
\def\circletransformation{%
\pgfmathsetmacro{\myX}{\pgf@x*sin(\pgf@y)*.6}
\pgfmathsetmacro{\myY}{\pgf@x*cos(\pgf@y)*.6}
\setlength{\pgf@x}{\myX pt}
\setlength{\pgf@y}{\myY pt}
}
\makeatother

\tikzset{
  apple/.pic={
    \draw (0,1) .. controls (-.6,1.8) and (-1.3,.8) .. (-1.1,0) .. controls (-.9,-.8) and (-.3,-1.5) .. (0,-1) .. controls (.3,-1.5) and (.9,-.8) .. (1.1,0) .. controls (1.3,.8) and (.6,1.8) .. (0,1) -- (0,1.6);
  }
}
% --- More settings ---
\newlength\tindent
\setlength{\tindent}{\parindent}
\setlength{\parindent}{0pt}
\renewcommand{\indent}{\hspace*{\tindent}}

% Start at chapter zero:
\setcounter{chapter}{-1}

% Include \paragraph in ToC:
\setcounter{tocdepth}{5}
% Number \subsubsection:
\setcounter{secnumdepth}{3}

\graphicspath{ {./images/} }

% =========================== Commath clone ========================
% Differential (upface d)
\DeclareMathOperator{\diff}{d \!}
% Derivative (upface D)
\DeclareMathOperator{\Diff}{D \!}

% Command for partial derivatives. The first argument denotes the function and the second argument denotes the variable with respect to which the derivative is taken. The optional argument denotes the order of differentiation. The style (text style/display style) is determined automatically
\providecommand{\pd}[3][]{\ensuremath{
\frac{\partial{^{#1}}#2}{\partial{{#3}^{#1}}}
}}

% \tpd[2]{f}{k} denotes the second partial derivative of f with respect to k
% The first letter t means "text style"
\providecommand{\tpd}[3][]{\ensuremath{\mathinner{
\tfrac{\partial{^{#1}}#2}{\partial{{#3}^{#1}}}
}}}
% \dpd[2]{f}{k} denotes the second partial derivative of f with respect to k
% The first letter d means "display style"
\providecommand{\dpd}[3][]{\ensuremath{\mathinner{
\dfrac{\partial{^{#1}}#2}{\partial{{#3}^{#1}}}
}}}

% mixed derivative - analogous to the partial derivative command
% \md{f}{5}{x}{2}{y}{3}
\providecommand{\md}[6]{\ensuremath{
\ifinner
\tfrac{\partial{^{#2}}#1}{\partial{{#3}^{#4}}\partial{{#5}^{#6}}}
\else
\dfrac{\partial{^{#2}}#1}{\partial{{#3}^{#4}}\partial{{#5}^{#6}}}
\fi
}}

% \tpd[2]{f}{k} denotes the second partial derivative of f with respect to k
% The first letter t means "text style"
\providecommand{\tmd}[6]{\ensuremath{\mathinner{
\tfrac{\partial{^{#2}}#1}{\partial{{#3}^{#4}}\partial{{#5}^{#6}}}
}}}
% \dpd[2]{f}{k} denotes the second partial derivative of f with respect to k
% The first letter d means "display style"
\providecommand{\dmd}[6]{\ensuremath{\mathinner{
\dfrac{\partial{^{#2}}#1}{\partial{{#3}^{#4}}\partial{{#5}^{#6}}}
}}}


% ordinary derivative - analogous to the partial derivative command
\providecommand{\od}[3][]{\ensuremath{
\ifinner
\tfrac{\diff{^{#1}}#2}{\diff{{#3}^{#1}}}
\else
\dfrac{\diff{^{#1}}#2}{\diff{{#3}^{#1}}}
\fi
}}

\providecommand{\tod}[3][]{\ensuremath{\mathinner{
\tfrac{\diff{^{#1}}#2}{\diff{{#3}^{#1}}}
}}}
\providecommand{\dod}[3][]{\ensuremath{\mathinner{
\dfrac{\diff{^{#1}}#2}{\diff{{#3}^{#1}}}
}}}

% functional derivative - analogous to the partial derivative command
\providecommand{\fd}[3][]{\ensuremath{
\ifinner
\tfrac{\delta{^{#1}}#2}{\delta{{#3}^{#1}}}
\else
\dfrac{\delta{^{#1}}#2}{\delta{{#3}^{#1}}}
\fi
}}

\providecommand{\tfd}[3][]{\ensuremath{\mathinner{
\tfrac{\delta{^{#1}}#2}{\delta{{#3}^{#1}}}
}}}
\providecommand{\dfd}[3][]{\ensuremath{\mathinner{
\dfrac{\delta{^{#1}}#2}{\delta{{#3}^{#1}}}
}}}

% --- Quantum stuff ---
\newcommand\hilbert{\mathcal{H}}

% --- Code style ---
\lstdefinestyle{program}{numbers=left}
\lstdefinestyle{snippet}{}
\usepackage{courier}
\definecolor{verylightgray}{gray}{0.95}
\lstset{basicstyle=\selectfont\ttfamily, backgroundcolor=\color{verylightgray}}
% --- Syntax environment ---
\newenvironment{syntax}{\begin{center}\ttfamily \small}{\end{center}}
\newcommand{\opt}[1]{\textbf{(}#1\textbf{)?}}
\newcommand{\optnb}[1]{#1\textbf{?}}
\newcommand{\mult}[1]{\textbf{(}#1\textbf{)*}}
\newcommand{\multnb}[1]{#1\textbf{*}}
\newcounter{index}
\newcommand\opts[1]{%
  \getargsC{#1}%
  \textbf{(} \argi%
  \setcounter{index}{1}
  \whiledo{\value{index} < \narg}{%
    \stepcounter{index}%
     \textbf{|} \csname arg\romannumeral\value{index}\endcsname \hspace{.8em}%
  }\textbf{)}%
}



% --- End setup ---
