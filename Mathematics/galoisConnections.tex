\url{file:///C:/Users/user/Downloads/(Mathematics%20and%20Its%20Applications%20565)%20Marcel%20Ern%C3%A9%20(auth.),%20K.%20Denecke,%20M.%20Ern%C3%A9,%20S.%20L.%20Wismath%20(eds.)%20-%20Galois%20Connections%20and%20Applications-Springer%20Netherlands%20(2004).pdf}

TODO \url{https://en.wikipedia.org/wiki/Residuated_mapping}

\url{https://www.logicmatters.net/resources/pdfs/Galois.pdf}

\url{https://sciendo.com/pdf/10.2478/ausm-2014-0019}

\begin{definition}
Let $\sSet{P,\Yleft_P}$ and $\sSet{Q,\Yleft_Q}$ be ordered sets. Let $\rhd: P\to Q$ and $\lhd: Q \to P$ be functions such that
\[ \forall p\in P, q\in Q: \; p^\rhd \Yleft_Q q \iff p \Yleft_P q^\lhd. \]
\begin{itemize}
\item The pair $(\rhd, \lhd)$ is called a \udef{(monotone) Galois connection} between $P$ and $Q$.
\item The map $\rhd$ is called the \udef{lower adjoint} of $\lhd$ and the map $\lhd$ the \udef{upper
adjoint} of $\rhd$.
\item We may also call $\rhd$ a \udef{residuated map}. Then $\lhd$ is called the \udef{residual} of $\rhd$.
\end{itemize}

TODO notation: $\rhd = f^\to$ and $\lhd = f^\from$

Now assume the functions satisfy
\[ \forall p\in P, q\in Q: \; p^\rhd \Yleft_Q q \iff p \Yleft_P q^\lhd. \]
\end{definition}

\begin{lemma}
Let $P$ and $Q$ be ordered sets. If $(\rhd, \lhd)$ is a Galois connection between $P$ and $Q$, then $(\lhd, \rhd)$ is a Galois connection between $Q^o$ and $P^o$.
\end{lemma}

\begin{example}
\begin{itemize}
\item Let $P$ and $Q$ be discretely ordered sets. Then $\rhd: P\to Q$ and $\lhd: Q \to P$ form a Galois connection if and only if they are invertible and $\rhd = \lhd^{-1}$.
\item Let $P$ be an ordered set and $A\subseteq P$. Then
\[ A^\rhd = P\setminus \downset A \qquad \text{and} \qquad A^\lhd = P\setminus \upset A \]
defines a Galois connection $(\rhd, \lhd)$ between $\powerset(P)$ and $\powerset(P)^o$.
\end{itemize}
\end{example}

\begin{proposition}
Let $P$ and $Q$ be ordered sets. Consider functions $\rhd: P\to Q$ and $\lhd: Q \to P$. Then the following are equivalent:
\begin{enumerate}
\item $(\rhd, \lhd)$ is a Galois connection between $P$ and $Q$;
\item for all $q\in Q: \; \rhd^{-1}[\downset q] = \downset q^\lhd$;
\item for all $p\in P: \; \lhd^{-1}[\upset p] = \upset p^\rhd$;
\item $\rhd^{-1}: \powerset(Q) \to \powerset(P)$ maps principle down sets to principle down sets;
\item $\lhd^{-1}: \powerset(P) \to \powerset(Q)$ maps principle up sets to principle up sets;
\item for all $p\in P$ and all $q\in Q$
\begin{enumerate}
\item $\rhd$ and $\lhd$ are order-preserving;
\item $p \Yleft p^{\rhd\lhd}$ and $q^{\lhd\rhd} \Yleft q$; in other words $\rhd\lhd$ is expansive and $\lhd\rhd$ is contractive;
\end{enumerate}
\end{enumerate}
\end{proposition}
\begin{proof}
$(1 \Rightarrow 2)$ We calculate
\[ x\in \rhd^{-1}[\downset q] \iff x^\rhd \in \downset q \iff x^\rhd \Yleft q \iff x \Yleft q^\lhd \iff x\in \downset q^\lhd. \]

$(1 \Rightarrow 3)$ Similarly we calculate
\[ x\in \lhd^{-1}[\upset p] \iff x^\lhd \in \upset p \iff p \Yleft x^\lhd \iff p^\rhd \Yleft x \iff x\in \upset p^\rhd. \]

$(2 \Rightarrow 4)$ and $(3 \Rightarrow 5)$ are clear.

$(4 \Rightarrow 6)$ We fist note that $\rhd$ must be isotone by If $\rhd^{-1}: \powerset(Q) \to \powerset(P)$ maps principle down sets to principle down sets, then there must exist a function $f: Q\to P$ such that
\[ \rhd^{-1}[\downset q] = \downset f(q). \]
We claim 

$(5 \Rightarrow 6)$ 

$(6 \Rightarrow 1)$ First assume $p^\rhd \Yleft q$. From (a) we have $p^{\rhd\lhd} \Yleft q^\lhd$ and from (b) we have $p \Yleft p^{\rhd\lhd}$. Combining these gives $p\Yleft q^\lhd$.

For the converse, assume $p \Yleft q^\lhd$. From (a) we have $p^{\rhd} \Yleft q^{\lhd\rhd}$ and from (b) we have $q^{\lhd\rhd} \Yleft q$. Combining these gives $p^{\rhd} \Yleft q$.
\end{proof}
\begin{corollary}
Let $P$ and $Q$ be ordered sets and $(\rhd, \lhd)$ a Galois connection between them. Then
\[ \rhd = \rhd\circ\lhd\circ\rhd \qquad\text{and}\qquad \lhd = \lhd\circ\rhd\circ\lhd \]
\end{corollary}
\begin{proof}

\end{proof}

\begin{lemma}
Composition of Galois connections is Galois connection.
\end{lemma}

\begin{corollary}
Let $(P,\Yleft)$ be an ordered set and $A,B$ subsets of $P$. Then
\begin{enumerate}
\item $A\subseteq (A^l)^u$ and $A\subseteq (A^u)^l$;
\item if $A\subseteq B$, then $B^u\subseteq A^u$ and $B^l \subseteq A^l$;
\item $A^l = ((A^l)^u)^l$ and $A^u = ((A^u)^l)^u$.
\end{enumerate}
\end{corollary}
\begin{proof}
(1) $A^l \subseteq A^l \implies A = (A^l)^u$.

(2) $A\subseteq B \implies A \subseteq (B^u)^l \implies B^u\subseteq A^u$.

(3) $(A^l)^u \subseteq (A^l)^u \implies A^l \subseteq ((A^l)^u)^l$ and by 1. and 2. $A\subseteq (A^l)^u \implies ((A^l)^u)^l \subseteq A^l$.
\end{proof}

\begin{proposition}
Image / preimage Galois connection.
\end{proposition}


\subsection{Closure}

\begin{definition}
Let $A$ be a subset of an ordered set $P$. If $A = (A^u)^l$, the $A$ is called \udef{saturated}.
\end{definition}

The family of saturated sets is a Moore family. The For any $x\in P$, the downset $\downset x$ is saturated.

\begin{definition}
Let $\sSet{P,\Yleft}$ be an ordered set and let $f:P \to P$ be a function. We say $f$ is a \udef{(Moore) closure} on $P$ if it is
\begin{itemize}
\item extensive: $x \Yleft f(x)$;
\item monotone: if $A \Yleft B$, then $\closure(A) \Yleft \closure(B)$;
\item idempotent: $\closure(\closure(A)) = \closure(A)$.
\end{itemize}
We say $f$ is a \udef{dual closure} if it is
\begin{itemize}
\item contractive: $f \leq \id$
\item monotone
\item idempotent
\end{itemize}
\end{definition}

\begin{proposition}
Let $L$ be a lattice and $f$ a closure. Then $f[L]$ is a lattice with lattice operations given by
\[ a\wedge b = a\wedge_L b, \qquad a\vee b = f(a\vee_L b). \]
\end{proposition}
\begin{proof}
Take $a,b\in f[L]$. Because $f$ is extensive, we have $a\wedge_L b \leq f(a\wedge_L b)$ and because $f$ is monotone, we have $f(a\wedge_L b)\leq f(a)\wedge_L f(b)$ by \ref{orderPreservingJoinMeet}, so
\[ f(a)\wedge_L f(b) = a\wedge_L b \leq f(a\wedge_L b) \leq f(a)\wedge_L f(b), \]
meaning that $a\wedge_L b \in f[L]$ and thus $f[L]$ is a $\wedge$-subsemilattice.

From $a\vee_L b \leq f(a\vee_L b)$, it is clear that $f(a\vee_L b)$ is an upper bound of $\{a,b\}$. Let $c$ be any other upper bound in $f[L]$. Clearly $a\vee_L b \leq c$, so $f(a\vee_L b) \leq f(c) = c$, meaning $f(a\vee_L b)$ is the least upper bound in $f[L]$.
\end{proof}
\begin{proposition}
Let $L$ be a complete lattice and $f$ a closure. Then $f[L]$ is a complete lattice with lattice operations given by
\[ \bigwedge A = {\bigwedge}_L A, \qquad \bigvee A = f({\bigvee}_L A). \]
\end{proposition}
\begin{proof}
TODO
\end{proof}

\begin{theorem}[Dedekind-MacNeille]
Every ordered set $P$ can be embedded in a Dedekind complete lattice $L$ such that meets and joins that exist in $E$ are preserved in $L$.
\end{theorem}
\begin{proof}
We use the closure $f: \powerset(E) \to \powerset(E): A\mapsto A^{ul}$.
\end{proof}

\subsubsection{Closure under a relation}

\begin{proposition}
Let $\sSet{P, \leq}$ be a partially ordered set and $\sSet{Q, \leq}$ a complete meet semi-sublattice. Then $\upset: P \to \powerset(Q)$ and $\bigwedge: \powerset(Q) \to P$ are antitone generalised inverses. 
\end{proposition}


\begin{definition}
Let $R$ be a homogeneous binary relation on a set $X$. Let $A\subseteq X$ be a subset.
\begin{itemize}
\item We call $A$ \udef{$R$-closed} if $AR \subseteq A$.
\item We define the \udef{$R$-closure} of $A$ in $X$ as
\[ \closure_R(A) \defeq \bigcap \setbuilder{B}{A \subseteq B \subseteq X \land \;\text{$B$ is $R$-closed}}. \]
\end{itemize}
\end{definition}

\begin{proposition} \label{RclosureIsClosure}
Let $R$ be a homogeneous binary relation on a set $X$ and $A\subseteq X$ a subset. Then $\closure_R$ is a proper closure operator:
\begin{enumerate}
\item $A \subseteq \closure_R(A)$;
\item if $A\subseteq B$, then $\closure_R(A) \subseteq \closure_R(B)$;
\item $\closure(\closure(A)) = \closure(A)$;
\end{enumerate}
and
\begin{enumerate} \setcounter{enumi}{3}
\item $\closure_R(A)$ is $R$-closed;
\item $\closure_R(A)$ is the smallest $R$-closed superset of $A$ in the poset $\sSet{\powerset(X),\subseteq}$;
\item $A$ is $R$-closed \textup{if and only if} $A = \closure_R(A)$.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) This is clear.

(2) This follows because $\setbuilder{C}{A \subseteq C \subseteq X \land \;\text{$C$ is $R$-closed}} \supseteq \setbuilder{C}{B \subseteq C \subseteq X \land \;\text{$C$ is $R$-closed}}$.

(3) This follows because $\closure_R(A) \in \setbuilder{C}{\closure_R(A) \subseteq C \subseteq X \land \;\text{$C$ is $R$-closed}}$.

(4) We calculate
\begin{align*}
\closure_R(A)R &= \left(\bigcap \setbuilder{B}{A \subseteq B \subseteq X \land \;\text{$B$ is $R$-closed}}\right)R \\
&\subseteq \bigcap \setbuilder{BR}{A \subseteq B \subseteq X \land \;\text{$B$ is $R$-closed}} \\
&\subseteq \bigcap \setbuilder{B}{A \subseteq B \subseteq X \land \;\text{$B$ is $R$-closed}} = \closure_R(A).
\end{align*}

(5) Intersection is infimum in $\sSet{\powerset(X),\subseteq}$. (TODO terminology higher??)

(6) The direction $\Leftarrow$ is clear because $\closure_R(A)$ is $R$-closed. The converse follows from (5).
\end{proof}

\begin{lemma}
Let $R$ be a homogeneous binary relation on a set $X$ and $A\subseteq X$ a subset. Then
\begin{enumerate}
\item $\closure_R(AR) \subseteq \closure_R(A)$;
\item $\closure_R(A) = A \cup \closure_R(AR)$;
\item $\closure_R(AR) = \closure_R(A)R$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) We calculate $AR \subset \closure_R(A)R \subseteq \closure_R(A)$, using \ref{monotonicityImage} and the fact that $\closure_R(A)$ is $R$-closed.

(2) The inclusion $\closure_R(A) \supseteq A \cup \closure_R(AR)$ is given by \ref{RclosureIsClosure} and point (1).

For the converse it is enough to see that $A \cup \closure_R(AR)$ is $R$-closed:
\[ \big(A \cup \closure_R(AR)\big)R = AR \cup \closure_R(AR)R \subseteq \closure_R(AR) \subseteq A \cup \closure_R(AR), \]
where we have used that $\closure_R(AR)$ is $R$-closed.

(3) First we calculate
\[ \closure_R(A)R = \big(A \cup \closure_R(AR)\big)R = AR \cup \closure_R(AR)R \subseteq \closure_R(AR)R \subseteq \closure_R(AR) \]
where we have used point (2) and the fact that $\closure_R(AR)$ is closed.

For the converse it is enough to prove that $AR \subseteq \closure_R(A)R$ and $\closure_R(A)R$ is $R$-closed. The first follows from \ref{monotonicityImage} as does the second, with
\[ \closure_R(A)R \subseteq \closure_R(A) \implies \big(\closure_R(A)R\big)R \subseteq \closure_R(A)R. \]
\end{proof}

\begin{lemma}
Let $R$ be a homogeneous binary relation on a set $X$. Let $\im_R$ denote the function $\powerset(X) \to \powerset(X): A \mapsto AR$. Then for all $A\subseteq X$:
\[ \closure_R(A) = \bigcup \closure_{\im_R}(\powerset(A)). \]
IS THIS TRUE?
\end{lemma}


\subsubsection{Closure under a function}

\begin{lemma}
$\closure_f(A) = \setbuilder{f(a)}{a\in A}$.

$\closure_g(A) = \setbuilder{g(a,b)}{a,b\in A}$.
\end{lemma}