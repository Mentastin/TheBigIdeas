\chapter{Uniform convergence}
\section{Uniformities}
\subsection{Operations on filters}
\begin{definition}
Let $X$ be a set, $x\in X$ and $F,G\in\powerfilters(X^2)$. We define
\begin{enumerate}
\item $F^{\transp} \defeq \setbuilder{A^\transp}{A\in F}$;
\item $Fx \defeq \setbuilder{Ax}{A\in F}$;
\item $F;G \defeq \upset \setbuilder{A;B}{A\in F, B\in G}$.
\end{enumerate}
We call a filter $H\in\powerfilters(X^2)$ \udef{diagonal} if $H\subseteq \upset \{\id_X\}$.
\end{definition}

We have $F^{\transp} = t^{\imf\imf}[F]$ where $t: X^2 \to X^2: (x,y)\mapsto (y,x)$.

TODO Galois connection $\powerfilters(X^2) \leftrightarrow \powerfilters(X)^2$.

\begin{lemma} \label{filterOperationsOnRelationFilters}
Let $X$ be a set, $x\in X$ and $F,G\in\powerfilters(X^2)$. Then
\begin{enumerate}
\item $F^\transp$, $Fx$ and $F;G$ are filters;
\item $F^\transp$ is proper \textup{if and only if} $F^\transp$ is proper;
\item $F;G$ is proper \textup{if and only if} $p_2^{\imf\imf}[F]\amesh p_1^{\imf\imf}[G]$;
\item $Fx$ is proper \textup{if and only if} $x\in\ker\big(p_2^{\imf\imf}(F)\big)$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) We have that $(-)^\transp:\powerset(X^2)\to\powerset(X^2)$ is an order similarity. 

Next we show that $F;G$ is closed under finite intersections: take $A,B\in F$ and $C,D\in G$. Then we have $A;C \supseteq (A\cap B);(C\cap D)$ and $B;D \supseteq (A\cap B);(C\cap D)$, so $A;C \cap B;D \supseteq (A\cap B);(C\cap D) \in F;G$. Thus $A;C \cap B;D\in F;G$ by upwards closure.

First, it is clear that $Fx$ is upwards closed: take $Ax\in Fx$. Then for all $B\supseteq Ax$, we have $B = \big((B\times\{x\})\cup A\big)x$, so $B\in Fx$.

Finally, to show closure under finite intersections, take $Ax, Bx\in F$. Then $Ax\cap Bx \supseteq (A\cap B)x \in Fx$ by \ref{orderPreservingFunctionLatticeOperations}.

(2) Immediate from the order similarity $(-)^\transp:\powerset(X^2)\to\powerset(X^2)$.

(3) We have $F;G = \powerset(X^2)$ iff there exist $A\in F,B\in G$ such that $A;B = \emptyset$. This is equivalent to $p_2^{\imf}[A]\perp p_1^{\imf}[B]$.

Thus $F;G \neq \powerset(X^2)$ is equivalent to $p_2^{\imf}[A]\mesh p_1^{\imf}[B]$ for all $A\in F$ and $B\in G$, i.e.\ $p_2^{\imf\imf}[F]\amesh p_1^{\imf\imf}[G]$.

(4) We have, for all $A\in F$, that $Ax = \emptyset$ iff $x\notin p_2^\imf(A)$. Thus $Fx$ is proper iff $x\in p_2^\imf(A)$ for all $A\in F$ iff $x\in \ker\big(p_2^{\imf\imf}(F)\big)$.
\end{proof}

\begin{proposition} \label{meetsJoinsAdjoiningProduct}
Let $X$ be a set and $F\in\powerfilters(X)$ a filter. Then the function $F\otimes -$ preserves joins and meets (intersections).
\end{proposition}
\begin{proof}
Consider the bases using \ref{baseMeetJoinFilters} and \ref{productUnionIntersection}.
\end{proof}
\begin{proof}[Alternative proof for the preservation of joins]
We have $F\otimes G = \bigvee_{A\in F}\{A\}\times^{\imf}G$. The result follows from \ref{joinResiduatedMaps} and \ref{upsetResiduatedImageGaloisConnection}. 
\end{proof}

\begin{proposition} \label{filterCompositionResidual}
Let $X$ be a set and $H\in\powerfilters(X^2)$ a filter. Then the function $H;-: \powerfilters(X^2) \to \powerfilters(X^2)$ preserves finite intersections.
\end{proposition}
\begin{proof}
Let $\mathcal{F}\subseteq \powerfilters(X^2)$ be a finite set of filters. Then we calculate, using \ref{baseMeetJoinFilters},
\begin{align*}
\Big(\bigcap \mathcal{F}\Big); H &= \upset\setbuilder{A;B}{A\in \bigcap \mathcal{F}, B\in H} \\
&= \upset\setbuilder{\Big(\bigcup_{F\in \mathcal{F}}A_F\Big);B}{\forall F\in\mathcal{F}: A_F\in F, B\in H} \\
&= \upset\setbuilder{\bigcup_{F\in \mathcal{F}}A_F;B}{\forall F\in\mathcal{F}: A_F\in F, B\in H} \\
&= \bigcap_{F\in \mathcal{F}} \upset\setbuilder{A_F; B}{A_F\in F, B\in H} \\
&= \bigcap_{F\in \mathcal{F}} F;H.
\end{align*}
\end{proof}

\begin{lemma} \label{principalImageProductFilter}
Let $X$ be a set and $F,G\in\powerfilters(X)$. Then
\[ (F\otimes G)x = \begin{cases}
F & \big(x\in\ker(G)\big) \\
\powerset(X) & (\text{otherwise}).
\end{cases} \]
\end{lemma}
\begin{proof}
If $x\notin\ker(F)$, then there exists $A\in G$ such that $(X\times A)x = \emptyset$. Thus $(F\otimes G)x = \powerset(X)$.

Now suppose $x\in\ker(G)$. Take $B\in F\otimes G$, so there exist $C\in F, D\in G$ such that $C\times D \subseteq B$. Now $x\in D$, so $(C\times D)x = C$. Thus $(F\otimes G)x \subseteq F$. For the other inclusion, note that $A\times X\in F\otimes G$ and $(A\times X)x = A$ for all $A\in F$.
\end{proof}

\begin{lemma} \label{compositionProductFilters}
Let $X$ be a set and $F,G, G', H\in\powerfilters(X)$. Then
\[ (F\otimes G);(G'\otimes H) = \begin{cases}
F\otimes H & (G\amesh G') \\
\powerset(X ^2) & (\text{otherwise}).
\end{cases}  \]
\end{lemma}
\begin{proof}
TODO
\end{proof}

Note that for all proper filters $G$ we have $G\amesh G$. However $\powerset(X)\cancel\amesh\powerset(X)$, so $\big(F\otimes \powerset(X)\big);\big(\powerset(X)\otimes G\big) = \powerset(X^2)$, independent of $F$ and $G$.

\begin{lemma} \label{componentInclusionsFilterComposition}
Let $X$ be a set and $F,G\in\powerfilters(X^2)$. Then
\begin{enumerate}
\item $p_1^{\imf\imf}[F]\subseteq p_1^{\imf\imf}[F;G]$;
\item $p_2^{\imf\imf}[G]\subseteq p_2^{\imf\imf}[F;G]$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) This follows immediately from $p_1^{\imf}[A;B] = \setbuilder{p_1((x,y))}{(x,y)\in A \land y\in p_1^{\imf}(B)} \subseteq p_1^{\imf}[A]$.

(2) Similar.
\end{proof}

\begin{lemma} \label{filterCompositionFactorisationLemma}
Let $X$ be a set, $H\in \powerfilters(X^2)\setminus \{\powerset(X^2)\}$ and $F,G\in\powerfilters(X)$. Then
\[ F\otimes G = F\otimes p_1^{\imf\imf}(H); H; p_2^{\imf\imf}(H)\otimes G. \]
\end{lemma}
\begin{proof}
This follows from the fact that for all $A\in F$, $B\in G$ and $C,D,E\in H$,
\[ A\times B = \big(A \times p_1^{\imf}(C)\big);D;\big(p_2^\imf(E)\times B\big). \]
Indeed we have
\begin{align*}
(a,b)\in \big(A \times p_1^{\imf}(C)\big);D;\big(p_2^\imf(E)\times B\big) &\iff \exists c,d: \begin{cases}
(a,c)\in A\times p_1^\imf(C),\\ (c,d)\in D,\\ (d,b)\in p_2^\imf(E)\times B
\end{cases} \\
&\iff \begin{cases}
a\in A, b\in B, \\
\exists c,d: \; (c,d)\in D, c\in p_1^\imf(C), d\in p_2^\imf(E)
\end{cases} \\
&\iff a\in A, b\in B \\
&\iff (a,b)\in A\times B.
\end{align*}
The statement $\exists c,d: \; (c,d)\in D, c\in p_1^\imf(C), d\in p_2^\imf(E)$ is true because we may take $(c,d)\in C\cap D\cap E$, which is not empty because $H$ is proper.
\end{proof}
Set $I\defeq F\otimes p_1^{\imf\imf}(H); H; p_2^{\imf\imf}(H)\otimes G$. The inclusion $\subseteq$ can also be calculated using \ref{componentInclusionsFilterComposition} and \ref{filterFactorisationInequality}:
\[ F\otimes G = p_1^{\imf\imf}\big[F\otimes p_1^{\imf\imf}(H)\big] \otimes p_2^{\imf\imf}\big[p_2^{\imf\imf}(H)\otimes G\big] \subseteq p_1^{\imf\imf}[I]\otimes p_2^{\imf\imf}[I] \subseteq I. \]

\begin{lemma} \label{principalImageOfInProductFilter}
Let $X$ be a set, $F\in \powerfilters(X)$ a filter and $A\subseteq X^2$. Then
\begin{enumerate}
\item if $A\in F\otimes F$, then there exists $x\in X$ such that $Ax\in F$;
\item if $Ax, xA\in F$, then $A;A \in F\otimes F$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) Take $A\in F\otimes F$, then there exists $B\in F$ such that $B\times B\subseteq A$. If $B = \emptyset$, then $F$ is trivial, so $Ax\in F$ for all $x\in X$.

If $B \neq \emptyset$, then we can take $x\in B$ and we have
\[ B = (B\times B)x \subseteq Ax. \]
By upwards closure, $Ax\in F$.

(2) Suppose $Ax, xA\in F$. Then $Ax\times xA \in F\otimes F$ and, because $A;A = \bigcup_{y\in X}Ay\times yA \supseteq Ax\times xA$, we have $A;A\in F\otimes F$ by upwards closure.
\end{proof}

\begin{proposition} \label{imageFilterComposition}
Let $X, Y$ be sets, $A,B\subseteq X^2$, $C,D\subseteq Y^2$, $F,G\in\powerfilters(X^2)$ and $H,I\in \powerfilters(Y^2)$. Let $f: X\to Y$ be a function. Then
\begin{enumerate}
\item $(f|f)^{\imf}(A;B) \subseteq (f|f)^{\imf}(A);(f|f)^\imf(B)$;
\item $(f|f)^{\preimf}(C);(f|f)^\preimf(D) \subseteq (f|f)^{\preimf}(C;D)$;
\item $\upset(f|f)^{\imf\imf}(F;G) \supseteq \big(\upset(f|f)^{\imf\imf}(F)\big);\big(\upset(f|f)^{\imf\imf}(G)\big)$.
\item $\big(\upset(f|f)^{\preimf\imf}(H)\big);\big(\upset(f|f)^{\preimf\imf}(I)\big) \supseteq \upset(f|f)^{\preimf\imf}(H;I)$.
\end{enumerate}
If $f$ is injective, then
\begin{enumerate} \setcounter{enumi}{4}
\item $(f|f)^{\imf}(A;B) = (f|f)^{\imf}(A);(f|f)^\imf(B)$;
\item $\upset(f|f)^{\imf\imf}(F;G) = \big(\upset(f|f)^{\imf\imf}(F)\big);\big(\upset(f|f)^{\imf\imf}(G)\big)$.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) Take $(x,y)\in A;B$. Then there exists $z\in X$ such that $xAz$ and $zBy$ and thus $f(x)\big((f|f)^{\imf}(A)\big)f(z)$ and $f(z)\big((f|f)^{\imf}(B)\big)f(y)$, so $\big(f(x), f(y)\big)\in (f|f)^{\imf}(A);(f|f)^\imf(B)$.

(2) We calculate, using (1),
\begin{align*}
(f|f)^{\preimf}(C);(f|f)^\preimf(D) &\subseteq \big((f|f)^{\preimf}\circ (f|f)^\imf\big)\big((f|f)^{\preimf}(C);(f|f)^{\preimf}(D)\big) \\
&\subseteq (f|f)^{\preimf}\Big(\big((f|f)^{\imf}\circ(f|f)^{\preimf}\big)(C);\big((f|f)^{\imf}\circ(f|f)^{\preimf}\big)(D)\Big) \\
&\subseteq (f|f)^{\preimf}(C;D).
\end{align*}

(3) Immediate from (1).

(4) Immediate from (2).

(5) Comparing with (1), we see that we just need to show $(f|f)^{\imf}(A);(f|f)^\imf(B) \subseteq (f|f)^{\imf}(A;B)$. Take $(x,y)\in (f|f)^{\imf}(A);(f|f)^\imf(B)$. Then there exists $z\in Y$ such that $(x, z) \in (f|f)^{\imf}(A)$ and $(z, y)\in (f|f)^\imf(B)$. Thus there exist $(a,c)\in A$ and $(c', b)\in B$ such that \[ (x,z) = (f|f)(a,c) = \big(f(a), f(c)\big) \qquad\text{and}\qquad (z,y) = (f|f)(z,y) = \big(f(c'), f(b)\big). \]
By injectivity of $f$, we have $c=c'$, so $(a,c)\in A$ and $(c,b)\in B$, which implies $(a,b)\in A;B$. Thus $(x,y) = \big(f(a), f(b)\big) \in (f|f)^{\imf}(A;B)$.

(6) Immediate from (5).
\end{proof}

\begin{lemma} \label{principalImageUnderRelationMapping}
Let $X, Y$ be sets, $A\subseteq Y^2$, $x\in X$ and $f: X\to Y$ a function. Then $(f|f)^\preimf(A)x = f^\preimf\big(Af(x)\big)$.
\end{lemma}
\begin{proof}
Take arbitrary $y \in X$. Then
\begin{align*}
y \in (f|f)^\preimf(A)x \iff& (y,x)\in (f|f)^\preimf(A) \\
\iff& (f|f)(y,x) = \big(f(y), f(x)\big) \in A \\
\iff& f(y) \in Af(x) \\
\iff& y \in f^\preimf\big(Af(x)\big).
\end{align*}
\end{proof}

\subsection{Uniformities}
\begin{definition}
Let $X$ be a set. Let $\mathcal{U}$ be a set of filters in $\powerfilters(X^2)$. Suppose
\begin{itemize}
\item $\pfilter{x}\otimes \pfilter{x} \in \mathcal{U}$ for all $x\in X$;
\item $\mathcal{U}$ is upwards closed;
\item if $F\in \mathcal{U}$, then $F^\transp\in\mathcal{U}$;
\item if $F, G\in \mathcal{U}$, then $F;G\in\mathcal{U}$.
\end{itemize}
Then we call $\mathcal{U}$ a \udef{uniformity} on $X$ and $\sSet{X,\mathcal{U}}$ a uniform space. We call the elements of $\mathcal{U}$ \udef{uniform filters}.

If we drop the first condition, we get a \udef{preuniformity} and a \udef{preuniform space}.

A uniformity is called 
\begin{itemize}
\item \udef{factorisable} if for all $H\in\mathcal{U}$, there exist $F,G\in \powerfilters(X^2)$ such that $F\otimes G \in\mathcal{U}$ and $F\otimes G\subseteq H$;
\item \udef{symmetric} if each filter in $\mathcal{U}$ contains a symmetric filter in $\mathcal{U}$;
\item of \udef{finite depth} if it is closed under finite intersections;
\item a \udef{Kent} uniformity if $U\cap (\pfilter{x}\otimes \pfilter{x})\in \mathcal{U}$ for all $U\in \mathcal{U}$ and $x\in X$.
\end{itemize}
\end{definition}

\begin{lemma}
Let $\mathcal{U}$ be a uniformity. If $\mathcal{U}$ is of finite depth, then $\mathcal{U}$ is symmetric.
\end{lemma}
\begin{proof}
Assume $\mathcal{U}$ is of finite depth. For all $U\in\mathcal{U}$, we have $U\supseteq U\cap U^\transp \in \mathcal{U}$.
\end{proof}

\begin{lemma}
Let $\sSet{X,\mathcal{U}}$ be a uniform space. Then $\mathcal{U}$ is factorisable \textup{if and only if} $p_1^{\imf\imf}(H)\otimes p_2^{\imf\imf}(H) \in \mathcal{U}$ for all $H\in\mathcal{U}$.
\end{lemma}
\begin{proof}
Assume $\mathcal{U} \ni F\otimes G \subseteq H$. Then
\[ F\otimes G = p_1^{\imf\imf}(F\otimes G)\otimes p_2^{\imf\imf}(F\otimes G) \subseteq p_1^{\imf\imf}(H)\otimes p_2^{\imf\imf}(H) \in \mathcal{U}, \]
where we have used \ref{projectionsOfProductFilter}.
\end{proof}

\subsubsection{Ordering uniformities}
\begin{proposition} \label{latticeOfUniformities}
Let $X$ be a set. Then the set of uniformities on $X$ is a complete sublattice of $\powerset\big(\powerfilters(X^2)\big)$. Let $\mathfrak{U}$ be a set of uniformities on $X$. Then
\[ \bigwedge\mathfrak{U} = \bigcap\mathfrak{U} \qquad\text{and}\qquad \bigvee\mathfrak{U} = \Closure_{;}\Big(\bigcup\mathfrak{U}\Big). \]
\end{proposition}
\begin{proof}
TODO
\end{proof}

\subsubsection{Diagonality}
\begin{lemma}
Let $X$ be a set, $\mathcal{F}$ an upwards closed set of filters in $\powerfilters(X)$ and $\mathcal{C}$ a cover of $X$. If
\[ \forall C\in\mathcal{C}: \; \upset\{\Delta_C\} \in \mathcal{F}, \]
where $\Delta_C = \setbuilder{(c,c)}{c\in C}$, then $\pfilter{x}\otimes\pfilter{x}\in\mathcal{F}$ for all $x\in X$.
\end{lemma}
\begin{proof}
Because $\{(x,x)\}\subseteq \Delta_C$ for some $C\in\mathcal{C}$ and $\pfilter{x}\otimes\pfilter{x} = \upset \big\{\{(x,x)\}\big\} \supseteq \upset\{\Delta_C\} \in\mathcal{F}$.
\end{proof}

\begin{definition}
Let $X$ be a set and $\mathcal{S}$ be a set of subsets of $X$. A uniformity $\mathcal{U}$ on $X$ is called \udef{$\mathcal{S}$-diagonal} if $\forall S\in\mathcal{S}: \; \upset\{\Delta_S\} \in \mathcal{U}$.

The uniformity is simply called \udef{diagonal} if $\mathcal{S} = \{X\}$.
\end{definition}
We may call the first requirement in the definition of uniform space ``pointwise diagonality''.

\begin{lemma}
Let $\sSet{X,\mathcal{U}}$ be a uniform space and $\mathcal{S}_1, \mathcal{S}_2$ sets of subsets of $X$. If $\mathcal{S}_1 \subseteq \downset \mathcal{S}_2$, then $\mathcal{S}_2$-diagonality implies $\mathcal{S}_1$-diagonality.
\end{lemma}
\begin{proof}
Assume $\mathcal{S}_1 \subseteq \downset \mathcal{S}_2$ and that $\mathcal{U}$ is $\mathcal{S}_2$-diagonal.

Take $S\in \mathcal{S}_1$. Then there exists an $S'\in \mathcal{S}_2$ such that $S\subseteq S'$. Thus $\upset\{\Delta_{S'}\} \subseteq \upset\{\Delta_{S}\}$ and $\upset\{\Delta_{S'}\}\in \mathcal{U}$. By upwards closure, $\upset\{\Delta_{S}\} \in \mathcal{U}$.
\end{proof}

\subsubsection{Entourages}
\begin{definition}
Let $\sSet{X, \mathcal{U}}$ be a uniform space. Then $\entourage_\mathcal{U} \defeq \bigcap \mathcal{U}$ is called the \udef{entourage filter} of $\mathcal{U}$ and the elements of $\entourage_\mathcal{U}$ are called \udef{entourages}.

We call the uniform space \udef{topological} if $\mathcal{U} = \upset\{\entourage_\mathcal{U}\}$.
\end{definition}

\begin{lemma} \label{entourageLemma}
Let $\sSet{X,\mathcal{U}}$ be a uniform space with entourage filter $\entourage$. Then
\begin{enumerate}
\item $\entourage\subseteq \upset\{\id_X\}$;
\item $\entourage^\transp = \entourage$;
\item $\entourage;\entourage \subseteq \entourage$.
\end{enumerate}
If $\sSet{X,\mathcal{U}}$ is a topological uniform space, then
\begin{enumerate}[1'.] \setcounter{enumi}{2}
\item $\entourage;\entourage = \entourage$.
\end{enumerate}
Any filter in $\powerfilters(X\times X)$ satisfying properties 1., 2. and $\entourage \subseteq \entourage;\entourage$ is the entourage filter of a topological uniformity.
\end{lemma}
TODO: can we improve 3??
\begin{proof}
(1) We have
\[ \entourage = \bigcap \mathcal{U} \subseteq \bigcap \setbuilder{\pfilter{x}\otimes \pfilter{x}}{x\in X} = \upset\big\{\setbuilder{(x,x)}{x\in X}\big\} = \upset\{\id_X\}. \]

(2) We have
\[ \entourage^\transp = \bigcap \setbuilder{H^\transp}{H\in\mathcal{U}} = \bigcap \setbuilder{H}{H\in\mathcal{U}} = \entourage, \]
because the transpose is bijective and thus its image function is preserved under intersection.

(3) First take $A;B \in\entourage;\entourage$. We claim $A\subseteq A;B$. Indeed take $(a,b)\in A$. By (1), we have $(b,b)\in B$ and so $(a,b)\in A;B$. Thus $\entourage;\entourage \subseteq \entourage$.

(3') In the topological case, we have that $\entourage\in\mathcal{U}$ and thus $\entourage;\entourage\in \mathcal{U}$, so $\entourage \subseteq \entourage;\entourage$.

To show any such filter is an entourage filter, we check the four requirements
\begin{itemize}
\item From (1), we have for all $x\in X$
\[ \entourage \subseteq \upset\{\Delta\} \subseteq \upset\{(x,x)\} = \pfilter{x}\otimes\pfilter{x}. \]
\item Upwards closure is by construction.
\item If $\entourage \subseteq H$, then $\entourage = \entourage^\transp \subseteq H^\transp$.
\item If $\entourage\subseteq G,H$, then $\entourage \subseteq \entourage;\entourage \subseteq G;H$.
\end{itemize}
\end{proof}
\begin{corollary}
A topological uniform space is diagonal and symmetric.
\end{corollary}

\begin{proposition}
If a uniform space is topological and factorisable, then it is trivial.
\end{proposition}
\begin{proof}
Let $\sSet{X,\mathcal{U}}$ be a topological and factorisable uniform space with entourage filter $\entourage_\mathcal{U}$. Then $\entourage_\mathcal{U} \subseteq p_1^{\imf\imf}[\entourage_\mathcal{U}]\otimes p_2^{\imf\imf}[\entourage_\mathcal{U}]$. Now each $A\in \entourage_\mathcal{U}$ contains $\Delta$, so $p_1^\imf[A] = X = p_2^\imf[A]$. Thus $p_1^{\imf\imf}[\entourage_\mathcal{U}]\otimes p_2^{\imf\imf}[\entourage_\mathcal{U}] = \{X^2\}$.

Now $\entourage_\mathcal{U} = \upset\big\{\{X^2\}\big\}$, which is trivial.
\end{proof}

\subsection{Uniform relations}
\begin{definition}
Let $X$ be a sets. A \udef{uniform relation} on $X$ is a relation $R_\mathcal{U}$ on $\powerfilters(X)^2$ such that
\begin{itemize}
\item $\pfilter{x}\mathrel{R_\mathcal{U}}\pfilter{x}$ for all $x\in X$;
\item $F\,R_\mathcal{U}$ is upwards closed for all $F\in \powerfilters(X)$;
\item $R_\mathcal{U}$ is symmetric;
\item $R_\mathcal{U}$ is transitive when restricted to $\powerfilters(X)\setminus\{\powerset(X)\}$.
\end{itemize}
We call the structured set $\sSet{X,R_\mathcal{U}}$ a \udef{uniform relation space}.

We say the uniform relation
\begin{itemize}
\item  is of \udef{finite depth} if $F\,R_\mathcal{U}$ is a filter in $\filters\big(\powerfilters(X)\big)$ for all $F\in \powerfilters(X)$.
\end{itemize}
\end{definition}
Finite depth add the requirement that $F\,R_\mathcal{U}$ is closed under finite intersections.

\begin{lemma} \label{uniformRelationRelatedElementLemma}
Let $R_\mathcal{U}$ be a uniform relation on $X$ and $F,G\in\powerfilters(X)$ proper filters. Then
\begin{enumerate}
\item $F\mathrel{R_\mathcal{U}} G$ implies $F\mathrel{R_\mathcal{U}} F$;
\item if $F\mathrel{R_\mathcal{U}} F$, $G\mathrel{R_\mathcal{U}} G$ and $F\amesh G$, then $F\mathrel{R_\mathcal{U}} G$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) By symmetry we have $G\mathrel{R_\mathcal{U}} F$ and by transitivity $F\mathrel{R_\mathcal{U}} F$.

(2) If $F\amesh G$, then $F\vee G \neq \powerset(X)$ by \ref{joinProperFilter}. By upwards closure, $F\mathrel{R_\mathcal{U}} (F\vee G)$ and $G\mathrel{R_\mathcal{U}} (F\vee G)$. By transitivity and symmetry, $F\mathrel{R_\mathcal{U}} G$.
\end{proof}

\begin{lemma} \label{uniformRelationUpwardsClosure}
Let $R$ be a uniform relation on $X$ and $F,G, F', G'\in\powerfilters(X)$.
\begin{enumerate}
\item $\mathrel{R}G$ is upwards closed.
\item If $F \subseteq F'$, $G\subseteq G'$ and $F\mathrel{R} G$, then $F'\mathrel{R} G'$.
\item If $F \mathrel{R} F'$, $G\mathrel{R} G'$ and $F\subseteq G$, then $F'\mathrel{R} G'$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) Suppose $F,H\in \powerfilters(X)$ are such that $F\mathrel{R}G$ and $F\subseteq H$. Then $G\mathrel{R}F$ by symmetry, $G\mathrel{R}H$ by upwards closure and $H\mathrel{R}G$ by symmetry.

(2) By upwards closure, we have $F\mathrel{R} G'$ and  (using symmetry) $F'\mathrel{R} G$. Thus, again using symmetry,
\[ F'\mathrel{R} G \;\text{and}\; G \mathrel{R} F \;\text{and}\; F \mathrel{R} G', \]
so $F'\mathrel{R} G'$ by transitivity.

(3) By symmetry and upwards closure, we have $F'RG$. By transitivity, $F'RG'$.
\end{proof}

\begin{lemma} \label{uniformRelationOfFiniteDepthLemma}
Let $R$ be a uniform relation of finite depth on $X$ and $F,G\in\powerfilters(X)$. Then
\begin{enumerate}
\item $F\mathrel{R} G \iff (F\cap G)\mathrel{R}(F\cap G)$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) The direction $\Leftarrow$ is given by the implications
\[ (F\cap G)\mathrel{R}(F\cap G) \implies (F\cap G)\mathrel{R}G \implies (F\cap G)\mathrel{R}(F\cap G), \]
which hold by upwards closure (on both sides, see \ref{uniformRelationUpwardsClosure}).

For the other direction, assume $F\mathrel{R} G$.
By \ref{uniformRelationRelatedElementLemma}, we have $F\mathrel{R} F$ as well, so $F\mathrel{R} (F\cap G)$ by finite depth. Then $(F\cap G)\mathrel{R}(F\cap G)$ by \ref{uniformRelationRelatedElementLemma}.
\end{proof}

\begin{proposition} \label{uniformRelationGaloisConnection}
Let $X$ be a set; $\mathcal{U}$ a uniformity on $X$ and $R$ a uniform relation on $X$. We define a uniformity $\Theta(R)$ and a uniform relation $\Xi(\mathcal{U})$ by
\begin{align*}
\forall H\in \powerfilters(X^2):\qquad H\in\Theta(R) \quad&\defequiv\quad \proj_1^{\imf\imf}[H]\mathrel{R}\proj_2^{\imf\imf}[H]; \\
\forall F,G\in\powerfilters(X)\setminus\{\powerset(X)\}:\qquad F\mathrel{\Xi(\mathcal{U})}G \quad&\defequiv\quad F\otimes G\in \mathcal{U}. 
\end{align*}
Then the functions
\begin{align*}
&\Theta: \{\text{uniform relations on $X$}\} \to \{\text{uniformities on $X$}\} \\
&\Xi: \{\text{uniformities on $X$}\} \to \{\text{uniform relations on $X$}\}
\end{align*}
form a Galois connection $(\Theta, \Xi)$. Additionally,
\begin{enumerate}
\item $\im(\Theta)$ is the set of factorisable uniformities on $X$;
\item $\im(\Xi)$ is the set of uniform relations on $X$, i.e.\ $\Xi$ is surjective;
\end{enumerate}
and
\begin{enumerate} \setcounter{enumi}{2}
\item if $R$ is of finite depth, then $\Theta(R)$ is of finite depth;
\item if $\mathcal{U}$ is of finite depth, then $\Xi(\mathcal{U})$ is of finite depth.
\end{enumerate}
\end{proposition}
\begin{proof}
The prove $\Theta(R)$ is a uniformity, we verify the conditions:
\begin{itemize}
\item From $\pfilter{x}\mathrel{R}\pfilter{x}$, we get $\pfilter{x}\otimes \pfilter{x}\in\Theta(R)$.
\item If $H\in\Theta(R)$ and $H\subseteq H'$, then $\proj_1^{\imf\imf}[H]\mathrel{R} \proj_2^{\imf\imf}[H]$, $\proj_1^{\imf\imf}[H]\subseteq \proj_1^{\imf\imf}[H']$ and $\proj_2^{\imf\imf}[H]\subseteq \proj_2^{\imf\imf}[H']$. Thus, by \ref{uniformRelationUpwardsClosure}, we have $\proj_1^{\imf\imf}[H']\mathrel{R} \proj_2^{\imf\imf}[H']$ and so $H'\in\Theta(R)$.
\item Take $H\in \Theta(R)$. Then
\[ \proj_1^{\imf\imf}[H]\mathrel{R} \proj_2^{\imf\imf}[H] \iff \proj_2^{\imf\imf}[H^\transp]\mathrel{R} \proj_1^{\imf\imf}[H^\transp] \iff \proj_1^{\imf\imf}[H^\transp]\mathrel{R} \proj_2^{\imf\imf}[H^\transp] \iff H^\transp\in \Theta(R). \]
\item Take $H_1, H_2\in \Theta(R)$. If $H_1;H_2 = \powerset(X^2)$, then $H_1;H_2\in\Theta(R)$ by upwards closure. If $H_1;H_2 \neq \powerset(X^2)$, then $\proj_2^{\imf\imf}[H_1]\amesh \proj_1^{\imf\imf}[H_2]$ by \ref{filterOperationsOnRelationFilters} and thus $\proj_2^{\imf\imf}[H_1]\mathrel{R} \proj_1^{\imf\imf}[H_2]$ by \ref{uniformRelationRelatedElementLemma} (we have that $\proj_1^{\imf\imf}[H_1]\mathrel{R}\proj_2^{\imf\imf}[H_1]$, so $\proj_1^{\imf\imf}[H_1]\mathrel{R}\neq \emptyset$. Similarly $\proj_1^{\imf\imf}[H_2]\mathrel{R}\proj_2^{\imf\imf}[H_2]$ and $\proj_1^{\imf\imf}[H_2]\mathrel{R}\neq \emptyset$). So we have
\[ \proj_1^{\imf\imf}[H_1]\;\mathrel{R} \;\proj_2^{\imf\imf}[H_1] \;\mathrel{R} \;\proj_1^{\imf\imf}[H_2]\; \mathrel{R} \;\proj_2^{\imf\imf}[H_2]. \]
By \ref{componentInclusionsFilterComposition} and upward closure, we get $\proj_1^{\imf\imf}[H_1;H_2]\mathrel{R}\proj_2^{\imf\imf}[H_1;H_2]$, which means $H_1;H_2\in \Theta(R)$.
\end{itemize}

The prove $\Xi(\mathcal{U})$ is a uniform relation, we verify the conditions:
\begin{itemize}
\item From $\pfilter{x}\otimes \pfilter{x}\in\mathcal{U}$, we get $\pfilter{x}\mathrel{\Xi(\mathcal{U})}\pfilter{x}$.
\item Assume $F\mathrel{\Xi(\mathcal{U})}G$ and $G\subseteq G'$. Then $F\otimes G\in \mathcal{U}$ and $F\otimes G\subseteq F\otimes G'$. By upwards closure, $F\otimes G'\in\mathcal{U}$.
\item Symmetry is immediate from $(F\otimes G)^\transp = G\otimes F$.
\item For transitivity, assume $F\mathrel{\Xi(\mathcal{U})}G$, $G\mathrel{\Xi(\mathcal{U})}H$ and $G \neq \powerset(X)$. Then $F\otimes G, G\otimes H\in\mathcal{U}$ and $G \amesh G$ (this would not hold if $G = \powerset(X)$), so $(F\otimes G);(G\otimes H) = F\otimes H$ by \ref{compositionProductFilters}. Thus $F\mathrel{\Xi(\mathcal{U})}H$.
\end{itemize}

To show $(\Theta,\Xi)$ is a Galois connection, we need to prove that $\Theta(R) \subseteq \mathcal{U}$ \textup{if and only if} $R \subseteq \Xi(\mathcal{U})$.

First assume $\Theta(R) \subseteq \mathcal{U}$ and take $F,G\in\powerfilters(X)$ such that $F\mathrel{R} G$. Then $F\otimes G\in \Theta(R)\subseteq\mathcal{U}$ which means that $F\mathrel{\Xi(\mathcal{U})}G$.

Now assume $R \subseteq \Xi(\mathcal{U})$ and take $H\in \Theta(R)$. Then $\proj_1^{\imf\imf}[H]\mathrel{R}\proj_2^{\imf\imf}[H]$, which implies $\proj_1^{\imf\imf}[H]\mathrel{\Xi(\mathcal{U})}\proj_2^{\imf\imf}[H]$. Thus $\proj_1^{\imf\imf}[H]\otimes \proj_2^{\imf\imf}[H]\in \mathcal{U}$. By upwards closure and \ref{filterFactorisationInequality} we have $H\in \mathcal{U}$.

(1) It is clear that $\im(\Theta)$ consists of factorisable uniformities. For the other inclusion, let $\mathcal{U}$ be a factorisable uniformity. It is enough to show that $\mathcal{U} \subseteq \Theta(\Xi(\mathcal{U}))$. Take $H\in \mathcal{U}$. By factorisability $\proj_1^{\imf\imf}[H]\otimes \proj_2^{\imf\imf}[H]\in \mathcal{U}$. Then $\proj_1^{\imf\imf}[H]\mathrel{\Xi(\mathcal{U})} \proj_2^{\imf\imf}[H]$ and thus $H\in \Theta(\Xi(\mathcal{F}))$.

(2) It is enough to prove that for all uniform relations $R$ we have $\Xi(\Theta(R)) \subseteq R$. Take $F,G\in\powerfilters(X)$. We have
\[ F\mathrel{\Xi(\Theta(R))} G \implies F\otimes G \in\Theta(R) \implies F\mathrel{R}G. \]

(3) Suppose $H, H'\in \Theta(R)$. Then $\proj_1^{\imf\imf}(H)\mathrel{R}\proj_2^{\imf\imf}(H)$ and $\proj_1^{\imf\imf}(H')\mathrel{R}\proj_2^{\imf\imf}(H')$. Also $\proj_1^{\imf\imf}(H) \subseteq \proj_1^{\imf\imf}(H;H')$ and $\proj_2^{\imf\imf}(H') \subseteq \proj_2^{\imf\imf}(H;H')$ by \ref{componentInclusionsFilterComposition}. Since $\proj_1^{\imf\imf}(H;H')\mathrel{R}\proj_2^{\imf\imf}(H;H')$, we have
\[ \proj_1^{\imf\imf}(H)\mathrel{R}\proj_2^{\imf\imf}(H) \mathrel{R}\proj_2^{\imf\imf}(H;H') \mathrel{R} \proj_2^{\imf\imf}(H'). \]
By finite depth of $R$, we have $\proj_1^{\imf\imf}(H)\mathrel{R}\big(\proj_2^{\imf\imf}(H) \cap \proj_2^{\imf\imf}(H')\big)$ and so $\proj_1^{\imf\imf}(H)\mathrel{R} \proj_2^{\imf\imf}(H\cap H')$ by \ref{imageUpsetsPreservesIntersection}.
Similarly $\proj_1^{\imf\imf}(H\cap H') \mathrel{R} \proj_2^{\imf\imf}(H)$. Then
\[ \proj_1^{\imf\imf}(H\cap H') \mathrel{R} \proj_2^{\imf\imf}(H) \mathrel{R} \proj_1^{\imf\imf}(H)\mathrel{R} \proj_2^{\imf\imf}(H\cap H'). \]
This means that $H\cap H' \in \Theta(R)$.

(4) Take $F,G,G'\in \powerfilters(X)$ such that $F\mathrel{\Xi(\mathcal{U})}G$ and $F\mathrel{\Xi(\mathcal{U})}G'$. Then $F\otimes G \in \mathcal{U}$ and $F\otimes G'\in \mathcal{U}$. By finite depth of $\mathcal{U}$ and \ref{meetsJoinsAdjoiningProduct}, we have
\[ F\otimes (G\cap G') = (F\otimes G) \cap (F\otimes G') \in \mathcal{U}. \]
This implies $F\mathrel{\Xi(\mathcal{U})}(G\cap G')$ and thus the finite depth of $\Xi(\mathcal{U})$.
\end{proof}


\subsubsection{Uniform convergence}
\begin{definition}
Let $\sSet{X,R}$ be a uniform relation space. Then the \udef{uniform convergence} $\Gamma(R)$ on $X$ is defined by
\[ F \overset{\Gamma(R)}{\longrightarrow} x \qquad\defequiv\qquad F\mathrel{R}\pfilter{x}. \]
We also denote the uniform convergence by $F\overset{u}{\longrightarrow} x$.
\end{definition}
If $\mathcal{U}$ is a uniformity, we write $\Gamma(\mathcal{U})$ to mean $\Gamma(\Xi(\mathcal{U}))$. We have
\[ F \overset{\Gamma(\mathcal{U})}{\longrightarrow} x \qquad\iff\qquad F\otimes \pfilter{x}\in\mathcal{U}. \]

\begin{lemma} \label{associatedUniformConvergence}
A uniform convergence is a convergence. It is also reciprocal ($R_1$).
\end{lemma}
\begin{proof}
Let $\sSet{X,R}$ be a uniform relation space. We have that $\Gamma(R)$ is centered, i.e.\ $\pfilter{x} \overset{\Gamma(R)}{\longrightarrow} x$, because $\pfilter{x}\mathrel{R}\pfilter{x}$.

We have that $\Gamma(R)$ is monotonic by upwards closure of $R$.

We prove reciprocity of $\Gamma(R)$ using point (5). of \ref{R1Conditions}. Assume $F \overset{\Gamma(R)}{\longrightarrow} x$ and $F \overset{\Gamma(R)}{\longrightarrow} y$. Then $F\mathrel{R}\pfilter{x}$ and $F\mathrel{R}\pfilter{y}$, so $\pfilter{x}\mathrel{R}\pfilter{y}$ by symmetry and transitivity. This implies
\[ G \in {\lim}_{\Gamma(R)}^{-1}(x) \iff G\mathrel{R}\pfilter{x}\iff G\mathrel{R}\pfilter{y} \iff G\in {\lim}_{\Gamma(R)}^{-1}(y), \]
and so $\lim_{\Gamma(R)}^{-1}(x) = \lim_{\Gamma(R)}^{-1}(y)$.
\end{proof}

\begin{proposition} \label{topologicalInducedUniformConvergence}
Let $\sSet{X,\mathcal{U}}$ be a uniform space and $x\in X$. Then
\begin{enumerate}
\item $\entourage_\mathcal{U}x \subseteq \vicinity_{\Gamma(\mathcal{U})}(x)$;
\item if $\mathcal{U}$ is topological, then $\Gamma(\mathcal{U})$ is topological and
\[ \neighbourhood_{\Gamma(\mathcal{U})}(x) = \upset \setbuilder{V x}{V\in \entourage_\mathcal{U}}. \]
\end{enumerate}
\end{proposition}
\begin{proof}
(1) We show that if $F\overset{\Gamma(\mathcal{U})}{\longrightarrow} x$, then $\entourage_\mathcal{U}x = \upset \setbuilder{V x}{V\in \entourage_\mathcal{U}}\subseteq F$. Indeed we have
\begin{align*}
F\otimes \pfilter{x}\in \mathcal{U} \implies& \entourage_\mathcal{U}\subseteq F\otimes \pfilter{x} \\
\implies& \forall V\in \entourage_\mathcal{U}: \exists A\in F: \; A\times \{x\} \subseteq V \\
\implies& \forall  V\in \entourage_\mathcal{U}: \exists A\in F: \; A \subseteq V x \\
\implies& \upset \setbuilder{V x}{V\in \entourage_\mathcal{U}}\subseteq F.
\end{align*}

(2) We first show that $\Gamma(\mathcal{U})$ is pretopological with vicinity filter $\entourage_\mathcal{U}x = \upset \setbuilder{V x}{V\in \entourage_\mathcal{U}}$. By (1), it is enough to prove that $\entourage_\mathcal{U}x \to x$.
Because $\entourage_\mathcal{U}$ is a topological entourage filter, we have
\begin{align*}
\entourage_\mathcal{U} &= \entourage_\mathcal{U};\entourage_\mathcal{U} \\
&\subseteq \entourage_\mathcal{U}; \pfilter{x}\otimes \pfilter{x} \\
&= \upset \setbuilder{V; \{(x,x)\}}{V\in \entourage_\mathcal{U}} \\
&= \upset \setbuilder{V x\times\{x\}}{V\in \entourage_\mathcal{U}} \\
&= \upset \setbuilder{V x}{V\in \entourage_\mathcal{U}}\otimes \pfilter{x}.
\end{align*}
Thus $\entourage_\mathcal{U}x \overset{\Gamma(\mathcal{U})}{\longrightarrow} x$.

Finally to show that $\Gamma(\mathcal{U})$ is topological, we use \ref{pretopologicalSpaceTopological}: Take $Vx\in \upset \setbuilder{V x}{V\in \entourage_\mathcal{U}}$. Then because $\entourage_\mathcal{U} = \entourage_\mathcal{U};\entourage_\mathcal{U}$, we can find $U,U'\in \entourage_\mathcal{U}$ such that $V = U;U'$. Consider $U'x$. For all $y\in U'x$, we have that $zUy \implies zU;U'x \iff zVx$, so $Uy \subseteq Vx$. Thus $Vx \in \upset \setbuilder{V y}{V\in \entourage_\mathcal{U}}$.
\end{proof}

TODO: is there a way to have a notion of ``pretopological uniform space''?

\begin{proposition}
Let $\sSet{X,\mathcal{U}}$ be a topological uniform space and $V\in \entourage_\mathcal{U}$.

Then $\interior_{\Gamma(\mathcal{U})\otimes \Gamma(\mathcal{U})}(V) \in \entourage_\mathcal{U}$.
\end{proposition}
\begin{proof}
By \ref{entourageLemma}, we have $\entourage_\mathcal{U} = \entourage_\mathcal{U};\entourage_\mathcal{U};\entourage_\mathcal{U}$, so can find $U_1,U_2,U_3$ such that $U_1;U_2;U_3 \subseteq V$. Let $U = U_1\cap U_1^\transp \cap U_2 \cap U_2^\transp \cap U_3\cap U_3^\transp$, so $U$ is symmetric and $U;U;U\subseteq V$.
Now
\[ U;U;U = \bigcup_{(x,y)\in U}U;\{(x, y)\};U = \bigcup_{(x,y)\in U}Ux \times Uy, \]
by \ref{relationCompositionResiduated}. For all $x,y\in U$, $Ux$ is a neighbourhood of $x$ in $\Gamma(\mathcal{U})$ and $Uy$ is a neighbourhood of $y$ in $\Gamma(\mathcal{U})$, by \ref{topologicalInducedUniformConvergence}.  Thus $Ux \times Uy$ is a neighbourhood of $(x,y)$ in $\Gamma(\mathcal{U})\otimes \Gamma(\mathcal{U})$, as this is a vicinity by \ref{productVicinity} and the product convergence is topological by \ref{pretopologicalInitialConvergence}.

By \ref{subsetWithVicinitiesInInherence}, we have that $U\subseteq \interior_{\Gamma(\mathcal{U})\otimes \Gamma(\mathcal{U})}(V)$ and thus the proposition follows by upwards closure.
\end{proof}
\begin{corollary}
Let $\sSet{X,\mathcal{U}}$ be a topological uniform space, then $\entourage_\mathcal{U}$ has a base of sets open in $\Gamma(\mathcal{U})\otimes \Gamma(\mathcal{U})$.
\end{corollary}

\begin{proposition}
Let $\sSet{X,\mathcal{U}}$ be a topological uniform space, $A\subseteq X$ and $M\subseteq X^2$. Then
\begin{enumerate}
\item $\closure_{\Gamma(\mathcal{U})}(A) = \bigcap\setbuilder{A_U}{U\in \entourage_\mathcal{U}}$;
\item $\closure_{\Gamma(\mathcal{U})\otimes \Gamma(\mathcal{U})}(M) = \bigcap\setbuilder{V;M;V}{V\in\entourage_\mathcal{U}}$.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) By \ref{principalAdherenceInherence} and \ref{topologicalInducedUniformConvergence}, we have
\begin{align*}
x\in \closure_{\Gamma(\mathcal{U})}(A) &\iff \forall U\in \entourage_\mathcal{U}: xU \mesh A \\
&\iff \forall U\in \entourage_\mathcal{U}: \exists y\in A: xUy \\
&\iff \forall U\in \entourage_\mathcal{U}: x\in {_U}A = A_{U^\transp} \\
&\iff x\in\bigcap\setbuilder{A_{U^\transp}}{U\in \entourage_\mathcal{U}} \\
&\iff x\in\bigcap\setbuilder{A_U}{U\in \entourage_\mathcal{U}}.
\end{align*}
For the last step, we have used the symmetry of $\entourage_\mathcal{U}$, \ref{entourageLemma}.

(2) By \ref{principalAdherenceInherence}, \ref{topologicalInducedUniformConvergence} and \ref{productVicinity}, we have
\begin{align*}
(x,y) \in \closure_{\Gamma(\mathcal{U})\otimes \Gamma(\mathcal{U})}(M) &\iff \forall U,V\in \entourage_\mathcal{U}: xU \times yV \mesh M \\
&\iff \forall U,V\in \entourage_\mathcal{U}:\exists (a,b)\in M: xUa \land yVb \\
&\iff \forall U,V\in \entourage_\mathcal{U}:(x,y) \in U;M;V^\transp \\
&\iff (x,y) \in \bigcap\setbuilder{U;M;V^\transp}{U,V\in\entourage_\mathcal{U}} \\
&\iff (x,y) \in \bigcap\setbuilder{V;M;V}{V\in\entourage_\mathcal{U}}.
\end{align*}
For the last step, we have used the symmetry of $\entourage_\mathcal{U}$, \ref{entourageLemma}, and the fact that it is a filter. We have also used \ref{relationCompositionResiduated}.
\end{proof}
\begin{corollary} \label{topologicalEntourageFilterBaseClosedSets}
Let $\sSet{X,\mathcal{U}}$ be a topological uniform space, then $\entourage_\mathcal{U}$ has a base of sets closed in $\Gamma(\mathcal{U})\otimes \Gamma(\mathcal{U})$.
\end{corollary}
\begin{proof}
Let $U\in \entourage_\mathcal{U}$. Then by \ref{entourageLemma}, we can find a $V\in\entourage_\mathcal{U}$ such that $V;V;V\subseteq U$. By the proposition, $V;V;V$ contains the closure of $V$. Thus each entourage contains a closed set.
\end{proof}

\begin{definition}
For any property $\mathbf{P}$ that a convergence space may have, we say a uniform relation space $\sSet{X,R}$ has property $\mathbf{P}$ if $\Gamma(R)$ has property $\mathbf{P}$.
\end{definition}

\begin{definition}
Let $\sSet{X,\mathcal{U}}$ be a uniform space. If $\adh_{\Gamma(\mathcal{U})\otimes \Gamma(\mathcal{U})}^\imf(H) \in \mathcal{U}$ for all $H\in \mathcal{U}$, then $X$ is called \udef{uniformly regular}.
\end{definition}

\begin{proposition}
Let $\sSet{X,\mathcal{U}}$ be a uniform space. If $X$ is uniformly regular, then $X$ is regular.
\end{proposition}
\begin{proof}
Let $F\in \powerfilters(X)$. Suppose $F\overset{\Gamma(\mathcal{U})}{\longrightarrow} x$, then $F\otimes \pfilter{x} \in \mathcal{U}$. By assumption $\adh_{\Gamma(\mathcal{U})\otimes \Gamma(\mathcal{U})}^\imf(F\otimes \pfilter{x}) \in \mathcal{U}$. By \ref{productAdherence} and \ref{principalInherenceAdherenceProperties}, we have
\[ \adh_{\Gamma(\mathcal{U})\otimes \Gamma(\mathcal{U})}^\imf(F\otimes \pfilter{x}) \; = \; \adh_{\Gamma(\mathcal{U})}^\imf(F)\otimes \adh_{\Gamma(\mathcal{U})}^\imf(\pfilter{x}) \; \subseteq \; \adh_{\Gamma(\mathcal{U})}^\imf(F)\otimes \pfilter{x}. \]
Thus $\adh_{\Gamma(\mathcal{U})}^\imf(F)\otimes \pfilter{x} \in\mathcal{U}$ and so $\adh_{\Gamma(\mathcal{U})}^\imf(F) \overset{\Gamma(\mathcal{U})}{\longrightarrow} x$.
\end{proof}
\begin{corollary} \label{topologicalUniformSpaceRegular}
Every topological uniform space is regular.
\end{corollary}
TODO: can be strengthened to completely regular?
\begin{proof}
Immediate from the proposition and \ref{topologicalEntourageFilterBaseClosedSets}.
\end{proof}

\subsubsection{Induced uniform relation}
\begin{definition}
Let $\sSet{X,\xi}$ be a reciprocal ($R_1$) convergence space. Let $\Phi(\xi)$ be a relation on $\powerfilters(X)$ defined by
\[ F\mathrel{\Phi(\xi)}G \qquad\defequiv\qquad \exists: x\in X: \; \big(F\overset{\xi}{\longrightarrow} x\big) \land \big(G\overset{\xi}{\longrightarrow} x\big) \]
for $F,G\in\powerfilters(X)$.
Then $\Phi(\xi)$ is the \udef{uniform relation associated to} $\xi$.
\end{definition}

\begin{lemma} \label{uniformRelationAssociatedToR1Convergence}
The uniform relation associated to a reciprocal convergence is a uniform relation.
\end{lemma}
\begin{proof}
\begin{itemize}
\item We have $\pfilter{x}\overset{\xi}{\longrightarrow} x$, so $\pfilter{x}\mathrel{\Phi(\xi)}\pfilter{x}$.
\item The set $F\mathrel{\Phi(\xi)}$ is upwards closed by monotonicity of the convergence $\xi$.
\item Symmetry is clear by construction.
\item For transitivity, take proper filters $F,G,H$ such that $F\mathrel{\Phi(\xi)}G$ and $G\mathrel{\Phi(\xi)}H$. Then there exist $x,y\in X$ such that
\[ \big(F\overset{\xi}{\longrightarrow} x\big) \land \big(G\overset{\xi}{\longrightarrow} x\big) \land \big(G\overset{\xi}{\longrightarrow} y\big) \land \big(H\overset{\xi}{\longrightarrow} y\big). \]
Thus $G\in \lim^{-1}_\xi(x) \cap\lim^{-1}_\xi(y)$, so $\lim^{-1}_\xi(x) \mesh\lim^{-1}_\xi(y)$. Using reciprocity, we apply \ref{R1Conditions} to get $\lim^{-1}_\xi(x) = \lim^{-1}_\xi(y)$. Thus $H \overset{\xi}{\longrightarrow} x$, which means that $F\mathrel{\Phi(\xi)}H$.
\end{itemize}
\end{proof}

\begin{proposition} \label{uniformConvergenceGaloisConnection}
Let $X$ be a set. The functions
\begin{align*}
&\Phi: \{\text{$R_1$ convergences on $X$}\} \to \{\text{uniform relations on $X$}\} \\
&\Gamma: \{\text{uniform relations on $X$}\} \to \{\text{$R_1$ convergences on $X$}\}
\end{align*}
form a Galois connection $(\Phi, \Gamma)$. Additionally,
\begin{enumerate}
\item $\im(\Phi)$ is the set of complete uniform relations on $X$;
\item $\im(\Gamma)$ is the set of all reciprocal convergences on $X$; i.e\ $\Gamma$ is surjective.
\end{enumerate}
\end{proposition}
\begin{proof}
The functions $\Phi$ and $\Gamma$ are well-defined by \ref{associatedUniformConvergence} and \ref{uniformRelationAssociatedToR1Convergence}.

To prove the Galois connection, let $R$ be a uniform relation on $X$ and $\xi$ a convergence on $X$. Then we need to prove $\Phi(\xi) \subseteq R$ \textup{if and only if} $\xi \subseteq \Gamma(R)$.

First assume $\Phi(\xi) \subseteq R$. Take $F\overset{\xi}{\longrightarrow} x$. Because also $\pfilter{x}\overset{\xi}{\longrightarrow} x$, we have $F\mathrel{\Phi(\xi)}\pfilter{x}$. By assumption $F\mathrel{R}\pfilter{x}$ and by definition $F\overset{\Gamma(R)}{\longrightarrow} x$.

Now assume $\xi \subseteq \Gamma(R)$. Take $F,G\in \powerfilters(X)$ such that $F\mathrel{\Phi(\xi)}G$. Then $\exists x\in X$ such that $F\overset{\xi}{\longrightarrow} x$ and $G\overset{\xi}{\longrightarrow} x$. By assumption $F\overset{\Gamma(R)}{\longrightarrow} x$ and $G\overset{\Gamma(R)}{\longrightarrow} x$, so by definition $F\mathrel{R}\pfilter{x}$ and $G\mathrel{R}\pfilter{x}$. By symmetry and transitivity $F\mathrel{R}G$.

\begin{enumerate}
\item For the inclusion $\subseteq$: assume $F\mathrel{\Phi(\xi)} F$. Then $F\to x$ for some $x\in X$, so $F\mathrel{\Phi(\xi)} \pfilter{x}$. Thus $F$ converges uniformly to some $x$.

For the other inclusion, $\supseteq$, take a complete uniform relation $R$. It is enough to show that $R \subseteq \Phi(\Gamma(R))$. Take $F,G\in \powerfilters(X)$ such that $F\mathrel{R} G$. By completeness, $F\mathrel{R} \pfilter{x}$ for some $x\in X$. By symmetry and transitivity, $G\mathrel{R} \pfilter{x}$ as well. Thus $F\overset{\Gamma(R)}{\longrightarrow} x$ and $G\overset{\Gamma(R)}{\longrightarrow} x$, so $F\mathrel{\Phi(\Gamma(R))} G$.

\item It is enough to prove $\Gamma(\Phi(\xi)) \subseteq \xi$ for any reciprocal convergence $\xi$. Take $F\overset{\Gamma(\Phi(\xi))}{\longrightarrow} x$. Then $F\mathrel{\Phi(\xi)} \pfilter{x}$ and so $\exists y\in X$ such that $F\overset{\xi}{\longrightarrow} y$ and $\pfilter{x}\overset{\xi}{\longrightarrow} y$. By reciprocity (and because $\pfilter{x}\subseteq \lim_{\xi}^{-1}(x) \cap \lim_{\xi}^{-1}(y)$), we have
\[ F \in {\lim}_{\xi}^{-1}(y) = {\lim}_{\xi}^{-1}(x). \]
So $F\overset{\xi}{\longrightarrow} x$.
\end{enumerate}
\end{proof}

\begin{corollary} \label{completeUniformGaloisConnection}
Let $X$ be a set. The functions
\begin{align*}
&\Theta \circ \Phi: \{\text{$R_1$ convergences on $X$}\} \to \{\text{uniformities on $X$}\} \\
&\Gamma\circ \Xi: \{\text{uniformities on $X$}\} \to \{\text{$R_1$ convergences on $X$}\}
\end{align*}
form a Galois connection $(\Theta \circ \Phi, \Gamma\circ \Xi)$. Additionally,
\begin{enumerate}
\item $\im(\Theta \circ \Phi)$ is the set of complete, factorisable uniformities on $X$;
\item $\im(\Gamma\circ \Xi)$ is the set of all reciprocal convergences on $X$.
\end{enumerate}
\end{corollary}
\begin{proof}
The Galois connection follows from \ref{uniformRelationGaloisConnection} and \ref{uniformConvergenceGaloisConnection}.

(1) The inclusion $\subseteq$ is immediate, because a uniformity is called complete if and only if its associated uniform relation is complete.

For the inclusion $\supseteq$, take some complete, factorisable uniformity $\mathcal{U}$. Then $\mathcal{U} = \Theta(R)$ for some uniform relation $R$, by \ref{uniformRelationGaloisConnection}. Now it is enough to note that $R$ is also complete, so there exists a reciprocal convergence $\xi$ such that $\mathcal{U} = \Theta(\Phi(\xi))$ by \ref{uniformConvergenceGaloisConnection}.

(2) Immediate because both $\Gamma$ and $\Xi$ are surjective.
\end{proof}

We can summarise the mappings between uniformlities $\mathcal{U}$, uniform relations $R$ and uniform convergences $\xi$ as follows
\[ \begin{tikzcd}[labels = {font=\large}, column sep=large]
\mathcal{U} \arrow[bend left, rrr, "\substack{F\mathrel{\Xi(\mathcal{U})}G \Leftrightarrow F\otimes G\in \mathcal{U} \vspace{0.1em} \\ \vspace{0.1em} \Xi}"] &&& \arrow[lll, bend left, "\substack{\Theta \vspace{0.1em} \\ H\in\Theta(R) \Leftrightarrow p_1^{\imf\imf}[H]\mathrel{R}p_2^{\imf\imf}[H]}"] R \arrow[rrr, bend left, "\substack{F\overset{\Gamma(R)}{\longrightarrow} x \Leftrightarrow F\mathrel{R}\pfilter{x} \vspace{0.1em} \\ \vspace{0.1em} \Gamma}"] &&& \arrow[lll, bend left, "\substack{\Phi \vspace{0.1em} \\ F\mathrel{\Phi(\xi)}G \Leftrightarrow \exists x: (F\to x)\land (G\to x)}"] \xi
\end{tikzcd} \]


\section{Uniform continuity}
\begin{definition}
Let $\sSet{X,\mathcal{U}}$ and $\sSet{Y,\mathcal{V}}$ be uniform spaces. A function $f: X\to Y$ is called \udef{uniformly continuous} if
\[ H\in \mathcal{U} \quad\implies\quad \upset (f|f)^{\imf\imf}[H]\in \mathcal{V}. \]
The set of uniform functions from $\sSet{X,\mathcal{U}}$ to $\sSet{Y,\mathcal{V}}$ is denoted $\ucont(\mathcal{U}, \mathcal{V})$ or $\ucont(X,Y)$.
\end{definition}

\begin{lemma} \label{compositionUniformlyContinuousFunctions}
Let $\sSet{X,\mathcal{U}}$, $\sSet{Y,\mathcal{V}}$, $\sSet{Z, \mathcal{W}}$ be uniform spaces and $f:X\to Y$, $g:Y\to Z$ uniformly continuous functions. Then $g\circ f$ is uniformly continuous.
\end{lemma}
\begin{proof}
Take arbitrary $H \in \mathcal{U}$. Then $\upset (f|f)^{\imf\imf}(H)\in \mathcal{V}$ and $\upset(g|g)^{\imf\imf}\big(\upset (f|f)^{\imf\imf}(H)\big) \in \mathcal{W}$. Finally we note
\[ \upset(g|g)^{\imf\imf}\big(\upset (f|f)^{\imf\imf}(H)\big) = \upset\big((g|g)^{\imf\imf}\circ (f|f)^{\imf\imf}\big)(H) = \upset \big((g|g)\circ (f|f)\big)^{\imf\imf}(H) = \upset (g\circ f|g\circ f)^{\imf\imf}(H) \]
by \ref{monotonicityOrderClosure}, \ref{functorialityImageFunction} and \ref{parallelCompositionOfMorphisms}.
\end{proof}

\begin{proposition} \label{uniformContinuityEntourages}
Let $\sSet{X,\mathcal{U}}$, $\sSet{Y,\mathcal{V}}$ be uniform spaces and $f: X\to Y$ a function.
\begin{enumerate}
\item If $f$ is uniformly continuous, then $\entourage_\mathcal{V} \subseteq \upset (f|f)^{\imf\imf}[\entourage_\mathcal{U}]$;
\item If $\mathcal{V}$ is topological, then opposite implication also holds.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) By uniform continuity we have
\[ \entourage_\mathcal{V} \subseteq \bigcap\setbuilder{\upset (f|f)^{\imf\imf}[H]}{H\in \mathcal{U}} = \upset (f|f)^{\imf\imf}\left[\bigcap \mathcal{U}\right] = \upset (f|f)^{\imf\imf}\left[\entourage_\mathcal{U}\right]. \]
The first equality follows from \ref{imageUpsetsPreservesIntersection}.

(2) Assume $\entourage_\mathcal{V} \subseteq \upset (f|f)^{\imf\imf}[\entourage_\mathcal{U}]$ and take $H\in \mathcal{U}$. Then $\entourage_\mathcal{U}\subseteq H$, so
\[ \entourage_\mathcal{V} \subseteq \upset (f|f)^{\imf\imf}[\entourage_\mathcal{U}] \subseteq \upset (f|f)^{\imf\imf}[H]. \]
Thus $\upset (f|f)^{\imf\imf}[H] \in\mathcal{V}$.
\end{proof}

\begin{proposition} \label{preservationUniformStructure}
Let $X,Y$ be sets, $\sSet{X,\mathcal{U}}, \sSet{Y,\mathcal{V}}$ uniform spaces, $\sSet{X,R}, \sSet{Y,S}$ uniform relation spaces and $\sSet{X,\xi}, \sSet{Y,\zeta}$ reciprocal convergence spaces. Let $f: X\to Y$ be a function.
\begin{enumerate}
\item if $f: \sSet{X,\mathcal{U}} \to \sSet{Y,\mathcal{V}}$ is uniformly continuous, then $\big(f: \sSet{X,\Xi(\mathcal{U})} \to \sSet{Y,\Xi(\mathcal{V})}\big)^{\imf\imf}$ is relation preserving;
\item if $\big(f: \sSet{X,R} \to \sSet{Y,S}\big)^{\imf\imf}$ is relation preserving, then $f: \sSet{X,\Gamma(R)} \to \sSet{Y,\Gamma(S)}$ is continuous;
\item if $f: \sSet{X,\xi} \to \sSet{Y,\zeta}$ is continuous, then $\big(f: \sSet{X,\Phi(\xi)} \to \sSet{Y,\Phi(\zeta)}\big)^{\imf\imf}$ is relation preserving;
\item if $\big(f: \sSet{X,R} \to \sSet{Y,S}\big)^{\imf\imf}$ is relation preserving, then $f: \sSet{X,\Theta(R)} \to \sSet{Y,\Theta(S)}$ is uniformly continuous.
\end{enumerate}

\end{proposition}
\begin{proof}
(1) Assume $f$ uniformly continuous and $F\mathrel{\Xi(\mathcal{U})} G$. Then $F\otimes G\in \mathcal{U}$. By uniform continuity $\upset (f|f)^{\imf\imf}[F\otimes G] = f^{\imf\imf}[F] \otimes f^{\imf\imf}[G] \in \mathcal{V}$, so $f^{\imf\imf}[F] \mathrel{\Xi(\mathcal{V})} f^{\imf\imf}[G]$.

(2) Assume $f^{\imf\imf}$ relation preserving and take $F \overset{\Gamma(R)}{\longrightarrow} x$. Then $F\mathrel{R}\pfilter{x}$ and, by relation preservation, $f^{\imf\imf}[F]\mathrel{S}f^{\imf\imf}[\pfilter{x}]$. Now $f^{\imf\imf}[\pfilter{x}] = \pfilter{f}(x)$, so $f^{\imf\imf}[F] \overset{\Gamma(S)}{\longrightarrow} f(x)$.

(3) Assume $f$ is continuous and $F\mathrel{\Phi(\xi)} G$. Then there exists $x\in X$ such that $F\overset{\xi}{\longrightarrow} x$ and $G\overset{\xi}{\longrightarrow} x$. By continuity $f^{\imf\imf}[F]\overset{\zeta}{\longrightarrow} f(x)$ and $f^{\imf\imf}[G]\overset{\zeta}{\longrightarrow} f(x)$, so $f^{\imf\imf}[F] \mathrel{\Phi(\zeta)} f^{\imf\imf}[G]$.

(4) Assume $f^{\imf\imf}$ is relation preserving and take $H\in \Theta(R)$. Then $p_1^{\imf\imf}[H]\mathrel{R}p_2^{\imf\imf}[H]$, so $f^{\imf\imf}\big[p_1^{\imf\imf}[H]\big]\mathrel{S}f^{\imf\imf}\big[p_2^{\imf\imf}[H]\big]$. Now
\[ f^{\imf\imf}\big[p_1^{\imf\imf}[H]\big] = (f\circ p_1)^{\imf\imf}[H] = \big(p_1\circ(f|f) \big)^{\imf\imf}[H] = p_1^{\imf\imf}\big[(f|f)^{\imf\imf}[H]\big]. \]
Similarly $f^{\imf\imf}\big[p_2^{\imf\imf}[H]\big] = p_2^{\imf\imf}\big[(f|f)^{\imf\imf}[H]\big]$. Thus $p_1^{\imf\imf}\big[(f|f)^{\imf\imf}[H]\big]\mathrel{S}p_2^{\imf\imf}\big[(f|f)^{\imf\imf}[H]\big]$, which means that $(f|f)^{\imf\imf}[H]\in \Theta(S)$.
\end{proof}
\begin{corollary}
Let $X,Y$ be sets, $\sSet{X,\mathcal{U}}, \sSet{Y,\mathcal{V}}$ uniform spaces, $\sSet{X,R}, \sSet{Y,S}$ uniform relation spaces and $\sSet{X,\xi}, \sSet{Y,\zeta}$ reciprocal convergence spaces. Let $f: X\to Y$ be a function.
\begin{enumerate}
\item if $\mathcal{U}$ is factorisable and $\big(f: \sSet{X,\Xi(\mathcal{U})} \to \sSet{Y,\Xi(\mathcal{V})}\big)^{\imf\imf}$ is relation preserving, then $f: \sSet{X,\mathcal{U}} \to \sSet{Y,\mathcal{V}}$ is uniformly continuous;
\item if $R$ is complete and $f: \sSet{X,\Gamma(R)} \to \sSet{Y,\Gamma(S)}$ is continuous, then $\big(f: \sSet{X,R} \to \sSet{Y,S}\big)^{\imf\imf}$ is relation preserving.
\end{enumerate}
\end{corollary}
\begin{proof}
(1) From the proposition, we have that $f: \sSet{X,\Theta(\Xi(\mathcal{U}))} \to \sSet{Y,\Theta(\Xi(\mathcal{V}))}$ is uniformly continuous. Because $\mathcal{U}$ is factorisable, $\Theta(\Xi(\mathcal{U})) = \mathcal{U}$. Also $\Theta(\Xi(\mathcal{V})) \subseteq \mathcal{V}$.

(2) From the proposition, we have that $\big(f: \sSet{X,\Phi(\Gamma(R))} \to \sSet{Y,\Phi(\Gamma(S))}\big)^{\imf\imf}$ is relation preserving. Because $R$ is complete, we have $R = \Phi(\Gamma(R))$. Also $\Phi(\Gamma(S)) \subseteq S$.
\end{proof}

\begin{theorem}[Heine-Cantor] \label{HeineCantorTheorem}
Let $\sSet{X,\mathcal{U}}$ be a compact uniform space, $\sSet{Y,\mathcal{V}}$ a Choquet uniform spaces and $f: X\to Y$ a function. If $f: \sSet{X,\Gamma(\Xi(\mathcal{U}))} \to \sSet{Y,\Gamma(\Xi(\mathcal{V}))}$ is continuous, then $f: \sSet{X,\mathcal{U}} \to \sSet{Y,\mathcal{V}}$ is uniformly continuous.
\end{theorem}
\begin{proof}
Take $H\in\mathcal{U}$. Take arbitrary ultrafilter $I\in\powerfilters(Y^2)$ such that $(f|f)^{\imf\imf}[H]\subseteq I$. Then there exists an ultrafilter $J\in \powerfilters(X^2)$ such that $\upset (f|f)^{\imf\imf}[J] = I$ by \ref{mappingUltrafiltersLemma}.

By \ref{compactUltrafilterFactorisation}, there exists $x\in X$ such that $\proj_1^{\imf\imf}[J]\overset{\Gamma(\Xi(\mathcal{U}))}{\longrightarrow} x$ and $\proj_2^{\imf\imf}[J]\overset{\Gamma(\Xi(\mathcal{U}))}{\longrightarrow} x$. By continuity, symmetry and transitivity,
\[ \mathcal{V} \ni (f\circ \proj_1)^{\imf\imf}[J]\otimes (f\circ \proj_2)^{\imf\imf}[J] = \proj_1^{\imf\imf}\big[(f|f)^{\imf\imf}[J]\big]\otimes \proj_2^{\imf\imf}\big[(f|f)^{\imf\imf}[J]\big] \subseteq (f|f)^{\imf\imf}[J] = I. \]
As this is true for arbitrary ultrafilter $I$, we have $(f|f)^{\imf\imf}[H]\in\mathcal{V}$ because $\mathcal{V}$ is uniformly Choquet.
\end{proof}

\subsection{Initial and final uniform spaces}
\begin{definition}
Let $Y$ be a set.
\begin{itemize}
\item Given a set of uniform spaces $\{\sSet{Z_i, \mathcal{W}_i}\}_{i\in I}$ and a set of functions $\{f_i: Y\to Z_i\}_{i\in I}$, we define the \udef{initial uniformity} $\mathcal{X}$ on $Y$ as
\[ \mathcal{X} = \bigvee \setbuilder{\text{$\mathcal{V}$ a uniformity on $Y$}}{\forall i\in I:\; f_i\in \ucont(\mathcal{V}, \mathcal{W}_i)}. \]
\item Given a set of uniform spaces $\{\sSet{X_i, \mathcal{U}_i}\}_{i\in I}$ and a set of functions $\{g_i: X_i\to Y\}_{i\in I}$, we define the \udef{final uniformity} $\mathcal{Y}$ on $Y$ as
\[ \mathcal{Y} = \bigwedge \setbuilder{\text{$\mathcal{V}$ a uniformity on $Y$}}{\forall i\in I:\; g_i\in \ucont(\mathcal{U}_i, \mathcal{V})}. \]
\end{itemize}
\end{definition}

\begin{proposition} \label{initialFinalUniformity}
Let $Y$ be a set and $H\in\powerfilters(Y^2)$.
\begin{enumerate}
\item Let $\{f_i: Y\to \sSet{Z_i, \mathcal{W}_i}\}_{i\in I}$ be a set of functions to uniform spaces and $\mathcal{X}$ the initial uniformity on $Y$ w.r.t.\ this set. Then
\[ H\in \mathcal{X} \quad\iff\quad \forall i\in I: \; \upset(f_i|f_i)^{\imf\imf}(H)\in \mathcal{W}_i. \]
\item Let $\{g_i: \sSet{X_i, \mathcal{U}_i}\to Y\}_{i\in I}$ be a set of functions from uniform spaces and $\mathcal{Y}$ the final uniformity on $Y$ w.r.t.\ this set. Then
\[ H\in \mathcal{Y} \quad\iff\quad \exists \{i_0,\ldots i_n\}\subseteq I: \forall k\leq n: \exists U_{i_k}\in \mathcal{U}_{i_k}:\; (g_{i_0}|g_{i_0})^{\imf\imf}(U_0);\ldots;(g_{i_n}|g_{i_n})^{\imf\imf}(U_n)\subseteq H. \]
\end{enumerate}
\end{proposition}
In particular, all $f_i$s are uniformly continuous w.r.t. the initial uniformity and all $g_i$s are uniformly continuous w.r.t. the final uniformity.
\begin{proof}
(1) For the direction $\Rightarrow$, we need to show that the $f_i$s are continuous. Take $H\in \mathcal{X}$. Then, by \ref{latticeOfUniformities}, $H = H_0;\ldots;H_n$ where each $H_k\in \mathcal{V}_k \in \setbuilder{\text{$\mathcal{V}$ a uniformity on $Y$}}{\forall i\in I:\; f_i\in \ucont(\mathcal{V}, \mathcal{W}_i)}$.

By assumption, each $f_i$ maps each $H_k$ to an element of $\mathcal{W}_i$. By closure under composition, $(f_{i}|f_{i})^{\imf\imf}(H_0);\ldots;(f_{i}|f_{i})^{\imf\imf}(H_k)\in\mathcal{W}_i$. Now
\[ (f_i|f_i)^{\imf\imf}(H) = (f_i|f_i)^{\imf\imf}(H_0;\ldots; H_n) \supseteq (f_{i}|f_{i})^{\imf\imf}(H_0);\ldots;(f_{i}|f_{i})^{\imf\imf}(H_k) \]
by \ref{imageFilterComposition}, so $\upset (f_i|f_i)^{\imf\imf}(H) \in \mathcal{W}_i$ by upwards closure.

For $\Leftarrow$, assume, towards a contradiction, that $H$ is such that $\forall i\in I: \; \upset(f_i|f_i)^{\imf\imf}(H) \in \mathcal{W}_i$, but $H \notin \mathcal{X}$. Then let $\mathcal{X}'$ be the least uniformity that contains $\mathcal{X}$ and $H$, which exists by \ref{latticeOfUniformities}.

If we can show that $\mathcal{X}'$ makes all the $f_i$s uniformly continuous, then $\mathcal{X}'$ must be smaller than $\mathcal{X}$ by construction. This is a contradiction.

For all $i\in I$, we have $\upset(f_i|f_i)^{\imf\imf}(H^\transp) \in \mathcal{W}_i$ and $\upset(f_i|f_i)^{\imf\imf}(H') \in \mathcal{W}_i$ for all $H'\supseteq H$.

We just need to show that $\upset(f_i|f_i)^{\imf\imf}(H;H) \in \mathcal{W}_i$ and $\upset(f_i|f_i)^{\imf\imf}(H;H') \in \mathcal{W}_i$ for all $H'\in \mathcal{X}$. These facts follow from \ref{imageFilterComposition}, by upwards closure of $\mathcal{W}_i$.

(2) For the direction $\Leftarrow$, we need to show that the $g_i$s are continuous. Take arbitrary $i\in I$ and $U_i\in \mathcal{U}_i$. Then $\upset (g_i|g_i)^{\imf\imf}(U_i)\in \mathcal{V}$ for each uniformity on $Y$ that makes all $g_i$ uniformly continuous. Thus $\upset (g_i|g_i)^{\imf\imf}(U_i)$ is in the intersection of all such uniformities, which means it is in $\mathcal{Y}$ by \ref{latticeOfUniformities}.

For $\Rightarrow$, it is enough to prove that the set of $H$s that satisfy the right-hand side forms a uniformity such that all $g_i$ are uniformly continuous.

These points are easy to verify.
\end{proof}
\begin{corollary} \label{finalUniformityWrtInjectiveFunction}
Let $Y$ be a set, $g: \sSet{X, \mathcal{U}} \to Y$ an \emph{injective} function from a uniform space and $\mathcal{Y}$ the final uniformity on $Y$ w.r.t.\ $g$. Then
\[ H \in \mathcal{Y} \qquad\iff\qquad \exists U\in\mathcal{U}: \; (g|g)^{\imf\imf}(U) \subseteq H \]
for all $H\in\powerfilters(Y^2)$.
\end{corollary}
\begin{proof}
By the proposition, we have $H \in \mathcal{Y}$ if and only if there exist $U_0, \ldots, U_n$ such that $(g|g)^{\imf\imf}(U_0);\ldots;(g|g)^{\imf\imf}(U_n) \subseteq H$. By \ref{imageFilterComposition} and the injectivity of $g$, we have
\[ (g|g)^{\imf\imf}(U_0);\ldots;(g|g)^{\imf\imf}(U_n) = (g|g)^{\imf\imf}(U_0;\ldots; U_n). \]
Since $U_0;\ldots; U_n\in\mathcal{U}$, the result follows.
\end{proof}

\begin{proposition}[Characteristic property of initial and final uniformity] \label{characteristicPropertyInitialFinalUniformity}
Let $Y$ be a set, $\sSet{X,\mathcal{U}}$ and $\sSet{Z, \mathcal{W}}$ uniform spaces.
\begin{enumerate}
\item Let $\{f_i: Y\to \sSet{Z_i, \mathcal{W}_i}\}_{i\in I}$ be set of functions to uniform spaces and $\mathcal{X}$ the initial uniformity on $Y$ w.r.t. this set. A function $g: \sSet{X, \mathcal{U}}\to Y$ is uniformly continuous \textup{if and only if} $f_i \circ g$ is uniformly continuous for all $i\in I$.
\[ \begin{tikzcd}
Y \ar[r, "f_i"] & Z_i \\ X \ar[u, "g"] \ar[ur, swap, "f_i\circ g"]
\end{tikzcd} \]
\item Let $\{g_i: \sSet{X_i, \mathcal{U}_i} \to Y\}_{i\in I}$ be set of functions from uniform spaces and $\mathcal{Y}$ the final preconvergence on $Y$ w.r.t. this set. A function $f: Y\to \sSet{Z,\mathcal{W}}$ is uniformly continuous \textup{if and only if} $f\circ g_i$ is uniformly continuous for all $i\in I$.
\[ \begin{tikzcd}
X_i \ar[r, "g_i"] \ar[dr, swap, "f\circ g_i"] & Y \ar[d, "f"] \\ & Z
\end{tikzcd} \]
\end{enumerate}
\end{proposition}
\begin{proof}
(1) The uniform continuity of $g$ is equivalent to $\upset(g|g)^{\imf\imf}(H)\in \mathcal{X}$ for all $H\in \mathcal{U}$. By the proposition this is equivalent to
\[ \forall i \in I: \; \upset(f_i|f_i)^{\imf\imf}\big(\upset(g|g)^{\imf\imf}(H)\big) = \upset\big((f_i|f_i)\circ (g|g)\big)^{\imf\imf}(H) = \upset(f_i\circ g|f_i\circ g)^{\imf\imf}(H) \in \mathcal{W}_i,  \]
using \ref{monotonicityOrderClosure}, \ref{functorialityImageFunction} and \ref{parallelCompositionOfMorphisms}.
This is equivalent to the continuity of $f_i\circ g$ for all $i\in I$.

(2) If $f$ is uniformly continuous, then so is $f\circ g_i$, by uniform continuity of $g_i$ (\ref{initialFinalUniformity}) and uniform continuity of the composition (\ref{compositionUniformlyContinuousFunctions}).

Now suppose that $f$ is not uniformly continuous. Then there exists $i\in I$ and filter $H\in \mathcal{U}_i$ such that $\upset (g_i|g_i)^{\imf\imf}(H)$ is not an element of the final uniformity $\mathcal{Y}$. Then, by \ref{initialFinalUniformity}, does not contain a composition of images of elements of uniform filters. In particular, $H$ is not a uniform filter. This is a contradiction.
\end{proof}

\begin{proposition} \label{initialUniformConvergenceIsInitialConvergence}
Let $Y$ be a set. Let $\{f_i: Y\to \sSet{Z_i, \mathcal{W}_i}\}_{i\in I}$ be set of functions to uniform spaces and $\mathcal{X}$ the initial uniformity on $Y$ w.r.t. this set. Then the convergence $\Gamma(\mathcal{X})$ is the initial convergence on $Y$ w.r.t.\ the functions $\{f_i: Y\to \sSet{Z_i, \Gamma(\mathcal{W}_i)}\}_{i\in I}$.
\end{proposition}
\begin{proof}
Take arbitrary $F\in\powerfilters(Y)$ and $y\in Y$. Then we have, by \ref{initialFinalUniformity},
\begin{align*}
F \overset{\Gamma(\mathcal{X})}{\longrightarrow} y &\iff F\otimes \pfilter{y} \in \mathcal{X} \\
&\iff \forall i\in I:\; \upset (f_i|f_i)^{\imf\imf}(F\otimes \pfilter{y}) \in \mathcal{W}_i \\
&\iff \forall i\in I:\; \upset (f_i)^{\imf\imf}(F)\otimes \pfilter{f}_i(y) \in \mathcal{W}_i \\
&\iff \forall i\in I:\; \upset (f_i)^{\imf\imf}(F)\overset{\Gamma(\mathcal{W}_i)} f_i(y).
\end{align*}
By \ref{initialFinalConvergence}, this last statement is equivalent to the convergence of $F$ to $y$ in the initial convergence w.r.t.\ the functions $\{f_i: Y\to \sSet{Z_i, \Gamma(\mathcal{W}_i)}\}_{i\in I}$.
\end{proof}

\begin{example}
The final convergence w.r.t.\ functions from uniform spaces is in general not induced by the final uniformity.

Consider the line $\interval{0,1}$ with the usual uniformity and convergence and consider the function
\[ f: \interval{0,1}\to \{0,1\}: x\mapsto \begin{cases}
0 & (x\leq 1/2) \\
1 & (x > 1/2).
\end{cases} \]
Now let $\{0,1\}$ have the final convergence w.r.t.\ $f$. The non-trivial filters on $\{0,1\}$ are $\pfilter{0}, \pfilter{1}$ and $\big\{\{0,1\}\big\}$.

We claim that $\big\{\{0,1\}\big\}$ converges to $0$, but not $1$. Indeed consider the filter with base $\setbuilder{\ball(1/2, \epsilon)}{\epsilon>0}$, which converges to $1/2\in \interval{0,1}$. Then $f^{\imf\imf}\big(\setbuilder{\ball(1/2, \epsilon)}{\epsilon>0}\big) = \big\{\{0,1\}\big\}$, which converges to $f(1/2) = 0$ because the final convergence makes $f$ continuous.

To show that $\big\{\{0,1\}\big\}$ does not converge to $1$, it is enough to show that $\pfilter{0}$ does not converge to $1$. Indeed, suppose there was a filter $F\in \powerfilters\big(\interval{0,1}\big)$ that converges to some $x\in \interval[oc]{1/2,1}$, then $\interval[oc]{1/2,1}\in F$ because it is open in $\interval{0,1}$. Thus $\{1\}\in f^{\imf\imf}(F) \neq \pfilter{0}$.

In summary, we have
\[ \big\{\{0,1\}\big\} \to 1, \qquad \pfilter{0} \to 0 \qquad\text{and}\qquad \pfilter{1}\to 0,1. \]
The convergence of $\pfilter{1}$ to $0$ is clear by upwards closure.

Now this convergence is not symmetric ($R_0$), and in particular not reciprocal ($R_1$), so it cannot be induced by any uniformity by \ref{associatedUniformConvergence}. In particular it is not induced by the final uniformity, which in this case contains all filters except the trivial one.
\end{example}

\begin{proposition} \label{topologicalInitialUniformity}
Let $Y$ be a set. Let $\{f_i: Y\to \sSet{Z_i, \mathcal{W}_i}\}_{i\in I}$ be set of functions to \emph{topological} uniform spaces and $\mathcal{X}$ the initial uniformity on $Y$ w.r.t. this set. Then $\mathcal{X}$ is topological and
\[ \entourage_\mathcal{X} = \mathfrak{F}\bigcup_{i\in I} (f_i|f_i)^{\preimf\imf}\big(\entourage_{\mathcal{W}_i}\big) = \mathfrak{F}\setbuilder{(f_i|f_i)^\preimf(U)}{i\in I, U\in \entourage_{\mathcal{W}_i}}. \]
\end{proposition}
\begin{proof}
(1) We have, by \ref{initialFinalUniformity} and \ref{upsetPreimageImageGaloisConnection},
\begin{align*}
H \in \mathcal{X} &\iff \forall i\in I: \upset(f_i|f_i)^{\imf\imf}(H) \in \mathcal{W}_i \\
&\iff \forall i\in I: \entourage_{\mathcal{W}_i} \subseteq \upset(f_i|f_i)^{\imf\imf}(H) \\
&\iff \forall i\in I: \upset (f_i|f_i)^{\preimf\imf}\big(\entourage_{\mathcal{W}_i}\big) \subseteq H \\
&\iff \bigcup_{i\in I} \upset (f_i|f_i)^{\preimf\imf}\big(\entourage_{\mathcal{W}_i}\big) \subseteq H.
\end{align*}
Thus the initial uniformity is topological and
\begin{align*}
\entourage_\mathcal{X} &= \mathfrak{F}\bigcup_{i\in I} \upset (f_i|f_i)^{\preimf\imf}\big(\entourage_{\mathcal{W}_i}\big) \\
&= \mathfrak{F}\bigcup_{i\in I}\setbuilder{(f_i|f_i)^\preimf(U)}{U\in \entourage_{\mathcal{W}_i}} \\
&= \mathfrak{F}\setbuilder{(f_i|f_i)^\preimf(U)}{i\in I, U\in \entourage_{\mathcal{W}_i}}.
\end{align*}
\end{proof}

\subsubsection{Product uniformity}
\begin{definition}
Let $\sSet{X_i, \mathcal{U}_i}$ be a uniform space for all $i\in I$. The \udef{product uniformity} $\bigotimes_{i\in I}\mathcal{U}_i$ is the initial uniformity on $\bigtimes_{i\in I}X_i$ w.r.t. the set of projections $p_i: \bigtimes_{i\in I}X_i \to X_i$.

The product uniform space is denoted $\prod_{i\in I}X_i$.
\end{definition}

\subsubsection{Subspace uniformity}
\begin{definition}
Let $\sSet{X, \mathcal{U}}$ be a uniform space and $A\subseteq X$ a subset. The \udef{subspace uniformity} $\mathcal{U}|_A$ is the initial uniformity w.r.t. the inclusion $A\hookrightarrow X$.
\end{definition}

\begin{proposition} \label{subspaceUniformConvergence}
Let $\sSet{X, \mathcal{U}}$ be a uniform space and $A\subseteq X$ a subset. Then $\Gamma(\mathcal{U}|_A) = \Gamma(\mathcal{U})|_A$. 
\end{proposition}
\begin{proof}
Take $F\in \powerfilters{A}$ and $a\in A$. Let $\iota: A\hookrightarrow X$ be the inclusion function. Then we have, by \ref{initialFinalConvergence} and \ref{initialFinalUniformity}
\begin{align*}
F \overset{\Gamma(\mathcal{U})|_A}{\longrightarrow} a &\iff \upset\iota^{\imf\imf}(F) \overset{\Gamma(\mathcal{U})}{\longrightarrow} a \\
&\iff \upset\iota^{\imf\imf}(F)\otimes \pfilter{a} \in \mathcal{U} \\
&\iff \upset(\iota|\iota)^{\imf\imf}\big(F\otimes \pfilter{a}\big) \in \mathcal{U} \\
&\iff F\otimes \pfilter{a} \in \mathcal{U}|_A \\
&\iff F \overset{\Gamma(\mathcal{U}|_A)}{\longrightarrow} a.
\end{align*}
\end{proof}

\subsection{Embeddings}
\begin{proposition} \label{embeddingTopologicalUniformity}
Let $\sSet{X,\mathcal{U}}$ and $\sSet{Y,\mathcal{V}}$ be topological uniform spaces and $f: X\to Y$ a function. Then $f$ is an embedding \textup{if and only if}
\begin{itemize}
\item $f$ is injective;
\item $\upset(f|f)^{\imf\imf}(\entourage_\mathcal{U}) = \entourage_\mathcal{V}|_{\im(f)^2}$.
\end{itemize}
\end{proposition}
\begin{proof}
First assume $f$ is an embedding. Since $f|^{\im(f)}$ is bijective, we automatically have that $f$ is injective.

By \ref{uniformContinuityEntourages}, we have that $\entourage_{\mathcal{V}}\subseteq \upset(f|f)^{\imf\imf}(\entourage_\mathcal{U})$, so $\entourage_{\mathcal{V}}|_{\im(f)^2} \subseteq \upset(f|f)^{\imf\imf}(\entourage_\mathcal{U})$.

Since $(f|^{\im(f)})^{-1}$ is also uniformly continuous, we have
\[ \entourage_\mathcal{U} \subseteq \upset \big((f\big|^{\im(f)})^{-1}|(f|^{\im(f)})^{-1}\big)^{\imf\imf}\big(\entourage_{\mathcal{V}}|_{\im(f)^2}\big) \]
and thus, by \ref{upsetPreimageImageGaloisConnection},
\[ \upset(f|f)^{\imf\imf}(\entourage_\mathcal{U}) = \big(f|^{\im(f)}\big|f|^{\im(f)}\big)^{\imf\imf}(\entourage_{\mathcal{U}}) = \big((f|^{\im(f)})^{-1}|(f|^{\im(f)})^{-1}\big)^{\preimf\imf}(\entourage_{\mathcal{U}}) \subseteq \entourage_{\mathcal{V}}|_{\im(f)^2}. \]
We conclude that $\upset(f|f)^{\imf\imf}(\entourage_\mathcal{U}) = \entourage_\mathcal{V}|_{\im(f)^2}$.

Now assume the two points. Then $f|^{\im(f)}$ is bijective. 
By \ref{uniformContinuityEntourages}, we can run the previous arguments in reverse and so both $f$ and $(f|^{\im(f)})^{-1}$ are uniformly continuous.
\end{proof}

\section{Properties of uniform spaces}
\subsection{(Total) boundedness}
TODO ref: BOUNDEDNESS IN UNIFORM SPACES, TOPOLOGICAL GROUPS, AND HOMOGENEOUS SPACES - Atkin

J. Hejcman, Boundedness in uniform space and topological group, J. Czechosolvak
math.,Vol. 9, No. 4 (1959), 544-563.

\begin{definition}
Let $\sSet{X,\mathcal{U}}$ be a uniform space. We call $\mathcal{D} \subseteq \powerset(X^2)$ a \udef{uniform cover} of $\sSet{X,\mathcal{U}}$ if
\[ \forall H\in \mathcal{U}:\quad \mathcal{D}\mesh H. \]
\begin{itemize}
\item We say $B\subseteq X$ is \udef{totally bounded} if for all uniform covers $\mathcal{D}$, there exists a \emph{finite} $\mathcal{C} \subseteq \setbuilder{Ax}{A\in \mathcal{D}, x\in X}$ such that $B\subseteq \bigcup \mathcal{C}$.
\item We say $B\subseteq X$ is \udef{bounded} if for all uniform covers $\mathcal{D}$, there exists a \emph{finite} $\mathcal{C} \subseteq \setbuilder{A^nx}{A\in \mathcal{D}, n\in \N, x\in X}$ such that $B\subseteq \bigcup \mathcal{C}$.
\end{itemize}
\end{definition}

\begin{lemma} \label{totalBoundednessImpliesBoundedness}
Total boundedness implies boundedness.
\end{lemma}
\begin{proof}
Clearly $\setbuilder{Ax}{A\in \mathcal{D}, x\in X} \subseteq \setbuilder{A^nx}{A\in \mathcal{D}, n\in \N, x\in X}$, so any finite cover of $B$ in the former will also be in the latter.
\end{proof}

\begin{lemma} \label{topologicalBoundednessLemma}
Let $\sSet{X,\mathcal{U}}$ be a uniform space and $B\subseteq X$ a subset. Then
\begin{enumerate}
\item if $B$ is totally bounded, then for all $A\in \entourage_\mathcal{U}$ there exists a finite $S\subseteq X$ such that $B\subseteq \bigcup_{x\in S}Ax$;
\item if $B$ is bounded, then for all $A\in \entourage_\mathcal{U}$ there exists $n\in \N$ and a finite $S\subseteq X$ such that $B\subseteq \bigcup_{x\in S}A^nx$.
\end{enumerate}
The converses hold in a topological uniform space.
\end{lemma}
\begin{proof}
We may simply observe that $\{V\}$ is a uniform cover for all $V\in \entourage_\mathcal{U}$. This proves (1) and (2).

Now assume $\mathcal{U}$ topological. Then $\entourage_\mathcal{U} \in \mathcal{U}$, so each uniform cover contains an entourage. 
\end{proof}

\begin{lemma} \label{singletonsTotallyBounded}
Let $\sSet{X,\mathcal{U}}$ be a uniform space and $x\in X$. Then $\{x\}$ is totally bounded.
\end{lemma}
\begin{proof}
Let $\mathcal{D}$ be a uniform cover. As $\pfilter{x}\otimes \pfilter{x}\in \mathcal{U}$, there exists $A\in \mathcal{D} \cap \pfilter{x}\otimes \pfilter{x}$. Now $(x,x)\in A$, so $\mathcal{C} = \{Ax\}$ is finite and such that $\{x\} \subseteq \bigcup \mathcal{C} = Ax$.
\end{proof}

\begin{lemma} \label{boundedSetsIdeal}
Let $\sSet{X,\mathcal{U}}$ be a uniform space. The set of all totally bounded subsets
\begin{enumerate}
\item is an ideal in $\powerset(X)$;
\item covers $X$.
\end{enumerate}
The same holds for the set of all bounded subsets.
\end{lemma}
\begin{proof}
(1) First we show that a subset $C$ of a bounded set $B$ is bounded. Take an arbitrary uniform cover $\mathcal{D}$ and finite $\mathcal{C}\subseteq \setbuilder{Ax}{A\in \mathcal{D}, x\in X}$ such that $B\subseteq \bigcup \mathcal{C}$. Then $C\subseteq \bigcup \mathcal{C}$, so $C$ is bounded.

Now let both $B$ and $C$ be bounded sets and let $\mathcal{D}$ be a uniform cover. We can find finite $\mathcal{C}, \mathcal{C}'\subseteq \setbuilder{Ax}{A\in \mathcal{D}, x\in X}$ such that $B\subseteq \bigcup \mathcal{C}$ and $C\subseteq \bigcup \mathcal{C}'$. Then $B\cup C \subseteq \bigcup (\mathcal{C}\cup \mathcal{C}')$ and $\mathcal{C}\cup \mathcal{C}'$ is finite.

(2) Every $x\in X$ is an element of a totally bounded set as $x\in \{x\}$, which is bounded by \ref{singletonsTotallyBounded}.

(Bounded) We can repeat the arguments using $\setbuilder{A^nx}{A\in \mathcal{D}, n\in\N, x\in X}$ instead of $\setbuilder{Ax}{A\in \mathcal{D}, x\in X}$.
\end{proof}
\begin{corollary}
Every finite subset of a uniform space is totally bounded.
\end{corollary}

TODO: closure of bounded set is bounded.
\begin{proposition} \label{adherenceBoundedSet}
Let $\sSet{X, \mathcal{U}}$ be a topological uniform space and $B\subseteq X$ a bounded set. Then $\adh_{\Gamma(\mathcal{U})}(B)$ is also bounded.
\end{proposition}
TODO: also for nontopological uniform spaces?
\begin{proof}
Take an arbitrary symmetric $A\in \entourage_\mathcal{U}$. We can find a finite set $F\subseteq X$ and $n\in \N$ such that $\bigcup_{x\in F}A^nx \supseteq B$. Now $\entourage_\mathcal{U}x \subseteq \vicinity_{\Gamma(\mathcal{U})}$ by \ref{uniformContinuityEntourages}, so we have (using \ref{filterGrillIsPrime})
\begin{align*}
x\in \adh_{\Gamma(\mathcal{U})}(B) \iff& B\in \vicinity(x)^\mesh \\
\implies& B \in (\entourage x)^\mesh \\
\implies& \bigcup_{y\in F}A^ny \in (\entourage x)^\mesh \\
\implies& \exists y\in F: A^ny \in (\entourage x)^\mesh \\
\implies& \exists y\in F: A^ny \mesh Ax \\
\implies& \exists y\in F: x\in A^{n+1}y.
\end{align*}
Thus $\bigcup_{x\in F}A^{n+1}x \supseteq \adh_{\Gamma(\mathcal{U})}(B)$.
\end{proof}

\begin{proposition} \label{imageBoundedSet}
Let $f: \sSet{X,\mathcal{U}}\to \sSet{Y, \mathcal{V}}$ be a unifromly continuous function between uniform spaces and $B\subseteq X$ a subset.
\begin{enumerate}
\item If $\mathcal{D}$ is a uniform cover of $\mathcal{V}$, then $(f|f)^{\preimf\imf}(\mathcal{D})$ is a uniform cover of $\mathcal{U}$.
\item If $B$ is (totally) bounded, then $f^\imf(B)$ is also (totally) bounded.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) Assume $\mathcal{D}$ is a uniform cover of $\mathcal{V}$ and take arbitrary $H\in \mathcal{U}$. Then $\upset (f|f)^{\imf\imf}(H)\in \mathcal{V}$, so there exists $A\in \mathcal{D} \cap \upset (f|f)^{\imf\imf}(H)$.
Then there exists $(f|f)^\imf(A')\in (f|f)^{\imf\imf}(H)$ such that $(f|f)^\imf(A') \subseteq A$, or, equivalently, $A'\subseteq (f|f)^\preimf(A)$. Thus $(f|f)^\preimf(A) \in H$.

(2) We prove the statement for boundedness. For total boundedness the proof is similar, fixing $n=1$.

Now take an arbitrary uniform cover $\mathcal{D}'$ of $\mathcal{V}$. As $(f|f)^{\preimf\imf}(\mathcal{D})$ is a uniform cover of $\mathcal{U}$, by point (1), we can find some finite $\mathcal{C} \subseteq \setbuilder{(f|f)^\preimf(A)^nx}{A\in \mathcal{D}', n\in\N, x\in X}$ such that $B\subseteq \bigcup \mathcal{C}$.

Now by \ref{imageFilterComposition} and \ref{principalImageUnderRelationMapping}, we have
\[ (f|f)^\preimf(A)^nx \subseteq (f|f)^\preimf(A^n)x \subseteq f^\preimf\big(A^nf(x)\big). \]
Set $\mathcal{C}' \defeq \setbuilder{A^nf(x)}{(f|f)^\preimf(A^n)x \in \mathcal{C}}$. Thus
\[ B \subseteq \bigcup_{(f|f)^\preimf(A)^nx \in \mathcal{C}}(f|f)^\preimf(A)^nx \subseteq \bigcup_{A^nf(x) \in \mathcal{C}'}f^\preimf\big(A^nf(x)\big) = f^\preimf\Big(\bigcup_{A^nf(x) \in \mathcal{C}'}A^nf(x)\Big), \]
and so also
\[ f^\imf(B) \subseteq \bigcup_{A^nf(x) \in \mathcal{C}'}A^nf(x) = \bigcup \mathcal{C}'. \]
\end{proof}

\begin{proposition} \label{boundednessUniformityInclusion}
Let $X$ be a set, $\mathcal{U} \subseteq \mathcal{V}$ two uniformities on $X$ such that $\mathcal{U} \subseteq \mathcal{V}$ and $B\subseteq X$. Then
\begin{enumerate}
\item if $B$ is $\mathcal{U}$-bounded, then $B$ is $\mathcal{V}$-bounded;
\item if $B$ is $\mathcal{U}$-totally bounded, then $B$ is $\mathcal{V}$-totally bounded.
\end{enumerate}
\end{proposition}
\begin{proof}
Any $\mathcal{V}$-uniform cover is a $\mathcal{U}$-uniform cover.
\end{proof}

\begin{lemma} \label{subspaceBoundedness}
Let $\sSet{X, \mathcal{U}}$ be a uniform space and $A\subseteq B\subseteq X$ subsets.
\begin{enumerate}
\item If $A$ is $\mathcal{U}|_B$-bounded, then it is bounded.
\item If $A$ is $\mathcal{U}|_B$-totally bounded, then it is totally bounded.
\end{enumerate}
\end{lemma}
\begin{proof}
Every uniform cover of $\mathcal{U}$ contains a uniform cover of $\mathcal{U}|_B$.
\end{proof}

TODO: move Cauchy structure above this.
\begin{proposition} \label{imageCauchySequenceTotallyBounded}
Let $\sSet{X,\mathcal{U}}$ be a uniform space and $\seq{x_n}\in X^\N$ a Cauchy sequence. Then $\{x_n\}_{n\in \N}$ is totally bounded.
\end{proposition}
\begin{proof}
Let $\mathcal{D}$ be a uniform cover. Since $\seq{x_n}$ is a Cauchy sequence, we have that $\TailsFilter\seq{x_n}\otimes \TailsFilter\seq{x_n} \in \mathcal{U}$, so $\mathcal{D}\mesh \TailsFilter\seq{x_n}\otimes \TailsFilter\seq{x_n}$. Thus there exists $A\in \mathcal{D}$ and $k\in \N$ such that $\{x_n\}_{n\geq k}\times \{x_n\}_{n\geq k} \subseteq A$. For all $n< k$, we can find $A_n\in\mathcal{D}$ such that $A_n\in \pfilter{x}_n\otimes \pfilter{x}_n$, so $(x_n, x_n)\in A_n$.Set
\[ \mathcal{C} \defeq \{Ax_k\} \cup \setbuilder{A_nx_n}{n < k}. \]
Clearly this set is finite. We finally observe that $\{x_n\}_{n\in\N} \subseteq \bigcup \mathcal{C}$. If $n< k$, then $x_n \in A_nx_n$ by construction. If $n\geq k$, then $x_n \in Ax_k$.
\end{proof}

\subsection{Compactness}
\begin{proposition} \label{compactUltrafilterFactorisation}
Let $\sSet{X,\mathcal{U}}$ be a compact uniform space. If $H$ is an ultrafilter in $\mathcal{U}$, then 
\begin{enumerate}
\item $\proj_1^{\imf\imf}[H]\otimes \proj_2^{\imf\imf}[H] \in\mathcal{U}$;
\item $\proj_1^{\imf\imf}[H]$ and $\proj_2^{\imf\imf}[H]$ converge in $\Gamma(\Xi(\mathcal{U}))$;
\item $\lim\big(\proj_1^{\imf\imf}[H]\big) = \lim\big(\proj_2^{\imf\imf}[H]\big)$.
\end{enumerate}
\end{proposition}
\begin{proof}
Let $H$ be an ultrafilter in $\mathcal{U}$. Then $\proj_1^{\imf\imf}[H]$ and $\proj_2^{\imf\imf}[H]$ are ultrafilters by \ref{imageFilterProperties}. By compactness there exist $x,y\in X$ such that $\proj_1^{\imf\imf}[H] \overset{\Gamma(\Xi(\mathcal{U}))}{\longrightarrow} x$ and $\proj_2^{\imf\imf}[H] \overset{\Gamma(\Xi(\mathcal{U}))}{\longrightarrow} y$. Thus $\proj_1^{\imf\imf}[H]\otimes \pfilter{x}\in\mathcal{U}$ and $\proj_2^{\imf\imf}[H]\otimes \pfilter{y}\in\mathcal{U}$. 

By \ref{filterCompositionFactorisationLemma} we have
\[ \pfilter{x}\otimes \pfilter{y} = \pfilter{x}\otimes \proj_1^{\imf\imf}[H]; H; \proj_2^{\imf\imf}[H] \otimes \pfilter{y} \in \mathcal{U}. \]

Finally
\[ \proj_1^{\imf\imf}[H] \mathrel{\Xi(\mathcal{U})} \pfilter{x}, \quad \pfilter{x} \mathrel{\Xi(\mathcal{U})} \pfilter{y} \quad\text{and}\quad \pfilter{y}\mathrel{\Xi(\mathcal{U})} \proj_2^{\imf\imf}[H], \]
so $\proj_1^{\imf\imf}[H] \mathrel{\Xi(\mathcal{U})} \proj_2^{\imf\imf}[H]$ by transitivity. Thus $\proj_1^{\imf\imf}[H]\otimes \proj_2^{\imf\imf}[H] \in \mathcal{U}$.
\end{proof}

\subsection{Depth properties}
\subsubsection{Choquet uniform spaces}
\begin{definition}
Let $\sSet{X,\mathcal{U}}$ be a uniform space. We say $\mathcal{U}$ is \udef{uniformly Choquet} if for all $H\in \powerfilters(X^2)$,
\[ H\in\mathcal{U} \qquad\iff\qquad \text{$I \in \mathcal{U}$ for all ultrafilters $I$ such that $H\subseteq I$.} \]
\end{definition}

\begin{lemma}
Let $\sSet{X,\mathcal{U}}$ be a uniform space. If $\mathcal{U}$ is uniformly Choquet, then $\Gamma(\Xi(\mathcal{U}))$ is Choquet.
\end{lemma}
\begin{proof}
????????????????
\end{proof}


\section{Cauchy structure}
\begin{definition}
Let $\sSet{X,R}$ be a uniform relation space and let $\mathcal{F}\subseteq \powerfilters(X)$ be defined by
\[ F\in \mathcal{F} \qquad\defequiv\qquad F\mathrel{R} F. \]
Then $\mathcal{F}$ is called the \udef{induced Cauchy structure} and $\sSet{X,\mathcal{F}}$ is called the \udef{induced Cauchy space}.
\end{definition}
\begin{lemma}
The induced Cauchy space $\sSet{X, \mathcal{F}}$ of a uniform relation space $\sSet{X,R}$ is a Cauchy space.

If the uniform relation is of finite depth, then the induced Cauchy space is too.
\end{lemma}
\begin{proof}
We immediately have $\pfilter{x}\in\mathcal{F}$ for all $x\in X$ because $\pfilter{x}\mathrel{R} \pfilter{x}$.

We need to show upwards closure. Let $F\in \mathcal{F}$, meaning $F\mathrel{R} F$, and $F\subseteq G$. By upwards closure of $F\mathrel{R}$, we have $F\mathrel{R} G$. By symmetry we have $G\mathrel{R} F$ and by transitivity $G\mathrel{R} G$, so $G\in\mathcal{F}$.

Finally, assume the uniform relation is of finite depth. Take $F,G\in \mathcal{F}$ such that $F\amesh G$. Then $F\mathrel{F}G$ by \ref{uniformRelationRelatedElementLemma}.
From $F\mathrel{R}F$ and $F\mathrel{R}G$, we conclude $F\mathrel{R}F\cap G$ by finite depth, so $F\cap G$ is Cauchy by \ref{uniformRelationRelatedElementLemma}.
\end{proof}

\begin{lemma} \label{uniformlyConvergentImpliesCauchy}
Let $\sSet{X, R}$ be a uniform relation space and $F,G\in\powerfilters(X)$.
\begin{enumerate}
\item If $F\mathrel{R}G$, then $F$ and $G$ are Cauchy filters.
\item If $F$ is uniformly convergent, then $F$ is a Cauchy filter
\end{enumerate}
\end{lemma}
\begin{proof}
(1) We have $FRG$ and $GRF$ by symmetry, so $FRF$ by transitivity. Similarly, $GRG$.

(2) Uniformly convergent means $FR\pfilter{x}$ for some $x\in X$. We can then apply (1).
\end{proof}

\begin{lemma}
Let $\sSet{X,R}$ be a uniform relation space with induced Cauchy structure $\mathcal{F}$, $F\in \powerfilters(X)$ and $x\in X$. Then
\begin{enumerate}
\item if $F\cap\pfilter{x} \in \mathcal{F}$, then $F\overset{\Gamma(R)}{\longrightarrow} x$;
\item the converse holds if $\Gamma(R)$ is a Kent space.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) By upwards closure, we have that $\big(F\cap \pfilter{x}\big)\mathrel{R}\big(F\cap \pfilter{x}\big)$ implies $F\mathrel{R}\pfilter{x}$, so $F\overset{\Gamma(R)}{\longrightarrow} x$.

(2) If $\Gamma(R)$ is a Kent space, then $F\overset{\Gamma(R)}{\longrightarrow} x$ implies $(F\cap\pfilter{x})\overset{\Gamma(R)}{\longrightarrow} x$. So $(F\cap\pfilter{x})\mathrel{R}\pfilter{x}$ and thus $\big(F\cap \pfilter{x}\big)\mathrel{R}\big(F\cap \pfilter{x}\big)$ by \ref{uniformRelationRelatedElementLemma}.
\end{proof}
TODO: when is $\Gamma(R)$ a Kent space?

\begin{lemma} \label{continuousImageOfCauchy}
Let $\sSet{X,\mathcal{U}}$, $\sSet{Y,\mathcal{V}}$ be uniform spaces and $f: X\to Y$ a uniformly continuous function. If $F\in\powerfilters(X)$ is Cauchy, then $\upset f^{\imf\imf}(F)$ is also Cauchy.
\end{lemma}
\begin{proof}
If $F\mathrel{R_\mathcal{U}}F$, then $\upset f^{\imf\imf}(F)\mathrel{R_\mathcal{V}}\upset f^{\imf\imf}(F)$ by uniform continuity.
\end{proof}

\begin{proposition}
Let $X$ be a set, $R$ a uniform relation on $X$ and $C$ a Cauchy structure, both of finite depth. We define a Cauchy structure $\Pi(R)$ of finite depth and a uniform relation $\Lambda(C)$ of finite depth by
\begin{align*}
\forall F \in \powerfilters(X): \quad F\in \Pi(R) \quad &\defequiv \quad F\mathrel{R}F \; \\
\forall (F,G)\in \powerfilters(X)^2: \quad (F,G)\in \Lambda(C) \quad & \defequiv \quad F\cap G \in C.
\end{align*}
Then the functions
\begin{align*}
\Pi &: \{\text{uniform relations of finite depth on $X$}\} \to \{\text{Cauchy structures of finite depth on $X$}\} \\
\Lambda &: \{\text{Cauchy structures of finite depth on $X$}\} \to \{\text{uniform relations of finite depth on $X$}\}
\end{align*}
are mutually inverse order-preserving functions.
\end{proposition}
TODO $\Pi(R)$ makes sense even if not finite depth.
\begin{proof}
To prove $\Pi(R)$ is a Cauchy structure of finite depth, we verify the definition
\begin{itemize}
\item For all $x\in X$ we have $\pfilter{x}R\pfilter{x}$, so $\pfilter{x}\in \Pi(R)$.
\item Let $F,G\in \powerfilters(X)$ be filters such that $F\in \Pi(C)$ and $F\subseteq G$. Since $F\mathrel{R}F$, we have  $G\mathrel{R}G$ by \ref{uniformRelationUpwardsClosure}.
\item Let $F,G\in\Pi(R)$ be such that $F\amesh G$. Then $F\mathrel{R}F$ and $G\mathrel{R}G$, so $F\mathrel{R}G$ by \ref{uniformRelationRelatedElementLemma}. Since $R$ is of finite depth, we have $F\mathrel{R}(F\cap G)$, so $(F\cap G)\mathrel{R}(F\cap G)$ by \ref{uniformRelationRelatedElementLemma} and thus $F\cap G\in \Pi(R)$.
\end{itemize}
To prove $\Lambda(C)$ is a uniform relation of finite depth, we verify the definition
\begin{itemize}
\item We immediately have $\pfilter{x}\mathrel{\Lambda(C)}\pfilter{x}$ for all $x\in X$, since $\pfilter{x}\in C$.
\item Suppose $F,G,H\in\powerfilters(X)$ are filters such that $F\mathrel{\Lambda(C)}G$ and $G\subseteq H$. Then $F\cap G\in C$ and, since $F\cap G \subseteq F\cap H$, we have $G\cap H\in C$ by upwards closure. Thus $F\mathrel{\Lambda(C)}H$. This shows upwards closure of $F\mathrel{\Lambda(C)}$.
\item The relation $\mathrel{\Lambda(C)}$ is clearly symmetric by construction.
\item Let $F,G,H\in \powerfilters(X)$ be such that $F\mathrel{\Lambda(C)}G\mathrel{\Lambda(C)}H$. Then $(F\cap G)\in C$ and $(G\cap H)\in C$. Now $(F\cap G) \vee (G\cap H) \subseteq G \neq \powerset(X)$, so $(F\cap G) \amesh (G\cap H)$ by \ref{joinProperFilter} and so $F\cap G \cap H \in C$ by finite depth. By upwards closure, $F\cap H\in C$ and thus $F\mathrel{\Lambda(C)} H$, which shows transitivity.
\item To show finite depth, take $F,G,H\in \powerfilters(X)$ such that $F\mathrel{\Lambda(C)}G$ and $F\mathrel{\Lambda(C)}H$. Then $F\cap G\in C$ and $F\cap H\in C$. Since $(F\cap G)\vee (F\cap H) \subseteq F\neq \powerset(X)$, we have $(F\cap G)\amesh (F\cap H)$ by \ref{joinProperFilter} and so $F\cap G\cap H\in C$ by finite depth. Thus $F\mathrel{\Lambda(C)}(G\cap H)$, which shows finite depth.
\end{itemize}
By construction it is clear that $\Pi$ and $\Lambda$ are order-preserving.

We just need to show that they are mutually inverse. We first show that $(\Pi\circ\Lambda)(C) = C$ for all Cauchy structures $C$ on $X$. This follows from
\[ F\in (\Pi\circ\Lambda)(C) \iff F\mathrel{\Lambda(C)}F \iff F\cap F \in C \iff F\in C. \]
Now we show that $(\Lambda \circ\Pi)(R) = R$ for all uniform relations $R$ on $X$. This follows from
\[ (F, G)\in (\Lambda \circ\Pi)(R) \iff F\cap G\in \Pi(R) \iff (F\cap G)\mathrel{R}(F\cap G) \iff (F,G)\in R, \]
where the last equivalence is given by \ref{uniformRelationOfFiniteDepthLemma}.
\end{proof}

\subsection{Functions}

\begin{proposition} \label{CauchyContinuousUniformRelationPreserving}
Let $\sSet{X,R}, \sSet{Y,S}$ be uniform relation spaces of finite deth and $f: X\to Y$ a function. Then
\begin{enumerate}
\item if $f: \sSet{X, R} \to \sSet{Y, S}$ is relation-preserving, then $f: \sSet{X, \Pi(R)} \to \sSet{Y, \Pi(S)}$ is Cauchy continuous;
\item if $\sSet{X,R}$ is of finite depth and $f: \sSet{X, \Pi(R)} \to \sSet{Y, \Pi(S)}$ is Cauchy continuous, then $f: \sSet{X, R} \to \sSet{Y, S}$ is relation-preserving.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) Take $F\in \Pi(R)$. Then $F\mathrel{R}F$, so $\upset f^{\imf\imf}(F)\mathrel{S} \upset f^{\imf\imf}(F)$ and thus $\upset f^{\imf\imf}(F)\in \Pi(S)$.

(2) Suppose $F\mathrel{R}G$. By finite depth, $(F\cap G)\mathrel{R}(F\cap G)$. By Cauchy continuity we have $\upset f^{\imf\imf}(F\cap G)\mathrel{S} \upset f^{\imf\imf}(F\cap G)$ and, by \ref{upsetPreimageImageGaloisConnection}, $\big(\upset f^{\imf\imf}(F)\cap \upset f^{\imf\imf}(G)\big)\mathrel{S} \big(\upset f^{\imf\imf}(F) \cap \upset f^{\imf\imf}(G)\big)$. Thus $\upset f^{\imf\imf}(F)\mathrel{S} \upset f^{\imf\imf}(G)$ by upwards closure.
\end{proof}

\subsection{Completeness}

\begin{definition}
A uniform relation space $\sSet{X,R}$ is called \udef{complete} if all Cauchy filters converge.
\end{definition}

A uniform space is complete iff for all $F\in\powerfilters(X)$,
\[ F\mathrel{R}F \quad\iff\quad \exists x\in X:\; F\mathrel{R}\pfilter{x}. \]

\begin{proposition} \label{compactImpliesComplete}
Let $\sSet{X,R}$ be a uniform relation space. If $\sSet{X,\Gamma(R)}$ is compact, then $\sSet{X,R}$ is complete.
\end{proposition}
\begin{proof}
Assume $\sSet{X,\Gamma(R)}$ is compact and take $F\in\powerfilters(X)$ such that $F\mathrel{R}F$. Then we can find an ultrafilter $F'\supseteq F$ by the ultrafilter lemma \ref{ultrafilterLemma}. By compactness $F'$ converges, so $F'\mathrel{R}\pfilter{x}$ for some $x\in X$. Then $F \mathrel{R}\pfilter{x}$ by \ref{uniformRelationUpwardsClosure}, so $F$ is convergent. Because $F$ was chosen arbitrarily this makes $\sSet{X,R}$ complete.
\end{proof}

\begin{proposition} \label{closedComplete}
Let $\sSet{X,\mathcal{U}}$ be a uniform space and $A\subseteq X$ a subset. Then
\begin{enumerate}
\item if $X$ is complete and $A$ is closed, then $A$ is complete;
\item if $X$ is Hausdorff and $A$ is complete, then $A$ is closed.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) Let $F\in\powerfilters(A)$ be a Cauchy filter in $A$ and $\iota: A\hookrightarrow X$ the inclusion function. Then $\upset \iota^{\imf\imf}(F)\in\powerfilters(X)$ is a Cauchy filter in $X$. So $\upset \iota^{\imf\imf}(F)$ converges to $x$ in $X$ by completeness of $X$. Now, by \ref{properSubsemilatticeLemma},
\[ A \in \upset \iota^{\imf\imf}(F) \subseteq \big(\upset \iota^{\imf\imf}(F)\big)^{\mesh} \subseteq \vicinity_{\Gamma(\mathcal{U})}(x)^{\mesh}, \]
so $x\in \adh_{\Gamma(\mathcal{U})}(A) = A$. Thus $F$ converges to $x$ in $\Gamma(\mathcal{U})|_A$ by \ref{initialFinalConvergence} and by \ref{subspaceUniformConvergence} this is the same as uniform convergence in $A$ (i.e.\ in $\Gamma(\mathcal{U}|_A)$).

(2) We need to show that $\adh(A)\subseteq A$. Take $x\in \adh(A)$. By \ref{principalAdherenceInherence}, this means that there exists a filter $F\in \powerfilters(X)$ that converges to $x$ and is such that $A\in F$. By \ref{uniformRelationRelatedElementLemma}, we have that $F$ is Cauchy. By \ref{setTraceFilterLemma}, we have $F = \upset(\iota^{\imf\imf}\circ \iota^{\preimf\imf})(F)$. Then we have, using \ref{functionsOfProductFilters} and \ref{initialFinalUniformity},
\begin{align*}
F\otimes F \in \mathcal{U} &\iff \big(\upset(\iota^{\imf\imf}\circ \iota^{\preimf\imf})(F)\big)\otimes \big(\upset(\iota^{\imf\imf}\circ \iota^{\preimf\imf})(F)\big) \in \mathcal{U} \\
&\iff \upset(\iota|\iota)^{\imf\imf}\big((\iota|\iota)^{\preimf\imf}(F)\otimes (\iota|\iota)^{\preimf\imf}(F)\big) \in \mathcal{U} \\
&\iff \upset (\iota|\iota)^{\preimf\imf}(F)\otimes (\iota|\iota)^{\preimf\imf}(F) \in \mathcal{U}|_A.
\end{align*}
Thus $\upset (\iota|\iota)^{\preimf\imf}(F)$ is a Cauchy filter in $A$, so it converges to some $a\in A$. By continuity of the inclusion, we have that $\upset(\iota^{\imf\imf}\circ \iota^{\preimf\imf})(F) = F$ also converges to $a$. As $\Gamma(\mathcal{U})$ is Hausdorff, we have $x = a$, so $x\in A$. This shows indeed that $\adh(A)\subseteq A$.
\end{proof}

\begin{proposition}
Let $\sSet{X,\mathcal{U}}$ be a uniform space and $A\subseteq X$ a dense subset. Then $X$ is complete \textup{if and only if} every Cauchy filters on $A$ converges.
\end{proposition}
\begin{proof}
The direction $\Rightarrow$ is immediate.

Now assume every Cauchy filter on $A$ converges. TODO
\end{proof}

\begin{proposition}
Let $\sSet{X,\mathcal{U}}$ be a uniform space and $\sSet{X', \mathcal{U}'}$ the associated Hausdorff space. Then $X$ is complete \textup{if and only if} $X'$ is complete.
\end{proposition}
\begin{proof}
TODO
\end{proof}

\begin{proposition}
Let $\sSet{X,\mathcal{U}}$ be a uniform space, $A\subseteq X$ a dense subset and $\sSet{Y,\mathcal{V}}$ a complete Hausdorff uniform space. Let $f: A\to Y$ be uniformly continuous. Then there exists a unique continuous extension $f': X\to Y$. This extension is uniformly continuous.
\end{proposition}
\begin{proof}

\end{proof}

\subsubsection{Completion}
\begin{definition}
Let $\sSet{X,\mathcal{U}}$ be a uniform space. A \udef{completion} of $X$ is a pair $\sSet{\sSet{Y,\mathcal{V}}, f: X\to Y}$ such that
\begin{itemize}
    \item $\sSet{Y,\mathcal{V}}$ is a complete uniform space;
    \item $f: X\to Y$ is an embedding;
    \item $\im(f)$ is a dense subset of $Y$.
\end{itemize}
\end{definition}

TODO: \url{https://www.cambridge.org/core/services/aop-cambridge-core/content/view/9850E16E7AD6EE3658C2FF9E3B396D34/S000497270004404Xa.pdf/div-class-title-regular-completions-of-uniform-convergence-spaces-div.pdf}

\url{https://link.springer.com/content/pdf/10.1007/BF01362537.pdf}


\begin{lemma}
Let $\sSet{X, \mathcal{U}}$ be a uniform space of finite depth, $\sSet[\big]{\sSet{Y, \mathfrak{D}}, k: X\to Y}$ a Cauchy completion of finite depth of $\sSet{X, \Xi(\mathcal{U})}$. Let $H\in \mathcal{U}$ and $G\in \mathfrak{D}$. Then
\begin{enumerate}
\item there exists $F\in\powerfilters(Y)$ such that
\begin{enumerate}
\item $F\in \mathfrak{D}$;
\item $F\subseteq G$;
\item $k^{\preimf\imf}(F)$ is a proper filter in $\Xi(\mathcal{U})$;
\end{enumerate}
\item $\proj_1^{\imf\imf}\big((k|k)^{\imf\imf}(H); G\otimes G\big)\in \mathfrak{D}$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) By completeness $G$ converges to some $y\in Y$. Since $\im(k)$ is dense in $Y$, there exists a filter $F_0\in \mathfrak{D}$ in $\im(k)$ that converges to $y$. By finite depth, $F\defeq F_0\cap G \in \mathfrak{D}$. By construction $k^{\preimf\imf}(F)$ is proper. We also have $F\subseteq \upset k^{\imf\imf}\big(k^{\preimf\imf}(F)\big) \in \mathfrak{D}$, so $k^{\preimf\imf}(F) \in \Xi(\mathcal{U})$.

(2) Take an $F\in \mathfrak{D}$ as in (1). Then $H; \big(k^{\preimf\imf}(F) \otimes k^{\preimf\imf}(F)\big) \in \mathcal{U}$. Since this filter is factorisible, we have $\upset \proj_1^{\imf\imf}\Big(H; \big(k^{\preimf\imf}(F) \otimes k^{\preimf\imf}(F)\big)\Big) \in \Xi(\mathcal{U})$. As $k$ is Cauchy continuous, we have
\[ \upset (k^{\imf\imf}\circ \proj_1^{\imf\imf})\Big(H; \big(k^{\preimf\imf}(F) \otimes k^{\preimf\imf}(F)\big)\Big) \in \mathfrak{D}. \]
Then we can calculate
\begin{align*}
\upset (k^{\imf\imf}\circ \proj_1^{\imf\imf})\Big(H; \big(k^{\preimf\imf}(F) \otimes k^{\preimf\imf}(F)\big)\Big) &= \upset (\proj_1 \circ (k|k))^{\imf\imf}\Big(H; \big(k^{\preimf\imf}(F) \otimes k^{\preimf\imf}(F)\big)\Big) \\
&\subseteq \upset \proj_1^{\imf\imf}\Big((k|k)^{\imf\imf}(H); (k|k)^{\imf\imf}\big(k^{\preimf\imf}(F) \otimes k^{\preimf\imf}(F)\big)\Big) \\
&= \upset \proj_1^{\imf\imf}\Big((k|k)^{\imf\imf}(H);\big((k^\imf\circ k^\preimf)^{\imf}(F) \otimes (k^\imf\circ k^\preimf)^{\imf}(F)\big)\Big) \\
&= \upset \proj_1^{\imf\imf}\Big((k|k)^{\imf\imf}(H);\big((k^\imf\circ k^\preimf)^{\imf}(F) \otimes G\big)\Big) \\
&= \upset \proj_1^{\imf\imf}\big((k|k)^{\imf\imf}(H);F|_{\im(k)} \otimes G\big) \\
&= \upset \proj_1^{\imf\imf}\big((k|k)^{\imf\imf}(H);F \otimes G \big) \\
&\subseteq \upset \proj_1^{\imf\imf}\big((k|k)^{\imf\imf}(H);G \otimes G\big).
\end{align*}
This implies $\proj_1^{\imf\imf}\big((k|k)^{\imf\imf}(H); G\otimes G\big)\in \mathfrak{D}$.
\end{proof}

\begin{proposition}
Let $\sSet{X, \mathcal{U}}$ be a uniform space of finite depth. Let $\sSet[\big]{\sSet{Y, \mathfrak{D}}, k: X\to Y}$ be a Cauchy completion of finite depth of $\sSet{X, \Xi(\mathcal{U})}$. Then
\begin{enumerate}
\item we can find a uniformity $\mathcal{V}$ on $Y$ such that
\begin{enumerate}
\item $\Xi(\mathcal{V}) = \mathfrak{D}$;
\item $\sSet[\big]{\sSet{Y, \mathcal{V}}, k: X\to Y}$ is a uniform completion of $\sSet{X, \mathcal{U}}$;
\end{enumerate} 
\item if $\sSet{Y, \mathfrak{D}}$ is Hausdorff, then $\sSet{Y, \mathcal{V}}$ is Hausdorff.
\end{enumerate}
\end{proposition}
Point (1) is not immediate, because there may be filters in $\mathcal{U}$ whose factorisation is not in $\mathcal{U}$. These filters may be mapped by $k$ to filters outside the minimal (i.e.\ factorisable) uniformity on $Y$.
\begin{proof}
Since everything is assumed finite depth, we can identify the uniform relations on $X$ with the Cauchy structures on $X$ and thus we can take $\Theta$ and $\Xi$ to map between uniformities and Cauchy structures.

(1) Let $\mathcal{V}$ be the final uniformity generated by $\{k: \sSet{X, \mathcal{U}} \to Y,\; \id_Y: \sSet{Y, \Theta(\mathfrak{D})} \to Y\}$.

(a) We first show that $\Xi(\mathcal{V}) = \mathfrak{D}$. By construction we have that $\Xi(\mathcal{V}) \supseteq \mathfrak{D}$.

Now take a Cauchy filter $F\in \Xi(\mathcal{V})$, so $F\otimes F\in \mathcal{V}$. By \ref{initialFinalUniformity}, it contains a filter that is a composition of filters of the form $\upset (k|k)^{\imf\imf}(H)$, for some $H\in \mathcal{U}$, and filters in $\Theta(\mathfrak{D})$. WLOG we may take the filters in $\Theta(\mathfrak{D})$ to be of the form $G\otimes G$, for some $G\in \mathfrak{D}$.

If the composition contained in $F$ starts with a filter in $\Theta(\mathfrak{D})$, i.e.\ $(G\otimes G); (k|k)^{\imf\imf}(H); \ldots \subseteq F\otimes F$, then we can apply $\proj_1$ to this inclusion to get $G \subseteq F$ by \ref{componentInclusionsFilterComposition} and \ref{projectionsOfProductFilter}. This implies $F\in \mathfrak{D}$.
If $F$ ends with a filter in $\Theta(\mathfrak{D})$ a similar argument holds.

Now consider the case where the composition contained in $F\otimes F$ does not start with a filter in $\Theta(\mathfrak{D})$. First suppose $(k|k)^{\imf\imf}(H) \subseteq F\otimes F$ for some $H\in\mathcal{U}$. Then, by \ref{upsetPreimageImageGaloisConnection},
\[ H\subseteq \upset (k|k)^{\preimf\imf}(F\otimes F) = \upset k^{\preimf\imf}(F)\otimes k^{\preimf\imf}(F), \]
which implies that $\upset k^{\preimf\imf}(F) \in \Xi(\mathcal(U))$. Since $k$ maps Cauchy filters to Cauchy filters (\ref{preservationUniformStructure} and \ref{CauchyContinuousUniformRelationPreserving}), we have
\[ F \supseteq \upset (k^\imf \circ k^{\preimf})^{\imf}(F) \in \mathfrak{D}. \]
Finally suppose we have the case
\[ (k|k)^{\imf\imf}(H);(G\otimes G); \ldots \subseteq F\otimes F. \]
Then, by \ref{componentInclusionsFilterComposition},
\[ \upset\proj_1^{\imf\imf} \big((k|k)^{\imf\imf}(H);(G\otimes G)\big) \subseteq \upset\proj_1^{\imf\imf} \big((k|k)^{\imf\imf}(H);(G\otimes G);\ldots \big) \subseteq \upset\proj_1^{\imf\imf}(F\otimes F) = F, \]
so $F\in \mathfrak{D}$.

(b) Finally we show that $k$ is an embedding. That it is injective was assumed and that it is uniformly continuous has already been proven. Suppose $H\in \powerfilters(X^2)$ is such that $\upset(k|k)^{\imf\imf}(H) \in \mathcal{V}$. We need to show that $H\in\mathcal{U}$.

Again we use \ref{initialFinalUniformity} and consider the different cases. If $\upset(k|k)^{\imf\imf}(H') \subseteq \upset(k|k)^{\imf\imf}(H)$ for some other $H'\in \mathcal{U}$, so $H'\subseteq H$ by injectivity and we conclude by upwards closure. In all other cases, we can use the previous arguments to see that $\upset(k|k)^{\imf\imf}(H) \in \Theta(\mathfrak{D})$. Since $k$ is assumed to be a Cauchy embedding, we have $H\in (\Theta\circ \Xi)(\mathcal{U}) \subseteq \mathcal{U}$.

(2) Immediate, since Hausdorffness depends only on the convergence which depends only on the Cauchy structure $\Xi(\mathcal{V}) = \mathfrak{D}$.
\end{proof}


\subsubsection{Other completion constructions}
\begin{proposition}
Let $\sSet{X, \mathcal{U}}$ be a topological uniform space. Then
\begin{enumerate}
\item $X$ has a completion $\hat{X}$;
\item if $X$ is Hausdorff, then $\hat{X}$ can be taken to be Hausdorff.
\end{enumerate}
\end{proposition}
TODO: can we relax the hypothesis of topologicity? TODO: Construction with gauges (?) See Page.
\begin{proof}
(1) Let $\hat{X}$ be the set of Cauchy filters on $X$. For all $V\in\entourage_\mathcal{U}$, define the set
\[ V^* \defeq \setbuilder{(F,G)\in \hat{X}^2}{\exists B\in F\cap G: \; B\times B\subseteq V} \]
and consider the function $f: X\to \hat{X}: x\mapsto \pfilter{x}$.
\begin{itemize}
\item We first show that $\entourage_{\hat{X}} \defeq \upset\setbuilder{V^*}{V\in \entourage_\mathcal{U}}$ is the entourage filter of a topological uniform space.

Note that $\entourage_{\hat{X}}$ is a filter. Upwards closure is immediate. Now take $V,W\in \entourage_\mathcal{U}$. Then $(V\cap W)^* \subseteq V^*$ and $(V\cap W)^* \subseteq W^*$, so $(V\cap W)^* \subseteq V^*\cap W^*$, which implies that $V^*\cap W^*\in \entourage_{\hat{X}}$.

Now we use \ref{entourageLemma}. For the first point, take arbitrary $V^*\in \entourage_{\hat{X}}$. Take arbitrary $F\in \hat{X}$. Since $F$ is Cauchy, we have $V \in F\otimes F$. Thus there exist $B,B'\in F$ such that $B\times B'\subseteq V$. We may replace $B$ by $B\cap B'$, so $B\times B\subseteq V$. This implies that $(F,F) \in V^*$. Since the choice of $F\in \hat{X}$ was arbitrary, we have $\entourage_{\hat{X}}\subseteq \upset \{\id_{\hat{X}}\}$.

Since $(V^*)^\transp = V^*$, we have $\entourage_{\hat{X}}^\transp = \entourage_{\hat{X}}$ by construction.

Finally take $V^*\in \entourage_{\hat{X}}$. Then we can find $W\in \entourage_\mathcal{U}$ such that $W;W\subseteq V$. I claim that $W^*;W^* \subseteq V^*$. Indeed, take $(F,G), (G,H)\in W^*$. Then we can find $B\in F\cap G$ and $B'\in G\cap H$ such that $B\times B\subseteq W$ and $B'\times B'\subseteq W$. Then $B\times (B\cap B')\subseteq W$ and $B'\times (B\cap B')\subseteq W$, so $(B\cup B')\times (B\cap B')\subseteq W$. Similarly, $(B\cap B')\times (B\cup B')\subseteq W$. This means that $(B\cup B')\times (B\cup B')\subseteq W;W \subseteq V$, by \ref{compositionProductFilters} since $B, B'\in G$ and so $B\mesh B'$. Since $B\cup B'\in F\cap H$, we have $(F,H)\in V^*$. By \ref{entourageLemma}, we conclude that $\entourage_{\hat{X}}$ is the entourage filter of a topological uniformity on $\hat{X}$.

\item Next we show that $f$ is an embedding, for which we use \ref{embeddingTopologicalUniformity}. It is clearly injective.

Now take $x,y\in X$. We have
\begin{align*}
(f|f)(x,y) = (\pfilter{x}, \pfilter{y})\in V^* &\iff \exists B\in \pfilter{x}\cap\pfilter{y}: \; B\times B\subseteq V \\
&\iff \exists B \subseteq X: \; \big(x,y\in B\big) \land \big(B\times B\subseteq V\big) \\
&\iff \{x,y\}\times \{x,y\}\subseteq V \\
&\iff \big((x,y)\in V\big)\land \big((y,x)\in V\big) \\
&\iff (x,y)\in V\cap V^\transp.
\end{align*}
Thus, for all symmetric $V\in \entourage_\mathcal{U}$, we have $(f|f)^{\imf}(V) = V^* \cap \im(f)^2$. Since $\entourage_\mathcal{U}$ has a symmetric base, this implies $\upset(f|f)^{\imf\imf}(\entourage_\mathcal{U}) = \entourage_{\mathcal{V}}|_{\im(f)^2}$. Thus we conclude that $f$ is an embedding, by \ref{embeddingTopologicalUniformity}.

\item Now we show that $\im(f)$ is dense in $\hat{X}$.
For this we use \ref{denseIffMeshesWithAllVicinities}. By \ref{topologicalInducedUniformConvergence}, every vicinity in $\hat{X}$ contains a set of the form $V^*(F)$, for some $V\in \entourage_\mathcal{U}$ and $F\in\hat{X}$. Since $F$ is a Cauchy filter, there exists a (non-empty) $B\in F$ such that $B\times B\subseteq V$. Pick any $x\in B$. Since $B\in \pfilter{x}$, we have $(F, \pfilter{x})\in V^*$ and thus $f(x) = \pfilter{x} \in V^*(F)$.

\item Finally we show that $\hat{X}$ is complete.
\end{itemize}
(2) 
\end{proof}

\subsection{Precompactness}
\begin{definition}
Let $\sSet{X,R}$ be a uniform relation space, $F\in\powerfilters(X)$ a filter and $A\subseteq X$.
Then 
\begin{itemize}
\item we call $F$ \udef{precompactoid} if every ultrafilter that contains $F$ is a Cauchy filter;
\item we call $X$ \udef{precompact} if $\{X\}$ is precompactoid.
\end{itemize}
\end{definition}

\begin{proposition} \label{compactPrecompactComplete}
A uniform space is compact \textup{if and only if} it is precompact and complete.
\end{proposition}
\begin{proof}
Th direction $\Rightarrow$ is given by \ref{uniformlyConvergentImpliesCauchy} and \ref{compactImpliesComplete}.

For the other direction: By precompactness, every ultrafilter is an Cauchy filter. By completeness, every Cauchy filter (and thus every ultrafilter) converges.
\end{proof}

\begin{proposition} \label{precompactTotallyBounded}
Let $\sSet{X,\mathcal{U}}$ be a uniform space. 
\begin{enumerate}
\item if $X$ is precompact, then $X$ is totally bounded;
\item if $\mathcal{U}$ is symmetric, then the converse also holds.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) Assume $X$ is precompact and, towards a contradiction, that there exists a uniform cover $\mathcal{D}$ such that there is no finite subcover of $\setbuilder{Ax}{A\in \mathcal{D}, x\in X}$. Then
\[ \setbuilder{(A_0x_0\cup \ldots \cup A_nx_n)^c}{n\in \N; A_0,\ldots, A_n \in \mathcal{D}; x_0, \ldots, x_n\in X} \]
is a filter base and does not contain $\emptyset$, so the filter is generates is proper and we can find an ultrafilter $F$ that contains it by the ultrafilter lemma \ref{ultrafilterLemma}.

Now $F$ is Cauchy, so $F\otimes F\in \mathcal{U}$ and thus $\mathcal{D}\mesh F$, i.e.\ there exists a $A\in \mathcal{D}\cap F\otimes F$. Then $Ax\in F$ for some $x\in X$ by \ref{principalImageOfInProductFilter}. By construction of $F$, we also have $(Ax)^c\in F$. Thus $\emptyset =  Ax \cap (Ax)^c \in F$, so $F$ is trivial and not an ultrafilter. This is a contradiction.

(2) Assume, towards a contradiction, that $X$ is not precompact. Then there exists an ultrafilter $F$ that is not Cauchy. This means that $H \not\subseteq F\otimes F$ for all symmetric $H\in\mathcal{U}$ and, in particular $H;H \not\subseteq F\otimes F$. As $H;H$ is generated by sets of the form $A;A$, where $A\in H$ is symmetric, we can find a set of this form that is not an element of $F\otimes F$. Let $\mathcal{D}$ consist of a set $A\in H$ such that $A;A\notin F\otimes F$ for all for all symmetric $H\in \mathcal{U}$. As $\mathcal{U}$ is symmetric, each $H'\in \mathcal{U}$ contains a symmetric $H$ and the corresponding $A$ is an element of $H'$. This means that $\mathcal{D}$ is a uniform cover.

By assumption, there exists a finite subset $\setbuilder{A_0x_0, \ldots, A_nx_n}{\seq{A_k}_{k=0}^n\in \mathcal{D}^\N; \seq{x_k}_{k=0}^n \in X^\N}$ that covers $X$, so $A_0x_0 \cup \ldots \cup A_nx_n = X \in F$. Now $F$ is prime by \ref{booleanMaximalFiltersIdeals} and thus at least one $A_0x_0, \ldots, A_nx_n$ is an element of $F$. Call this $Ax$.

In other words, there exists $A\in \mathcal{D}$ and $x\in X$ such that $Ax \in F$. By symmetry, $xA\in F$. Thus $A;A\in F\otimes F$ by \ref{principalImageOfInProductFilter}. This is a contradiction.
\end{proof}
\begin{corollary} \label{compactImpliesBounded}
Let $\sSet{X,\mathcal{U}}$ be a uniform space and $A\subseteq X$. If $A$ is compact, then it is totally bounded and bounded.
\end{corollary}

\subsubsection{The Heine-Borel property}
\begin{definition}
Let $\sSet{X,\mathcal{U}}$ be a uniform space. We say $X$ has the \udef{Heine-Borel property} if every closed and bounded set is compact.
\end{definition}

TODO??
\begin{proposition} \label{DedekindCompleteHeineBorel}
Every Dedekind complete preordered vector space has the Heine-Borel property.
\end{proposition}
\begin{proof}
TODO
\end{proof}

\section{Uniformities from binary functions}
\begin{definition}
Let $X,Y,Z$ be sets and $f: X\times Y\to Z$ a binary function. Let $\mathcal{W}$ be a uniformity on $Z$. The \udef{associated relation} on $\big(\powerfilters(X^2),\powerfilters(Y^2)\big)$ is defined by
\[ U\mathrel{\mathrm{R}_{f}} V \quad\defequiv\quad \upset\big((f|f)\circ t \big)^{\imf\imf}(U\otimes V) \in \mathcal{W}, \]
where $t \defeq \big((\pi_1\circ \pi_1, \pi_1\circ \pi_2),(\pi_2\circ \pi_1, \pi_2\circ \pi_2)\big)$.
\end{definition}

\begin{lemma} \label{transposeFunctionalUniformRelation}
Let $f: f: X\times Y\to \sSet{Z, \mathcal{W}}$ be a binary function. Then $\mathrm{R}_{f}^\transp = \mathrm{R}_{f^\transp}$.
\end{lemma}

\begin{lemma} \label{polarUniformityLemma}
Let $f: f: X\times Y\to \sSet{Z, \mathcal{W}}$ be a binary function and $U\in \powerfilters(X^2), V,V'\in \powerfilters(Y^2)$. Then 
\begin{enumerate}
\item $U\mathrel{\mathrm{R}_{f}}$ and $\mathrel{\mathrm{R}_{f}}V$ are upwards closed;
\item $U\mathrel{\mathrm{R}_{f}} V \iff U^\transp\mathrel{\mathrm{R}_{f}} V^\transp$;
\item $\left.\begin{aligned}U&\mathrel{\mathrm{R}_{f}} V \\ U^\transp;U&\mathrel{\mathrm{R}_{f}} V'\end{aligned}\right\} \implies U\mathrel{\mathrm{R}_{f}} V;V'$;
\item $\left.\begin{aligned}
U &\subseteq \upset\{\id_X\} \\
U&\mathrel{\mathrm{R}_{f}} V \\
U&\mathrel{\mathrm{R}_{f}} V'
\end{aligned}\right\} \implies U\mathrel{\mathrm{R}_{f}} V;V'$;
\end{enumerate}
\end{lemma}
\begin{proof}
(1) Let $W,W'\powerfilters(Y^2)$ be such that $U\mathrel{\mathrm{R}_{f}}W$ and $W\subseteq W'$. We then need to show $U\mathrel{\mathrm{R}_{f}}W'$. We have 
\[ \mathcal{W} \ni \upset\big((f|f)\circ t \big)^{\imf\imf}(U\otimes W) \subseteq \upset\big((f|f)\circ t \big)^{\imf\imf}(U\otimes W'), \]
so $\upset\big((f|f)\circ t \big)^{\imf\imf}(U\otimes W') \in \mathcal{W}$ by upwards closure of $\mathcal{W}$ and thus $U\mathrel{\mathrm{R}_{f}}W'$.

The upwards closure of $\mathrel{\mathrm{R}_{f}}V$ then follows from \ref{transposeFunctionalUniformRelation}.

(2) We have $\upset\big((f|f)\circ t \big)^{\imf\imf}(U\otimes V)^\transp = \upset\big((f|f)\circ t \big)^{\imf\imf}(U^\transp\otimes V^\transp)$. Indeed, for all $A$ in a base of $U$, $B$ in a base of $V$, $(a_1, a_2)\in A$ and $(b_1, b_2)\in B$, we have
\begin{align*}
\big(f(a_2, b_2), f(a_1, b_1)\big) \in \big((f|f)\circ t \big)^{\imf}(A\times B)^\transp &\iff \big(f(a_1, b_1), f(a_2, b_2)\big) \in \big((f|f)\circ t \big)^{\imf}(A\times B) \\
&\iff \big(f(a_2, b_2), f(a_1, b_1)\big) \in \big((f|f)\circ t \big)^{\imf}(A^\transp\times B^\transp).
\end{align*}
Then
\begin{align*}
\upset\big((f|f)\circ t \big)^{\imf\imf}(U\otimes V) \in \mathcal{W} &\iff \upset\big((f|f)\circ t \big)^{\imf\imf}(U\otimes V)^\transp \in \mathcal{W} \\
&\iff \upset\big((f|f)\circ t \big)^{\imf\imf}(U^\transp\otimes V^\transp) \in \mathcal{W}.
\end{align*}

(3) It is enough to prove
\[ \upset\big((f|f)\circ t \big)^{\imf\imf}(U\otimes V);\upset\big((f|f)\circ t \big)^{\imf\imf}(U^\transp;U\otimes V') \subseteq \upset\big((f|f)\circ t \big)^{\imf\imf}(U\otimes V;V'), \]
because then $U\mathrel{\mathrm{R}_{f}} V;V'$ follows by upwards closure and closure under composition of $\mathcal{W}$.

Any subset of $\upset\big((f|f)\circ t \big)^{\imf\imf}(U\otimes V);\upset\big((f|f)\circ t \big)^{\imf\imf}(U^\transp;U\otimes V')$ contains a set of the form $\big((f|f)\circ t \big)^{\imf}(A\otimes B);\big((f|f)\circ t \big)^{\imf}(A^\transp;A\otimes C)$ for some $A\in U, B\in V$ and $C\in V'$. It is then enough to show that this set contains an element of $\upset\big((f|f)\circ t \big)^{\imf\imf}(U\otimes V;V')$. Indeed we claim
\[ \big((f|f)\circ t \big)^{\imf}(A\otimes B;C) \subseteq \big((f|f)\circ t \big)^{\imf}(A\otimes B);\big((f|f)\circ t \big)^{\imf}(A^\transp;A\otimes C). \]
To show this, take arbitrary $\big(f(a_1, b), f(a_2, c)\big) \in \big((f|f)\circ t \big)^{\imf}(A\otimes B;C)$, which means that $(a_1, a_2)\in A$ and there exists $y\in Y$ such that $(b,y)\in B$ and $(y,c)\in C$. Then
\begin{align*}
\big(f(a_1, b), f(a_2, c)\big) &\in \Big\{\big(f(a_1, b),f(a_2, c) \big)\Big\} \\
&= \Big\{\big(f(a_1, b),f(a_2, y) \big)\Big\}; \Big\{\big(f(a_2, y), f(a_2, c)\big)\Big\} \\
&\subseteq \big((f|f)\circ t \big)^{\imf}(A\otimes B);\big((f|f)\circ t \big)^{\imf}(A^\transp;A\otimes C),
\end{align*}
which is straightforwards, noting that $(a_2,a_2)\in A^\transp; A$.

(4) We can repeat the proof of (3), substituting $U$ for $U^\transp;U$ and $A$ for $A^\transp;A$, because in this case we have $(a_2, a_2)\in A$.
\end{proof}

\subsection{Polars generated by binary functions}
\begin{lemma}
Let $f: X\times Y\to \sSet{Z, \mathcal{W}}$ be a binary function, $\mathcal{W}$ a uniformity and $\mathcal{A}\subseteq \powerfilters(X^2)$ a set. Then
\begin{enumerate}
\item $\mathcal{A}^{\mathrm{R}_{f}}$ is upwards closed;
\item $\mathcal{A}^{\mathrm{R}_{f}} = (\upset \mathcal{A})^{\mathrm{R}_{f}}$;
\item $\big(\mathcal{A}^{\mathrm{R}_{f}}\big)^\transp = (\mathcal{A}^\transp)^{\mathrm{R}_{f}}$;
\item let $g: U\mapsto U^\transp;U$, then $\Closure_;\big(\mathcal{A}^{\mathrm{R}_{f}}\big) \subseteq \big(\Closure_g(\mathcal{A})\big)^{\mathrm{R}_{f}}$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) By \ref{polarUniformityLemma} and \ref{upsetDownsetConnections}.

(2) From $\mathcal{A} \subseteq \upset \mathcal{A}$, we have $\mathcal{A}^{\mathrm{R}_{f}} \supseteq (\upset \mathcal{A})^{\mathrm{R}_{f}}$. Now take $U\in \mathcal{A}^{\mathrm{R}_{f}}$. For all $V\in \upset \mathcal{A}$, there exists $V'\subseteq V$ in $\mathcal{A}$. Now we have $V\mathrel{\mathrm{R}_f}U$ and thus $V'\mathrel{\mathrm{R}_{f}}U$ by upwards closure \ref{polarUniformityLemma}. Thus $U\in (\upset \mathcal{A})^{\mathrm{R}_{f}}$.

(3) Immediate from \ref{polarUniformityLemma}.

(4) Again from \ref{polarUniformityLemma}.
\end{proof}

\begin{proposition}
Let $f: X\times Y\to \sSet{Z, \mathcal{W}}$ be a binary function, $\mathcal{W}$ a uniformity and $\mathcal{A}\subseteq \powerfilters(X^2)$ a set.
Then the following conditions are sufficient for $\mathcal{A}^{\mathrm{R}_{f}}$ to be a preuniformity on $Y$:
\begin{enumerate}
\item $\mathcal{A}$ is a uniformity;
\item $\mathcal{A}$ is closed under transposition and composition;
\item $\mathcal{A}$ is closed under transposition and each $U\in \mathcal{A}$ is a subset of $\upset\{\id_X\}$.
\end{enumerate}
\end{proposition}
\begin{proof}
Straightforward application of \ref{polarUniformityLemma}.
\end{proof}

\begin{lemma}
Let $f: X\times Y\to \sSet{Z, \mathcal{W}}$ be a binary function, $\mathcal{W}$ a uniformity and $\mathcal{A}\subseteq \powerfilters(X^2)$ a set. If $\mathcal{A}$ is closed under transposition and $U\mapsto U^\transp;U$, then $\mathcal{A}^{\mathrm{R}_{f}} = \mathcal{U}^{\mathrm{R}_{f}}$, where $\mathcal{U}$ is the uniformity generated by $\mathcal{A}$.
\end{lemma}

\subsection{Function space uniformities}
In this section we study relations associated to $\evalMap: (X\to Y) \times X \to Y$ and $\evalMap: \cont(X, Y) \times X \to Y$.

\begin{definition}
Consider the evaluation map $\evalMap: (X\to Y)\times X \to \sSet{Y,\mathcal{V}}$, where $X, Y$ are sets and $\mathcal{V}$ a uniformity on $Y$. Then
\begin{itemize}
\item the \udef{uniformity of pointwise convergence} $\mathcal{U}_p$ is given by $\setbuilder{\pfilter{x}\otimes\pfilter{x}}{x\in X}^{\uRelEv^\transp}$;
\item the \udef{uniformity of uniform convergence} $\mathcal{U}_u$ is given by $\{\id_X\}^{\uRelEv^\transp}$.
\end{itemize}
Now suppose $\xi$ is a convergence on $X$. Then
\begin{itemize}
\item the \udef{uniformity of continuous convergence} $\mathcal{U}_c$ is given by \\ $\setbuilder{F\otimes F}{\text{$F$ converges in $\xi$}}^{\uRelEv^\transp}$.
\end{itemize}
\end{definition}


\begin{proposition}
Let $X$ be a set and $\sSet{Y, \mathcal{V}}$ a uniform space. Then the uniformity of pointwise convergence induces pointwise convergence on $(X\to Y)$, when $Y$ is equipped with the induced convergence $\Gamma(\mathcal{V})$.
\end{proposition}
In particular, the uniformity of pointwise convergence is a uniformity, not just a preuniformity.
\begin{proof}
Let $H$ be a filter in $\powerfilters(X\to Y)$ and $f\in (X\to Y)$. Then, by definition of pointwise convergence and \ref{initialFinalConvergence},
\begin{align*}
H\overset{\text{pt-wise}}{\longrightarrow} f &\iff \forall x\in X: \; \evalMap^{\imf\imf}(H\otimes\pfilter{x}) \overset{\Gamma(\mathcal{V})}{\longrightarrow} f(x) \\
&\iff \forall x\in X: \; \evalMap^{\imf\imf}(H\otimes\pfilter{x}) \otimes \pfilter{f}(x) \in\mathcal{V} \\
&\iff \forall x\in X: \; \evalMap^{\imf\imf}(H\otimes\pfilter{x}) \otimes \evalMap^{\imf\imf}(\pfilter{f}\otimes \pfilter{x}) \in\mathcal{V} \\
&\iff \forall x\in X: \; \upset(\evalMap|\evalMap)^{\imf\imf}\big((H\otimes \pfilter{x}) \otimes (\pfilter{f}\otimes \pfilter{x})\big) \in\mathcal{V} \\
&\iff \forall x\in X: \; \upset\big((\evalMap|\evalMap)\circ t\big)^{\imf\imf}\big((H\otimes \pfilter{f}) \otimes (\pfilter{x}\otimes \pfilter{x})\big) \in\mathcal{V} \\
&\iff H\otimes \pfilter{f} \in \setbuilder{\pfilter{x}\otimes\pfilter{x}}{x\in X}^{\uRelEv^\transp} \\
&\iff H \overset{\mathcal{U}_p}{\longrightarrow} f.
\end{align*}
\end{proof}

\begin{proposition} \label{continuousConvergenceUniformity}
Let $\sSet{X, \xi}$ be a convergence space and $\sSet{Y, \mathcal{V}}$ a uniform space. Then the uniformity of continuous convergence induces continous convergence on $\cont(X, Y)$.
\end{proposition}
In particular, when restricted to $\cont(X,Y)$, the uniformity of continuous convergence is a uniformity, not just a preuniformity.
\begin{proof}
Let $H$ be a filter in $\powerfilters\big(\cont(X,Y)\big)$ and $f\in \cont(X, Y)$. Then
\begin{align*}
H\overset{\cont_c(X, Y)}{\longrightarrow} f &\iff \forall F\overset{\xi}{\longrightarrow}x: \; \evalMap^{\imf\imf}(H\otimes F) \overset{\mathcal{V}}{\longrightarrow} f(x) \\
&\iff \forall F\overset{\xi}{\longrightarrow}x: \; \evalMap^{\imf\imf}(H\otimes F)\otimes \pfilter{f}(x) \in\mathcal{V} \\
&\iff \forall F\overset{\xi}{\longrightarrow}x: \; \evalMap^{\imf\imf}(H\otimes F)\otimes f^{\imf\imf}(F) \in\mathcal{V} \\
&\iff \forall F\overset{\xi}{\longrightarrow}x: \; \evalMap^{\imf\imf}(H\otimes F)\otimes \evalMap^{\imf\imf}(\pfilter{f}\otimes F) \in\mathcal{V} \\
&\iff \forall F\overset{\xi}{\longrightarrow}x: \; \upset(\evalMap|\evalMap)^{\imf\imf}\big((H\otimes F)\otimes(\pfilter{f}\otimes F)\big) \in\mathcal{V} \\
&\iff \forall F\overset{\xi}{\longrightarrow}x: \; \upset\big((\evalMap|\evalMap)\circ t\big)^{\imf\imf}\big((H\otimes \pfilter{f})\otimes(F\otimes F)\big) \in\mathcal{V} \\
&\iff H\otimes \pfilter{f}\in \setbuilder{F\otimes F}{\text{$F$ converges in $\xi$}}^{\uRelEv^\transp} \\
&\iff H\overset{\mathcal{U}_c}{\longrightarrow} f,
\end{align*}
where we have used that $f^{\imf\imf}(F)\otimes \pfilter{f}(x)\in \mathcal{V}$.
\end{proof}

\begin{lemma}
Let $\sSet{X, \xi}$ be a convergence space, $\sSet{Y, \mathcal{V}}$ a uniform space and $f\in (X\to Y)$. If $\pfilter{f}\overset{\uniformity_c}{\longrightarrow} f$, then $\upset f^{\imf\imf}(F)$ is a Cauchy filter for all convergent $F\in \powerfilters(X)$.
\end{lemma}
Compare with \ref{continuousConvergenceIffContinuousPrincipalUltrafilter}.
\begin{proof}
For all convergent $F\in\powerfilters(X)$ we have
\[ \mathcal{V} \ni \upset\big((\evalMap|\evalMap)\circ t\big)^{\imf\imf}\big((\pfilter{f}\otimes \pfilter{f})\otimes(F\otimes F)\big) = \evalMap^{\imf\imf}(\pfilter{f}\otimes F)\otimes \evalMap^{\imf\imf}(\pfilter{f}\otimes F) = f^{\imf\imf}(F)\otimes f^{\imf\imf}(F), \]
so $\upset f^{\imf\imf}(F)$ is a Cauchy filter.
\end{proof}

\subsection{Equicontinuity}
\begin{definition}
Consider the evaluation map $\evalMap: (X\to Y)\times X \to \sSet{Y,\mathcal{V}}$, where $\sSet{X, \xi}$ is a convergence space and $\sSet{Y, \mathcal{V}}$ a uniform space. Let $H\subseteq (X\to Y)$ be a set. Then
\begin{itemize}
\item $H$ is \udef{equicontinuous} at some $x\in X$ if
\[ \upset\{\id_H\} \in \setbuilder{F\otimes \pfilter{x}}{F\overset{\xi}{\longrightarrow}x}^{\uRelEv^\transp}. \]
\item $H$ is \udef{equicontinuous} if it is equicontinuous at all $x\in X$.
\end{itemize}
\end{definition}

\begin{lemma}
Consider the function $\evalMap: (X\to Y)\times X \to \sSet{Y,\mathcal{V}}$. Take $H\subseteq (X\to Y)$. The following are equivalent:
\begin{enumerate}
\item $H$ is equicontinuous;
\item $\upset\{\id_H\} \in \setbuilder{F\otimes \pfilter{x}}{F\overset{\xi}{\longrightarrow}x}^{\uRelEv^\transp}$;
\item $\upset\{\id_H\} \in \Big(\setbuilder{F\otimes \pfilter{x}}{F\overset{\xi}{\longrightarrow}x} \cap \setbuilder{\pfilter{x}\otimes F}{F\overset{\xi}{\longrightarrow}x}\Big)^{\uRelEv^\transp}$.
\end{enumerate}
\end{lemma}
\begin{proof}
$(1) \Leftrightarrow (2)$ We have that $H$ is equicontinuous iff it is equicontinuous at all $x\in X$, i.e.\
\begin{align*}
\upset\{\id_H\}\in \bigcap_{x\in X}\setbuilder{F\otimes \pfilter{x}}{F\overset{\xi}{\longrightarrow}x}^{\uRelEv^\transp} &= \Big(\bigcup_{x\in X}\setbuilder{F\otimes \pfilter{x}}{F\overset{\xi}{\longrightarrow}x}\Big)^{\uRelEv^\transp} \\
&= \setbuilder{F\otimes \pfilter{x}}{F\overset{\xi}{\longrightarrow}x}^{\uRelEv^\transp}.
\end{align*}

$(2) \Rightarrow (3)$ Polars are inclusion-reversing.

$(3) \Rightarrow (2)$ We have that $\upset\{\id_H\}$ is symmetric, so
\begin{align*}
\upset\{\id_H\} &\in \Big(\setbuilder{F\otimes \pfilter{x}}{F\overset{\xi}{\longrightarrow}x} \cap \setbuilder{\pfilter{x}\otimes F}{F\overset{\xi}{\longrightarrow}x}\Big)^{\uRelEv^\transp} \\
&= \setbuilder{F\otimes \pfilter{x}}{F\overset{\xi}{\longrightarrow}x}^{\uRelEv^\transp} \cup \setbuilder{\pfilter{x}\otimes F}{F\overset{\xi}{\longrightarrow}x}^{\uRelEv} \\
&= \setbuilder{F\otimes \pfilter{x}}{F\overset{\xi}{\longrightarrow}x}^{\uRelEv^\transp} \cup \Big(\setbuilder{F\otimes\pfilter{x}}{F\overset{\xi}{\longrightarrow}x}^{\transp}\Big)^{\uRelEv} \\
&= \setbuilder{F\otimes \pfilter{x}}{F\overset{\xi}{\longrightarrow}x}^{\uRelEv^\transp} \cup \Big(\setbuilder{F\otimes\pfilter{x}}{F\overset{\xi}{\longrightarrow}x}^{\uRelEv^\transp}\Big)^{\transp}
\end{align*}
implies that $\upset\{\id_H\} \in \setbuilder{F\otimes \pfilter{x}}{F\overset{\xi}{\longrightarrow}x}^{\uRelEv^\transp}$.
\end{proof}

\begin{lemma} \label{equicontinuityUnionLemma}
Let $\sSet{X,\xi}$ be a convergence space, $\sSet{Y, \mathcal{V}}$ a uniform space, $H \subseteq (X\to Y)$, $G\in \powerfilters(X^2)$ and $x\in X$. Then
\begin{align*}
\upset\big((\evalMap|\evalMap)\circ t\big)^{\imf\imf}\big(\{\id_{H}\}\otimes(G\otimes \pfilter{x})\big) &= \upset k^{\imf\imf}\big(\{H\}\otimes G\big) \\
&= \upset \setbuilder[\Big]{\bigcup_{y\in A}k_y^\imf(H)}{A\in G},
\end{align*}
where $k_y = (\evalMap_y, \evalMap_x) = \Big(h\mapsto \big(\evalMap(h,y), \evalMap(h,x)\big)\Big)$ and $k: (X\to Y)\times X\to Y^2: (h, y) \mapsto \big(\evalMap_y(h), \evalMap_x(h)\big)$.

Thus $H$ is equicontinuous at $x$ \textup{if and only if}
\[ \upset k^{\imf\imf}\big(\{H\}\otimes G\big) = \upset \setbuilder[\Big]{\bigcup_{y\in A}k_y^\imf(H)}{A\in G} \in \mathcal{V} \]
for all $G\overset{\xi}{\longrightarrow} x$.
\end{lemma}

\subsubsection{Continuity and equicontinuity}
\begin{lemma} \label{singletonEquicontinuity}
Let $\sSet{X,\xi}$ be a convergence space, $\sSet{Y, \mathcal{V}}$ a uniform space, $x\in X$ and consider the function $\evalMap: (X\to Y)\times X \to \sSet{Y,\mathcal{V}}$. A function $f: X\to Y$ is continuous at $x$ \textup{if and only if} $\{f\}$ is equicontinuous at $x$.
\end{lemma}
\begin{proof}
For arbitrary $F\overset{\xi}{\longrightarrow}x$, we have
\[ f^{\imf\imf}(F)\otimes \pfilter{f}(x) = \evalMap^{\imf\imf}(\pfilter{f}\otimes F) \otimes \evalMap^{\imf\imf}(\pfilter{f}\otimes \pfilter{x}) = \upset\big((\evalMap|\evalMap)\circ t\big)^{\imf\imf}\big((\pfilter{f}\otimes\pfilter{f})\otimes(F\otimes \pfilter{x})\big). \]
Thus $\upset f^{\imf\imf}(F) \overset{\mathcal{V}}{\longrightarrow} f(x)$ iff $(\pfilter{f}\otimes \pfilter{f})\uRelEv(F\otimes \pfilter{x})$, which means that $f$ is continuous at $x$ iff
\[ \pfilter{f}\otimes \pfilter{f} = \upset\{\id_{\{f\}}\} \in \setbuilder{F\otimes \pfilter{x}}{F\overset{\xi}{\longrightarrow}x}^{\uRelEv^\transp}, \]
which exactly expresses the equicontinuity of $f$ at $x$.
\end{proof}

\begin{lemma}
Let $\sSet{X,\xi}$ be a convergence space, $\sSet{Y, \mathcal{V}}$ a uniform space, $H \subseteq \cont(X, Y)$ and $f\in \cont(X, Y)$. If $H$ is equicontinuous, then
\begin{enumerate}
\item any subset of $H$ is equicontinuous;
\item if $\mathcal{V}$ is of finite depth, then $H\cup\{f\}$ is equicontinuous.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) If $H'\subseteq H$, then
\[ \upset\big((\evalMap|\evalMap)\circ t\big)^{\imf\imf}\big(\{\id_{H'}\}\otimes(G\otimes \pfilter{x})\big) \supseteq \upset\big((\evalMap|\evalMap)\circ t\big)^{\imf\imf}\big(\{\id_{H}\}\otimes(G\otimes \pfilter{x})\big) \in \mathcal{V}. \]

(2) We use \ref{equicontinuityUnionLemma} and calculate
\begin{align*}
\upset \setbuilder[\Big]{\bigcup_{y\in A}k_y^\imf\big(H\cup \{f\}\big)}{A\in G} &= \upset \setbuilder[\Big]{\bigcup_{y\in A}k_y^\imf(H)\cup k_y^\imf\big(\{f\}\big)}{A\in G} \\
&= \upset \setbuilder[\Big]{\bigcup_{y\in A}k_y^\imf(H)\cup \bigcup_{y\in A}k_y^\imf\big(\{f\}\big)}{A\in G} \\
&= \upset \setbuilder[\Big]{\bigcup_{y\in A}k_y^\imf(H)}{A\in G} \wedge \upset \setbuilder[\Big]{\bigcup_{y\in A}k_y^\imf\big(\{f\}\big)}{A\in G}.
\end{align*}
To show this is in $\mathcal{V}$, by finite depth and equicontinuity of $H$, it is enough to show that $\upset \setbuilder[\Big]{\bigcup_{y\in A}k_y^\imf\big(\{f\}\big)}{A\in G}\in \mathcal{V}$. This is true because
\begin{align*}
\upset \setbuilder[\Big]{\bigcup_{y\in A}k_y^\imf\big(\{f\}\big)}{A\in G} &= \upset\big((\evalMap|\evalMap)\circ t\big)^{\imf\imf}\big(\{(f,f)\}\otimes(G\otimes \pfilter{x})\big) \\
&= f^{\imf\imf}(G) \otimes \pfilter{f}(x),
\end{align*}
is an element of $\mathcal{V}$ by continuity of $f$.
\end{proof}
\begin{corollary} \label{equicontinuousSetsConsistOfContinuousFunctions}
Consider the function $\evalMap: (X\to Y)\times X \to \sSet{Y,\mathcal{V}}$ and the set $H\subseteq (X\to Y)$. 
\begin{enumerate}
\item If $H$ is equicontinuous at $x\in X$, then each $f\in H$ is continuous at $x$.
\item If $H$ is equicontinuous, then $H\subseteq \cont(X,Y)$.
\end{enumerate}
\end{corollary}
\begin{proof}
We use point (1) in conjunction with \ref{singletonEquicontinuity}.
\end{proof}

\subsubsection{Equicontinuity of constructions}
\begin{proposition} \label{pointwiseAdherenceEquicontinuous}
Let $\sSet{X,\xi}$ be a convergence space, $\sSet{Y, \mathcal{V}}$ a regular uniform space and $H \subseteq \cont(X, Y)$. If $H$ is equicontinuous, then $\adh_p(H)$ is equicontinuous.
\end{proposition}
\begin{proof}
Using \ref{equicontinuityUnionLemma}, we need to show that
\[ \upset \setbuilder[\Big]{\bigcup_{y\in A}k_y^\imf\big(\adh_p(H)\big)}{A\in G} \in \mathcal{V} \]
for all $G\overset{\xi}{\longrightarrow} x\in X$. By regularity of $\mathcal{V}$ (and \ref{equicontinuityUnionLemma}) it is enough to prove
\[ \upset\adh_{\Gamma(\mathcal{V})\otimes\Gamma(\mathcal{V})}^\imf\setbuilder[\Big]{\bigcup_{y\in A}k_y^\imf(H)}{A\in G} \subseteq \upset\setbuilder[\Big]{\bigcup_{y\in A}k_y^\imf\big(\adh_p(H)\big)}{A\in G}. \]
Now $k_y: (X\to Y) \to Y^2$ is continuous by \ref{continuityFunctionTuple} and the fact that pointwise convergence makes $\evalMap_x$ and $\evalMap_y$ continuous. Then, by \ref{orderPreservingFunctionLatticeOperations} and \ref{adherenceInherenceContinuity},
\[ \adh_{\Gamma(\mathcal{V})\otimes\Gamma(\mathcal{V})}\Big(\bigcup_{y\in A}k_y^\imf(H)\Big) \supseteq \bigcup_{y\in A}\adh_{\Gamma(\mathcal{V})\otimes\Gamma(\mathcal{V})}\big(k_y^\imf(H)\big) \supseteq \bigcup_{y\in A}k_y^\imf\big(\adh_p(H)\big). \]
\end{proof}

\subsubsection{Equicontinuity in constructed spaces}
\begin{proposition}
Let $\sSet{X,\xi}$ be a convergence space, $x\in X$, $Y$ a set, $H\subseteq (X\to Y)$ and $\{f_i: Y\to \sSet{Z_i, \mathcal{W}_i}\}$ a set of functions to uniform spaces. Let $Y$ carry the initial uniformity w.r.t.\ this set. Then $H$ is equicontinuous at $x$ \textup{if and only if} $\{f_i\}\circ^\imf H$ is equicontinuous at $x$ for all $i\in I$.
\end{proposition}
\begin{proof}
Let $\mathcal{X}$ be the initial uniformity on $Y$.
Using notation from \ref{equicontinuityUnionLemma}, we have that $H$ is equicontinuous iff $\upset k^{\imf\imf}(\{H\}\otimes G) \in \mathcal{X}$ for arbitrary $G\overset{\xi}{\longrightarrow} x$.

By \ref{initialFinalUniformity}, we then just need to show that $\upset(f_i|f_i)^{\imf\imf}\big(k^{\imf\imf}(\{H\}\otimes G)\big) = \upset k^{\imf\imf}\Big(\big\{\{f_i\}\circ^\imf H\big\}\otimes G\Big)$. This follows because $(f_i|f_i)\circ k = k\circ \big((f_i\circ -), \id_X\big)$.
\end{proof}

\subsubsection{Even continuity and equicontinuity}
\begin{proposition} \label{equicontinuityEvenContinuity}
Let $\sSet{X,\xi}$ be a convergence space, $\sSet{Y, \mathcal{V}}$ a uniform space, $x\in X$ and $H \subseteq (X\to Y)$.
\begin{enumerate}
\item If $H$ is equicontinuous and $Y$ is regular, then $H$ is evenly continuous.
\item If $H$ is evenly continuous, $Y$ pseudotopological and $\evalMap_x^\imf(H)$ compactoid, then $H$ is equicontinuous at $x$.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) To show even continuity, take some $F\in \powerfilters(X\to Y)$ that contains $H$ and converges pointwise to $f: X\to Y$. 

We may WLOG assume $f\in H$. If not, replace $H$ with $\adh_p(H)$, which is equicontinuous by \ref{pointwiseAdherenceEquicontinuous}, contains $f$ by \ref{principalAdherenceInherence} and is an element of $F$ by upwards closure and \ref{principalInherenceAdherenceProperties}.
If we can show even continuity of $\adh_p(H)$, then the even continuity of $H$ follows from \ref{evenlyContinuousSubset}.

Now take an arbitrary $G\to x\in X$. We need to prove $\upset\evalMap^{\imf\imf}(F\otimes G)\to f(x)$. We have
\begin{align*}
H\in F \implies& \id_H \in F\otimes \pfilter{f} \\
\iff& \{\id_H\} \subseteq F\otimes \pfilter{f} \\
\iff& \upset\{\id_H\} \subseteq F\otimes \pfilter{f} \\
\implies& F\otimes \pfilter{f} \in \setbuilder{G'\otimes \pfilter{x}}{G'\overset{\xi}{\longrightarrow}x}^{\uRelEv^\transp} \\
\implies& \upset \big((\evalMap|\evalMap)\circ t\big)^{\imf\imf}\big((F\otimes \pfilter{f})\otimes (G\otimes \pfilter{x})\big) \in \mathcal{V} \\
\iff& \upset (\evalMap|\evalMap)^{\imf\imf}\big((F\otimes G)\otimes (\pfilter{f}\otimes \pfilter{x})\big) \in \mathcal{V} \\
\iff& \evalMap^{\imf\imf}(F\otimes G)\otimes \pfilter{f}(x) \in \mathcal{V} \\
\iff& \upset\evalMap^{\imf\imf}(F\otimes G) \overset{\mathcal{V}}{\longrightarrow} f(x).
\end{align*}

(2) To show equicontinuity at $x$, take some $G\overset{\xi}{\longrightarrow} x$. By \ref{equicontinuityUnionLemma}, we need to show that
\[ \upset k^{\imf\imf}\big(\{H\}\otimes G\big) \in \mathcal{V}. \]
By pseudotopologicity of $\mathcal{V}$, it is enough to show that all larger ultrafilters are in $\mathcal{V}$. Take some such ultrafilter $K \supseteq \upset k^{\imf\imf}\big(\{H\}\otimes G\big)$. Then, by \ref{mappingUltrafiltersLemma}, there exists an ultrafilter $U\in \powerfilters\big((X\to Y)\times X\big)$ such that $\{H\}\otimes G \subseteq U$ and $\upset k^{\imf\imf}(U) = K$.

Now $H\in \upset\pi_1^{\imf\imf}(U)$ and $\upset\evalMap^{\imf\imf}(\pi_1^{\imf\imf}(U)\otimes \pfilter{x}) = \upset\evalMap_x^{\imf\imf}(\pi_1^{\imf\imf}(U)) = \upset(\evalMap_x\circ \pi_1)^{\imf\imf}(U)$ is an ultrafilter by \ref{imageFilterProperties}, so it converges to some $y$ because $\evalMap^{\imf}(H)$ is compactoid.

We have $G \subseteq \upset\pi_2(U)$, so $\upset\pi_2(U) \overset{\xi}{\longrightarrow} x$ and thus $\evalMap^{\imf\imf}(\pi_1^{\imf\imf}(U)\otimes \pi_2^{\imf\imf}(U))$ converges to $y$ by even continuity at $x$.

Thus $\evalMap_x^{\imf\imf}(\pi_1^{\imf\imf}(U)) \otimes \pfilter{y}\in \mathcal{V}$ and $\evalMap^{\imf\imf}(\pi_1^{\imf\imf}(U)\otimes \pi_2^{\imf\imf}(U)) \otimes \pfilter{y}\in \mathcal{V}$. We conclude, using $\pfilter{y}\otimes \pfilter{y}\in \mathcal{V}$ and \ref{uniformRelationUpwardsClosure}, that
\[ \evalMap^{\imf\imf}(\pi_1^{\imf\imf}(U)\otimes \pi_2^{\imf\imf}(U)) \otimes \evalMap^{\imf\imf}(\pi_1^{\imf\imf}(U)\otimes \pfilter{x}) \in \mathcal{V}. \]

Now we claim that
\[ \evalMap^{\imf\imf}(\pi_1^{\imf\imf}(U)\otimes \pi_2^{\imf\imf}(U)) \otimes \evalMap^{\imf\imf}(\pi_1^{\imf\imf}(U)\otimes \pfilter{x}) \;\subseteq\; \upset k^{\imf\imf}(U), \]
indeed take some sets $A,B,C\in U$. We then need to show that
$\evalMap^{\imf}(\pi_1^{\imf}(A)\times \pi_2^{\imf}(B)) \times \evalMap_x^{\imf\imf}(\pi_1^{\imf}(C))$ contains a set in $k^{\imf\imf}(U)$. We claim it contains $k^{\imf}(A\cap B\cap C)$, indeed take $(y_1,y_2)\in k^{\imf}(A\cap B\cap C)$, then there exist $(f, z)\in A\cap B\cap C$ such that
\[ (y_1, y_2) = k(f,z) = \big(\evalMap(f, z), \evalMap_x(f)\big) \in \evalMap^\imf\big(\pi_1^\imf(A)\times \pi_2^\imf(B)\big)\times \evalMap_x^\imf\big(\pi_1(C)\big). \]
Thus, by upwards closure, we have $\upset k^{\imf\imf}(U) = K\in \mathcal{V}$.
\end{proof}

\begin{proposition}
TODO: If Hausdorff and regular (?), then compactoid implies relatively compact??
\end{proposition}

\begin{proposition}
If pseudotopological, then relatively compact implies equicontinuous.
\end{proposition}

Let $\sSet{X,\xi}$ be a convergence space, $\sSet{Y, \mathcal{V}}$ a uniform space and $H \subseteq (X\to Y)_c$. Assume $\evalMap_x^\imf(H)$ compactoid for all $x\in X$. Then we have the following requirements on $\mathcal{V}$ in order to have the implications between the properties of $H$:
\begin{center} \begin{tikzcd}[row sep=huge]
{}& \boxed{\text{Compactoid}} \ar[dl, shift right, swap, "\substack{\text{Hausdorff,}\\\text{pseudotopological}}"] \ar[dr, shift right, swap, "{\text{?pseudotopological?}}"] & {} \\
\boxed{\text{Evenly continous}} \ar[ur, shift right, swap, "\emptyset"] \ar[rr, shift right, swap, "\text{pseudotopological}"] & {} & \boxed{\text{Equicontinuous}} \ar[ul, shift right, swap, "\substack{\text{?regular},\\\text{Hausdorff},\\\text{pseudotopological?}}"] \ar[ll, shift right, swap, "\text{regular}"]
\end{tikzcd} \end{center}

\begin{proposition}
Let $\sSet{X,\xi}$ be a Kent convergence space, $\sSet{Y, \mathcal{V}}$ a uniform space, $x\in X$ and $H \subseteq (X\to Y)$.

If $H$ is compactoid in $(X\to Y)_c$ and $Y$ is pseudotopological, then $H$ is equicontinuous.
\end{proposition}
Note that we can replace the Kent assumption with an assumption of Hausdorffness of $Y$.
\begin{proof}
To show equicontinuity at $x$, take some $G\overset{\xi}{\longrightarrow} x$. By the Kent property, we may WLOG assume that $G\subseteq \pfilter{x}$. By \ref{equicontinuityUnionLemma}, we need to show that
\[ \upset k^{\imf\imf}\big(\{H\}\otimes G\big) \in \mathcal{V}. \]
By pseudotopologicity of $\mathcal{V}$, it is enough to show that all larger ultrafilters are in $\mathcal{V}$. Take some such ultrafilter $K \supseteq \upset k^{\imf\imf}\big(\{H\}\otimes G\big)$. Then, by \ref{mappingUltrafiltersLemma}, there exists an ultrafilter $U\in \powerfilters\big((X\to Y)\times X\big)$ such that $\{H\}\otimes G \subseteq U$ and $\upset k^{\imf\imf}(U) = K$.

Now $H\in \upset\pi_1^{\imf\imf}(U)$ and $\upset\pi_1^{\imf\imf}(U)$ is an ultrafilter by \ref{imageFilterProperties} and so it converges in continuous convergence because $H$ is compactoid. Thus $\upset\evalMap^{\imf\imf}\big(\pi_1^{\imf\imf}(U)\otimes G\big)$ is in particular a Cauchy filter and (using $G\subseteq \pfilter{x}$) we have
\[ \evalMap^{\imf\imf}\big(\pi_1^{\imf\imf}(U)\otimes G\big) \otimes \evalMap^{\imf\imf}\big(\pi_1^{\imf\imf}(U)\otimes \pfilter{x}\big) \in \mathcal{V}. \]
As $G \subseteq \upset\pi_2^{\imf\imf}(U)$, use a similar argument as in point (2) of \ref{equicontinuityEvenContinuity} to show that this implies that $\upset k^{\imf\imf}(U) = K \in \mathcal{V}$.
\end{proof}

\section{Metric and pseudometric spaces}
\begin{definition}
Let $X$ be a set. A \udef{pseudometric} on $X$ is a function $d: X\times X\to \overline{\R^+}$ satisfying, for all $x,y,z\in X$,
\begin{itemize}
\item \emph{symmetry}: $d(x,y) = d(y,x)$;
\item the \emph{triangle inequality}: $d(x,z) \leq d(x,y) + d(y,z)$.
\end{itemize}
The structured set $\sSet{X,d}$ is called a \udef{pseudometric space}.

If $d$ also satisfies
\begin{itemize}
\item \emph{definiteness}: $d(x,y) = 0$ \textup{if and only if} $x=y$;
\end{itemize}
then it is called a \udef{metric} and the structured set $\sSet{X,d}$ is called a \udef{metric space}.
\end{definition}

\begin{lemma}[Reverse triangle inequality] \label{metricReverseTriangleInequality}
Let $X$ be a set and $d: X^2\to\overline{\R^+}$ a pseudometric on $X$. Then for all $x,y,a\in X$, we have
\[ \big|d(x,a) - d(a,y)\big| \;\leq\; d(x,y) \;\leq\; d(x,a) + d(a,y). \]
\end{lemma}
\begin{proof}
The second inequality is just the triangle inequality. For the first inequality, note that the triangle inequalities $d(x,a) \leq d(a,y) + d(x,y)$ and $d(a,y)\leq d(x,a) + d(x,y)$ hold. Thus
\[ d(x,a) - d(a,y) \leq d(x,y) \qquad\text{and}\qquad d(a,y) = d(x,a) \leq d(x,y). \]
Combinding these results gives the inequality.
\end{proof}

\subsection{TODO Premetric}
Satisfies positivity and definiteness. Gives sequential space (with non-idempotent closure).

\subsection{Subsets of pseudometric spaces}
\begin{definition}
Let $\sSet{X,d}$ be a pseudometric space, $\epsilon >0$ and $x\in X$,
\begin{itemize}
\item The \udef{$\epsilon$-entourage} as the set
\[ V_\epsilon \defeq \setbuilder{(y,z)\in X^2}{d(y,z)< \epsilon} = d^{\preimf}\big(\interval{0,\epsilon}\big). \]
\item The \udef{$\epsilon$-ball centered at $x$} as the set
\[ \ball_d(x,\epsilon) \defeq \setbuilder{y\in X}{d(x,y)< \epsilon} \]
of all points $y$ whose distance to $x$ is less than $\epsilon$.
\item The \udef{closed $\epsilon$-ball centered at $x$} as the set
\[ \cball_d(x,\epsilon) \defeq \setbuilder{y\in X}{d(x,y)\leq \epsilon} \]
of all points $y$ whose distance to $x$ is less than or equal to $\epsilon$.
\item The \udef{$\epsilon$-sphere centered at $x$} as the set
\[ \sphere_d(x,\epsilon) \defeq \setbuilder{y\in X}{d(x,y) = \epsilon}. \]
\end{itemize}
Let $A\subseteq X$ be a subset. The \udef{diameter} of $A$ is defined by
\[ \diam(A) \defeq \sup \setbuilder{d(x,y)}{x,y\in A}. \]
\end{definition}

\begin{lemma} \label{diameterBoundedByTwiceRadius}
Let $\sSet{X,d}$ be a pseudometric space, $c\in X$ and $A\subseteq X$. Then
\[ \diam(A) \leq 2\sup_{x\in A}d(c,x). \]
\end{lemma}
\begin{proof}
We need to prove
\[ \forall x,y\in A: \exists z\in A: \; d(x,y) \leq 2d(c,z). \]
Take arbitrary $x,y\in A$. Then let $z$ be $x$ if $d(c,x)\geq d(c,y)$ and $y$ otherwise. Now, by the triangle inequality, we have
\[ d(x,y) \leq d(x,c) + d(c,y) \leq d(z,c) + d(c,z) = 2d(c,z). \]
\end{proof}

TODO $\sup_{x\in A}{d(c,x)} \leq \diam(A)$ for all $c\in X$ definition of metric convexity??

\begin{lemma} \label{ballSphereLemma}
Let $\sSet{X,d}$ be a pseudometric space. Then
\begin{enumerate}
\item $\cball_d(x,\epsilon) = V_\epsilon x = xV_\epsilon$;
\item $\sphere_d(x,\epsilon) = \cball_d(x,\epsilon)\setminus \ball_d(x,\epsilon)$.
\end{enumerate}
\end{lemma}


\subsection{Uniform structure on a pseudometric space}
\begin{definition}
Let $\sSet{X,d}$ be a pseudometric space. The \udef{pseudometric uniformity} $\mathcal{U}_d$ is the topological uniformity with entourage filter $\entourage_d \defeq \upset \{V_\epsilon\}_{\epsilon > 0}$.
\end{definition}

\begin{proposition}
Let $\sSet{X,d}$ be a pseudometric space. Then the pseudometric uniformity is a uniformity.
\end{proposition}
\begin{proof}
We verify the conditions in \ref{entourageLemma}:
\begin{itemize}
\item $d^{\imf}(\id_X) = \{0\}$, so $\id_X \subseteq V_\epsilon$ for all $\epsilon > 0$ and thus $\{V_\epsilon\}_{\epsilon>0}\subseteq\upset\{\id_X\}$;
\item $\{V_\epsilon\}_{\epsilon>0}^\transp = \{V_\epsilon\}_{\epsilon>0}$ by symmetry of the metric;
\item $V_{\epsilon/2};V_{\epsilon/2} \subseteq V_\epsilon$ for all $\epsilon>0$ by the triangle inequality, so $V_\epsilon \in \{V_\epsilon\}_{\epsilon>0}; \{V_\epsilon\}_{\epsilon>0}$ and thus $\{V_\epsilon\}_{\epsilon>0} \subseteq \{V_\epsilon\}_{\epsilon>0}; \{V_\epsilon\}_{\epsilon>0}$.
\end{itemize}
\end{proof}


\begin{lemma} \label{uniformContinuityMetricSpaces}
Let $\sSet{X, d_X}$ and $\sSet{Y, d_Y}$ be metric spaces and $f:X\to Y$ a function. Then $f$ is uniformly continuous \textup{if and only if}
\[ \forall \epsilon >0: \exists \delta >0: \forall x,y\in X: \quad d_X(x,y) \leq \delta \implies d_Y(f(x), f(y)) \leq \epsilon. \]
\end{lemma}
\begin{proof}
By \ref{uniformContinuityEntourages} we have that $f$ is uniformly continuous \textup{if and only if}
\begin{align*}
\entourage_Y \subseteq \upset(f\times f)^{\imf\imf}[\entourage_X] &\iff \forall V_\epsilon \in \entourage_Y: \exists V_\delta \in \entourage_X: \; (f\times f)^{\imf\imf}[V_\delta] \subseteq V_\epsilon \\
&\iff \forall \epsilon>0: \exists \delta>0: \forall (y,y')\in (f\times f)^{\imf\imf}[V_\delta]: \; (y,y')\in V_\epsilon \\
&\iff \forall \epsilon>0: \exists \delta>0: \forall (x,x')\in V_\delta:\; (f(x),f(x'))\in V_\epsilon \\
&\iff \forall \epsilon>0: \exists \delta>0: \forall x,x'\in X: \; d_X(x,x')\leq \delta \implies d_Y(f(x),f(x'))\leq \epsilon.
\end{align*}
\end{proof}

\begin{lemma}
Let $\sSet{X,d}$ be a metric space. Then $\uniformity_d = \uniformity_{\overline{d}}$, where $\overline{d} = d \wedge \underline{1}$.
\end{lemma}
Thus every metric is equivalent to a bounded metric.

\subsubsection{Pseudometric convergence}
\begin{definition}
Let $\sSet{X,d}$ be a pseudometric space. The convergence $\Gamma(\mathcal{U}_d)$ induced by the pseudometric uniformity $\mathcal{U}_d$ is called the \udef{pseudometric convergence}.

If $F\in\powerfilters(X)$ converges to $x\in X$ in the pseudometric convergence, we write $F\overset{d}{\longrightarrow} x$.
\end{definition}

\begin{lemma} \label{metricConvergenceNeighbourhood}
Let $\sSet{X,d}$ be a pseudometric space and $x\in X$. Then
\begin{enumerate}
\item the pseudometric convergence is topological;
\item $\neighbourhood_d(x) = \upset\setbuilder{\cball_d(x,\epsilon)}{\epsilon >0} = \upset\setbuilder{\ball_d(x,\epsilon)}{\epsilon >0}$;
\item open balls are open sets and form a basis of the topology;
\item closed balls are closed sets.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) Immediate by \ref{topologicalInducedUniformConvergence}.

(2) The first equality follows from \ref{topologicalInducedUniformConvergence} and \ref{ballSphereLemma}.

For the second equality, it is clear that $\upset\setbuilder{\cball_d(x,\epsilon)}{\epsilon >0} \subseteq \upset\setbuilder{\ball_d(x,\epsilon)}{\epsilon >0}$. For the other inclusion, take arbitrary $\epsilon$. Then $\cball_d(x,\epsilon/2)\subseteq \ball_d(x,\epsilon)$.

(3) First we show that an open ball $\ball_d(x,\epsilon)$ is an open set, by \ref{openClosedCriteria}. Take $y\in \ball_d(x,\epsilon)$. Then $d(x,y)<\epsilon$, so $\delta \defeq \epsilon - d(x,y) \geq 0$. Now we claim that $\ball_d(y,\delta)\subseteq \ball_d(x,\epsilon)$. Indeed, take $z\in \ball_d(y,\delta)$, so $d(y,z)<\delta$. Then we have
\[ d(x,z) \leq d(x,y) + d(y,z) < d(x,y) + \delta \leq d(x,y) + \epsilon - d(x,y) = \epsilon, \]
which implies that $z\in \ball_d(x,\epsilon)$.

To see that the open balls form a basis of the topology, it is enough to observe that every open set is a neighbourhood of all its points and use the form of the neighbourhood filter in (2) to observe that every open set contains an open ball.

(4) We show that a closed ball $\cball_d(x,\epsilon)$ is an open set, by \ref{openClosedCriteria}. Suppose $y\in X$ is such that $\cball_d(x,\epsilon) \in \neighbourhood_d(y)^\mesh$. Then, by (2), for all $\delta >0$, we have
\[ \exists z \in \cball_d(x,\epsilon) \cap \cball_d(y,\delta). \]
Then $d(x,y) \leq d(x,z) + d(z,y) \leq \epsilon + \delta$. Since this holds for all $\delta > 0$, we can take $\delta \to 0$ and we get $d(x,y) \leq \epsilon$. This means that $y\in \cball_d(x,\epsilon)$.
\end{proof}
\begin{corollary} \label{metricConvergenceSequence}
Let $\sSet{X,d}$ be a pseudometric space and $\seq{x_n}$ a sequence in $X$. Then $\seq{x_n}$ converges to $x\in X$ \textup{if and only if}
\[ \forall \epsilon>0: \exists N\in\N: \forall n\geq N: \quad d(x_n,x)\leq \epsilon. \]
\end{corollary}

\begin{proposition} \label{metricConvergenceHausdorff}
Let $\sSet{X,d}$ be a pseudometric space. Then the pseudometric convergence is Hausdorff \textup{if and only if} $d$ is a metric.
\end{proposition}
\begin{proof}
TODO
\end{proof}

\begin{lemma} \label{metricDensityLemma}
Let $\sSet{X,d}$ be a metric space and $S\subseteq X$. Then $S$ is dense in $X$ \textup{if and only if}
\[ \forall x\in X: \forall \epsilon >0: \exists s\in S: \quad d(s,x) \leq \epsilon. \]
\end{lemma}
This requires countable choice.
\begin{proof}
First assume $S$ is dense in $X$, i.e.\ $X = \adh(S) = \closure(S)$. Take $x\in X$ and $\epsilon >0$. By \ref{sequentialLemma} and \ref{sequentialInherenceAdherence}, this implies that there exists a sequence $\seq{x_n}$ in $S$ that converges to $x$. By \ref{metricConvergenceSequence}, there exists $N\in \N$ such that $d(x_N, x)\leq \epsilon$. We can take $s = x_N$.

Now assume that, for all $x\in X, \epsilon >0$, there exists $s\in S$ such that $d(s,x)\leq \epsilon$. Fix an arbitrary $x\in X$. Then, by countable choice, for each $n\in \N$ we can pick $x_n\in S$ such that $d(x_n, x)\leq \frac{1}{n}$. By \ref{metricConvergenceSequence} the sequence $\seq{x_n}$ converges to $x$, indeed for all $\epsilon >0$ we can set $N = \ceil{\epsilon^{-1}}$. By \ref{sequentialLemma} and \ref{sequentialInherenceAdherence}, this shows that $x\in \closure(S)$. Since $x$ was chosen arbitrarily, we have $X = \closure(S) = \adh(S)$.
\end{proof}


\subsubsection{The standard metric on $\R$}
\begin{definition}
The standard metric on $\R$ is the metric
\[ d_\R: \R\times \R\to\overline{\R^+}: (x,y) \mapsto |x-y|. \]
\end{definition}

\begin{proposition} \label{imagePseudometricConvergesToZero}
Let $\sSet{X,d}$ be a pseudometric space. The pseudometric uniformity $\mathcal{U}_d$ is given by
\[ \mathcal{U}_d = \setbuilder{H\in \powerfilters(X^2)}{\upset d^{\imf\imf}(H) \overset{\overline{\R^+}}{\longrightarrow} 0}.  \]
\end{proposition}
\begin{proof}
Since $\cball_\R(0,\epsilon) = \interval{-\epsilon, \epsilon}$ and $\im(d)\subseteq \overline{\R^+}$, we have $d^\preimf\big(\cball_\R(0,\epsilon)\big) = d^\preimf\big(\interval{0,\epsilon}\big) = V_\epsilon$. And thus by $\upset\{V_\epsilon\}_{\epsilon > 0} = \upset d^{\preimf\imf}\big(\neighbourhood_{\overline{\R^+}}(0)\big)$ by \ref{metricConvergenceNeighbourhood}. Then we calculate, using \ref{upsetPreimageImageGaloisConnection},
\begin{align*}
H \in \mathcal{U}_d &\iff H \supseteq \upset \{V_\epsilon\}_{\epsilon > 0} \\
&\iff H \supseteq \upset d^{\preimf\imf}\big(\neighbourhood_{\overline{\R^+}}(0)\big) \\
&\iff \upset d^{\imf\imf}(H)\supseteq \neighbourhood_{\overline{\R^+}}(0) \\
&\iff \upset d^{\imf\imf}(H)\overset{\overline{\R^+}}{\longrightarrow} 0.
\end{align*}
\end{proof}
\begin{corollary} \label{metricConvergenceInitial}
Let $\sSet{X,d}$ be a pseudometric space. The pseudometric convergence is given by
\[ F \overset{d}{\longrightarrow} x \qquad\iff\qquad \upset d^{\imf\imf}(F\otimes \pfilter{x}) \overset{\overline{\R^+}}{\longrightarrow} 0 \]
for all $F\in \powerfilters(X)$ and $x\in X$.
\end{corollary}
\begin{proof}
We have that $F \overset{d}{\longrightarrow} x$ iff $F\otimes \pfilter{x}\in \mathcal{U}_d$ iff $\upset d^{\imf\imf}(F\otimes \pfilter{x}) \overset{\overline{\R^+}}{\longrightarrow} 0$.
\end{proof}
\begin{corollary} \label{metricUniformlyContinuous}
Let $\sSet{X,d}$ be a metric space. Then $d: X\times X\to \overline{\R^+}$ is uniformly continuous.
\end{corollary}
\begin{proof}
Take $F,G\in \uniformity_d$. Then $d^{\imf\imf}(F)\otimes \pfilter{0}, d^{\imf\imf}(G)\otimes \pfilter{0}\in \uniformity_{\overline{\R^+}}$, so $(d|d)^{\imf\imf}(F\otimes G) = d^{\imf\imf}(F)\otimes d^{\imf\imf}(G)\in \uniformity_{\overline{\R^+}}$.
\end{proof}

\begin{proposition} \label{realConvergenceOrderConvergence}
The standard convergence on $\R$ is equal to the order convergence on $\R$.
\end{proposition}
\begin{proof}
TODO
\end{proof}

\begin{proposition} \label{propertiesRealNumbers}
The real numbers are
\begin{enumerate}
\item complete;
\item connected.
\end{enumerate}
\end{proposition}
\begin{proof}
TODO
\end{proof}
\begin{lemma} \label{connectedSubsetReals}
A subset of the real numbers is connected \textup{if and only if} it is an interval.
\end{lemma}

\begin{proposition} \label{realBoundedIffTotallyBounded}
A subset $B\subseteq \R$ is bounded \textup{if and only if} it is totally bounded.
\end{proposition}
\begin{proof}
The direction $\Leftarrow$ is immediate (\ref{totalBoundednessImpliesBoundedness}).

For the converse we use \ref{topologicalBoundednessLemma}. Assume $B$ bounded and take some $V\in \entourage_{\R}$. There exists some $\epsilon >0$ such that $V_\epsilon \subseteq V$. As $V_\epsilon \in \entourage_{\R}$, there exists $n\in \N$ and finite $S\subseteq X$ such that $B\subseteq \bigcup_{x\in S}V_\epsilon^nx$.
Now construct
\[ S' \defeq \bigcup_{i=0}^{n-1} (S+\epsilon)\cup(S-\epsilon), \]
which is still finite. We have
\[ \bigcup_{x\in S}V_\epsilon^nx\subseteq \bigcup_{x\in S'}V_\epsilon x \subseteq \bigcup_{x\in S'}V x, \]
so $B\subseteq \bigcup_{x\in S'}V_\epsilon x$, which means the $B$ is totally bounded.
\end{proof}
\begin{corollary}[Heine-Borel theorem] \label{HeineBorel}
The real numbers $\R$ have the Heine-Borel property.
\end{corollary}
TODO: cfr. \ref{DedekindCompleteHeineBorel} (?).
\begin{proof}
Let $B$ be a closed and bounded subset of $\R$. Then $B$ is totally bounded by the proposition and precompact by \ref{precompactTotallyBounded}.

Now $B$ is complete by \ref{propertiesRealNumbers} and \ref{closedComplete}, so $B$ is compact by \ref{compactPrecompactComplete}.
\end{proof}

\begin{proposition} \label{boundedSubsetsRealNumbers}
Let $B\subseteq \R$ be a nonempty subset. Then the following are equivalent:
\begin{enumerate}
\item $B$ is bounded;
\item $B\subseteq \interval{a,b}$ for some $a,b\in \R$;
\item $\diam(B) < \infty$.
\end{enumerate}
\end{proposition}
\begin{proof}
$(1) \Leftrightarrow (2)$ We use \ref{topologicalBoundednessLemma}.

First assume $B$ is bounded. Take $\epsilon>0$, then there exists a finite $S\subseteq X$ such that $B\subseteq \bigcup_{x\in S}V_\epsilon x$. Now let $x_0 = \min S$ and $x_1 = \max S$, which exist because $S$ is finite. Then $B\subseteq \interval{x_0-\epsilon, x_1+\epsilon}$.

Now assume $\diam(B) < \infty$. Then $\inf B > -\infty$ and $\sup B < \infty$, so $B\subseteq \interval{\inf B, \sup B}$. Take $V\in \entourage_\R$, then there exists $\epsilon >0$ such that $V_\epsilon \subseteq V$. We construct
\[ S \defeq \bigcup_{i=0}^{\ceil{\frac{\sup B - \inf B}{2\epsilon}}}\{\inf B + i\cdot \epsilon\}. \]
Then $B\subseteq \interval{\inf B, \sup B} \subseteq \bigcup_{x\in S}V_\epsilon x \subseteq \bigcup_{x\in S}V x$, so $B$ is bounded.

$(2) \Leftrightarrow (3)$ If $B\subseteq \interval{a,b}$, then $\diam(B) \leq b-a$.

If $\diam(B) = D <\infty$. We can find some $x\in B$. Then $B\subseteq \interval{x-D, x+D}$.
\end{proof}
\begin{corollary} \label{closedRealIntervalCompact}
Let $a,b\in \R$. Then $\interval{a,b}$ is compact.
\end{corollary}
\begin{proof}
By \ref{HeineBorel} we just need to show that $\interval{a,b}$ is closed. TODO!
\end{proof}

\begin{proposition}
The real numbers form
\begin{enumerate}
\item a convergence field;
\item a complete convergence lattice.
\end{enumerate}
\end{proposition}
\begin{proof}
TODO
\end{proof}

\begin{example}
The function $x\mapsto x^2$ is not uniformly continuous on $\R$, thus the set of uniformly continuous functions from some uniform space $X$ to $\R$ is not closed under pointwise multiplication.

To see what goes wrong, take $\epsilon >0$. Suppose we could find an appropriate $\delta >0$ and take $x,y\in \R$ such that $|x-y|\leq \delta$. Then $|x^2 - y^2| = \big|(x-y)(x+y)\big|\leq \delta |x+y|$. Since we can only control the distance between $x$ and $y$, there is no way to control $x+y$, which means we can also not control $|x^2 - y^2|$.
\end{example}

\subsubsection{(Pseudo)metrisation of uniform spaces}
If Hausdorff, we may take metrics WLOG. If translation invariant,we may take pseudometrics translation invariant WLOG (i.e. Birkhoff-Kakutani).

\begin{lemma} \label{metrisationLemma}
Let $X$ be a set and $\seq{U_n}_{n\in \N}\in (X^2)^\N$ a sequence of subsets of $X^2$ such that
\begin{itemize}
\item $U_0 = X^2$;
\item $\id_X \subseteq U_n$ for all $n\in\N$;
\item $U_{n+1};U_{n+1};U_{n+1} \subseteq U_n$ for all $n\in\N$.
\end{itemize}
Then there exists a function $d: X^2 \to \R^+$ such that
\begin{itemize}
\item the triangle inequality holds: $d(x,z) \leq d(x,y)+d(y,z)$ for all $x,y,z\in X$;
\item $U_{n+1} \subseteq \setbuilder{(x,y)\in X^2}{d(x,y)< 2^{-n}} \subseteq U_{n}$ for all $n\in\N$.
\end{itemize}
Also
\begin{enumerate}
\item If each $U_n$ is symmetric, then $d$ can be taken to be a pseudometric.
\item If $\{U_n\}_{n\in\N} \subseteq \entourage_\mathcal{U}$ for some uniformity $\mathcal{U}$ on $X$, then $\mathcal{U} \subseteq \mathcal{U}_d$.
\end{enumerate}
\end{lemma}
\begin{proof}
First notice that $\seq{U_n}_{n\in \N}$ determines a chain in $X^2$: for all $n\in\N$ we have
\[ U_n \supseteq U_{n+1};U_{n+1};U_{n+1} \supseteq \id_X;U_{n+1};\id_X = U_{n+1}. \]
Now define a function
\[ f: X^2 \to \interval{0,1}: (x,y) \mapsto \begin{cases}
2^{-n} & \big((x,y)\in U_{n}\setminus U_{n+1}\big) \\
0 & \big((x,y)\in \bigcap_{k\in\N}U_k\big).
\end{cases} \]
Then $(x,y)\in U_{n+1}$ iff $f(x,y) < 2^{-n}$ iff $f(x,y) \leq 2^{-(n+1)}$.
We use this function to construct the desired function $d$, which we define by
\[ d(x,y) \defeq \inf\setbuilder{\sum_{i=0}^k f(u_i, u_{i+1})}{\seq{u_i}_{i=0}^k\in X^*, u_0 = x, u_k = y}. \]
It is clear that $d$ satisfies the triangle inequality.

For all $x,y\in X$, we have $d(x,y) \leq f(x,y)$. If we can prove that $f(x,y) \leq 2 d(x,y)$, then we have
\begin{align*}
U_{n+1} &= \setbuilder{(x,y)\in X^2}{f(x,y)< 2^{-n}} \\
&\subseteq \setbuilder{(x,y)\in X^2}{d(x,y)< 2^{-n}} \\
&\subseteq \setbuilder{(x,y)\in X^2}{f(x,y)< 2^{-n+1}} = U_{n}.
\end{align*}

We prove $f(x,y) \leq 2 d(x,y)$ by proving that, for all $x,y\in X$, $f(x,y) \leq 2 \sum_{k\leq\len(u)}f(u_k, u_{k+1})$ for all $u\in X^*$ such that $u_0 = x$ and $u_{\len(u)} = y$. The proof is by induction on $\len(u)$.

Suppose that the induction hypothesis holds, i.e.\ for all $x,y\in X$ we have that $f(x,y) \leq 2 \sum_{k<\len(u)}f(u_k, u_{k+1})$ for all $u\in X^*$ such that $u_0 = x$, $u_{\len(u)} = y$ and $\len(u)\leq n$. We now need to prove that the inequality holds for all sequences of length $n+1$. Take such a sequence $v \in X^{(n+1)}$ with $v_0 = x$, $v_{n+1} = y$. Set $a\defeq \sum_{k=0}^{n}f(v_k,v_{k+1})$. If $a\geq 1$, then $f(x,y)\leq a$ because $f(x,y)\leq 1$ by definition, so $f(x,y) \leq 2a$. We may restrict to the case $a<1$. Now let $m$ be the largest natural number such that $\sum_{k=0}^{m-1}f(v_k,v_{k+1}) \leq a/2$, then
\[ a = \Big(\sum_{k=0}^{m-1}f(v_k,v_{k+1})\Big) + f(v_m, v_{m+1}) + \Big(\sum_{k=m+1}^{n}f(v_k,v_{k+1})\Big) \eqdef b + f(v_m, v_{m+1}) + c, \]
so $c \leq a/2$ (as otherwise we could have absorbed $f(v_m, v_{m+1})$ into the first part). By the induction hypothesis, we have $f(x, v_m) \leq 2b \leq a$ and $f(v_{m+1}, y) \leq 2c \leq a$. Clearly $f(v_{m}, v_{m+1})\leq a$. Now let $p\in \N$ be the 
natural number such that $2^{-p-1}\leq a< 2^{-p}$ (this exists because we already restricted to the case $a< 1$).
Then $f(x,v_m), f(v_m, v_{m+1}), f(v_{m+1}, y) \leq a < 2^{-p}$, so $(x,v_m), (v_m, v_{m+1}), (v_{m+1}, y)\in U_{p+1}$ and so
\[ (x,y) \in \{(x,v_m)\}; \{(v_m, v_{m+1})\};\{(v_{m+1}, y)\} \subseteq U_{p+1};U_{p+1};U_{p+1} \subseteq U_p. \]
Thus $f(x,y) \leq 2^{-p} = 2\cdot 2^{-p-1} \leq 2a$. This concludes the induction step.

(1) Positivity holds by construction. If each $U_n$ is symmetric, then $f$ is symmetric and thus also $d$. The triangle inequality has already been proven.

(2) Take $H\in \mathcal{U}$. In order to prove $H\in \mathcal{U}_d$, we need to prove that $d^{\imf\imf}(H)\overset{\R}{\longrightarrow} 0$. Indeed we have
\[ \neighbourhood_\R(0) \subseteq \upset \setbuilder{\interval[co]{0, n^{-1}}}{n\in \N} \subseteq \upset d^{\imf\imf}\big(\{U_n\}_{n\in\N}\big) \subseteq d^{\imf\imf}(H). \]
\end{proof}

\begin{theorem}[Urysohn metrisation theorem]
A topological uniform space is pseudometrisable \textup{if and only if} its entourage filter has a countable base.
\end{theorem}
\begin{proof}
Let $\sSet{X,\mathcal{U}}$ be a topological uniform space. First suppose $\mathcal{U}$ is generated by a pseudometric $d$. Then each $\epsilon$-entourage is contained in a $n^{-1}$-entourage, for some $n\in \N$. This shows that the entourage filter is countably based.

Now suppose $\entourage_\mathcal{U}$ has a countable basis $\seq{B_n}_{n\in \N}$. WLOG we may take $B_0 = X^2$. Then define $\seq{C_n}$ recursively by setting $C_0 = X^2$ and, given $C_{n-1}$, finding some $C'_{n}\in \entourage_\mathcal{U}$ such that $C'_{n};C'_{n};C'_{n} \subseteq C_{n-1}$ and setting $C_n \defeq C'_n \cap B_n$. We have $C_n\subseteq B_n$ for all $n\in \N$ and each $C_n\in \entourage_\mathcal{U}$. Thus $\seq{C_n}$ forms a basis of the intourage filter and thus the entourage filter is generated by a pseudometric by \ref{metrisationLemma}. 
\end{proof}

\begin{proposition} \label{topologicalUniformityGeneratedByPseudometrics}
Let $X$ be a set and $\mathcal{U}$ a topological uniformity on $X$. Then 
\[ \mathcal{U} =  \bigwedge \setbuilder{\mathcal{U}_d}{\text{$d$ is a pseudometric on $X$ and $\mathcal{U}\subseteq \mathcal{U}_d$}}. \]
\end{proposition}
\begin{proof}
We clearly have
\[ \mathcal{U} \subseteq \bigwedge \setbuilder{\mathcal{U}_d}{\text{$d$ is a pseudometric on $X$ and $\mathcal{U}\subseteq \mathcal{U}_d$}}. \]

For the other inclusion, it is enough to prove $\entourage_\mathcal{U} \subseteq \entourage_{\bigwedge \mathcal{U}_d}$. Take $V\in \entourage_\mathcal{U}$ and define $\seq{B_n}$ recursively by $B_0 = X^2$, $B_1 = V$ and $B_{n+1}$ is any symmetric set in $\entourage_\mathcal{U}$ such that $B_{n+1};B_{n+1};B_{n+1} \subseteq B_n$. Construct a pseudometric $d'$ as in \ref{metrisationLemma}. Then $d^{\prime\preimf}(\interval[co]{0,1/2})\subseteq V$, so
\[ V \in \entourage_{d'} \subseteq \entourage_{\bigwedge \mathcal{U}_d}. \]
\end{proof}

\begin{definition}
Let $\sSet{X, \mathcal{U}}$ be a uniform space and $d: X\times X\to \R^+$ a pseudometric on $X$. Then we call $d$ a \udef{continuous pseudometric} on $X$ if $\mathcal{U}\subseteq \mathcal{U}_d$.
\end{definition}

\begin{proposition} \label{continuousPseudometricFunctionLemma}
Let $\sSet{X, \mathcal{U}}$ be a uniform space, $a\in X$, $d: X^2\to \R^+$ a pseudometric and $f: X\to \R$ a function.
\begin{enumerate}
\item if $d$ is a continuous pseudometric, then $d(a, -): X\to \R$ is uniformly continuous;
\item if $f$ is uniformly continuous, then $d_\R\circ (f|f): X^2\to \R^+: (x,y)\mapsto |f(x)- f(y)|$ is a continuous pseudometric.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) By \ref{uniformContinuityEntourages}, it is enough to prove that $\entourage_\R \subseteq \upset \big(d(a, -), d(a,-)\big)^{\imf\imf}(\entourage_\mathcal{U})$ and by continuity of the pseudometric, we have $\entourage_d \subseteq \entourage_{\mathcal{U}}$, so we need to prove that
\[ \entourage_\R \subseteq \upset \big(d(a, -), d(a,-)\big)^{\imf\imf}(\entourage_d). \]
Take arbitrary $\epsilon>0$. Then it is enough to prove thave there exists $A\in \entourage_d$ such that $\big(d(a, -), d(a,-)\big)^{\imf}(A) \subseteq V_\epsilon$. Now there exists $A\in \entourage_d$ such that $d^{\imf}(A)\subseteq \cball(0,\epsilon)$. We claim this is the set we want, indeed
\begin{align*}
d^{\imf}(A)\subseteq \cball(0,\epsilon) \iff& \forall (x,y)\in A: \; d(x,y) \leq \epsilon \\
\implies& \forall (x,y)\in A: \; |d(x,a), d(a,y)| \leq \epsilon \\
\iff& \forall (x,y)\in A: \; \big(d(-,a), d(a,-)\big)(x,y) \in V_\epsilon \\
\iff& \big(d(-,a), d(a,-)\big)^\imf(A) = \big(d(a,-), d(a,-)\big)^\imf(A) \subseteq V_\epsilon,
\end{align*}
where we have used the reverse triangle inequality, \ref{metricReverseTriangleInequality}.

(2) Set $d_f \defeq d_\R\circ(f|f)$. It is enough to prove that $\entourage_{d_f}\subseteq \entourage_\mathcal{U}$. Indeed we have
\[ \entourage_{d_f} = \upset \big(d_\R\circ (f|f)\big)^{\preimf\imf}\big(\neighbourhood_\R(0)\big) = \upset (f|f)^{\preimf\imf}\Big(d_\R^{\preimf\imf}\big(\neighbourhood_\R(0)\big)\Big) = \upset (f|f)^{\preimf\imf}(\entourage_\R) \subseteq \entourage_\mathcal{U}, \]
where the last inclusion follows by \ref{upsetPreimageImageGaloisConnection} from $\entourage_\R \subseteq \upset (f|f)^{\imf\imf}(\entourage_\mathcal{U})$, which in turn is the expression of uniform continuity of $f$, by \ref{uniformContinuityEntourages}.
\end{proof}

\subsubsection{Bounded subsets}

\begin{proposition} \label{metricBoundedness}
Let $\sSet{X, \mathcal{U}}$ be a topological uniform space and $B\subseteq X$. Then the following are equivalent:
\begin{enumerate}
\item $B$ is bounded;
\item every real-valued uniformly continuous function on $X$ is bounded on $B$;
\item $B$ is of finite diameter w.r.t. every continuous pseudometric on $X$.
\end{enumerate}
\end{proposition}
\begin{proof}
$(1) \Rightarrow (2)$ Follows from \ref{imageBoundedSet}.

$(2) \Rightarrow (3)$ Let $d$ be a continuous pseudometric on $X$ and take $a\in X$. Then $f_a \defeq d(a,-)$ is uniformly continuous by \ref{continuousPseudometricFunctionLemma}. Now $\diam(B)\leq 2\sup_{x\in B}f_a(x)$ by \ref{diameterBoundedByTwiceRadius} and $f_a^\imf(B)$ is bounded by assumption, so $\sup_{x\in B}f_a(x) < \infty $ by \ref{boundedSubsetsRealNumbers}. Thus $\diam(B)$ is also finite.

$(3) \Rightarrow (1)$ We use \ref{topologicalBoundednessLemma}. Take an arbitrary symmetric $V\in \entourage_\mathcal{U}$ and let $W$ be the transitive closure of $V$, which is an equivalence relation. Let $\seq{A_n}$ be a sequence of distinct $W$-equivalence classes and define
\[ f: X\to \N: x\mapsto \begin{cases}
n & (x\in A_n) \\
0 & (\text{otherwise}).
\end{cases} \]
Now take $(x,y)\in V$. Then $x$ and $y$ must be in the same equivalence class, so $\big(f(x), f(y)\big) = (n,n)$ for some $n\in\N$. Thus $(f|f)^\imf(V)\subseteq \id_\R \subseteq V_\epsilon$ for all $\epsilon>0$. By \ref{uniformContinuityEntourages}, we have that $f$ is uniformly continuous. Now consider the pseudometric $d_f(x,y) = |f(x)-f(y)|$, which is continuous by \ref{continuousPseudometricFunctionLemma}. By assumption, $B$ is of finite radius w.r.t. $d_f$ and thus $B$ meshes with only finitely many $W$-equivalence classes. Let the finite set $F$ consist of one point from the intersection of $B$ with each $W$-equivalence class that meshes with $B$.

Now take some continuous pseudometric $d$ constructed in \ref{topologicalUniformityGeneratedByPseudometrics} and rescaled such that $d^\preimf(\interval[co]{0,1}) \subseteq V$.

Now consider the function $d': X^2\to \R^+$ defined by
\[ d'(x,y) \defeq \begin{cases}
\setbuilder{\sum_{i=0}^kd(u_i, u_{i+1})}{\seq{u_i}_{i=0}^k\in X^*, u_0 = x, u_k = y, (u_{j},u_{j+1})} & \big((x,y)\in W\big) \\
2 & (\text{otherwise})
\end{cases} \]
It is a continuous pseudometric because $d = d'\wedge \underline{2}$ (TODO ref).

Take $x,y\in B$ such that $(x,y)\in W$. If $d'(x,y)\leq m\in\N$, then $(x,y)\in V^m$. As $d'$ is bounded on $B$, we can find some $m\in \N$ such that each $x,y\in B$ that are in the same $W$-equivalence class are $V^m$-related.
\end{proof}

\begin{example}
It is important in \ref{metricBoundedness} to check that $B$ has finite diameter w.r.t. every continuous pseudometric on $X$.

For example, consider $d_\R$ and $d' \defeq d_\R \wedge \underline{1}$. Then both metrics define the same uniformity, but $\sup d^{\prime\imf}(A) \leq 1$ for all subsets $A\subseteq \R$ and thus all subsets of $\R$ have finite diameter w.r.t. $d'$. 
\end{example}

\subsection{Functions on metric spaces}
\subsubsection{Isometries}
\begin{definition}
Let $\sSet{X,d_X}$, $\sSet{Y,d_Y}$ be metric spaces and $f: X\to Y$ a function such that $d_X(a,b) = d_Y\big(f(a), f(b)\big)$ for all $a,b\in X$. Then $f$ is called \udef{isometric} or an \udef{isometry}.
\end{definition}

\begin{lemma} \label{isometryLemma} \label{isometriesUniformlyContinuous}
Let $\sSet{X, d_X}$ and $\sSet{Y, d_Y}$ be metric spaces and $f:X\to Y$ an isometry. Then
\begin{enumerate}
\item $f$ is injective;
\item $f^{-1}: \im(f) \to X$ is an isometry;
\item $f$ is uniformly continuous;
\item $f$ is a uniform embedding;
\item $f$ is closed.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) Take $x,y\in X$ and suppose $f(x) = f(y)$. Then $0 = d_Y\big(f(x), f(y)\big) = d_X(x,y)$, so $x = y$.

(2) Take $f(x),f(y)\in \im(f)$. Then
\[ d_X\big((f^{-1}\circ f)(x), (f^{-1}\circ f)(y)\big) = d_X(x,y) = d_Y\big(f(x), f(y)\big). \]

(3) We can set $\delta = \epsilon$ in \ref{uniformContinuityMetricSpaces}.

(4) Immediate from (2) and (3).

(5) Immediate from (2) and \ref{preimageOpenClosed}.
\end{proof}

\subsubsection{Hlder and Lipschitz continuity}
\begin{definition}
Let $f: X\to Y$ be a map between metric spaces, then $f$ is called \udef{$\alpha$-Hlder continuous}, where $0 < \alpha \leq 1$, if there exists a constant $M$ such that
\[ d_Y(f(x), f(y)) \leq M d_X(x,y)^\alpha \qquad \forall x,y\in X. \]

If $\alpha = 1$, then $f$ is called \udef{Lipschitz continuous}.

The set of $\alpha$-Hlder continuous functions $X\to Y$ is denoted $\cont^{0,\alpha}(X,Y)$.
\end{definition}
The $0$ in $\cont^{0,\alpha}(X,Y)$ appears because we are not considering any derivatives.

\begin{lemma} \label{HolderLipschitzContinuity}
Let $f: X\to Y$ be a map between metric spaces and $0<\alpha \leq \beta \leq 1$.

If $f$ is $\beta$-Hlder continuous, then it is $\alpha$-Hlder continuous.
\end{lemma}
TODO consolidate lemmas + uniform continuity.
\begin{lemma} \label{LipschitzcontinuousContinuous}
A Lipschitz continuous function between metric spaces is uniformly continuous.
\end{lemma}
\begin{proof}
Let $f:X\to Y$ be a Lipschitz continuous function with Lipschitz constant $M$.

Take $\epsilon >0$. Set $\delta = \epsilon / M$. Take $x,y\in X$ such that $d_X(x,y)\leq \delta = \epsilon / M$. Then
\[ d_Y\big(f(x), f(y)\big) \leq Md_X(x,y) \leq M\frac{\epsilon}{M} = \epsilon. \]
Uniform continuity follows from \ref{uniformContinuityMetricSpaces}.
\end{proof}

\begin{example}
The function $\interval{0,1} \to \interval{0,1}: x\mapsto \sqrt{x}$ is uniformly continuous, but not Lipschitz continuous.
\end{example}

\subsubsection{Contractions}
\begin{definition}
Let $f: X\to Y$ be a map between metric spaces, then $f$ is called a \udef{contraction} if it is Lipschitz continuous with Lipschitz constant $M < 1$.
\end{definition}

\begin{proposition} \label{contractionFixedPoint}
Let $f: X\to X$ be a contraction. If $X$ is a complete metric space, then $f$ has a unique fixed point.
\end{proposition}
\begin{proof}
Uniqueness is easy: assume that $f$ has two fixed points $x_1, x_2$. Then $d(x_1,x_2) = d(fx_1, fx_2) \leq M d(x_1,x_2)$. Since $M < 1$ this is only possible if $d(x_1,x_2) = 0$, meaning $x_1  x_2$.

For existence: take some $x_0\in X$. Then define the sequence $\seq{T^n(x_0)}_n$. This is a Cauchy sequence because, for $m>n>1$
\[ d(x_m,x_n) \leq \sum_{i=n}^{m-1}d(x_{i+1}, x_i) \leq \sum^{m-1}_{i=n}M^{i-1}d(x_2,x_1) = \frac{M^{n-1}(1-M^{m-n+1})}{1-M}d(x_2,x_1) \leq \frac{M^{n-1}}{1-M}. \]
By completeness it has a limit. Now $T$ is continuous by \ref{LipschitzcontinuousContinuous}. Then
\[ T\left(\lim_{n\to \infty} T^n(x_0)\right) = \lim_{n\to \infty}T(T^n(x_0)) = \lim_{n\to \infty}T^{n+1}(x_0) = \lim_{n\to \infty} T^n(x_0),  \]
so the limit is a fixed point.
\end{proof}

The construction of the sequence $\seq{T^n(x_0)}_n$ is called \udef{fixed point iteration}. Following the proof of the proposition it is clear we can obtain the fixed point starting the iteration from any point in $X$.

\begin{corollary}
Let $f: X\to X$ be a function on a complete metric space such that $f^n$ is a contration for some $n\in \N$. Then $f$ has a unique fixed point.
\end{corollary}
\begin{proof}
By the proposition we know that $f^n$ has a unique fixed point: $f^n(x) = x$. Applying $f$ to both sides gives
\[ f(f^n(x)) = f^n(f(x)) = f(x), \]
so $f(x)$ is also a fixed point of $f^n$. By uniqueness $f(x) = x$. This shows $f$ has a fixed point.

For uniqueness it is enough to note that any fixed point of $f$ is a fixed point of $f^n$, \ref{fixedPointsMultipleComposition}.
\end{proof}


\subsubsection{Uniform convergence}
\begin{proposition} \label{metricUniformConvergence}
Let $X$ be a set, $\sSet{Y,d}$ a metric space and $\seq{f_n}$ a sequence in $(X\to Y)$. The following are equivalent:
\begin{enumerate}
\item  $\seq{f_n}$ converges uniformly to $f: X\to Y$;
\item $\forall \epsilon > 0: \exists N\in \N: \forall n \geq N: \forall x\in X:  d(f_n(x), f(x)) \leq \epsilon$;
\item $\seq{f_n}$ converges w.r.t. to metric $d_s(f,g) = \sup_{x\in X}d\big(f(x), g(x)\big)$.
\end{enumerate}
\end{proposition}
\begin{proof}
The equivalence of (2) and (3) is clear because they are both equivalent to
\[ \forall \epsilon > 0: \exists N\in \N: \forall n \geq N: \sup_{x\in X} d(f_n(x), f(x)) \leq \epsilon. \]

We prove $(1) \Leftrightarrow (2)$.
\begin{align*}
\seq{f_n} \overset{\text{unif.}}{\longrightarrow} f &\iff \TailsFilter\seq{f_n} \otimes \pfilter{f} \in \mathcal{U}_{(X\to Y)} \\
&\iff (\evalMap, \evalMap)^{\imf\imf}\big((\TailsFilter\seq{f_n} \otimes \pfilter{f})\otimes \{\Delta_X\}\big)^\ttransp \in \mathcal{U}_d \\
&\iff \{V_\epsilon\}_\epsilon \subseteq (\evalMap, \evalMap)^{\imf\imf}\big((\TailsFilter\seq{f_n} \otimes \pfilter{f})\otimes \{\Delta_X\}\big)^\ttransp \\
&\iff \forall \epsilon>0: \exists N\in \N: \; (\evalMap, \evalMap)^{\imf}\big((\setbuilder{f_n}{n\geq N} \times \{f\})\times \Delta_X\big)^\ttransp \subseteq V_\epsilon \\
&\iff \forall \epsilon>0: \exists N\in \N: \; \bigcup_{n\geq N}\bigcup_{x\in X}(\evalMap, \evalMap)^{\imf}\big((\{f_n\} \times \{f\})\times \{(x,x)\}\big)^\ttransp \subseteq V_\epsilon \\
&\iff \forall \epsilon>0: \exists N\in \N: \forall n\geq N: \forall x\in X: \;(\evalMap, \evalMap)^{\imf}\big((\{f_n\} \times \{f\})\times \{(x,x)\}\big)^\ttransp \in V_\epsilon \\
&\iff \forall \epsilon>0: \exists N\in \N: \forall n\geq N: \forall x\in X: \; (\evalMap, \evalMap)^{\imf}\big(\{((f_n, f), (x,x))^\ttransp\}\big) \in V_\epsilon \\
&\iff \forall \epsilon>0: \exists N\in \N: \forall n\geq N: \forall x\in X: \; (\evalMap, \evalMap)\big((f_n,x),(f,x)\big) \in V_\epsilon \\
&\iff \forall \epsilon>0: \exists N\in \N: \forall n\geq N: \forall x\in X: \; (f_n(x), f(x)) \in V_\epsilon \\
&\iff \forall \epsilon>0: \exists N\in \N: \forall n\geq N: \forall x\in X: \; d(f_n(x), f(x)) \leq \epsilon.
\end{align*}
\end{proof}

\begin{definition}
Let $X$ be a set and $\sSet{Y,d}$ a metric space then the metric $d_s$ on $(X\to Y)$ defined by
\[ d_s: (X\to Y)\times (X\to Y) \to \overline{\R^+}: (f,g) \mapsto \sup_{x\in X}d\big(f(x), g(x)\big) \]
is called the \udef{supremum metric} or \udef{uniform metric} on $(X\to Y)$.
\end{definition}

\begin{proposition}
Let $\sSet{X,\xi}$ be a pretopological space, $\sSet{Y,d}$ a metric space and $H\subseteq (X\to Y)$. Then $H$ is equicontinuous at $x$ \textup{if and only if}
\[ \forall \epsilon >0: \exists U \in \vicinity(x): \forall y\in U: \forall f\in H: \quad d\big(f(y), f(x)\big) < \epsilon. \] 
\end{proposition}
\begin{proof}
By \ref{equicontinuityUnionLemma}, the equicontinuity of $H$ is equivalent to $\upset k^{\imf\imf}(\{H\}\otimes \vicinity(x)) \in \uniformity_d$. We calculate
\begin{align*}
\upset k^{\imf\imf}(\{H\}\otimes \vicinity(x)) \in \uniformity_d &\iff \{V_\epsilon\}_{\epsilon >0} \subseteq \upset k^{\imf\imf}(\{H\}\otimes \vicinity(x)) \\
&\iff \forall \epsilon >0: \exists U\in \vicinity(x): k^{\imf}(H\times U) \subseteq V_\epsilon \\
&\iff \forall \epsilon >0: \exists U\in \vicinity(x): \forall y\in U: \forall f\in H: k(f, y) \in V_\epsilon \\
&\iff \forall \epsilon >0: \exists U\in \vicinity(x): \forall y\in U: \forall f\in H: \big(f(y), f(x)\big) \in V_\epsilon \\
&\iff \forall \epsilon >0: \exists U\in \vicinity(x): \forall y\in U: \forall f\in H: d\big(f(y), f(x)\big) \leq \epsilon.
\end{align*}
\end{proof}


\subsubsection{Continuous convergence structure}
\begin{proposition}
Let $\sSet{X,\xi}$ be a compact convergence space and $\sSet{Y,d}$ a metric space. The continuous convergence on $\cont(X,Y)$ is given by
\[ \forall H\in\powerset(\cont(X,Y)_c): \qquad H\to f \iff \sup_{x\in X}d(H(x), f(x)) \to 0. \]
\end{proposition}
\begin{proof}
First assume $\sup_{x\in X}d(H(x), f(x)) \to 0$. 

Now assume $\sup_{x\in X}d(H(x), f(x)) \not\to 0$. Then there exists $A\in \neighbourhood(0)$ such that $A \notin \sup_{x\in X}d(H(x), f(x))$ we can construct the set
\[ \setbuilder{\setbuilder{x\in X}{d(h(x), f(x)) \notin A \forall h\in S}}{S\in H}. \]
We claim this is a proper filter in $X$. It is contained in an ultrafilter by the ultrafilter lemma \ref{ultrafilterLemma} and this ultrafilter $F$ converges by compactness. Thus $d(H[F], f[F]) \not\to 0$ and so $H\not\to f$.
\end{proof}



\subsection{Cauchy structure}

\begin{lemma} \label{metricCauchySequence}
Let $\sSet{X,d}$ be a metric space and $\seq{x_n}$ a sequence in $X$. Then $\seq{x_n}$ is a Cauchy sequence \textup{if and only if}
\[ \forall \epsilon >0: \exists N\in\N: \forall m,n \geq N: \quad d(x_m, x_n)\leq \epsilon. \]
\end{lemma}
\begin{proof}
We have that $\TailsFilter\seq{x_n}$ is a Cauchy filter \textup{if and only if} $\entourage_d \subseteq \TailsFilter\seq{x_n}\otimes \TailsFilter\seq{x_n}$. This is true iff $\forall \epsilon>0$:
\begin{align*}
V_\epsilon \in \TailsFilter\seq{x_n}\otimes \TailsFilter\seq{x_n} &\iff \exists M,N\in\N: \setbuilder{x_n}{n\geq N}\times\setbuilder{x_n}{n\geq M} \subseteq V_\epsilon \\
&\iff \exists N\in\N: \setbuilder{x_n}{n\geq N}\times\setbuilder{x_n}{n\geq N} \subseteq V_\epsilon \\
&\iff \exists N\in\N: \forall m,n \geq N: d(x_m, x_n)\leq \epsilon.
\end{align*}
\end{proof}

\begin{lemma} \label{CauchyCriterion}
Let $\sSet{X,d}$ be a metric space and $\seq{a_n}, \seq{b_n}$ sequences in $X$. If $\seq{b_n}$ is Cauchy and there exists some $A\in\R$ such that
\[ \forall m,n\in\N: d(a_n,a_m) \leq A d(b_n,b_m), \]
then $\seq{a_n}$ is also Cauchy.
\end{lemma}

\begin{proposition} \label{completenessCriterion}
Let $(X,d)$ be a metric space and $S\subset X$ a dense subset. The following are equivalent:
\begin{enumerate}
\item $X$ is complete;
\item all Cauchy sequences in $X$ converge;
\item all Cauchy sequences in $S$ converge in $X$.
\end{enumerate}
\end{proposition}
The implication $(3) \Rightarrow (1)$ depends on the axiom of countable choice.
\begin{proof}
The implications $(1) \Rightarrow (2) \Rightarrow (3)$ are immediate.

$(3) \Rightarrow (1)$ Let $F\in \powerfilters(X)$ be a Cauchy filter. Then, for all $n\in\N$, there exists $A_n\in F$ such that $A_n\times A_n \subseteq V_{n^{-1}}$. Now, for each $n\in \N$, choose (by countable choice) $x_n\in \bigcap_{k\leq n}A_k$. We claim that $\seq{x_n}$ is a Cauchy sequence.
Indeed, take $\epsilon >0$. Then for all $m,n\geq \ceil{\epsilon^{-1}}$, we have $x_m,x_n\in A_{\ceil{\epsilon^{-1}}}$, so $(x_m, x_n) \in V_{\ceil{\epsilon^{-1}}^{-1}} \subseteq V_{\epsilon}$, which means that $d(x_m, x_n) \leq \epsilon$ and $\seq{x_n}$ is a Cauchy sequence by \ref{metricCauchySequence}.

Now, for each $n\in \N$, we can choose (by countable choice) an $x_n'\in S$ such that $d(x_n', x_n)\leq \frac{1}{n}$ by \ref{metricDensityLemma}.
We claim that $\seq{x_n'}$ is a Cauchy sequence. Pick arbitrary $\epsilon >0$. By \ref{metricCauchySequence} there exists $N\in \N$ such that $d(x_m,x_n)\leq \epsilon / 3$ for all $m,n\geq N$. Now set $N' = \max\{N, \ceil{3\epsilon^{-1}}\}$. For all $m,n\geq N'$ we have
\begin{align*}
d(x'_m, x'_n) &\leq d(x'_m, x_m) + d(x_m, x_n) + d(x_n, x'_n) \\
&\leq 1/m + \epsilon/3 + 1/n \\
&\leq 1/N' + \epsilon/3 + 1/N' \leq \epsilon/3 + \epsilon/3 + \epsilon/3 = \epsilon.
\end{align*}
Since $\epsilon > 0$ was taken arbitrarily, $\seq{x'_n}$ is Cauchy by \ref{metricCauchySequence}.

By assumption, $\seq{x'_n}$ converges to some $x\in X$. We show that $\seq{x_n}$ also converges to $x$. To that end, take arbitrary $\epsilon > 0$. Now, by \ref{metricConvergenceSequence}, we can find $N\in \N$ such that $d(x'_n, x)\leq \epsilon / 2$ for all $n\geq N$. Set $M = \max\{N, \ceil{2\epsilon^{-1}}\}$. Then for all $m \geq M$, we have
\begin{align*}
d(x_m, x) &\leq d(x_m, x'_m) + d(x'_m, x) \\
&\leq 1/m + \epsilon/2 \leq 1/M + \epsilon/2 \\
&\leq \ceil{2\epsilon^{-1}}^{-1} + \epsilon/2 \leq \epsilon/2 + \epsilon/2 = \epsilon.
\end{align*}
We conclude, by \ref{metricConvergenceSequence}, that $\seq{x_n}\to x$. Finally $F \subseteq \TailsFilter\seq{x_n}$, so $F$ also converges to $x$.
\end{proof}

\subsubsection{Completion}

\begin{proposition} \label{existenceMetricCompletion}
Let $\sSet{X,d_X}$ be a metric space. Then $X$ has a completion $\sSet{Y,d_Y}$.
\end{proposition}
By definition, $\sSet{Y,d_Y}$ is a complete metric space and we have an isometry $\pi:X\hookrightarrow Y$ such that $\pi^\imf(X)$ is a dense subspace of $Y$.
\begin{proof}
Let $Y'$ be the space of Cauchy sequences in $X$. Introduce the equivalence relation on $\seq{x_i},\seq{y_j}\in Y'$:
\[ \seq{x_i} \sim \seq{y_i} \qquad \iff\qquad \lim_{i\to\infty} d_X(x_i,y_i) = 0. \]
Let $Y$ be the set of equivalence classes in $Y'$ under this equivalence relation. Define
\[ d_Y: Y\times Y\to \R: ([\seq{x_i}],[\seq{y_i}]) \mapsto \lim_{i\to\infty}d_X(x_i,y_i) \qquad\text{and}\qquad \pi: X\to Y: x\mapsto \seq{x}_i. \]
We need to show that $d_Y$ is well-defined, that it is a metric on $Y$, that $\pi^\imf(X)$ is dense in $Y$ and that $(Y,d_Y)$ is complete:
\begin{itemize}
\item Let $[\seq{x_i'}] = [\seq{x_i}]$. Then
\begin{align*}
d_Y([\seq{x_i'}],[\seq{y_i}]) &= \lim_{i\to\infty}d_X(x'_i,y_i) = \lim_{i\to\infty}d_X(x'_i,y_i) + \lim_{i\to\infty}d_X(x_i,x'_i) \\
&= \lim_{i\to\infty}d_X(x_i,x_i')+d_X(x'_i,y_i) \\
&\geq \lim_{i\to\infty}d_X(x_i,y_i) = d_Y([\seq{x_i}],[\seq{y_i}]).
\end{align*}
Similarly we can show $d_Y([\seq{x_i'}],[\seq{y_i}])\leq d_Y([\seq{x_i}],[\seq{y_i}])$, so $d_Y([\seq{x'_i}],[\seq{y_i}]) = d_Y([\seq{x_i}],[\seq{y_i}])$.

We must also show that the domain and codomain of $d_Y$ make sense, i.e.\ the limit exists and does not diverge. It is enough to show that $(d_X(x_i,y_i))$ is a Cauchy sequence, due to the completeness of $\R$. To this end, let $\epsilon>0$. As $\seq{x_i}$ and $\seq{y_i}$ are Cauchy, we can find $N_x,N_y\in\N$ such that $d_X(x_m,x_n)< \epsilon/2$ and $d_X(y_m,y_n) < \epsilon/2$ for all $m,n \geq N_x,N_y$. Then $\forall m,n \geq \max\{N_x,N_y\}$:
\begin{align*}
|d_X(x_m,y_m) - d_X(x_n,y_n)| &\leq |d_X(x_m,x_n)+d_X(x_n,y_m) - d_X(x_n,y_n)| \\
&\leq |d_X(x_m,x_n)+d_X(y_m,y_n)+ d_X(y_n,x_n) - d_X(x_n,y_n)| \\
&= |d_X(x_m,x_n)+d_X(y_m,y_n)| \\
&< \epsilon/2 + \epsilon/2= \epsilon.
\end{align*}
So $(d_X(x_i,y_i))$ is Cauchy and thus converges in $\R$.
\item That $d_Y$ is a metric is easy to check.
\item To prove $\pi^\imf(X)$ is dense in $Y$, we just need to show that every element $y = [\seq{x_i}]\in Y$ is the limit of a sequence in $\pi^\imf(X)$, because all metric spaces are sequential. We claim $\seq{\pi(x_j)}_j$ converges to $y$.

Let $\epsilon>0$. Because $\seq{x_i}$ is Cauchy, we can find an $N\in\N$ such that $\forall m,n>N: d_X(x_m,x_n) < \epsilon/2$. Take $j\geq N$ arbitrary. Then
\[ \forall i\geq N: d_X(x_i,x_j) < \epsilon/2 \quad \implies\quad \lim_{i\to\infty} d_X(x_i,x_j) = d_Y([\seq{x_i}],\seq{\pi(x_j)}_j) \leq \epsilon/2  < \epsilon. \]
\item For completeness, it is enough, by \ref{completenessCriterion}, to show that Cauchy sequences in $\pi^\imf(X)$ converge in $Y$.

Let $\seq{\pi(x_j)}_j$ be a Cauchy sequence in $\pi^\imf(X)$, then $\seq{x_i}$ is Cauchy in $X$ because $\pi$ is isometric. So $\seq{\pi(x_j)}_j$ converges to $\seq{x_i}$ by the previous point.
Let $\seq{\pi(x_j)}_j$ be a Cauchy sequence in $\pi^\imf(X)$, then $\seq{x_i}$ is Cauchy in $X$ because $\pi$ is isometric. So $\seq{\pi(x_j)}_j$ converges to $\seq{x_i}$ by the previous point.
\end{itemize}
\end{proof}

\begin{proposition} \label{universalPropertyCompletion}
Let $(X,d)$ be a metric space. The completion $(Y,\pi)$ of $X$ is unique in the following sense: for any other such completion $(Y',\pi')$, there exists a unique isometric isomorphism $\theta:Y\to Y'$ satisfying $\theta\circ \pi = \pi'$.
\end{proposition}
\begin{proof}
Since $\pi$ is an isometry, it is injective, so $\pi^{-1}:\pi^\imf(X)\to X$ is a surjective isometry and so $\pi'\circ\pi^{-1}:\pi^\imf(X)\to(\pi')^\imf(X)$ is too. Now we must have $\theta|_{\pi^\imf(X)} = (\pi')\circ\pi^{-1}:\pi^\imf(X)\to(\pi')^\imf(X)$ 

TODO universal property!!
\end{proof}

\begin{proposition}
Let $\sSet{X,d_X}$ and $\sSet{Y,d_Y}$ be metric spaces. Then $\hat{X} \times \hat{Y}$ is a completion of $X\times Y$.
\end{proposition}
In other words, $\widehat{X\times Y} \cong \hat{X} \times \hat{Y}$ by unique isometric isomorphism, by \ref{universalPropertyCompletion}.
\begin{proof}
We have that $\hat{X} \times \hat{Y}$ is complete. Indeed, let $F\in \powerfilters(\hat{X}\times \hat{Y})$ be a Cauchy filter. By \ref{initialFinalUniformity} and \ref{continuousImageOfCauchy}, $\proj_1^{\imf\imf}(F)$ and $\proj_2^{\imf\imf}(F)$ are Cauchy filters, so they both converge. We have
\begin{align*}
\proj_1^{\imf\imf}(F)\otimes \pfilter{x} &= \proj_1^{\imf\imf}(F)\otimes \proj_1^{\imf\imf}\big(\pfilter{(x,y)}\big) = (\proj_1|\proj_1)^{\imf\imf}\big(F\otimes \pfilter{(x,y)}\big) \;\in\;\uniformity_{\hat{X}}\qquad \text{and} \\
\proj_2^{\imf\imf}(F)\otimes\pfilter{y} &= \proj_2^{\imf\imf}(F)\otimes\proj_2^{\imf\imf}\big(\pfilter{(x,y)}\big) = (\proj_2|\proj_2)^{\imf\imf}\big(F\otimes \pfilter{(x,y)}\big) \;\in\;\uniformity_{\hat{Y}}
\end{align*}
for some $x\in\hat{X}$ and $y\in \hat{Y}$. Thus $F$ converges to $(x, y)$, again by \ref{initialFinalUniformity}.

We have that $X\times Y$ is a dense subset of $\hat{X} \times \hat{Y}$. Since the uniform convergence on $\hat{X} \times \hat{Y}$ corresponds to the product convergence on \ref{initialUniformConvergenceIsInitialConvergence}, we can use \ref{productAdherence} to compute
\[ \adh_{\hat{X} \times \hat{Y}}(X\times Y) = \adh_{\hat{X}}(X) \times \adh_{\hat{Y}}(Y) = \hat{X}\times \hat{Y}. \]
\end{proof}

\begin{proposition} \label{uniformlyContinuousExtensionToCompletion}
Let $\sSet{X,d}$ be a metric space and $\sSet{Y,\mathcal{U}}$ a complete uniform space. Let $\hat{X}$ be a completion of $X$ with embedding $\hat{}: X\hookrightarrow \hat{X}$ and $f: X\to Y$ a uniformly continuous function. Then $f$ has a unique continuous extension $\hat{f}: \hat{X} \to Y$. Additionally, $\hat{f}$ is uniformly continuous.
\end{proposition}
By extension we mean $\hat{f}(\hat{x}) = f(x)$ for all $x\in X$.
\begin{proof}
Set $X'\defeq \im(\,\hat{}\,)$.
Take $x\in \hat{X}$. By \ref{sequentialLemma} and \ref{sequentialInherenceAdherence}, there exists a sequence $\seq{\hat{x}_n}$ in $X'$ that converges to $x$. This sequence is a Cauchy sequence in $\hat{X}$ by \ref{uniformlyConvergentImpliesCauchy}. Since the map $X'\to X$ is an isometry, it is uniformly continuous by \ref{isometriesUniformlyContinuous} and thus the sequence $\seq{x_n}$ is a Cauchy sequence in $X$ by \ref{continuousImageOfCauchy}. We have that $\seq{f(x_n)}$ is Cauchy, again by \ref{continuousImageOfCauchy}. Since $Y$ is complete, the function $\seq{f(x_n)}$ converges to some $y\in Y$.

Now let $\seq{\hat{x}'_n}$ be another sequence in $X'$ that converges to $x$. By the same line of reasoning as before, we have that $\seq{f(x_n')}$ converges to some $y'\in Y$.
Consider a third sequence
\[ \seq{\hat{x}_n^{\prime\prime}} \defeq \begin{cases}
\hat{x}_{n/2} & (\text{$n$ is even}) \\ \hat{x}'_{(n+1)/2} & (\text{$n$ is odd}).
\end{cases} \]
Since the metric convergence is of finite depth, we have that $\seq{\hat{x}_n^{\prime\prime}} \to x$. Thus, again, we have that $\seq{f(x_n^{\prime\prime})}$ converges to some $y^{\prime\prime}\in Y$. Now both $\seq{f(x_n)}$ and $\seq{f(x_n')}$ are subsequences of $\seq{f(x_n^{\prime\prime})}$, so both sequences also converge to $y^{\prime\prime}$. Since the metric topology is Hausdorff, we have $y = y^{\prime\prime} = y'$.

Thus every extension $\hat{f}$ of $f$ that is continuous at $x$ has $\hat{f}(x) = y$. In other words, for every $x\in \hat{X}$, we have a unique candidate $\hat{f}(x)$. We need to show that this proposed $\hat{f}$ is indeed both continuous and uniformly continuous. By \ref{preservationUniformStructure}, it is enough to show that $\hat{f}$ is uniformly continuous.

We apply \ref{uniformContinuityMetricSpaces}. Take $\epsilon > 0$. Since $f$ was assumed uniformly continuous, we can find a $\delta_f$ given an epsilon of $\epsilon /2$, as in \ref{uniformContinuityMetricSpaces}. We set $\delta = \delta_f / 2$. Take $a,b\in \hat{X}$ such that $d_{\hat{X}}(a,b) \leq \delta$.

Let $\seq{\hat{a}_n}$ be a sequence in $X'$ that converges to $a$. Then, by \ref{metricConvergenceSequence}, there exists $M_1\in \N$ such that $d_{\hat{X}}(a_m, a)\leq \delta_f/4$ for all $m\geq M_1$. Since $\hat{f}(a)$ was chosen such that $\seq{f(a_n)} \to \hat{f}(a)$, by \ref{metricConvergenceSequence} we can find some $M_2\in\N$ such that $d_Y\big(\hat{f}(a), f(a_m)\big) \leq \epsilon /4$ for all $m\geq M_2$. Set $M \defeq \max\{M_1,M_2\}$. By a similar procedure, we can take $N\in \N$ such that $d_{\hat{X}}(b_n, b)\leq \delta_f/4$ and $d_Y\big(\hat{f}(b), f(b_n)\big) \leq \epsilon / 4$ for all $n\geq N$. Then
\begin{align*}
d_X(a_M, b_N) = d_{\hat{X}}(\hat{a}_M, \hat{b}_N) &\leq d_{\hat{X}}(\hat{a}_M, a) + d_{\hat{X}}(a,b) + d_{\hat{X}}(b, \hat{b}_M) \\
&\leq \delta_f/4 + \delta_f/2 + \delta_f/4 = \delta_f.
\end{align*}
This means that $d_Y\big(f(a_M), f(b_N)\big) \leq \epsilon/2$ and thus
\begin{align*}
d_Y\big(\hat{f}(a), \hat{f}(b)\big) &\leq d_Y\big(\hat{f}(a), f(a_N)\big) + d_Y\big(f(a_N), f(b_M)\big) + d_Y\big(f(b_M), \hat{f}(b)\big) \\
&\leq \epsilon / 4 + \epsilon / 2 + \epsilon / 4 = \epsilon.
\end{align*}
\end{proof}

\begin{lemma}
Let $\sSet{X,d}$ be a metric space with completion $\hat{X}$. Then $\hat{d}_X = d_{\hat{X}}$.
\end{lemma}
The extension $\hat{d}_X$ exists by \ref{uniformlyContinuousExtensionToCompletion} because $d_X$ is uniformly continuous (\ref{metricUniformlyContinuous}) and $\overline{\R^+}$ is complete.
\begin{proof}
Since the completion defines an isometric embedding and the $\hat{d}_X$ extends $d_X$, we have
\[ d_{\hat{X}}(\hat{x}, \hat{y}) = d_X(x,y) = \hat{d}_X(\hat{x}, \hat{y}) \]
for all $x,y\in X$. Since $d_{\hat{X}}$ is uniformly continuous, by \ref{metricUniformlyContinuous}, it is a continuous extension of $d_X$ and thus must be equal to $\hat{d}_X$ by uniqueness of the continuous extension, \ref{uniformlyContinuousExtensionToCompletion}.  
\end{proof}
\begin{lemma}
Let $\sSet{X,d_X}, \sSet{Y,d_Y}$ and $\sSet{Z,d_Z}$ be metric spaces. Assume $Z$ complete. Let $f: X\to Y$ and $g: Y\to Z$ be uniformly continuous functions. Then $\widehat{g\circ f} = \hat{g}\circ \hat{f}$.
\end{lemma}
Since $Y$ was not assumed complete, by $\hat{f}$ we mean the extension of the extension $f: X\to \hat{Y}$. 
\begin{proof}
Since $\hat{g}\circ \hat{f}$ extends $g\circ f$ and is continuous, the equality is immediate by uniqueness, \ref{uniformlyContinuousExtensionToCompletion}.
\end{proof}


\subsection{Subsets of metric spaces}
\subsubsection{Distance to a set}
\begin{definition}
Let $\sSet{X,d}$ be a metric space and $A\subseteq X$. Then we define
\[ d_A: X\to \R: x\mapsto d(x,A) = \inf\setbuilder{d(x,a)}{a\in A}. \]
For all $x\in X$, we call $d_A(x)$ the \udef{distance} from $x$ to $A$.
\end{definition}

\begin{lemma} \label{distanceToSetContinuous}
Let $\sSet{X,d}$ be a metric space and $A\subseteq X$. Then $d_A$ is uniformly continuous.
\end{lemma}
\begin{proof}
TODO
\end{proof}

\begin{lemma}
Let $\sSet{X,d}$ be a metric space, $A\subseteq X$ and $x\in X$. Then $x\in \overline{A}$ \textup{if and only if} $d_A(x) = 0$.
\end{lemma}



\subsubsection{Covering theorems}
\begin{proposition}[Finite covering lemma \textit{or} 3-fold covering lemma]
Let $\sSet{X,d}$ be a metric space and $\ball(x_0, r_0), \ldots \ball(x_n, r_n)$ a finite set of balls in $X$. Then there exists a subset $\ball(x_{i_0}, r_{i_0}), \ldots \ball(x_{i_k}, r_{i_k})$ of pairwise disjoint balls such that
\[ \bigcup_{j=0}^n\ball(x_j, r_j) \subseteq \bigcup_{j=0}^k \ball(x_{i_j}, 3r_{i_j}). \]
\end{proposition}
\begin{proof}
We pick the set of balls recursively: we let $i_{l+1}$ be the index of the ball with the largest radius that is disjoint with $\bigcup_{j=0}^l \ball(x_j, r_j)$. If there are multiple, choose one arbitrarily. If there are none, terminate. (TODO ref recursion).

We now show that the inclusion holds. Take some $\ball(x_j, r_j)$. It must mesh with some element $\ball(x_{i_m}, r_{i_m})$ (if not it would have been added and in that case it would mesh with itself). Take $y\in \ball(x_j, r_j) \cap \ball(x_{i_m}, r_{i_m})$. By construction we also have $r_{i_m} \geq r_j$. Now take any $z\in \ball(x_j, r_j)$. By the triangle inequality, we have
\begin{align*}
d(x_{i_m}, z) &\leq d(x_{i_m}, y) + d(y, x_j) + d(x_j, z) \\
&\leq r_{i_m} + r_j + r_j \leq 3r_{i_m}.
\end{align*}
So $z\in \ball(x_{i_m}, 3r_{i_m})$ and thus $\ball(x_j, r_j)\subseteq\ball(x_{i_m}, 3r_{i_m})$. This implies the inclusion of unions.
\end{proof}

\begin{proposition}[Infinite covering lemma \textit{or} 5-fold covering lemma] \label{5foldCoveringLemma}
Let $\sSet{X,d}$ be a metric space and $\{\ball(x_i, r_i)\}_{i\in I}$ an arbitrary set of balls in $X$ such that $\sup_{i\in I}r_i < \infty$. Then there exists a subset $\{\ball(x_j, r_j)\}_{j\in J}$ of pairwise disjoint balls such that
\[ \bigcup_{i\in I}\ball(x_i, r_i) \subseteq \bigcup_{j\in J} \ball(x_j, 5\, r_j). \]
\end{proposition}
\begin{proof}
Set $R \defeq \sup_{i\in I}r_i < \infty$ and consider the partition $\{F_n\}_{n\in \N}$ of $\{\ball(x_i, r_i)\}_{i\in I}$ defined by
\[ F_n \defeq \setbuilder{\ball(x_i, r_i)}{\frac{R}{2^{n+1}} < r_i \leq \frac{R}{2^n}}. \]
Define two sequences $\seq{G_n}, \seq{H_n}$ of subsets of $\{\ball(x_i, r_i)\}_{i\in I}$ as follows: $H_0 = F_0$ and $G_0$ is a maximal disjoint subcollection of $H_0$ (which exists by \ref{maximalSubsetOfDisjointSets}). We define the sequences recursively by
\[ H_{n+1} = F_{n+1} \cap \left(\bigcup_{k=0}^nG_k\right)^\perp \qquad\text{and $G_{n+1}$ is a maximal disjoint subcollection of $H_{n+1}$.} \]
Now we claim $G \defeq \bigcup_{n\in\N}G_n$ is the subset we are looking for. First note that $G$ is pairwise disjoint: take $A,B\in G$, then $A\in G_k$ and $B\in G_l$. If $k = l$, then $A\perp B$ by construction. Now suppose $k\neq l$, WLOG we may take $l\leq k$. Then $A\in H_k \subseteq G_l^\perp$, by construction. Thus $A\perp B$.

Now take some $\ball(x_m, r_m) \in \bigcup_{i\in I}\ball(x_i, r_i)$. Then $r_m \leq R$, so we can find $n\in \N$ such that $\frac{R}{2^{n+1}} < r_i \leq \frac{R}{2^n}$ and thus $\ball(x_m, r_m)\in F_n$. By construction, either $\ball(x_m, r_m)\in H_n$ or $\ball(x_m, r_m)\notin \Big(\bigcup_{k=0}^{n-1}G_k\Big)^\perp$. In both cases $\ball(x_m, r_m)$ must intersect some $\ball(x_j, r_j)$ with $j\in J$ such that $r_j \geq \frac{R}{2^{n+1}}$. We have $r_m \leq \frac{R}{2^n} = 2 \frac{R}{2^{n+1}} \leq 2 r_j$ and we can find $y\in \ball(x_m, r_m) \cap \ball(x_j, r_j)$.

It is now enough to show that $\ball(x_m, r_m) \subseteq \ball(x_j, r_j)$. Take an arbitrary $z\in \ball(x_m, r_m)$. Then we have
\begin{align*}
d(x_j, z) &\leq d(x_j, y) + d(y, x_m) + d(x_m, z) \\
&\leq r_j + r_m + r_m \\
&\leq r_j + 2r_j + 2r_j = 5r_j.
\end{align*}
So $z\in \ball(x_j, 5r_j)$ and thus $\ball(x_m, r_m)\subseteq\ball(x_j, 5r_j)$. This implies the inclusion of unions.
\end{proof}
\begin{corollary} \label{improvedConstant5foldCoveringLemma}
The constant $5$ can be improved to $3+\epsilon$ for all $\epsilon >0$.
\end{corollary}
\begin{proof}
In the proof we can replace $2$ by $1+\epsilon/2$. Then the bound becomes $1+(1+\epsilon/2) + (1+\epsilon/2) = 3+\epsilon$.
\end{proof}
\begin{corollary}
If $\sSet{X,d}$ is separable, then the subset is countable.
\end{corollary}
\begin{proof}
TODO ref: every set of disjoint neighbourhoods is countable.
\end{proof}

\begin{example}
The hypothesis that the radius be bounded is necessary: consider the set $\{\ball(x, 1/n)\}_{n\in \N}$. Then no two two balls are disjoint, so a disjoint subset contains at most one ball. The one ball cannot be scaled up to cover everything.
\end{example}

\section{TODO Uniform covers}
\subsection{Stars of filters}
\begin{definition}
Let $X$ be a set, $\mathcal{F} \subseteq \powerfilters(X)$ a set of filters on $X$ and $F\in\powerfilters(X)$ a filter. The \udef{star} of $F$ w.r.t. $\mathcal{F}$, denoted $\starFilter(F,\mathcal{F})$, is defined as
\[ \starFilter(F,\mathcal{F}) \defeq \bigcap \setbuilder{G\in \mathcal{F}}{G \amesh F}. \]
The \udef{star} of $\mathcal{F}$, denoted $\mathcal{F}^*$, is defined as
\[ \mathcal{F}^* \defeq \setbuilder{\starFilter(F,\mathcal{F})}{F\in \mathcal{F}}. \]
\end{definition}

\begin{lemma} \label{starRefinementLemma}
Let $X$ be a set, $\mathcal{F} \subseteq \powerfilters(X)$ a set of filters on $X$ and $F\in \mathcal{F}$. Then
\begin{enumerate}
\item $\starFilter(F,\mathcal{F}) \subseteq F$;
\item $\starFilter(\pfilter{x}, \mathcal{F}) = \Big(\bigcap\setbuilder{F\otimes F}{F\in\mathcal{F}}\Big)x$;
\item $\mathcal{F} \subseteq \upset\mathcal{F}^*$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) We have $F\in \setbuilder{G\in \mathcal{F}}{G \amesh F}$ by \ref{properFiltersSelfMesh}, so
\[ F \;\supseteq\; \bigcap \setbuilder{G\in \mathcal{F}}{G \amesh F} \;=\; \starFilter(F,\mathcal{F}). \]

(2) By \ref{upsetResiduatedImageGaloisConnection} and \ref{principalImageProductFilter}, we have
\begin{align*}
\Big(\bigcap\setbuilder{F\otimes F}{F\in\mathcal{F}}\Big)x &= \bigcap_{F\in\mathcal{F}}(F\otimes F)x \\
&= \bigcap \setbuilder{F\in\mathcal{F}}{x\in\ker(F)} \\
&= \bigcap \setbuilder{F\in\mathcal{F}}{F\amesh\pfilter{x}} = \starFilter(\pfilter{x}, \mathcal{F}).
\end{align*}

(3) Immediate from (1).
\end{proof}

\begin{lemma} \label{starFilterOrderingLemma}
Let $X$ be a set, $\mathcal{F} \subseteq \powerfilters(X)$ a set of filters on $X$ and $G,H\in \powerfilters(X)$ filters. Then
\begin{enumerate}
\item if $G\subseteq H$, then $\starFilter(G,\mathcal{F}) \subseteq \starFilter(H,\mathcal{F})$;
\item if $\mathcal{F}$ is a cover of $X$, then $\starFilter(\pfilter{x}, \mathcal{F}) \in \upset \mathcal{F}^*$ for all $x\in X$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) If $G\subseteq H$, then $F\amesh H$ implies $F\amesh G$ for all filters $F\in\powerfilters(X)$. Thus $\setbuilder{F\in\mathcal{F}}{F\amesh H} \subseteq \setbuilder{F\in\mathcal{F}}{F\amesh G}$, which implies
\[ \starFilter(G,\mathcal{F}) = \bigcap\setbuilder{F\in\mathcal{F}}{F\amesh G} \subseteq \bigcap\setbuilder{F\in\mathcal{F}}{F\amesh H} = \starFilter(H,\mathcal{F}). \]

(2) By \ref{principalUltrafilterInCover} there exists $F\in \mathcal{F}$ such that $F\subseteq \pfilter{x}$. Then $\starFilter(F, \mathcal{F}) \subseteq \starFilter(\pfilter{x}, \mathcal{F})$. As $\starFilter(F, \mathcal{F}) \in \mathcal{F}^*$, this implies the result.
\end{proof}

\begin{lemma}
Let $X$ be a set, $F\in\powerfilters(X)$ and $\mathcal{F}\subseteq \powerfilters(X)$. Then
\begin{enumerate}
\item $(F\otimes F);\Big(\bigcap_{G\in \mathcal{F}}G\otimes G\Big) \supseteq F\otimes \starFilter(F, \mathcal{F})$;
\item if $H\in\powerfilters(X^2)$ is symmetric, then $\starFilter(\pfilter{x}, \setbuilder{Hy}{y\in X}) = (H;H)x$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) We calculate, using that $(F\otimes F);-$ preserves intersections by \ref{filterCompositionResidual}, as well as \ref{orderPreservingFunctionLatticeOperations},
\begin{align*}
(F\otimes F);\Big(\bigcap_{G\in \mathcal{F}}G\otimes G\Big) &= \bigcap \setbuilder{(F\otimes F); (G\otimes G)}{G\in \mathcal{F}} \\
&= \bigcap \setbuilder{F\otimes G}{G\in \mathcal{F}, G\amesh F} \\
&\supseteq F\otimes \bigcap \setbuilder{G \in \mathcal{F}}{G\amesh F} \\
&= F\otimes \starFilter(F, \mathcal{F}).
\end{align*}

(2) ????
\end{proof}

\subsubsection{Barycentric refinement}
\begin{definition}
Let $X$ be a set and $\mathcal{F},\mathcal{G} \subseteq \powerfilters(X)$ sets of filters on $X$.
Then we define the \udef{ultrastar} $\mathcal{F}^U$ of $\mathcal{F}$ as
\[ \mathcal{F}^U \defeq \setbuilder{\starFilter(U, \mathcal{F})}{U\in \powerultrafilters(X) \cap \upset\mathcal{F}} \]
We call $\mathcal{F}$ an \udef{ultrastar refinement} or a \udef{barycentric refinement} of $\mathcal{G}$ if $\mathcal{F}^U \subseteq \upset \mathcal{G}$.
We write $\mathcal{F} <^B \mathcal{G}$.
\end{definition}

\subsubsection{Star-refinement}
\begin{definition}
Let $X$ be a set and $\mathcal{F},\mathcal{G} \subseteq \powerfilters(X)$ sets of filters on $X$. Then we call $\mathcal{F}$ a \udef{star-refinement} of $\mathcal{G}$ if $\mathcal{F}^* \subseteq \upset \mathcal{G}$. We write $\mathcal{F} <^* \mathcal{G}$.
\end{definition}

\begin{lemma}
Let $X$ be a set and $\mathcal{F}\subseteq \powerfilters(X)$ a cover of $X$. Then $\mathcal{F} <^* \big\{\{X\}\big\}$.
\end{lemma}
\begin{proof}
Every set of filters is a subset of $\upset \big\{\{X\}\big\}$.
\end{proof}

\begin{proposition}
Let $X$ be a set and $\mathcal{F},\mathcal{G}, \mathcal{H}\subseteq \powerfilters(X)$ covers of $X$. Then
\begin{enumerate}
\item if $\mathcal{F} <^* \mathcal{G}$, then $\mathcal{F} <^B \mathcal{G}$;
\item if $\mathcal{F}$ contains no free filters, then $\mathcal{F} <^B \mathcal{G}$ and $\mathcal{G} <^B \mathcal{H}$ imply $\mathcal{F} <^* \mathcal{H}$.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) For all $U\in \powerultrafilters(X) \cap \upset\mathcal{F}$, there exists $F\in \mathcal{F}$ such that $F\subseteq U$. By \ref{starFilterOrderingLemma}, we have that $\starFilter(U,\mathcal{F}) \supseteq \starFilter(F, \mathcal{F})$. Thus $\mathcal{F}^U \subseteq \upset\mathcal{F}^*$. By assumption $\upset \mathcal{F}^* \subseteq \upset\mathcal{G}$. The result follows by transitivity.

(2) Assume $\mathcal{F} <^B \mathcal{G}$ and $\mathcal{G} <^B \mathcal{H}$. Take $F\in\mathcal{F}$. We need to show that there exists $H\in \mathcal{H}$ such that $H \subseteq \starFilter(F,\mathcal{F})$.

First consider the case $F = \powerset(X)$. Then any $H\in \mathcal{H}$ works because $\starFilter\big(\powerset(X), \mathcal{F}\big) = \powerset(X)$.

Now let $F$ be proper. By the ultrafilter lemma \ref{ultrafilterLemma}, we can find an ultrafilter $U\supseteq F$. By assumption, there exists $H\in \mathcal{H}$ such that $H \subseteq \starFilter(\pfilter{x}, \mathcal{G})$. We claim this $H$ satisfies the requirement. To show
\[ H \subseteq \starFilter(F,\mathcal{F}) = \bigcap\setbuilder{F'\in \mathcal{F}}{F'\amesh F}, \]
we show that $H\subseteq F'$ for all $F'\in \mathcal{F}$ such that $F'\amesh F$.
\end{proof}

\begin{proposition}
Let $X$ be a set. The relation $<^*$ is a transitive relation on $\powerset\big(\powerfilters(X)\big)$.
\end{proposition}
\begin{proof}
Let $\mathcal{F}, \mathcal{G}, \mathcal{H}\subseteq \powerfilters(X)$ be sets of filters on $X$.

Suppose $\mathcal{F}<^* \mathcal{G}$ and $\mathcal{G} <^* \mathcal{H}$.
Then $\mathcal{F}^*\subseteq \upset \mathcal{G}$ and $\mathcal{G}^* \subseteq \upset \mathcal{H}$. By \ref{starRefinementLemma}, we have $\mathcal{G}\subseteq \upset \mathcal{G}^*$.

These inclusions imply $\upset \mathcal{G}^* \subseteq \upset \mathcal{H}$ and $\upset \mathcal{G} \subseteq \upset \mathcal{G}^*$. Combining gives
\[ \mathcal{F}^* \subseteq \upset \mathcal{G} \subseteq \upset \mathcal{G}^* \subseteq \upset \mathcal{H}, \]
so $\mathcal{F} <^* \mathcal{H}$.
\end{proof}
TODO also from previous proposition?

\subsection{Uniform covers}
\begin{definition}
Let $X$ be a set. A set $\mathbf{U}\subseteq \powerset\big(\powerfilters(X)\big)$ is called a \udef{uniform cover set} if it is a filter w.r.t. star-refinement.
\end{definition}

TODO: non-finite-depth: not any two, but any one element of $\mathcal{U}$ has a star-lower bound?

\begin{lemma}
A uniform cover set is upwards closed w.r.t. inclusion.
\end{lemma}
\begin{proof}
Let $\mathbf{U}$ be a uniform cover on a set $X$. 
\end{proof}

\begin{proposition}
Let $X$ be a set. Then the function
\[ \{\text{uniformities on $X$}\} \to \{\text{uniform cover sets of $X$}\}: \mathcal{U} \mapsto \setbuilder{\setbuilder{Hx}{x\in X}\big.}{H\in \mathcal{U}} \]
is a bijection with inverse
\[ \{\text{uniform cover sets of $X$}\} \to \{\text{uniformities on $X$}\}: \mathbf{U} \mapsto \upset\setbuilder{\bigcap \setbuilder{F \otimes F}{F\in \mathcal{F}}}{\mathcal{F}\in \mathbf{U}}. \]
\end{proposition}
\begin{proof}


Now we show that $\upset\setbuilder{\bigcap \setbuilder{F \otimes F}{F\in \mathcal{F}}}{\mathcal{F}\in \mathbf{U}}$ is a uniformity for all uniform covers $\mathbf{U}$. It is clear that it is closed under transposition and upwards closure is given by construction.

Take arbitrary $x\in X$. For $\pfilter{x}\otimes\pfilter{x}$ to be in the uniformity, it is enough to show that $\pfilter{x}\otimes\pfilter{x} \supseteq \bigcap\setbuilder{F\otimes F}{F\in\mathcal{F}}$ any $\mathcal{F}\in\mathbf{U}$. This follows straight from \ref{principalUltrafilterInCover}.
\end{proof}


\section{TODO Star refinement}
\begin{definition}
Let $X$ be a set and $U,V\subseteq \powerset(X)$ covers of $X$.
\begin{itemize}
\item The \udef{star} of $A\subseteq X$ w.r.t. $U$ is the set defined by
\[ \operatorname{star}_U(A) \defeq \bigcup\setbuilder{B\in U}{A\mesh B}. \]
\item The \udef{star} of $U$ is
\[ U^* \defeq \setbuilder{\operatorname{star}_U(B)}{B\in U}. \]
\item The cover $U$ \udef{star refines} the cover $V$ if $U^*\subseteq \downset V$. This is denoted $U <^* V$.
\end{itemize}
\end{definition}
Note the different direction compared with the definition of refinement.

\begin{lemma}
Star refinement is a transitive relation on $\powerset^2(X)$.
\end{lemma}
\begin{proof}
Assume $U <^* V$ and $V<^* W$, i.e.\ $U^* \subseteq \downset V$ and $V^* \subseteq \downset W$. The last inclusion implies $\downset V^* \subseteq \downset W$. Now $V\subseteq \downset V^*$ because $A\subseteq \operatorname{star}_V(A)$ for all $A\in V$, which implies $\downset V\subseteq \downset V^*$. Then we have
\[ U^* \subseteq \downset V \subseteq \downset V^* \subseteq \downset W, \]
and, by transitivity of inclusion, $U <^* W$.
\end{proof}

\begin{example}
Star refinement is not reflexive in general. 

Consider the set $X = \{0,1,2\}$ and the cover $U = \big\{\{0,1\}, \{1,2\}\big\}$. Then $U^* = \big\{\{0,1,2\}\big\}$, but $\{0,1,2\}\notin \downset U$.
\end{example}

\begin{lemma}
Let $X$ be a set and $C,D\subseteq \powerset(X)$. If $C\subseteq D$, them $C^*\subseteq \downset D^*$.
\end{lemma}
\begin{proof}
Take $A \in C^*$. Then $A = \operatorname{star}_C(B) = \bigcup \setbuilder{B'\in C}{B'\mesh B}$
\end{proof}

\subsubsection{Tolerance cover}
\begin{definition}
Let $V$ be a tolerance relation on a set $X$. The \udef{(tolerance) cover} of $X$ associated to $V$ is defined as
\[ C_V \defeq \setbuilder{xV}{x\in X}. \]
\end{definition}

\begin{lemma}
Let $V, W$ be tolerance relations on $X$ and $C_V, C_W$ their associated covers.
\end{lemma}

\begin{lemma} \label{toleranceCoverStarRefinement}
Let $V$ be a tolerance relation on $X$ and $C_V$ its associated cover. Then
\begin{enumerate}
\item $\operatorname{star}_{C_V}(xV) = x(V;V;V)$;
\item $C_V <^* C_{V;V;V}$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) We calculate
\begin{align*}
\operatorname{star}_{C_V}(xV) &= \bigcup \setbuilder{yV}{xV\mesh yV} \\
&= \bigcup \setbuilder{yV}{x(V;V)y} \\
&= x(V;V;V).
\end{align*}

(2) By (1), each $\operatorname{star}_{C_V}(xV)\in C_V^*$ is an element of $C_{V;V;V}$.
\end{proof}

\subsubsection{Uniform covers}
\begin{definition}
Let $X$ be a set. A \udef{uniform cover set} of $X$ is a filter of covers in $\sSet{\powerset^2(X), <^*}$. Members of a uniform cover set are called \udef{uniform covers}.
\end{definition}

\begin{proposition}
Let $X$ be a set.
\begin{enumerate}
\item Let $\entourage$ be a topological entourage filter. Then
\[ \setbuilder{C}{\exists V\in\entourage: C_V\subseteq \downset C} = \setbuilder{C_V}{V\in\entourage}_{<^*} \]
is a uniform cover set.
\item Let $\mathcal{C}$ be a uniform cover set. Then
\[ \upset \setbuilder{\bigcup\setbuilder{A\times A}{A\in C}}{C\in\mathcal{C}} \]
is a unform filter set.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) We first verify the equality. Take $V\in \entourage$. Then there exists $W\in \entourage$ such that $W;W;W\subseteq V$.


upwards closure: Let $C$ be a uniform cover and $C <^* D$. Then 
\end{proof}



\begin{definition}
Let $X$ be a set. A \udef{uniform cover set} of $X$ is a filter of covers in $\sSet{\powerset^2(X), <^*}$.
\end{definition}