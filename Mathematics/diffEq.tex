\chapter{Semigroups and evolution operators}
\section{Semigroups of linear operators}
\begin{definition}
Let $X$ be a Banach space and $\sSet{I, +, 0, \leq}$ a partially ordered normed group with positive cone $I^+$. We call a function $T: I^+ \to \Lin(X)$ a \udef{semigroup of linear operators} (or just \udef{semigroup}) if
\begin{itemize}
\item $T(0) = \id_X$;
\item $T(s+t) = T(s)T(t)$ for all $s,t \in I^+$.
\end{itemize}
A function $T: I \to \Lin(X)$ satisfying the same conditions is called a \udef{group of linear operators}.

A semigroup is called \udef{strongly continuous} if it is continuous when $I$ is equipped with the order convergence and $X$ with the strong operator topology.

We call $T$ \udef{bounded} if $T(t)$ is bounded for all $t\in I^+$.
\end{definition}

\begin{lemma}
A semigroup of linear operators $T:I^+\to \Lin(X)$ is bounded \textup{if and only if} $T[S]$ is a set of bounded operators for some $S\subseteq I+$ that generates $I^+$ as a monoid.
\end{lemma}

\begin{proposition}
Let $T:I^+\to \Lin(X)$ be a semigroup of operators on a Banach space. Then the following are equivalent:
\begin{enumerate}
\item $T$ is strongly continuous;
\item $T$ is strongly continuous at $0$;
\item $T(t)$ is uniformly bounded on some neighbourhood of $0$ and there exists a dense subset $D\subseteq X$ such that $\lim_{t\to 0} T(t)x = x$ for all $x\in D$.
\end{enumerate}
\end{proposition}
\begin{proof}
$(1) \Rightarrow (2)$ If a semigroup is strongly continuous, then it is obviously strongly continuous at $0$.

$(2) \Rightarrow (3)$ Because $T(0) = \id_X$, strong continuity at $0$ means that $\lim_{t\to 0} T(t)x = x$ for all $x\in X$. Thus this also holds for all $x$ in any (dense) subset of $X$.

For the uniform bound we use the uniform boundedness principle \ref{uniformBoundednessPrinciple}. It is then enough to show that there exists a neighbourhood $U$ of $0$ such that $\sup\setbuilder{\norm{T(t)x}}{t\in U} <\infty$ for all $x\in X$.

TODO

$(3) \Rightarrow (1)$

Conversely, assume a semigroup $T: I^+\to \Lin(X)$ is continuous at $0$. Take $t_0\in I^+$. By \ref{leftRightConvergence} it is enough to check that $T$ is left and right continuous at $t_0$.

First let $F$ be a filter in $\powerfilters(\upset t_0)$ that converges to $t_0$. Then $F - t_0 \in \powerfilters(I^+)$ and $F-t_0 \to 0$. Thus $T[F] = T[F-t_0 + t_0] = T[F-t_0]T[t_0] \to T[0]T[t_0] = T[t_0]$, meaning that $T$ is right continuous.

TODO left continuity.
\end{proof}
TODO cfr SOT.

\subsection{Growth bounds}
\begin{proposition}
Let $T: I^+ \to \Lin(X)$ be a strongly continuous semigroup of bounded linear operators. Then there exist contstants $w\in \R$ and $M\geq 1$ such that
\[ \forall t\in I^+:\quad \norm{T(t)} \leq Me^{w\norm{t}}. \]
\end{proposition}
\begin{proof}
Choose $M$ such that for all $0\leq s\leq 1$, $\norm{T(s)}\leq M$.
\end{proof}


\subsection{Differentiability}
\begin{definition}
Let $T: I^+ \to \Lin(X)$ be a semigroup of linear operators. We say $T$ is \udef{differentiable} at $t\in I$ if the limit
\[  \]
\end{definition}


\chapter{$C_0$ semigroups}
In this section we will study functions $T: \R^+\to \Bounded(X)$ that are strongly continuous semigroups on a Banach spaces $X$. We will shorten this description to \udef{operator semigroup}.

\begin{definition}
Let $X$ be a Banach space. We call a function $T: \R^{\geq 0} \to \Lin(X)$ a \udef{semigroup of linear operators} (or just \udef{semigroup}) if
\begin{itemize}
\item $T(0) = \id_X$;
\item $T(s+t) = T(s)T(t)$ for all $s,t \in I^+$.
\end{itemize}
A function $T: \R \to \Lin(X)$ satisfying the same conditions is called a \udef{group of linear operators}.
\end{definition}

\section{The $C_0$ property}
\begin{definition}
Let $X$ be a Banach space. A semigroup of linear operators $T: \R^{\geq 0} \to \Lin(X)$ is called a \udef{$C_0$ semigroup} if it is strongly continuous, i.e.\ $T$ is continuous when $\Lin(X)$ is equipped with the strong operator convergence.
\end{definition}

\begin{lemma}
A semigroup of linear operators $T: \R^{\geq 0} \to \Lin(X)$ is $C_0$ \textup{if and only if} it is strongly continuous at $0$.
\end{lemma}
\begin{proof}
It is enough to prove the strong continuity at $0$ implies strong continuity.

Take some filter$F\to t\in\R^{\geq}$.
\end{proof}

\begin{proposition}
Let $T: \R^{\geq} \to \Bounded(X)$ be a $C_0$ semigroup. Then
\begin{enumerate}
\item $w_0 \defeq \inf_{t>0}t^{-1}\ln\norm{T(t)} = \lim_{t\to \infty}t^{-1}\ln\norm{T(t)} < \infty$;
\item for all $w > w_0$ there exists $M_w \geq 1$ such that $\norm{T(t)} \leq M_we^{wt}$.
\end{enumerate}
\end{proposition}
\begin{proof}
TODO
\end{proof}

\begin{lemma}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup. Consider the orbit map $\xi_x: \R^+ \to X: t\mapsto T(t)x$ for some $x\in X$. The following are equivalent:
\begin{enumerate}
\item $\xi_x$ is differentiable;
\item $\xi_x$ is differentiable at $0$.
\end{enumerate}
\end{lemma}
\begin{proof}
Clearly $(1)$ implies $(2)$. Now assume $(2)$, we show $\xi_x$ is left and right differentiable at all points $t\in\R^+$ (TODO cfr. \ref{leftRightConvergence}). For right differentiability we can calculate
\begin{align*}
\lim_{h\downarrow 0} h^{-1}(\xi_x(t+h) - \xi_x(t)) &= \lim_{h\downarrow 0} h^{-1}(T(t+h)x - T(t)x) \\
&= T(t)\lim_{h\downarrow 0} h^{-1}(T(h)x - T(0)x) \\
&= T(t)\lim_{h\downarrow 0} h^{-1}(\xi_x(h) - \xi_x(0)) = \xi_x'(0).
\end{align*}
TODO
\end{proof}

\begin{lemma} \label{integrabilityOrbitMaps}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup. For all $x\in X$, the orbit map $\xi_x$ is integrable on any compact $K\subseteq [0,\infty]$.
\end{lemma}
\begin{proof}
By \ref{BochnerIntegrabilityCondition} we just need to show $\int_K\norm{\xi_x(s)}\diff{s} < \infty$. We have $\int_K\norm{\xi_x(s)}\diff{s} \leq \sup_{s\in K}\norm{\xi_x(s)}\lambda(K)$. Now $\lambda(K)$ is finite by \ref{HaarConsequences} and $\sup_{s\in K}\norm{\xi_x(s)}$ is finite by (TODO ref: extreme value theorem), as $\R \to \R: t\mapsto \norm{\xi_x(t)}$ is a continuous function.
\end{proof}

\section{The generator}
\begin{definition}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup. The \udef{generator} of $T$ is the operator $A: X\not\to X$ defined by
\[ Ax \defeq \xi_x'(0) = \lim_{h\downarrow 0}\frac{1}{h}\big(T(h)x - x\big) \]
with domain
\[ \dom(A) = \setbuilder{x\in X}{\text{$\xi_x$ is differentiable}}. \]
\end{definition}
Notice that the generator is indeed a linear operator.

\begin{lemma} \label{differentialOperatorSemigroupGenerator}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup with generator $A$. If $x\in\dom(A)$, then $T(t)x\in\dom(A)$ and
\[ \od{}{t}T(t)x = T(t)Ax = AT(t)x \]
for all $t\in [0,\infty]$.
\end{lemma}

\begin{lemma} \label{domainGeneratorLemma}
Let $T(t)$ be a $C_0$ semigroup on a Banach space $X$ with generator $A$. If $x,y\in X$ are such that
\[ T(t)x-x = \int_0^tT(s)y\diff{s} \]
for all $t\in\interval{0,t_0}$, then $x\in\dom(A)$ and $Ax = y$.
\end{lemma}
\begin{proof}
Divide both sides by $t$ and take the limit $t\to 0$. TODO ref.
\end{proof}

\begin{lemma} \label{convergenceGeneratorUnderIntegral}
Let $T(t)$ be a $C_0$ semigroup on a Banach space $X$. Set $A_h \defeq \frac{T(h) - \id_X}{h}$. Then for all $x\in X$
\[ \lim_{h\to 0}\int_0^t T(s)A_hx\diff{s} = T(t)x-x. \]
\end{lemma}
\begin{proof}
TODO + use in following?
\end{proof}

\begin{proposition} \label{integralOperatorSemigroupGenerator}
Let $T: \R^{+}\to \Bounded(X)$ be a $C_0$ semigroup with generator $A$. For all $x\in X$, then $\int_0^t T(s)x\diff{s}\in\dom(A)$ and, for all $t\in [0,\infty]$,
\begin{align*}
T(t)x - x &= A\int_0^t T(s)x\diff{s} \qquad\text{for all $x\in X$} \\
&= \int_0^t T(s)Ax\diff{s} \qquad\text{if $x\in\dom(A)$}.
\end{align*}
\end{proposition}
This is an integrated version of \ref{differentialOperatorSemigroupGenerator}, except it holds for all $x\in X$.
\begin{proof}
Firstly $\int_0^t T(s)x\diff{s}$ exists and is finite by \ref{integrabilityOrbitMaps}.

To show $A\int_0^t T(s)x\diff{s}$ is well-defined, we calculate
\begin{align*}
A\int_0^t T(s)x\diff{s} &= \left.\dod{}{h}\right|_{h=0}T(h)\int_0^t T(s)x\diff{s} \\
&= \left.\dod{}{h}\right|_{h=0}\int_0^t T(h)T(s)x\diff{s} \\
&= \left.\dod{}{h}\right|_{h=0}\int_0^t T(s+h)x\diff{s} \\
&= \left.\dod{}{h}\right|_{h=0}\int_h^{t+h} T(s)x\diff{s} \\
&= \left.\dod{}{h}\right|_{h=0}\left(\int_0^{t+h} T(s)x\diff{s}-\int_0^{h} T(s)x\diff{s}\right) \\
&= \left.\dod{}{h}\right|_{h=t}\int_0^{h} T(s)x\diff{s}-\left.\dod{}{h}\right|_{h=0}\int_0^{h} T(s)x\diff{s} \\
&= T(t)x - x,
\end{align*}
where we have used \ref{boundedOperatorUnderIntegral} and (TODO ref: fundamental theorem calculus for Bochner integral+continuity to deal with equality a.e.).

Finally $\int_0^t T(s)Ax\diff{s}$ exists and is finite by \ref{integrabilityOrbitMaps} applied to $Ax$. We conclude using \ref{differentialOperatorSemigroupGenerator} and (TODO ref: second fundamental theorem of calculus).
\end{proof}
\begin{corollary} \label{kernelGeneratorInvariant}
If $Ax = 0$, then $T(t)x = x$ for all $t\in\R^{+}$.
\end{corollary}

\begin{corollary} \label{eigenvectorsGenerator}
Let $T: \R^{+}\to \Bounded(X)$ be a $C_0$ semigroup with generator $A$ and $x\in X$.
Then
\begin{enumerate}
\item $T(t)x = \rho(t)x$ for some scalar function $\rho$ \textup{if and only if} $x$ is an eigenvector of $A$;
\item in this case $T(t)x = e^{\lambda t}x$;
\item a subspace spanned by eigenvectors of $A$ is invariant under $T(t)$.
\end{enumerate}
\end{corollary}
TODO: we can improve (3) to infinite combinations of eigenvectors by continuity of $T(t)$.
\begin{proof}
(1,2) First assume $T(t)x = \rho(t)x$ for some scalar function $\rho$. Then $\rho(0) = 1$, so
\[ \big(\rho(t) - \rho(0)\big)x = T(t)x - x = A\int_0^t T(s)x\diff{s} = A\Big(\int_0^t \rho(s)\diff{s}\Big)x = \Big(\int_0^t \rho(s)\diff{s}\Big)Ax. \]
Dividing by $t$ and taking the limit $t\to 0$ give $\rho'(0) = \rho(0)Ax = Ax$, so $x$ is an eigenvector of $A$ with eigenvalue $\rho'(0)$.

Now assume $Ax = \lambda x$. We show that $T(x) = e^{\lambda t}x$. Indeed, we calculate
\[ \od{}{t}\big(e^{-\lambda t}T(t)x\big) = e^{-\lambda t}T(t)Ax - \lambda e^{-\lambda t}T(t)x = \lambda e^{-\lambda t}T(t)x - \lambda e^{-\lambda t}T(t)x = 0, \]
so $e^{-\lambda t}T(t)x = x$ by \ref{kernelGeneratorInvariant}, which means that $T(t)x = e^{\lambda t}x$.

(3) We can write any vector in such a subspace as a linear combination $x_0 + \ldots + x_n$ of eigenvectors with eigenvalues $\lambda_0, \ldots, \lambda_n$. Then
\[ T(t) = T(t)(x_0 + \ldots + x_n) = T(t)x_0 + \ldots T(t)x_n = e^{\lambda_0t}x_0 + \ldots + e^{\lambda_nt}x_n, \]
which is an element of the subspace.
\end{proof}

\begin{corollary}
Let $T: \R^{\geq 0}\to \Bounded(X)$ be a $C_0$ semigroup with generator $A$, $r\in\N$ and $t\geq 0$.
\begin{enumerate}
\item If $x\in \dom(A^r)$, then $T(t)x\in\dom(A^r)$ and
\[ \dod[r]{}{t}T(t)x = A^rT(t)x = T(t)A^r x. \]
\item For all $x\in\dom(A^r)$,
\[ T(t)x = \sum_{k=0}^{r-1}\frac{t^k}{k!}A^kx + \int_0^t \frac{(t-s)^{r-1}}{(r-1)!}T(s)A^rx \diff{s}. \]
\item For all $x\in X$,
\[ \big(T(t) - \id_X\big)^rx = \int_0^t\ldots \int_0^t T(s_1 +\ldots +s_r)A^rx \diff{s_1}\ldots \diff{s_r}. \]
\end{enumerate}
\end{corollary}

\begin{proposition} \label{convergenceGeneratorLiminf}
Let $T(t)$ be a $C_0$ semigroup on a Banach space $X$ with generator $A$. Set $A_h \defeq \frac{T(h) - \id_X}{h}$.
\begin{enumerate}
\item Let $x,y\in X$ be such that
\[ \liminf_{h \to 0^+}\norm{A_hx - y} = 0. \]
Then $x\in \dom(A)$ and $Ax = y$.
\item If $X$ is reflexive and $x\in X$ such that
\[ \liminf_{h\to 0^+}\norm{A_hx} <\infty, \]
then $x\in \dom(A)$.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) By \ref{convergenceGeneratorUnderIntegral},
\[ \lim_{h\to 0^+}\int_0^t T(s)\big(A_hx - y\big)\diff{s} = \lim_{h\to 0^+}\int_0^t T(s)A_hx\diff{s} - \int_0^t T(s)y\diff{s} = T(t)x - x - \int_0^t T(s)y\diff{s}. \]
Also
\[ \liminf_{h\to 0^+}\norm{\int_0^t T(s)\big(A_hx - y\big)\diff{s}} \leq \liminf_{h\to 0^+}\sup_{0\leq s\leq t}\norm{T(s)}t\norm{A_hx - y} = 0. \]
As the left-hand side converges, it must converge to zero. Thus $T(t)x - x = \int_0^t T(s)y\diff{s}$, meaning that $x\in\dom(A)$ and $Ax = y$ by \ref{domainGeneratorLemma}.

(2) Fix $x\in X$. By assumption there exists a sequence $\seq{h_n}\to 0$ such that the sequence $\seq{A_{h_n}x}$ remains bounded. By (TODO ref) this sequence is contained in a weakly compact set, meaning there exists a weakly convergent subsequence $\seq{A_{h'_n}x}$. TODO rest.
\end{proof}

\begin{proposition} \label{generatorClosedDenselyDefined}
The generator of an operator semigroup is closed and densely defined.
\end{proposition}
\begin{proof}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup with generator $A$. To show $A$ is closed, consider $\seq{x_n}\subseteq \dom(A)$ such that $x_n\to x$ and $Ax_n \to y$. From \ref{integralOperatorSemigroupGenerator} we have $T(t)x_n - x_n = \int_0^tT(s)Ax_n\diff{s}$. Thus
\[ T(t)x-x = \lim_{n\to\infty} T(t)x_n - x_n = \lim_{n\to\infty} \int_0^tT(s)Ax_n\diff{s}. \]
Now $Ax_n \to y$ means the sequence $\seq{Ax_n}$ is bounded by some constant $M$. Then $\norm{T(s)Ax_n} \leq M\cdot\sup_{0\leq s \leq t}\norm{T(s)}$, meaning we can apply the dominated convergence theorem (TODO ref). So $T(t)x-x = \int_0^tT(s)y\diff{s}$ and thus
\[ Ax = \lim_{t\downarrow 0}\frac{1}{t}(T(t)x-x) = \lim_{t\downarrow 0}\frac{1}{t}\int_0^tT(s)y\diff{s} = \left.\dod{}{t}\right|_{t=0}\int_0^tT(s)y\diff{s} = T(0)y = y, \]
by the fundamental theorem of calculus (TODO ref).

For any $x\in X$ we can find a sequence $\seq{x_n}$ in $\dom(A)$ that converges to $x$, namely
\[ \frac{1}{t_n}\int^{t_n}_0T(s)x\diff{s} \qquad \text{for any sequence $\seq{t_n}$ in $[0,\infty[$ converging to $0$.}  \]
This is a sequence in $\dom(A)$ by \ref{integralOperatorSemigroupGenerator} and converges to $x$ by TODO ref. Thus $\dom(A)$ is dense in $X$ by TODO ref.
\end{proof}

\begin{proposition}
An operator is the generator of at most one operator semigroup.
\end{proposition}
\begin{proof}
Let $T: \R^+\to \Bounded(X)$ and $S: \R^+\to \Bounded(X)$ be two operator semigroups with the same generator $A$. Then for any $t\in [0,\infty[$ and $x\in \dom(A)$,
\begin{align*}
\dod{}{s} \left(T(t-s)S(s)x\right) &= T(t-s)S'(s)x - T'(t-s)S(s)x \\
&= T(t-s)As(s)x - T(t-s)As(s)x \\
&= 0
\end{align*}
by (TODO ref!!!). TODO rest.
\end{proof}

\begin{proposition} \label{boundedGenerator}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup with generator $A$. Then the following are equivalent:
\begin{enumerate}
\item $A$ is bounded;
\item $A$ is defined everywhere;
\item $T$ is uniformly continuous;
\item $T(t) = e^{tA}$ for all $t\in\R ^+$.
\end{enumerate}
\end{proposition}
\begin{proof}
$(1) \Rightarrow (2)$ Because $A$ is closed, $\dom(A)$ is closed by the closed graph theorem \ref{closedGraphTheorem}. As $\dom(A)$ is dense in $X$, this means $\dom(A) = X$.

$(2) \Rightarrow (1)$ TODO also closed graph.

$(3)$ TODO

$(4)$ $e^{tA}$ is a semigroup with generator $A$. TODO
\end{proof}

\subsection{Cores of the generator}
TODO move:
\begin{lemma} \label{uniformContinuityAverage}
Let $\seq{f_n: [a,b]\to X}$ be a sequence of functions from $[a,b]\subseteq \R$ to a Banach space $X$ that converges uniformly to $f: X\to Y$. Then
\[ [a,b]\to X: t\mapsto \frac{1}{t}\int_{0}^tf_n(s)\diff{s} \quad\longrightarrow\quad [a,b]\to X: t\mapsto \frac{1}{t}\int_{0}^tf(s)\diff{s} \qquad \text{uniformly.} \]
\end{lemma}
\begin{proof}
We have
\begin{align*}
\sup_{t\in[a,b]}\frac{1}{t}\int_0^t \norm{f_n(s) - f(s)}\diff{s} &\leq \sup_{t\in[a,b]}\frac{1}{t}\int_0^t \diff{s}\sup_{s\in [a,b]} \norm{f_n(s) - f(s)} \\
&= \sup_{s\in [a,b]} \norm{f_n(s) - f(s)} \to 0.
\end{align*}
\end{proof}

\begin{lemma} \label{uniformContinuityOrbitMapsConvergentSequence}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup and $\seq{x_n} \to x$ a convergent sequence in $X$. Then $f_n: [0,1]\to X: t\mapsto T(t)x_n$ converges uniformly to $f: [0,1]\to X: t\mapsto T(t)x$.
\end{lemma}
\begin{proof}
The image of $[0,1]$ under $t\mapsto \norm{T(t)}$ is compact and thus bounded, with bound $M$. Then
\begin{align*}
\sup_{t\in [0,1]}\norm{f_n(t) - f(t)} &= \sup_{t\in [0,1]}\norm{T(t)x_n - T(t)x} \\
&= \sup_{t\in [0,1]}\norm{T(t)(x_n - x)} \\
&\leq M\norm{(x_n - x)} \to 0.
\end{align*}
\end{proof}

\begin{proposition} \label{coreGeneratorCriterion}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup with generator $A$ and $D$ a subspace of $\dom(A)$. If $D$ is norm dense in $X$ and invariant under $T(t)$ for all $t\in [0,+\infty]$, then $D$ is a core for $A$.
\end{proposition}
Note norm density in $X$ is the same as norm density in $\dom(A)$, because $A$ is densely defined.
\begin{proof}
We use \ref{operatorCoreCriterion}. Take $x\in \dom(A)$; we need to show that $x\in\closure_{\norm{\cdot}_A}(D)$.

Because $D$ is norm dense in $X$, we can find a sequence $\seq{x_n}$ in $D$ that norm converges to $x$. We claim it also converges in the graph norm. To show that, it is enough to show that $\seq{Ax_n} \to Ax$ in norm.

Combining \ref{uniformContinuityOrbitMapsConvergentSequence} and \ref{uniformContinuityAverage} gives that
\[ [0,1] \to X: t\mapsto \frac{1}{t}\int_0^t T(s)x_n\diff{s} \]
converges uniformly in $n$. Thus by \ref{integralOperatorSemigroupGenerator} and Moore-Osgood (TODO ref) we have
\begin{align*}
\lim_{n\to \infty} Ax_n &= \lim_{n\to \infty} \lim_{t\downarrow 0}\frac{1}{t}\int_0^t T(s)Ax_n \diff{s} \\
&= \lim_{n\to \infty} \lim_{t\downarrow 0}\frac{1}{t}(T(t)x_n - x_n) \\
&= \lim_{t\downarrow 0}\frac{1}{t}\lim_{n\to \infty}(T(t)x_n - x_n) \\
&= \lim_{t\downarrow 0}\frac{1}{t}(T(t)x - x) = Ax.
\end{align*}

TODO

Take a sequence $\seq{t_n}\to 0$ in $\R$. Then we claim
\[ \seq{x'_n} = \seq{\frac{1}{t_n}\int_0^{t_n}T(s)x_n\diff{s}} \]
is a sequence in $D$ that converges to $x$ in the graph norm. It is definitely a sequence in $D$ by the invariance of $D$ under $T(t)$. It is now enough to show $\seq{x'_n}$ norm converges to $x$ and $\seq{Ax'_n}$ norm converges to $Ax$.
\end{proof}

\begin{proposition} \label{domAinftyCore}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup with generator $A$. Then $\bigcap_{n\in\N}\dom(A^n)$ is a core for $A$.
\end{proposition}
\begin{proof}
The space $\bigcap_{n\in\N}\dom(A^n)$ is invariant under $T$ by \ref{differentialOperatorSemigroupGenerator}. In order to use \ref{coreGeneratorCriterion}, we need to verify that $\bigcap_{n\in\N}\dom(A^n)$ is norm dense in $\dom (A)$. TODO
\end{proof}

\subsection{Powers of the generator}
\subsubsection{Taylor operators}
\begin{definition}
Let $T(t)$ be a $C_0$ semigroup on a Banach space $X$ with generator $A$ and $r\in \N$. The \udef{$r^\text{th}$ Taylor operator} $B^r$ is defined by
\[ B^rx = \lim_{t\to 0^+}B_t^rx = \lim_{t\to 0^+}\frac{r!}{t^r}\left(T(t) - \sum^{r-1}_{k=0}\frac{t^k}{k!}A^k\right)x \]
\end{definition}

\begin{lemma}
Let $T(t)$ be a $C_0$ semigroup on a Banach space $X$ with generator $A$ and $r\in \N$. Take $x\in\dom(A^{r-1})$. Then
\[ \lim_{t\to 0^+} \int_0^s T(s)B_t^r x \diff{s} = \big(T(s)-\id_X\big)A^{r-1}x. \]
\end{lemma}
\begin{proof}

\end{proof}

\subsection{Algebra of semigroups and generators}
\begin{proposition}
Let $T: \R^+\to \Bounded(X)$ be a strongly continuous operator semigroup with generator $A$, $\mu\in\C$ and $\alpha >0$. Then $e^{\mu t}T(\alpha t)$ is a strongly continuous operator semigroup with generator $\alpha A + \mu\id_X$.
\end{proposition}

\begin{proposition} \label{productSemigroup}
Let $T: \R^+\to \Bounded(X)$ and $S: \R^+\to \Bounded(X)$ be strongly continuous operator semigroups with generators $A$ and $B$, resp., such that $T(t)$ and $S(t)$ commute for all $t\in \R^+$. Then
\begin{enumerate}
\item $S(t)T(t)$ is a strongly continuous operator semigroup with generator $C$;
\item $\dom(A)\cap \dom(B)$ is a core of $C$;
\item $Cx = Ax + Bx$ for all $x\in \dom(A)\cap \dom(B)$.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) The norm continuity of the operator multiplication implies strong continuity of the multiplication and thus of $S(t)T(t)$. The semigroup property is immediate, using commutativity.

(2) We use \ref{coreGeneratorCriterion}.TODO

(3) TODO
\end{proof}

\subsection{Spectral properties of resolvents}

\begin{lemma} \label{expScaledSemigroupLemma}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup with generator $A$. Take $\lambda\in \C$ and $t> 0$. Then
\begin{align*}
e^{-\lambda t}T(t)x - x &= (A- \lambda\id)\int_0^t e^{-\lambda s}T(s)x\diff{s} \qquad\text{for all $x\in X$} \\
&= \int_0^t e^{-\lambda s}T(s)(A-\lambda\id)x\diff{s} \qquad\text{if $x\in\dom(A)$}.
\end{align*}
\end{lemma}
\begin{proof}
Consider the operator semigroup $t\mapsto e^{-\lambda t}T(t)$. Its generator is $A-\lambda\id$ with domain equal to $\dom(A)$, TODO ref. The lemma is then a straightforward application of \ref{integralOperatorSemigroupGenerator}.
\end{proof}
\begin{corollary} \label{limitInftyExpScaledSemigroup}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup. If both
\[ \int_0^\infty e^{-\lambda s}T(s)x\diff{s} \qquad\text{and}\qquad \int_0^{\infty}e^{-\lambda s}T(s)(A-\lambda\id)x\diff{s} \]
exist, then $\lim_{t\to\infty}e^{-\lambda t}T(t)x = 0$.
\end{corollary}
\begin{proof}
First we show that if $\lim_{t\to\infty}e^{-\lambda t}T(t)x$ converges, it must converge to $0$. Indeed assume it converges to $y \neq 0$, then there exists $t_0 > 0$ such that for all $t\geq t_0$, $\norm{e^{-\lambda t}T(t)x} \geq \norm{y}/2$. Thus
\begin{align*}
\int_0^\infty \norm{e^{-\lambda s}T(s)x}\diff{s} &= \int_0^{t_0}\norm{e^{-\lambda s}T(s)x}\diff{s} + \int_{t_0}^{\infty}\norm{e^{-\lambda s}T(s)x}\diff{s} \\
&\geq \int_0^{t_0}\norm{e^{-\lambda s}T(s)x}\diff{s} + \int_{t_0}^{\infty}\norm{y}/2\diff{s} \\
&= \infty,
\end{align*}
meaning $\int_0^\infty e^{-\lambda s}T(s)x\diff{s}$ does not exists by \ref{BochnerIntegrabilityCondition}.

Then $x + \int_0^{\infty}e^{-\lambda t}T(t)x(A-\lambda\id)x\diff{s}$ exists by assumption and
\begin{align*}
x + \int_0^{\infty}e^{-\lambda t}T(t)x(A-\lambda\id)x\diff{s} &= x+\lim_{t\to\infty}\int_0^{t}e^{-\lambda s}T(s)x(A-\lambda\id)x\diff{s} \\
&= \lim_{t\to\infty}x+\int_0^{t}e^{-\lambda s}T(s)x(A-\lambda\id)x\diff{s} \\
&= \lim_{t\to\infty} e^{-\lambda t}T(t)x.
\end{align*}
\end{proof}


\begin{proposition} \label{integralRepresentationOfResolvent}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup with generator $A$. If $\int_0^\infty e^{-\lambda s}T(s)x\diff{s}$ exists for all $x\in X$, then
\begin{enumerate}
\item $\lambda\in\res(A)$;
\item $R_A(\lambda) = \int_0^\infty e^{-\lambda s}T(s)\diff{s}$.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) By \ref{closedOperatorBanachSpaceSpectrumCriterion} it is enough to show that $\lambda\id - A$ is bijective in this case. 

We verify injectivity: take $x,y\in \dom(A)$ such that $(\lambda\id - A)x = (\lambda\id - A)y$. We use \ref{expScaledSemigroupLemma} and \ref{limitInftyExpScaledSemigroup} to calculate
\begin{align*}
x-y &= x-y + \int_0^\infty e^{-\lambda s}T(s)(\lambda\id - A)(x-y)\diff{s} \\
&= \lim_{t\to \infty}x-y + \int_0^t e^{-\lambda s}T(s)(\lambda\id - A)(x-y)\diff{s} \\
&= \lim_{t\to \infty}e^{-\lambda t}T(t)(x-y) \\
&= 0.
\end{align*}

We verify surjectivity: consider \ref{expScaledSemigroupLemma} and \ref{limitInftyExpScaledSemigroup}. Note that for all $x\in X$ both $\lim_{t\to \infty}\int_0^t e^{-\lambda s}T(s)x\diff{s}$ and
\[ \lim_{t\to \infty}(\lambda\id-A)\int_0^t e^{-\lambda s}T(s)x\diff{s} = \lim_{t\to \infty}x - e^{-\lambda t}T(t)x = x \]
converge. So, because $\lambda \id - A$ is closed,
\begin{align}
    x &= \lim_{t\to \infty}(\lambda\id-A)\int_0^t e^{-\lambda s}T(s)x\diff{s} \nonumber \\
    &= (\lambda\id-A)\lim_{t\to \infty}\int_0^t e^{-\lambda s}T(s)x\diff{s} \nonumber \\
    &= (\lambda\id-A)\int_0^\infty e^{-\lambda s}T(s)x\diff{s}. \label{eq:resolventGenerator}
\end{align}
Thus each $x\in X$ is in $\im(\lambda\id-A)$.

(2) From \eqref{eq:resolventGenerator} we see that $R_A(\lambda)x = \int_0^\infty e^{-\lambda s}T(s)x\diff{s}$. TODO: show that $R$ is integrable!!!

Then we conclude with \ref{integralBoundedOperator}.
\end{proof}
\begin{corollary} \label{resolventGeneratorEstimate}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup with growth bound $\norm{T(t)}\leq Me^{wt}$. Then
\begin{enumerate}
\item $\Re \lambda > w$ implies $\lambda \in\res(A)$;
\item $\norm{R_A(\lambda)} \leq \frac{M}{\Re \lambda - w}$ for all $\lambda$ such that $\Re \lambda > w$.
\end{enumerate}
\end{corollary}
\begin{proof}
We estimate
\[ \norm{R_A(\lambda)} \leq \int_0^\infty\norm{e^{-\lambda s}T(s)x\diff{s}} \leq M\int_0^\infty e^{(w-\Re\lambda)s}\diff{s}\norm{x} = \frac{M}{\Re\lambda - w}\norm{x} \]
if $\Re \lambda > w$. 
\end{proof}
\begin{corollary} \label{resolventGeneratorPowerEstimate}
Let $T: \R^+\to \Bounded(X)$ be an operator semigroup with growth bound $\norm{T(t)}\leq Me^{wt}$. Then for all $n\in \N$
\begin{enumerate}
\item $R_A(\lambda)^n x = \frac{1}{(n-1)!}\int_0^\infty s^{n-1}e^{-\lambda s}T(s)x\diff{s}$;
\item $\norm{R_A(\lambda)^n} \leq \frac{M}{(\Re \lambda - w)^n}$ for all $\lambda$ such that $\Re \lambda > w$.
\end{enumerate}
\end{corollary}
\begin{proof}
TODO
\end{proof}

\subsection{Hille-Yosida generation theorems}
\begin{lemma} \label{resolventLimitLemma}
Let $A$ be an operator on a Banach space $X$. Suppose
\begin{itemize}
\item there exists $w\in \R$ such that $[w,\infty[ \subseteq \res(A)$;
\item there exists $M>0$ such that $\norm{r R_A(r)}\leq M$ for all $r \geq w$.
\end{itemize}
Then $\lim_{r\to \infty} r R_A(r)x = x$ for all $x\in \overline{\dom(A)}$.
\end{lemma}
\begin{proof}
Take $y\in \dom(A)$. Then $R_A(r)(r\id - A)y = y$ implies $r R_A(r)y = R_A(r)Ay + y$. The right-hand side converges to $y$ as $r\to\infty$ because $\norm{R_A(r)Ay} \leq \frac{M}{r}\norm{Ay} \to 0$.

Now we need to extend this result to $\overline{\dom(A)}$. Take $x\in \overline{\dom(A)}$, then we can find a sequence $\seq{x_n}$ in $\dom(A)$ that converges to $x$. By assumption $r \to r R_A(r)$ is uniformly bounded and thus uniformly continuous (TODO ref), meaning we can use the Moore-Osgood theorem (TODO ref):
\begin{align*}
\lim_{r\to \infty} r R_A(r)x &= \lim_{r\to \infty} r R_A(r)\left(\lim_{n\to\infty}x_n\right) \\
&= \lim_{n\to\infty}\lim_{r\to \infty} r R_A(r)x_n \\
&= \lim_{n\to\infty}x_n = x.
\end{align*}
\end{proof}
\begin{corollary} \label{YosidaApproximantsLemma}
If $A$ is closed in addition to the other requirements, then
\[ \lim_{r\to \infty} r AR_A(r)x = Ax \qquad \text{for all $x\in \dom(A)$.} \]
\end{corollary}
\begin{proof}
Because $A$ and $R_A(r)$ commute, we have $\lim_{r\to \infty} r AR_A(r)x = \lim_{r\to \infty} r R_A(r)Ax =Ax$.
\end{proof}

\begin{theorem}[Hille-Yosida theorem] \label{HilleYosidaContraction}
Let $A$ be an operator on a Banach space $X$. The following are equivalent:
\begin{enumerate}
\item $A$ generates a strongly continuous contraction semigroup;
\item $A$ is closed, densely defined, $\R^{>0}\subseteq \res(A)$ and for all $r > 0$, $\norm{rR_A(r)} \leq 1$.
\end{enumerate}
\end{theorem}
We also have \ref{resolventGeneratorEstimate}, which gives that for all $\lambda\in\C$ with $\Re\lambda >0$, we have $\lambda\in\res(A)$. Also $\norm{R_A(\lambda)} \leq (\Re \lambda)^{-1}$ for such $\lambda$.
\begin{proof}
$(1)\Rightarrow (2)$ Follows from \ref{generatorClosedDenselyDefined} and \ref{resolventGeneratorEstimate}, setting $M = 1$ and $w = 0$.

$(2)\Rightarrow (1)$ Consider, for each $n\in \N$, the bounded operator
\[ A_n \defeq nAR_A(n) = n^2R_A(n) - n\id_X. \]
By \ref{YosidaApproximantsLemma} this sequence converges points pointwise to $A$. By \ref{boundedGenerator} each $A_n$ generates a semigroup $e^{tA_n}$. Let $T$ be the pointwise limit of these semigroups, which exists by \ref{continuityExp}. We need to show that $T$ is a strongly continuous contraction semigroup and that $A$ is the generator of $T$.


\end{proof}
\begin{corollary} \label{quasiContractiveHilleYosida}
Let $A$ be an operator on a Banach space $X$. The following are equivalent:
\begin{enumerate}
\item $A$ generates a strongly continuous semigroup $T: \R^+\to \Bounded(X)$ satisfying $\norm{T(t)}\leq e^{wt}$ for some $w\in \R$ and all $t\in\R^+$;
\item $A$ is closed, densely defined, and $\lambda\in  \res(A)$, $\norm{(r-w)R_A(r)} \leq 1$ for all $r>w$.
\end{enumerate}
\end{corollary}
\begin{proof}
Applying the Hille-Yosida theorem to $A-w\id$ yields a semigroup $S(t)$. The rescaled semigroup $T(t) = e^{wt}S(t)$ has generator $A$.
\end{proof}
Semigroups satisfying $\norm{T(t)} \leq e^{wt}$ are called \udef{quasi-contractive}.

\begin{lemma} \label{dissipativeYosidaOperators}
Let $A$ be an operator on a Banach space $X$. The following are equivalent:
\begin{enumerate}
\item $A$ is dissipative;
\item $R_A(r)$ exists and $\norm{rR_A(r)}\leq 1$ for all $r>0$.
\end{enumerate}
\end{lemma}
\begin{proof}
Direct application of \ref{dissipativeResolventBound}.
\end{proof}

\subsubsection{Lumer-Phillips theorem}
\begin{theorem}[Lumer-Phillips theorem]
Let $A$ be an operator on a Banach space $X$. The following are equivalent:
\begin{enumerate}
\item $\overline{A}$ generates a strongly continuous contraction semigroup;
\item $A$ is densely defined, dissipative and $\im(\lambda\id-A)$ is dense in $X$ for some $\lambda > 0$.
\end{enumerate}
\end{theorem}
\begin{proof}
$(1) \Rightarrow (2)$  This is a combination of \ref{dissipativeYosidaOperators} and the Hille-Yosida theorem \ref{HilleYosidaContraction}. The surjectivity of $\lambda\id-\overline{A}$ for all $\lambda > 0$ implies the density of $\im(\lambda\id-A)$ by \ref{dissipativeOperatorClosable}.

$(2) \Rightarrow (1)$ Because $A$ is densely defined and dissipative, it is closable by \ref{dissipativeOperatorClosable}.
Also by \ref{dissipativeOperatorClosable}, $\lambda\id-\overline{A}$ is surjective. Thus by \ref{dissipativeYosidaOperators}, we have $r\in \res(A)$. Then $]0,+\infty[\,\subseteq \res(A)$ by \ref{spectrumDissipativeOperator}.
For all $r>0$, the resolvent $R_A(r)$ exists and is bounded by \ref{dissipativeResolventBound}. It is surjective by\ref{rangeDisjunctionDissipativeOperator}.

We have verified all the conditions of the Hille-Yosida theorem \ref{HilleYosidaContraction}.
\end{proof}
\begin{corollary}
Let $A$ be a densely defined operator on a Banach space $X$. If both $A$ and $A^t$ are dissipative, then $\overline{A}$ generates a contraction semigroup on $X$.
\end{corollary}
\begin{proof}
It is enough to prove that $\im(\id - A)$ is dense in $X$.

Assume, towards a contradiction, that $\overline{\im(\id - A)} \neq X$. Then by \ref{functionalZeroOnClosedSubSpace} we can find a non-zero bounded functional $f$ that is zero on $\overline{\im(\id - A)}$. Thus for all $x\in \dom(A)$:
\[ 0 = f((\id- A)x) = (\id-A)^t(f)(x). \]
Because $\dom(A)$ is dense in $X$, we conclude that $(\id-A)^t(f) = 0$ and thus that $(\id-A)^t = \id - A^t$ is not dissipative.
\end{proof}

\begin{proposition}
Let $A$ be a dissipative operator on a Banach space $X$. If $\lambda\id - A$ is surjective for some $\lambda > 0$, then $A|^{\overline{\dom(A)}}: \overline{\dom(A)}\not\to \overline{\dom(A)}$ generates a contraction semigroup on $\overline{\dom(A)}$.
\end{proposition}
\begin{proof}
First note that $A|^{\overline{\dom(A)}}$ is still dissipative. 

The surjectivity of $\lambda\id - A$ implies the surjectivity of $(\lambda\id_X - A)|^{\overline{\dom(A)}} = \lambda\id_{\overline{\dom(A)}} - A|^{\overline{\dom(A)}}$.

Using \ref{dissipativeYosidaOperators} and \ref{spectrumDissipativeOperator}, we get that $]0,+\infty[\,\subseteq \res(A|^{\overline{\dom(A)}})$.
Also $A|^{\overline{\dom(A)}}$ is closed by \ref{closureDissipativeOperator}.

In order to conclude with \ref{dissipativeYosidaOperators} and the Hille-Yosida theorem \ref{HilleYosidaContraction}, we need to show that $A|^{\overline{\dom(A)}}$ is densely defined.
To that end take an $x\in \overline{\dom(A)}$ and consider $\seq{nR_A(n)x}$. By \ref{dissipativeYosidaOperators} and \ref{resolventLimitLemma}, we have $nR_A(n)x \to x$.

We just need to verify that $nR_A(n)x\in \dom\Big(A|^{\overline{\dom(A)}}\Big)$. Indeed $nR_A(n)x\in\dom(A)$ by construction and
\[ A(nR_A(n)x) = n^2R_A(n)x - nx \in \overline{\dom(A)}. \]
\end{proof}
\begin{corollary}
Let $A$ be a dissipative operator on a reflexive Banach space $X$. If $\lambda\id - A$ is surjective for some $\lambda > 0$, then $A$ generates a contraction semigroup on $\overline{\dom(A)}$.
\end{corollary}
In particular note that $A$ is densely defined.
\begin{proof}
It is enough to show the density of $\dom(A)$. Take $x\in X$. As before, we consider the sequence $\seq{nR_A(n)x}$, which is bounded by $\norm{nR_A(n)x} \leq \norm{nR_A(n)}\,\norm{x} \leq \norm{x}$. By reflexivity (TODO ref!) this sequence has a weakly convergent subsequence $\seq{n_kR_A(n_k)x}_k$ with limit $x'$. 

It remains to be shown that $x=x'$. Indeed, using \ref{resolventLimitLemma} and the fact that $R_A(1)y\in \dom(A)$ for all $y\in X$,
\[ R_A(1)x' = R_A(1)\lim^w_{k\to \infty}n_kR_A(n_k)x = \lim^w_{k\to \infty}n_kR_A(n_k)R_A(1)x = \lim_{k\to \infty}n_kR_A(n_k)R_A(1)x = R_A(1)x, \]
by the weak continuity of $R_A(1)$, TODO ref(\url{https://math.stackexchange.com/questions/3834847/weakly-continuous-vs-weakly-sequentially-continuous-operator}).

So $x'= (\id - A)R_A(1)x' = (\id - A)R_A(1)x = x$.
\end{proof}

\subsubsection{Non-contractive semigroups}
\begin{theorem}[Feller-Miyadera-Phillips theorem]
Let $A$ be an operator on a Banach space $X$. The following are equivalent, for some $w\in \R$ and $M\geq 1$:
\begin{enumerate}
\item $A$ generates a strongly continuous semigroup $T: \R^+\to \Bounded(X)$ satisfying $\norm{T(t)}\leq Me^{wt}$ all $t\in\R^+$;
\item $A$ is closed, densely defined and for all $r>w$, $n\in \N$:
\begin{itemize}
\item $r\in \res(A)$;
\item $\norm{(r-w)^nR_A(r)^n} \leq M$.
\end{itemize}
\end{enumerate}
\end{theorem}
This theorem is the general case of the Hille-Yosida theorem \ref{HilleYosidaContraction} and sometimes goes by the same name.
\begin{proof}
$(1)\Rightarrow (2)$ Follows from \ref{generatorClosedDenselyDefined} and \ref{resolventGeneratorPowerEstimate}.

$(2) \Rightarrow (1)$ We define an equivalent norm on $X$ in two steps that makes $T$ a contraction semigroup. We can then use the Hille-Yosida theorem \ref{HilleYosidaContraction}.

First define a norm on $X$ for all $r>0$ by
\[ \norm{x}_{r} = \sup_{n\in\N}\norm{(r-w)^nR_A(r)^nx} \]
it is easy to see that all $\norm{\cdot}_{r}$ are norms and
\[ \norm{x} \leq \norm{x}_r \leq M\norm{x}. \]
So $\norm{\cdot}_{r}$ is equivalent to $\norm{\cdot}$ for all $r>0$. Also $\norm{(r-w)^nR_A(r)^nx}_r$
\end{proof}
\begin{corollary}
Let $A$ be an operator on a Banach space $X$ such that $r\in \res(A)$, $\norm{(r-w)^nR_A(r)^n} \leq M$ for all $r>w$ and $n\in \N$. Then
\begin{enumerate}
\item $A|^{\overline{\dom(A)}}$ generates a strongly continuous semigroup $T: \R^+\to \Bounded(X)$ satisfying $\norm{T(t)}\leq Me^{wt}$ for all $t\in\R^+$;
\item if $X$ is reflexive, then $\overline{\dom(A)} = X$.
\end{enumerate}
\end{corollary}
\begin{proof}
TODO
\end{proof}

\begin{proposition}
Let $T: \R^{\geq 0}\to \Bounded(X)$ be a $C_0$ semigroup generated by $A$. Then for $x\in X$ and $t \geq 0$ we have
\[ T(t)x = \lim_{\lambda\to\infty}e^{-\lambda t}\sum_{k=0}^\infty \frac{(\lambda t)^k}{k!}\big(\lambda R_A(\lambda)\big)^kx, \]
uniformly for $t$ in compact intervals.
\end{proposition}
\begin{proof}
TODO BB. These are Yosida approximants.
\end{proof}

\subsubsection{Generation theorems for groups}
\begin{lemma} \label{generatorInverseStronglyContinuousGroup}
Let $T: \R\to \Bounded(X)$ be a strongly continuous group on a Banach space $X$ generated by $A$. Then the strongly continuous group $T(-t)$ is generated by $-A$.
\end{lemma}
\begin{proof}
By direct calculation
\[ \lim_{h\to 0} \frac{T(-h) - x}{h} = \lim_{h\to 0} \frac{T(h)x - x}{-h} = -\lim_{h\to 0} \frac{T(h) - x}{h} = -A. \]
\end{proof}

\begin{proposition}
Let $A$ be an operator on a Banach space $X$. The following are equivalent:
\begin{enumerate}
\item $A$ generates a strongly continuous group $T: \R\to \Bounded(X)$ and $\norm{T(t)} \leq Me^{w |t|}$;
\item $A$ and $-A$ both generate strongly continuous semigroups, $T_+: \R^+\to \Bounded(X)$ and $T_-: \R^+\to \Bounded(X)$;
\item $A$ is closed, densely defined and there exist $w\geq 0, M\geq 1$ such that for all $|r|>w$ and $n\in \N$
\begin{itemize}
\item $r\in \res(A)$;
\item $\norm{(|r|-w)^nR_A(r)^n} \leq M$.
\end{itemize}

\end{enumerate}
In this case $T(t) = \begin{cases}
T_+(t) & t \geq 0 \\ T_-(-t) & t<0
\end{cases}$.
\end{proposition}
\begin{proof}
$(1) \Rightarrow (2)$ By \ref{generatorInverseStronglyContinuousGroup}, both $A$ and $-A$ generate strongly continuous groups, and thus also semigroups.

$(2) \Rightarrow (1)$ The function $T$ defined using $T_+$ and $T_-$ is definitely strongly continuous, because $T(0) = \id_X = T_+(0) = T_-(0)$. We just need to show it satisfies the group property.

TODO (3)
\end{proof}

\begin{theorem}[Stone's theorem]
Let $A$ be a densely defined operator on a Hilbert space $H$. Then $iA$ generates a unitary group $T: \R \to \Unitaries(H)$ \textup{if and only if} $A$ is self-adjoint.
\end{theorem}
\begin{proof}
Assume $A$ generates a unitary group $T: \R \to \Unitaries(H)$. Then $T(t)^* = T(t)^{-1} = T(-t)$ for all $t\in \R$. TODO

Conversely both $iA$ and $-iA$ are closed.
\end{proof}

\section{Contraction semigroups}

\begin{proposition}[Landau-Kallman-Rota inequality]
Let $A$ be the generator of a contraction semigroup on a Banach space $X$, then
\[ \norm{Ax}^2 \leq 4 \norm{A^2x}\cdot\norm{x} \]
for all $x\in\dom(A^2)$.
\end{proposition}
The constant can be improved to 2 for groups of isometries. (TODO)
\begin{proof}
From Taylor's formula (TODO ref)
\[ T(t)x = x + tAx + \int_0^t(t-s)T(s)A^2x \diff{s} \]
we get
\begin{align*}
\norm{Ax} &\leq \frac{\norm{T(t)x}}{t} + \frac{\norm{x}}{t} + \frac{1}{t}\int_0^t(t-s)\norm{T(s)}\cdot\norm{A^2x}\diff{s} \\
&\leq 2\frac{\norm{x}}{t} + \frac{1}{t}\int_0^t(t-s)\diff{s}\norm{A^2x} \\
&= 2\frac{\norm{x}}{t} + \frac{1}{t}\left(t^2 - \frac{t^2}{2}\right)\norm{A^2x} \\
&= 2\frac{\norm{x}}{t} + \frac{t}{2}\norm{A^2x}.
\end{align*}
This holds for all $t$. In particular this holds if $t = 2\sqrt{\frac{\norm{x}}{\norm{A^x}}}$ (this is in fact the minimum). Then we get
\begin{align*}
\norm{Ax}^2 &\leq \left(\sqrt{\norm{x}\cdot\norm{A^2x}} + \sqrt{\norm{x}\cdot\norm{A^2x}}\right)^2 \\
&= 4\norm{x}\cdot\norm{A^2x}.
\end{align*}
\end{proof}

\section{Perturbation of semigroups}

\begin{lemma} \label{perturbationLemma}
Let $A, B$ be operators on a Banach space $X$. If $\lambda\in\res(A)$ such that $\norm{BR_A(\lambda)} < 1$, then $\lambda\in \res(A+B)$ and
\[ \norm{R_{A+B}(\lambda)} \leq \frac{\norm{R_A(\lambda)}}{1- \norm{BR_A(\lambda)}}. \]
\end{lemma}
\begin{proof}
We can write
\[ \lambda\id_X - (A+B) = \lambda\id_X - A-B = \big(\id_X - BR_A(\lambda)\big)(\lambda\id_X - A). \]
Now $(\lambda\id_X - A)$ is bijective and, by \ref{NeumannSeries}, $\id_X - BR_A(\lambda)$ is bijective with a Neumann series expansion because $\norm{BR_A(\lambda)} < 1$. In order to show $\lambda\in\res(A+B)$, we just need to show that $R_{A+B}(\lambda)$ is bounded.

The Neumann series expansion gives
\[ \norm{\big(\id_X - BR_A(\lambda)\big)^{-1}} \leq \frac{1}{1-\norm{BR_A(\lambda)}}. \]
So $R_{A+B}(\lambda) = R_A(\lambda)\big(\id_X - BR_A(\lambda)\big)^{-1}$ is bounded by
\[ \norm{R_{A+B}(\lambda)} \leq \norm{\big(\id_X - BR_A(\lambda)\big)^{-1}}\,\norm{R_A(\lambda)} \leq \frac{\norm{R_A(\lambda)}}{1-\norm{BR_A(\lambda)}}. \]
\end{proof}

\subsection{Bounded perturbation}
\begin{proposition}
Let $A$ be the generator of a strongly continuous operator semigroup $T$ on a Banach space $X$ satisfying $\norm{T(t)}\leq Me^{wt}$ for all $t\geq 0$. If $B\in \Bounded(X)$, then $A+B$ generates a strongly continuous semigroup $S: \R^+\to \Bounded(X)$ satisfying
\[ \norm{S(t)} \leq Me^{(w+M\norm{B})t} \qquad \text{for all $t\geq 0$.} \]
\end{proposition}
\begin{proof}
We first prove the proposition for contraction semigroups ($w=0$ and $M = 1$).

Take $r \geq \norm{B} > 0$. Then $r\in\res(A)$ and $\norm{BR_A(r)} \leq \norm{B}\,\norm{R_A(r)} \leq r \norm{R_A(r)} \leq 1$ by the Hille-Yosida theorem \ref{HilleYosidaContraction}. This means we can apply \ref{perturbationLemma} to get
\[ \norm{R_{A+B}(r)} \leq \frac{\norm{R_A(r)}}{1- \norm{BR_A(r)}} \leq \frac{\norm{R_A(r)}}{1- \norm{B}\,\norm{R_A(r)}} = \frac{1}{\norm{R_A(r)}^{-1} - \norm{B}} \leq \frac{1}{r - \norm{B}}. \]
By \ref{quasiContractiveHilleYosida} $A+B$ then generates a semigroup $S(t)$ satisfying $\norm{S(t)} \leq e^{\norm{B}t}$ for all $t\in\R^+$.

TODO rescaling
\end{proof}
\begin{corollary}[Variation of parameters] \label{operatorVariationOfParameteres}
Let $A$ be the generator of a strongly continuous operator semigroup $T$ on $X$ and $B\in\Bounded(X)$. Let $S$ be the semigroup generated by $A+B$. Then
\begin{align*}
S(t)x &= T(t)x + \int_0^tT(t-s)BS(s)x\diff{s} \\
&= T(t)x + \int_0^tS(s)BT(t-s)x\diff{s}
\end{align*}
for all $t\in\R^+$ and $x\in X$.
\end{corollary}
\begin{proof}
We calculate
\begin{align*}
S(t)x - T(t)x &= \left[ T(t-s)S(s)x \right]_{s=0}^{s=t} \\
&= \int_0^t \dod{T(t-s)S(s)x}{s}\diff{s} \\
&= \int_0^t \left( T(t-s)(A+B)S(s)x - T(t-s)AS(s)x \right)\diff{s} \\
&= \int_0^t \left( T(t-s)BS(s)x \right)\diff{s}
\end{align*}
for all $x\in \dom(A)$. By the density of $\dom(A)$ and the boundedness of the operators, we get that the integral equation holds for all $x\in X$.

The other equation follows by considering $S(s)T(t-s)$ in stead of $T(t-s)S(s)$
\end{proof}

\subsubsection{Volterra operators and Dyson-Phillips series}
\begin{definition}
Let $T$ be a strongly continuous operator semigroup on a Banach space $X$ and $B\in\Bounded(X)$. We call the operator $V: \cont([0,t_0], \Bounded_s(X)) \to \cont([0,t_0], \Bounded_s(X))$ defined by
\[ VF(t)x \defeq \int_0^tT(t-s)BF(s)x\diff{x} \]
for all $x\in X, F\in \cont([0,t_0], \Bounded_s(X))$,
the \udef{abstract Volterra operator} associated with $T$ and $B$.
\end{definition}
The subscript $s$ denotes strong convergence.

\begin{lemma}
The abstract Volterra operator associated with the operator semigroup $T$ and bounded operator $B$ is bounded and
\[ \norm{V^n} \leq \frac{(M\norm{B}t_0)^n}{n!} \]
for all $n\in \N$, where $M = \sup_{t\in\interval{0,t_0}}\norm{T(t)}$.
\end{lemma}
\begin{proof}
TODO
\end{proof}
\begin{corollary} \label{spectralRadiusAbstractVolterra}
The spectral radius of an abstract Volterra operator is $0$.
\end{corollary}
\begin{proof}
This follows straight from the spectral radius formula \ref{spectralRadiusFormula}.
\end{proof}

\begin{theorem}[Dyson-Phillips series]
Let $A$ be the generator of a strongly continuous operator semigroup $T$ on $X$ and $B\in\Bounded(X)$. Let $S$ be the semigroup generated by $A+B$. Then
\[ S(t) = \sum_{n=0}^\infty S_n(t), \]
where $S_0(t) \defeq T(t)$ and
\[ S_{n+1}(t) \defeq VS_n(t) = \int_0^tT(t-s)BS_n(s)\diff{s}. \]
This series converges uniformly on compact intervals of $\R^{\geq 0}$ in operator norm.
\end{theorem}
\begin{proof}
By variation of parameters, \ref{operatorVariationOfParameteres}, we have $S(t)x = T(t)x + VS(t)x$. Thus $(\id - V)S(t)x = T(t)x$. Now $1\in\spec(V)$ by \ref{spectralRadiusAbstractVolterra}, so $S(t)x = (\id - V)^{-1}T(t)x = R_V(1)T(t)x$. 

Then the second Neumann series expansion \ref{secondNeumannSeries} gives the result.
\end{proof}

\subsection{Unbounded perturbation}
TODO move!

\begin{definition}
Let $X$ be a Banach space and $A: \dom(A)\subseteq X\to X$ an operator on $X$. An operator $B: \dom(B)\subseteq X\to X$ on $X$ is called \udef{(relatively) $A$-bounded} if
\begin{itemize}
\item $\dom(A) \subseteq \dom(B)$;
\item there exist $a,b\geq 0$ such that for all $x\in \dom(A)$:
\[ \norm{Bx} \leq a\norm{Ax} + b\norm{x}. \]
\end{itemize}
The \udef{$A$-bound} of $B$ is
\[ a_0 \defeq \inf\setbuilder{a\geq 0}{\exists b\geq 0: \forall x\in\dom(A): \;\norm{Bx} \leq a\norm{Ax} + b\norm{x}}. \]

The operator $B$ is called \udef{(relatively) $A$-compact} if
\begin{itemize}
\item $\dom(A) \subseteq \dom(B)$;
\item $B|_{\dom(A)}: \sSet{\dom(A), \norm{\cdot}_A} \to X$ is compact.
\end{itemize}
\end{definition}

\begin{lemma}
Let $X$ be a Banach space and $A,B$ operators on $X$ such that $B$ is $A$-bounded. Then
\begin{enumerate}
\item the graph norm $\norm{\cdot}_B$ is bounded by the graph norm $\norm{\cdot}_{A}$;
\item the graph norm $\norm{\cdot}_{A+B}$ is bounded by the graph norm $\norm{\cdot}_{A}$;
\item if the $A$-bound is less than $1$, then the graph norms $\norm{\cdot}_{A+B}$ and $\norm{\cdot}_{A}$ are equivalent.
\end{enumerate}
\end{lemma}
\begin{proof}
We take $a,b\geq 0$ such that $\norm{Bx} \leq a\norm{Ax} + b\norm{x}$.

(1) We have
\[ \norm{Bx}+\norm{x} \leq a\norm{Ax} + (b+1)\norm{x} \leq \max\{a,b+1\}\Big(\norm{Ax} +\norm{x}\Big). \]

(2) We have
\begin{align*}
\norm{(A+B)x} + \norm{x} &\leq \norm{Ax} +\norm{Bx} +\norm{x} \\
&\leq (a+1)\norm{Ax} + (b+1)\norm{x} \\
&\leq \max\{a+1, b+1\}\Big(\norm{Ax} +\norm{x}\Big).
\end{align*}

(3) In this case we may take $a < 1$. Then
\[ \norm{Ax} = \norm{(A+B)x - Bx} \leq \norm{(A+B)x} + a\norm{Ax} +b\norm{x}. \]
Then $(1-a)\norm{Ax}\leq \norm{(A+B)x} +b\norm{x}$ and thus
\begin{align*}
\norm{Ax} + \norm{x} &\leq \frac{1}{1-a}\norm{(A+B)x} + \frac{b}{1-a}\norm{x} + \norm{x} \\
&\leq \max\left\{\frac{1}{1-a}, \frac{b-a+1}{1-a}\right\}\Big(\norm{(A+B)x} +\norm{x}\Big).
\end{align*}
\end{proof}
\begin{corollary}
Let $X$ be a Banach space and $A,B$ operators on $X$ such that $A$ is closed and $B$ is $A$-bounded with $A$-bound $a_0<1$. Then $A+B$ is closed.
\end{corollary}
\begin{proof}
By \ref{closedGraphEquivalence} the closedness of $A$ is equivalent to the fact that $\dom(A)$ is a Banach space when equipped with the graph norm.

As $\dom(A+B) = \dom(A)$ and the graph norm of $A+B$ is equivalent to that of $A$, we conclude that $A+B$ is closed, again by \ref{closedGraphEquivalence}.
\end{proof}

\begin{lemma} \label{boundOfResolventOfABoundedSum}
Let $A$ be a closed operator on a Banach space $X$ and let $B$ be an operator on $X$ that is $A$-bounded with constants $a,b \geq 0$. If $\lambda\in\res(A)$ and
\[ c \defeq a\norm{AR_A(\lambda)} + b\norm{R_A(\lambda)} < 1, \]
then $\lambda\in\res(A+B)$ and
\[ \norm{R_{A+B}(\lambda)} \leq (1-c)^{-1}\norm{R_A(\lambda)}. \]
\end{lemma}
\begin{proof}
This is an application of \ref{perturbationLemma}, we just need to show that $\norm{BR_A(\lambda)} < 1$. Indeed, by the $A$-bound of $B$,
\begin{align*}
\norm{BR_A(\lambda)x} &\leq a\norm{AR_A(\lambda)x} + b\norm{R_A(\lambda)x} \\
&\leq \big(a\norm{AR_A(\lambda)} + b\norm{R_A(\lambda)}\big)\norm{x} = c\norm{x},
\end{align*}
for all $x\in X$. This implies $\norm{BR_A(\lambda)} \leq c < 1$.
\end{proof}

\begin{proposition}
Let $A$ be the generator of a contraction operator semigroup on $X$ and $B$ a dissipative, $A$-bounded operator on $X$ with $A$-bound $a_0$. If either
\begin{itemize}
\item $a_0 < 1$, or
\item $a_0 = 1$ and $B^\transp$ is densely defined on $X^*$,
\end{itemize}
then $A+B$ generates a contraction semigroup.
\end{proposition}
\begin{proof}
Because $\dom(A+B) = \dom(A)$, the operator is densely defined. The operator $A+B$ is also dissipative (TODO ref!)

In order to apply the Lumer-Phillips theorem, it is enough to find some $\lambda > 0$ such that $\lambda\in\res(A+B)$.

With a view to apply \ref{boundOfResolventOfABoundedSum}, we calculate
\begin{align*}
a\norm{AR_A(r)} + b\norm{R_A(r)} &= a\norm{r R_A(r)-\id_X} + b\norm{R_A(r)} \\
&\leq 2a + \frac{b}{r}
\end{align*}
for $r > 0$. If $a_0 < 1/2$, then we can take $r > \frac{b}{1-2a}$, which makes $2a + b/r < 1$, and we are done.

We now extend the result to the case $a_0 < 1$. The idea is to write
\[ A+ B = A + \underbrace{\frac{1}{N}B + \ldots \frac{1}{N}B}_{\text{$N$ times}}, \]
for some $N\in \N$ such that for all $k < N$, the operator $1/N B$ has an $(A + k/N B)$-bound that is less than $1/2$.

From
\begin{align*}
\norm{Bx} &\leq a\norm{Ax} + b\norm{x} \\
&\leq a\norm{(A+\frac{k}{N}B)x} + a\norm{\frac{k}{N}Bx} + b\norm{x},
\end{align*}
we get
\begin{align*}
\norm{\frac{1}{N}Bx} &\leq \frac{1}{N}\left(1 - \frac{ak}{N}\right)^{-1}\left(a\norm{(A+\frac{k}{N}B)x} + b\norm{x}\right) \\
&= \frac{a}{N-ak}\norm{(A+\frac{k}{N}B)x} + \frac{b}{N-ak}\norm{x}.
\end{align*}
Now $\frac{a}{N-ak} \leq \frac{a}{N-a(N-1)}$, so it is enough to bound this by $1/2$. We get
\begin{align*}
\frac{a}{N-a(N-1)} \leq \frac{1}{2} &\iff 2a \leq N-aN +a \\
&\iff a \leq N-aN \\
&\iff a \leq N(1-a) \\
&\iff \frac{a}{1-a} \leq N.
\end{align*}

Finally we tackle the case $a_0 = 1$. TODO
\end{proof}
\begin{corollary}
If $X$ is a reflexive Banach space and $a_0 = 1$, then the closure of $A+B$ generates a contraction semigroup on $X$.
\end{corollary}

\section{Approximation of semigroups}
\subsection{Trotter-Kato approximation theorems}
\begin{lemma}
Let $T(t), S(t)$ be strongly continuous operator semigroups with generators $A,B$, resp. Then for all $\lambda \in \res(A)\cap \res(B)$
\[ R_A(\lambda)\big( T(t) - S(t)\big)R_B(\lambda) = \int_0^s T(s)\big(R_A(\lambda) - R_B(\lambda)\big)S(t-s)\diff{s}. \]
\end{lemma}
\begin{proof}
We calculate
\begin{align*}
R_A(\lambda)\big( T(t) - S(t)\big)R_B(\lambda) &= R_A(\lambda)T(t)R_B(\lambda) - R_A(\lambda)S(t)R_B(\lambda) \\
&= T(t)R_A(\lambda)R_B(\lambda)S(0) - T(0)R_A(\lambda)R_B(\lambda)S(t) \\
&= \Big[T(s)R_A(\lambda)R_B(\lambda)S(t-s)\Big]_{s=0}^{s=t} \\
&= \int_0^s \dod{}{s}\Big[T(s)R_A(\lambda)R_B(\lambda)S(t-s)\Big]\diff{s} \\
&= \int_0^s \Big[T(s)AR_A(\lambda)R_B(\lambda)S(t-s) - T(s)R_A(\lambda)BR_B(\lambda)S(t-s)\Big]\diff{s} \\
&= \int_0^s \begin{multlined}[t]\Big[
\cancel{T(s)\lambda R_A(\lambda)R_B(\lambda)S(t-s)} - T(s)R_B(\lambda)S(t-s) \\
- \cancel{T(s)R_A(\lambda)\lambda R_B(\lambda)S(t-s)} + T(s)R_A(\lambda)S(t-s)
\Big]\diff{s} \end{multlined}\\
&= \int_0^s \Big[T(s)R_A(\lambda)S(t-s) - T(s)R_B(\lambda)S(t-s)\Big]\diff{s} \\
&= \int_0^s T(s)\big(R_A(\lambda) - R_B(\lambda)\big)S(t-s)\diff{s}.
\end{align*}
\end{proof}

\begin{theorem}[Trotter-Kato approximation theorem]
Let $X$ be a Banach space, $T, T_n$ strongly continuous operator semigroups on $X$ with generators $A, A_n$, all satisfying the same growth estimate
\[ \norm{T(t)}, \norm{T_n(t)} \leq Me^{wt} \qquad \forall t\geq 0, n\in \N. \]
The following are equivalent:
\begin{enumerate}
\item there exists a core $D$ of $A$ such that for all $x\in D$ there exists $\seq{x_n} \to x$ such that $x_n\in\dom(A_n)$ and $\seq{A_nx_n}\to Ax$;
\item $R_{A_n}(r)x \overset{n\to\infty}{\longrightarrow} R_{A}(r)x$ for all $x\in X$ and some/all $r>w$;
\item $T_n(t)x\overset{n\to\infty}{\longrightarrow} T(t)x$ for all $x\in X$, uniformly for $t$ in compact intervals;
\item $T_n \to T$ in continuous convergence.
\end{enumerate}
These are true if $D\subseteq \dom(A_n)$ for all $n\in\N$ and $\seq{A_n}\to A$ pointwise on $D$.
\end{theorem}
\begin{proof}
$(1) \Rightarrow (2)$ Take some $r > w$. Because $\norm{R_{A_n}(r)}\leq M/(r-w)$, it is enough to prove pointwise convergence on a dense subset of $X$ (TODO ref).

By \ref{densityCoreLemma}, $(r\id_X - A)D$ is dense in $X$ and we take some $y = (r\id_X - A)x\in (r\id_X - A)D$.

By assumption, (1), there exists $\seq{x_n} \to x$ such that $A_nx_n \to Ax$. Then
\[ y_n\defeq (r\id - A_n)x_n = r x_n - A_nx_n \to r x - Ax = y. \]
Therefore
\begin{align*}
\norm{R_{A_n}(r)y - R_A(r)y} &\leq \norm{R_{A_n}(r)y - R_{A_n}(r)y_n} + \norm{R_{A_n}(r)y_n - R_A(r)y} \\
&\leq \norm{R_{A_n}(r)}\norm{y-y_n} - \norm{x_n - x} \to 0.
\end{align*}

$(2) \Rightarrow (1)$ Take $x\in X$ and set $x_n = R_{A_n}(r)(r\id - A)x$. By pointwise convergence of the resolvents, we have $x_n\to x$. By construction $x_n\in\dom(A_n)$. Finally we consider
\begin{align*}
A_nx_n &= A_nR_{A_n}(r)(r\id - A)x \\
&= \big(rR_{A_n}(r) - \id_X\big)(r\id - A)x \\
&\to \big(rR_{A}(r) - \id_X\big)(r\id - A)x \\
&= A\big(R_A(r\id - A)\big)x \\
&= Ax.
\end{align*}

$(2) \Rightarrow (3)$ Take arbitrary $t_0\in\R^{\geq 0}$. Take some $r>0$ such that $R_{A_n}(r)x\to R_{A}(r)x$ for all $x\in X$. By (ref TODO Banach-Steinhaus!) it is enough to prove that $T_n(t) \to T(t)$ pointwise on a dense subset of $X$. Now $\dom(A^2)$ is a dense by \ref{domAinftyCore}. Any $x\in \dom(A^2)$ can be written as $x = \big(R_A(r)\big)^2z$. Then
\begin{align*}
\norm{\big(T_n(t) - T(t)\big)x} &= \norm{\big(T_n(t) - T(t)\big)\big(R_A(r)\big)^2z} \\
&= \begin{multlined}[t]\Big\Vert\Big( \big(T_n(t)R_A(r) - R_A(r)T(t)\big) + \big(R_{A_n}(r)T_n(t) - R_{A_n}(r)T_n(t)\big) \\ + \big( R_{A_n}(r)T(t) - R_{A_n}(r)T(t) \big)  \Big)R_A(r)z \Big\Vert \end{multlined} \\
&= \begin{multlined}[t]\Big\Vert\Big( \big(T_n(t)R_A(r) - R_{A_n}(r)T_n(t)\big) + \big(R_{A_n}(r)T_n(t) - R_{A_n}(r)T(t) \big) \\ + \big( R_{A_n}(r)T(t) - R_A(r)T(t) \big)  \Big)R_A(r)z \Big\Vert \end{multlined} \\
&\leq \begin{multlined}[t]\norm{\big(T_n(t)R_A(r) - R_{A_n}(r)T_n(t)\big)R_A(r)z} + \norm{\big(R_{A_n}(r)T_n(t) - R_{A_n}(r)T(t) \big)R_A(r)z} \\ + \norm{\big( R_{A_n}(r)T(t) - R_A(r)T(t) \big)R_A(r)z} \end{multlined} \\
&= \begin{multlined}[t]\norm{T_n(t)\big(R_A(r) - R_{A_n}(r)\big)R_A(r)z} + \norm{R_{A_n}(r)\big(T_n(t) - T(t) \big)R_A(r)z} \\ + \norm{\big( R_{A_n}(r) - R_A(r) \big) T(t)R_A(r)z}. \end{multlined}
\end{align*}
We show that all three terms converge to zero, uniformly for $t$ in compact intervals.

Because $\norm{T_n(t)}\leq Me^{wt_0}$ for all $t\in\interval{0,t_0}$, the first term clearly converges as it should.



$(3) \Rightarrow (2)$ We have, using \ref{integralRepresentationOfResolvent},
\begin{align*}
\norm{R_{A_n}(r)y - R_A(r)y} &= \norm{\int_0^\infty e^{-rs}T_n(s)\diff{s} - \int_0^\infty e^{-rs}T(s)\diff{s}} \\
&\leq \int_0^\infty e^{-rs}\norm{T_n(s)x - T(s)x}\diff{s}.
\end{align*}
Now for all $t\in \R^{\geq 0}$, we have that $T_n(s)$ is uniformly bounded on $[0,t]$ by TODO ref. By \ref{boundedConvergenceTheorem} we may swap the limit and integral. So
\[ \int_0^t e^{-rs}\norm{T_n(s)x - T(s)x}\diff{s} = 0. \]
Then, by TODO ref,
\[ \int_0^\infty e^{-rs}\norm{T_n(s)x - T(s)x}\diff{s} = \lim_{t\to \infty}\int_0^t e^{-rs}\norm{T_n(s)x - T(s)x}\diff{s} = \lim_{t\to \infty}0 = 0. \]
\end{proof}

In order to apply the previous theorem, we need to know that the limit $A$ is a generator of a semigroup.

\begin{theorem}[Second Trotter-Kato approximation theorem] \label{secondTrotterKato}
Let $X$ be a Banach space, $T_n$ strongly continuous operator semigroups on $X$ with generators $A_n$, all satisfying the same growth estimate
\[ \norm{T_n(t)} \leq Me^{wt} \qquad \forall t\geq 0, n\in \N. \]
Take $r_0 > w$. The following are equivalent:
\begin{enumerate}
\item $R_{A_n}(r_0) \overset{n\to\infty}{\longrightarrow} R$ strongly for some $R\in\Bounded(X)$ with dense range;
\item $T_n(t)$ converges strongly as $n\to\infty$ (uniformly for $t$ in compact intervals) to a strongly continuous semigroup with generator $B$ such that $R= R_B(\lambda_0)$.
\end{enumerate}
These are true if $A_n$ converges strongly to $A$ on a core of $A$, $A$ is densely defined and $\im(r_0\id - A)$ is dense in $X$. In this case $B = \overline{A}$.
\end{theorem}
\begin{proof}
$(2) \Rightarrow (1)$ Holds by the previous
\end{proof}

\begin{lemma}
Let $X$ be a Banach space, $T, T_n$ strongly continuous operator semigroups on $X$ with generators $A, A_n$, all satisfying the same growth estimate
\[ \norm{T(t)}, \norm{T_n(t)} \leq Me^{wt} \qquad \forall t\geq 0, n\in \N. \]
Assume $A_n$ bounded and $A_nT(t) = T(t)A_n$ for all $t,n$. If $A_n\to A$ pointwise on a core of $A$, then $T_n(t)\to T(t)$ pointwise on all of $X$ and uniformly in $\interval{0,t_0}$.
\end{lemma}
\begin{proof}
We have
\begin{align}
T_n(t)x - T(t)x &= -\int_0^t\od{}{s}\big(T_n(t-s)T(s)x\big)\diff{s} \\
&= \int_0^tT_n(t-s)(A_n-A)T(s)x\diff{s} \\
&= \int_0^tT_n(t-s)T(s)\big(A_nx - Ax\big)\diff{s}.
\end{align}
Hence $\norm{T_n(t)x - T(t)x} \leq tM^2e^{2wt}\norm{A_nx - Ax}$.
\end{proof}

TODO Weierstrass approximation.

\subsection{The Chernoff product formula}

\begin{lemma}
For $t\geq 0$:
\[ \sum_{k=0}^\infty |k-t| \frac{t^k}{k!}\leq \sqrt{t}e^t. \]
\end{lemma}
TODO BB.

\begin{lemma} \label{sqrtNlemma}
Let $S\in\Bounded(X)$ be a bounded operator such that $\norm{S^m}\leq M$ for some $M\geq 1$ and all $m\in \N$. Then
\begin{enumerate}
\item $\norm{S^kx - S^nx} \leq |n-k|\cdot M\norm{Sx-x}$ for all $n,k\in\N$;
\item $\norm{e^{n(S-\id_X)}x-S^nx} \leq \sqrt{n}M\norm{Sx - x}$ for all $n\in\N$, $x\in X$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) For $k>n$, we write
\[ S^k - S^n = \sum_{j=n}^{k-1}(S^{j+1}- S^j) = \sum_{j=n}^{k-1}S^j(S- \id_X).  \]
Because $\norm{S^j}\leq M$, we obtain the result.

(2) We calculate, using (1),
\begin{align*}
\norm{e^{n(S-\id_X)}x-S^nx} &= \norm{e^{-n}(e^{nS}-e^n S^n)} \\
&= \norm{e^{-n}\sum_{k=0}^\infty\frac{n^k}{k!}(S^k-S^n)} \\
&\leq e^{-n}\sum_{k=0}^\infty\frac{n^k}{k!} \norm{S^k - S^n} \\
&\leq  M\norm{Sx-x} e^{-n}\sum_{k=0}^\infty\frac{n^k}{k!} |n-k|.
\end{align*}
Now we have, using Cauchy-Schwarz (TODO use previous lemma),
\begin{align*}
\sum_{k=0}^\infty\frac{n^k}{k!} |n-k| &= \sum_{k=0}^\infty\left(\frac{n^k}{k!}\right)^{1/2}\left(\frac{n^k}{k!}(n-k)^2\right)^{1/2} \\
&\leq \left(\sum_{k=0}^\infty\frac{n^k}{k!}\right)^{1/2}\left(\sum_{k=0}^\infty\frac{n^k}{k!}(n-k)^2\right)^{1/2} \\
&= (e^n)^{1/2}(ne^n)^{1/2}.
\end{align*}
Combining these inequalities gives the result.
\end{proof}

\begin{theorem}[Chernoff product formula]
Let $X$ be a Banach space and consider a function $V: \R^{\geq 0}\to \Bounded(X)$ satisfying $V(0) = \id_X$ and $\norm{V(t)^m}\leq Me^{mwt}$ for some $M\geq 1, w\in\R$ and all $t\geq 0, m\in \N$.

Assume that
\[ Ax \defeq \lim_{h\downarrow 0}\frac{V(h)x-x}{h} \]
exists for all $x\in D$, where $D$ is a dense subspace of $X$ such that $(\lambda_0 - A)D$ is also a dense subspace of $X$ for some $\lambda_0$.

Then $\overline{A}$ generated a bounded strongly continuous semigroup $T(t)$ given by
\[ T(t)x = \lim_{n\to \infty}\big(V(t/n)\big)^n x \]
for all $x\in X$. The limit is uniform for $t\in\interval{0,t_0}$.
\end{theorem}
\begin{proof}
For $s> 0$, define
\[ A_s \defeq \frac{V(s)-\id_X}{s} \in \Bounded(X). \]
Now $A_s$ converges strongly to $A$ on $D$. In order to apply \ref{secondTrotterKato}, it is enough to verify all $e^{tA_s}$ satisfy the same growth bound. Indeed
\begin{align*}
\norm{e^{tA_s}} &= e^{-t/s}\norm{e^{tV(s)/s}} \\
&= e^{-t/s}\norm{\sum_{m=0}^\infty \frac{(tV(s)/s)^m}{m!}} \\
&\leq  e^{-t/s}\sum_{m=0}^\infty \frac{t^m\norm{V(s)^m}}{s^mm!} \\
&\leq e^{-t/s}\sum_{m=0}^\infty \frac{t^m}{s^mm!}M = e^{-t/s}e^{t/s}M = M.
\end{align*}

Thus the closure $\overline{A}$ of $A$ generates a strongly continuous semigroup $T(t)$. We just need to show that $T(t)x = \lim_{n\to \infty}\big(V(t/n)\big)^n x$. By (TODO ref) it is enough to check pointwise convergence on a dense subset. We have
\[ \norm{T(t)x - \big(V(t/n)\big)^n x} \leq \norm{T(t)x - e^{tA_{t/n}} x} + \norm{e^{tA_{t/n}} x - \big(V(t/n)\big)^n x}. \]
The first part goes to zero as $n\to \infty$ by the Trotter-Kato theorem. For the second part, we have
\begin{align*}
\norm{e^{tA_{t/n}} x - \big(V(t/n)\big)^n x} &= \norm{e^{n\big(V(t/n)-\id\big)}x - \big(V(t/n)\big)^n x} \\
&\leq \sqrt{n}M \norm{V(t/n)x-x} = \frac{tM}{\sqrt{n}}\norm{A_{t/n}x} \overset{n\to\infty}{\longrightarrow}0,
\end{align*}
using \ref{sqrtNlemma}.
\end{proof}
\begin{corollary}
Fix $t >0$ and take sequences $\seq{t_n}\subseteq \R, \seq{k_n}\subseteq \N$ such that $t_n \to 0$ and $t_nk_n \to t$. Then
\[ T(t)x = \lim_{n\to \infty}\big(V(t_n)\big)^{k_n} x \]
for all $x\in X$.
\end{corollary}
\begin{proof}
TODO
\end{proof}
\begin{corollary}[Post-Widder inversion formula]
Let $T(t)$ be a strongly continuous semigroup on a Banach space $X$ with generator $A$. Then
\[ T(t)x = \lim_{n\to\infty}\left(\frac{n}{t} R_{A}\left(\frac{n}{t}\right)\right)^nx = \lim_{n\to\infty}\left(\id_X - \frac{n}{t} A\right)^{-n}x \]
for all $x\in X$, uniformly for $t\in\interval{0,t_0}$.
\end{corollary}
\begin{proof}
Assume that $\norm{T(t)}\leq Me^{wt}$ for $M\geq 1, w> 0$. Define
\[ V(t) \defeq \begin{cases}
\id_X & (t=0) \\
1/t R_A(1/t) & (0<t<\delta) \\
0 & (t\geq \delta)
\end{cases} \]
for some $0<\delta<1/w$. Then
\[ \norm{V(t)^m} \leq \frac{1}{t^m}\norm{R_A(\frac{1}{t})^m} \leq \frac{M}{t^m (1/t - w)^m} = \frac{M}{(1-wt)^m} \leq Me^{m(w+1)t}. \]
\end{proof}
\begin{corollary}[Trotter product formula]
Let $T(t)$ and $S(t)$ be strongly continuous semigroups.
\end{corollary}

\section{Approximation processes}
\begin{definition}
Let $X$ be a Banach space and $T: \R^{> 0}\to \Bounded(X)$ be a function that converges to $\id_X$ in the strong operator topology as $t\to 0$. Assume there exists a positive decreasing function $\phi$ on $\interval[o]{0,+\infty}$ and a set $\mathcal{F}\subseteq X$ such that, for all $x\in X$
\begin{itemize}
\item if $T(t)x - x = o\big(\phi(1/t)\big)$ as $t\to 0$, then $T(t)x = x$
\item $x\in \mathcal{F}$ \textup{if and only if} $T(t)x-x = O\big(\phi(1/t)\big)$ as $t\to 0$;
\item there exists $x\in \mathcal{F}$ such that $T(t)x \neq x$ for some $t$.
\end{itemize}
Then $T$ is said to have \udef{optimal approximation order} $O\big(\phi(1/t)\big)$ or to be \udef{saturated} in $X$ with order $O\big(\phi(1/t)\big)$. The set $\mathcal{F}$ is called its \udef{saturation class} or \udef{Favard class}.
\end{definition}

\begin{proposition}
Let $T(t)$ be a $C_0$ semigroup on a reflexive Banach space $X$. Then $T$ is saturated with order $O(t)$ and the Favard class is the domain of the generator, $\dom(A)$.
\end{proposition}
\begin{proof}
First assume $T(t)x - x = o\big(t\big)$. Then $\lim_{t\to 0} \frac{\norm{T(t)x - x}}{t} = \lim_{t\to 0}\norm{\frac{T(t)x-x}{t}} = 0$, which means that $x\in \dom(A)$ and $Ax = 0$. Thus $T(t)x = x$ for all $t\in\R^{\geq 0}$ by \ref{kernelGeneratorInvariant}.

Assume $x\in\dom(A)$, then by \ref{integralOperatorSemigroupGenerator}, for some $t_0 > 0$,
\[ \norm{T(t)x-x} = \norm{\int_0^t}T(s)Ax\diff{s}\leq t\sup_{0\leq s \leq t_0}\norm{T(s)}\;\norm{Ax}, \]
so $T(t)x-x = O(t)$.

Finally assume $T(t)x-x = O(t)$. Then for all $t$ in some interval $\interval{0,t_0}$, we have $\norm{T(t)x-x} \leq Mt$. So, on this interval, $\norm{\frac{T(t)x-x}{t}} \leq M$. This implies $\liminf_{t\to 0^+}\norm{\frac{T(t)x-x}{t}} \leq M < \infty$. By \ref{convergenceGeneratorLiminf} we have that $x\in\dom(A)$.
\end{proof}


\section{Examples and constructions}
\subsection{Translation semigroups}

\subsection{Multiplication semigroups}
\begin{proposition}
Let $X$ be a Banach space. Let $E$ be the function space $\cont(\R,X)$ equipped with the supremum norm. Consider a function $A: \R\to \Lin(X)$ such that
\begin{itemize}
\item there exists a common core $D\subseteq \bigcap_{s\in R}\dom\big(A(s)\big)$ such that $A$ is strongly continuous on $D$;
\item each $A(s)$ is the generator of a semigroup $T_s$ satisfying the common growth bound $\norm{T_s(t)}\leq Me^{wt}$.
\end{itemize}
Then $\mathcal{M}: \R^{\geq 0}\to \Bounded\big(E\big)$ defined by
\[ \mathcal{M}(t)f(s) \defeq T_s(t)f(s) \]
for all $s\in R$, $t\geq 0$ and $f\in E$, is a strongly continuous semigroup satisfying the common growth bound $\norm{\mathcal{M}(t)}_{\infty} \leq Me^{wt}$.

The generator of this semigroup is the operator $\mathcal{A}:E\to E$ defined by
\[ \big(\mathcal{A}f\big)(s) \defeq A(s)f(s) \]
for all $s\in \R$. Its domain is given by
\[ \dom(\mathcal{A}) = \setbuilder{f\in E}{\forall s\in \R: f(s)\in \dom\big(A(s)\big)\;\text{and}\; \big(s\mapsto A(s)f(s)\big)\in E}. \]
\end{proposition}
The semigroup $\mathcal{M}$ is called a \udef{multiplication semigroup}.
\begin{proof}
The semigroup property and growth bound of $\mathcal{M}$ are clear. For strong continuity, it is enough by (TODO EN00 I.5.3) and the growth bound to check strong continuity on a dense subset, in this case $\cont_c(\R,X)$, the space of functions with compact support.
\end{proof}

\begin{proposition}
Let $X$ be a Banach space, let $E$ be the function space $\cont(\R,X)$ equipped with the supremum norm and let $\mathcal{A}$ be a bounded operator on $E$. Then $\mathcal{A}$ is the multiplication operator associated to a family $A: \R\to \cont_b(\R, \Bounded(X))$ \textup{if and only if} $\mathcal{A}(\varphi f) = \varphi\mathcal{A}(f)$ for all $f\in E$ and $\varphi\in\cont_c(\R)$. Moreover,
\[ \norm{\mathcal{A}}_{\Bounded(E)} = \sup_{t\in\R}\norm{A(t)}_{\Bounded(X)}. \]
\end{proposition}
\begin{proof}
The direction $\Rightarrow$ is immediate by linearity of each $A(s)$.

For the converse, fix $s\in \R$. In order to define $A(s)x$, we take some $f\in E$ such that $f(s) = x$ and set $A(s)x \defeq (\mathcal{A}f)(s)$. Now we just need to show this does not depend on the $f$ chosen. To this end, take $f_1$ and $f_2$ such that $f_1(s) = x = f_2(s)$. Also fix $\epsilon >0$ and choose a $\varphi_\epsilon\in\cont_c(\R)$ such that $\varphi_\epsilon(t) = 1$ and the support of $\varphi_\epsilon$ is contained in $\interval{t-\epsilon, t+\epsilon}$. Then we calculate
\begin{align*}
\norm{(\mathcal{A}f_1)(s) - (\mathcal{A}f_2)(s)} &= \norm{\big(\mathcal{A}(f_1 - f_2)\big)(s)} = \norm{\big(\mathcal{A}(\varphi_\epsilon (f_1 - f_2))\big)(s)} \\
&\leq \norm{\mathcal{A}}\cdot\norm{\varphi_\epsilon (f_1-f_2)}_\infty \leq \norm{\mathcal{A}} \sup_{|t-s|\leq \epsilon}\norm{f_1(s)-f_2(s)}.
\end{align*}
In the limit $\epsilon\to 0$, the right hand side goes to zero, so $\norm{(\mathcal{A}f_1)(s) - (\mathcal{A}f_2)(s)} = 0$ for all $s\in \R$, meaning that $\mathcal{A}f_1 = \mathcal{A}f_2$.
\end{proof}

\chapter{Analytic semigroups}

TODO Sufficient condition: $\im(T(t)) \subseteq \dom(A)$ and $t\norm{AT(t)} \leq N$. See Berens \& Butzer


\subsection{Sectorial operators}
\begin{definition}
A linear operator $A$ on a Banach space $X$ is called \udef{sectorial} of angle $\delta$ if the sector
\[ \Sigma_\delta \defeq \setbuilder{\lambda\in\C}{|\arg\lambda| < \frac{\pi}{2}+\delta}\setminus \{0\} \]
is contained in the resolvent set $\res(A)$ and
\[ \forall \epsilon >0: \exists M_\epsilon \geq 1: \forall \lambda\in \Sigma_{\delta-\epsilon}: \quad \norm{R_A(\lambda)} \leq \frac{M_\epsilon}{|\lambda|} \]
\end{definition}
Note that a sectorial operator is closed by \ref{spectrumNonClosedOperator}.

\section{Analytic semigroups}
\begin{definition}
Let $X$ be a Banach space. A function $T: \Sigma_\delta \to \Bounded(X)$ is called an \udef{analytic semigroup} of angle $\delta$ if
\begin{itemize}
\item $T$ is analytic everywhere, except at $0$;
\item $T(0) = \id_X$;
\item $T(z_1 + z_2) = T(z_1)T(z_2)$ for all $z_1,z_2\in \Sigma_\delta$;
\item $\lim_{z\to 0 \in \Sigma_{\delta'}}T(z)x = x$ for all $x\in X$ and $0<\delta'<\delta$.
\end{itemize}
If, in addition,
\begin{itemize}
\item $\norm{T(z)}$ is bounded in $\Sigma_{\delta'}$ for every $0<\delta'<\delta$,
\end{itemize}
we call $T$ a \udef{bounded analytic semigroup}.
\end{definition}

\begin{theorem}
Let $A$ be an operator on a Banach space $X$. The following are equivalent:
\begin{enumerate}
\item $A$ generates a bounded analytic semigroup $T$ of angle $\delta$;
\item for all $\theta \in \interval[o]{0, \delta}$, the operators $e^{\pm i \theta}\cdot A$ generate bounded strongly continuous semigroups on $X$;
\item for all $\theta \in \interval[o]{0, \delta}$, there exists $\theta'\in \interval[c]{\theta,\delta}$ such that the operators $e^{\pm i \theta'}\cdot A$ generate bounded strongly continuous semigroups on $X$;
\item $A$ generates a bounded strongly continuous semigroup $T:
R^+\to \Bounded(X)$ and $\forall r>0, \forall s\in\R\setminus\{0\}$
\[ \norm{R_A(r+is)} \leq \frac{1}{\tan\delta|s|}; \]
\item $A$ is densely defined and sectorial of angle $\delta$;
\item $A$ generates a bounded strongly continuous semigroup $T:
\R^+\to \Bounded(X)$ such that $\im(T(t)) \subseteq \dom(A)$ for all $t\in\R^+$, and
\[ \sup_{t>0}\norm{tAT(t)} = e^{-1}\tan\delta < \infty. \]
\end{enumerate}
In this case, the analytic semigroup generated by $A$ is defined by
\[ T: \Sigma_\delta\to \Bounded(X): z\mapsto \frac{1}{2\pi i}\int_\gamma e^{\mu z}R_A(\mu)\diff{\mu}, \]
where $\gamma$ is any piecewise smooth curve in $\Sigma_\delta$ going from $\infty e^{-i (\frac{\pi}{2}+\delta')}$ to $\infty e^{i \frac{\pi}{2}+\delta'}$ for some $\delta'\in \interval[o]{0,\delta}$. We also set $T(0) = \id_X$.
\end{theorem}
\begin{proof}
$(1) \Rightarrow (2)$ For all $\theta \in \interval[o]{0, \delta}$, define the function $T_\theta: \R^+\to \Bounded(X): t\mapsto T(e^{i\theta}t)$, which is a bounded, strongly continuous operator semigroup. Then the generator of $T_\theta$ is
\[ \left.\dod{}{t}T(e^{i\theta}t)\right|_{t=0} = e^{i\theta} A. \]
The argument for $e^{-i\theta}A$ is similar.

$(2) \Rightarrow (3)$ Immediate.

$(3) \Rightarrow (4)$ TODO

$(4) \Rightarrow (5)$ That $A$ is densely defined is immediate because it generates a semigroup, see \ref{generatorClosedDenselyDefined}.

TODO
\end{proof}



\chapter{Operator equations}
Linear Operator Equations: Approximation and Regularization
\section{Terminology}
\begin{definition}
Let $T: X\not\to Y$ be a (non-)linear operator between normed spaces. An \udef{operator equation} is an equation of the form
\[ T(u) = f \qquad f\in Y\; \text{$u$ unknown.} \]
A \udef{solution} to is operator equation is a vector $a\in X$ such that $T(a) = f$.
\end{definition}
\subsection{Well- and ill-posed problems}
Some natural questions associated to such problems are:
\begin{enumerate}
\item Whether a solution exists for a given $f\in Y$.
\item Whether this solution is unique.
\item Whether this solution depends continuously on $f$, i.e.\ whether the solution is stable under perturbation.
\end{enumerate}
The later questions depend on the affirmative answers of the former. A problem is called \udef{well-posed} if the answer to all three questions is positive and \udef{ill-posed} if not. The terminology is due to Jacques Hadamard (TODO ref Hadamard, Jacques (1902). Sur les problmes aux drives partielles et leur signification physique. Princeton University Bulletin. pp. 49-52.)

\begin{proposition}
Let $ T(u) = f$ be an operator equation where $T$ is a linear operator. Then the problem of solving this operator equation is well-posed for all $f\in\im(T)$ \textup{if and only if} $T$ is bounded below.
\end{proposition}
\begin{proof}
By \ref{boundedBelow}.
\end{proof}

\begin{proposition}
Let $T$ be a linear operator and $\lambda \in \C$. Consider the operator equation
\[  Tu = \lambda u + f. \]
This problem is well-posed if and only if $\lambda\in \rho(T)$.

In particular, 
\begin{enumerate}
\item if $\lambda\in\sigma_\text{p}(T)$, then uniqueness fails.
\item if $\lambda\in\sigma_\text{r}(T)$, then existence fails for some $f$,
\item if $\lambda\in\sigma_\text{c}(T)$, then the solution does not depend continuously on $f$. TODO: verify with (re)definition of continuous spectrum.
\end{enumerate}
\end{proposition}

\subsection{Equations of the first and second kind}
\begin{definition}
\begin{itemize}
\item An operator equation of the form $T(u) = f$ is said to be of the \udef{first kind}
\item An operator equation of the form $\lambda u - T(u) = f$ for some non-zero scalar $\lambda$ is said to be of the \udef{second kind}.
\end{itemize}
\end{definition}

\section{Equations on function spaces}
\subsection{Relevant spaces}

\subsection{Solutions}
classical, weak, distributional.

\subsubsection{Green's functions}


\subsection{Boundary conditions}
It is often useful to identify a subset of functions using boundary conditions.
\begin{definition}
Let $X$ be a topological space and $\Omega$ a closed subset. A \udef{boundary condition} is an operator equation of the form
\[ \big[Tu\big]_{\partial\Omega} = f \]
where $f$ is a function on $\partial\Omega$. The operator $B\defeq u\mapsto \big[Tu\big]_{\partial\Omega}$ is called a \udef{boundary operator}.

The boundary condition is called
\begin{itemize}
\item \udef{Dirichlet} or \udef{first-type} if $T = \id$;
\item \udef{Neumann} or \udef{second-type} if $\Omega$ is a Riemannian manifold and $T = \partial_{\vec{n}}$ where $\vec{n}$ is the vector normal to $\Omega$; (TODO: correct setting??)
\item \udef{Robin} or \udef{third-type} if $T = \id + \alpha \partial_{\vec{n}}$ for some non-zero constant $\alpha$.
\end{itemize}
The boundary condition is called \udef{homogenous} if $f\equiv 0$.

If the boundary condition is specified on a subset of $\partial\Omega$, then we have a \udef{partial boundary condition}.
\begin{itemize}
\item If $\partial\Omega$ is partitioned with a partial boundary condition specified on each partition, we call this a \udef{mixed boundary condition}.
\item A \udef{Cauchy boundary condition} consists of both a partial Dirichlet and a partial Neumann boundary condition.
\end{itemize}
\end{definition}
TODO: An Introduction to the Finite Element Method - Reddy + TODO generalised functions?

\begin{lemma}
A boundary condition is of the first, second or third type \textup{if and only if} it is of the general form
\[ \Big[(\alpha\id + \beta\partial_{\vec{n}})u\Big]_{\partial\Omega} = f \]
where $\alpha, \beta$ are constants that are not both zero.

In particular, the boundary condition is
\begin{enumerate}
\item Dirichlet if $\beta = 0$;
\item Neumann if $\alpha = 0$;
\item Robin if $\alpha \neq 0 \neq \beta$.
\end{enumerate}
\end{lemma}

\begin{lemma}
Functions obeying a homogeneous boundary condition with linear boundary operator form a subspace.
\end{lemma}
\begin{proof}
These functions are exactly the functions in the kernel of the boundary operator.
\end{proof}

\subsection{Periodic boundary conditions}
TODO

\section{Cauchy problems}
\subsection{Homogeneous Cauchy problems}
\begin{definition}
Let $X$ be a Banach space, $A$ an operator on $X$ and $x\in X$. The operator equation
\[ \begin{cases}
\od{u(t)}{t} = Au(t) \\ u(0) = x
\end{cases} \]
is called the \udef{abstract Cauchy problem} associated to $A$ with \udef{initial value} $x$.

A \udef{(classical) solution} of the Cauchy problem is a function $u\in \cont^1(\R^+, \dom(A))$ such that the operator equation holds.

A \udef{mild solution} of the Cauchy problem is a function $u\in \cont^1(\R^+, X)$ such that $\int_0^tu(s)\diff{s} \in \dom(A)$ for all $t\geq 0$ and
\[ u(t) = A\int_0^tu(s)\diff{s} + x. \]
\end{definition}

\begin{lemma}
A classical solution to an abstract Cauchy problem is also a mild solution.
\end{lemma}
\begin{proof}
Assume $u$ is a classical solution with $\od{u(t)}{t} = Au(t)$ and $u(0) = x$. Then we integrate using TODO ref Lebesgue fundamental theorem of calculus + TODO ref bounded operator commutes with integral.
\[ \int \]
\end{proof}

\begin{proposition}
Let $A$ be the generator of a strongly continuous semigroup $T: \R^+\to \Bounded(X)$ on a Banach space $X$. Then, for all initial values $x\in X$, the abstract Cauchy problem
\[ \begin{cases}
\od{u(t)}{t} = Au(t) \\ u(0) = x
\end{cases} \]
has a unique mild solution given by the orbit map
\[ u: t\mapsto T(t)x. \]
\end{proposition}
\begin{proof}
The fact that the orbit maps are mild solutions is given by \ref{integralOperatorSemigroupGenerator}.

We now show that the mild solutions are unique. By linearity, it is enough to consider the initial value $x=0$ and show that the only mild solution is $u(t) = 0$.

Take a mild solution $u$ and fix $t >0$. Using \ref{differentialOperatorSemigroupGenerator}, we obtain, $\forall s\in\interval[o]{0,t}$,
\begin{align*}
\od{}{s}\left(T(t-s)\int_0^su(r)\diff{r}\right) &= T(t-s)u(s) - T(t-s)A\int_0^su(r)\diff{r} \\
&= T(t-s)\left(u(s) - A\int_0^su(r)\diff{r}\right) \\
&= T(t-s)0 = 0.
\end{align*}
Integrating from $0$ to $t$ gives
\[ 0 = T(0)\int_0^tu(r)\diff{r} = \int_0^tu(r)\diff{r}, \]
so $u(t) = 0$ (TODO ref).
\end{proof}

\begin{proposition}
Let $A$ be a closed operator on a Banach space $X$. The associated Cauchy problem is well-posed \textup{if and only if} $A$ generates a strongly continuous semigroup on $X$. The solutions are given by orbit maps.
\end{proposition}
Recall ``well-posed = existence + uniqueness + continuous dependence on boundary conditions''.
In this case  ``exitence'' should hold for all initial points in $\dom(A)$ and ``continuous dependence on boundary conditions'' means that the map $X\to \cont^1(\R^+, X): x\mapsto u$ that maps initial conditions to the unique solution is continuous when $\cont^1(\R^+, X)$ is equipped with the continuous convergence.
\begin{proof}
$\boxed{\Rightarrow}$


$\boxed{\Leftarrow}$ It is clear that the orbit maps are solutions. 
\end{proof}

TODO: existence and uniqueness enough for strongly continuous semigroup generated by $A_1$ on $X_1$. See II.6.6 in [EN00].

\subsection{Inhomogeneous Cauchy problems}
\begin{definition}
Let $X$ be a Banach space, $A$ an operator on $X$, $f\in \cont(I\subseteq \R^+, X)$ and $x\in X$. An operator equation
\[ \begin{cases}
\od{u(t)}{t} = Au(t) + f(t) \\ u(0) = x
\end{cases} \]
is called an \udef{abstract inhomogeneous Cauchy problem}.
\end{definition}

\begin{theorem}[Duhamel's formula]
Let $T$ be the $C_0$-semigroup generated by $A$. Then
\[ u(t) = T(t)x + \int_0^t T(t-s)f(s)\diff{s}, \]
for all $t\in I$.
\end{theorem}

\url{https://www.math.kit.edu/iana3/~schnaubelt/media/isem16-skript.pdf}

\subsection{Evolution equations}
\begin{definition}
A function $U: \{t\geq s\}\to \Bounded(X)$ is called a \udef{(strongly continuous) evolution family} if
\begin{itemize}
\item $U(t,s) = U(t,r)U(r,s)$ and $U(s,s) = \id_X$;
\item it is strongly continuous.
\end{itemize}
Evolution families are also called \udef{evolution systems}, \udef{evolution operators},
\udef{evolution processes}, \udef{propagators} or \udef{fundamental solutions}.
\end{definition}

\subsubsection{Growth bounds}
\begin{definition}
Let $U: \{t\geq s\}\to \Bounded(X)$ be an evolution family on $X$. We call $U$ \udef{exponentially bounded} if there exist $w\in\R$ and $M\geq 1$ such that
\[ \forall t\geq s:\quad \norm{U(t,s)} \leq M e^{w(t-s)}. \]
We call
\[ w_0 = \inf\setbuilder{w\in \R}{\exists M_w \geq 1: \forall t\geq s:\; \norm{U(t,s)} \leq M_w e^{w(t-s)} } \]
the \udef{growth bound} of the evolution family.
\end{definition}
Clearly $U$ is exponentially bounded if and only if $w_0 < \infty$.

\begin{example}
There exist evolution families that are not exponentially bounded. Take $X = \C$ and $U(t,s) = e^{t^2 - s^2}$. This is an evolution family because, for $t\geq r\geq s$,
\[ U(t,s) = e^{t^2 - s^2} = e^{t^2 - r^2 + r^2 - s^2} = e^{t^2 - r^2}e^{r^2 - s^2} = U(t,r)U(r,s). \]
It is also clearly not exponentially bounded because $e^{t^2 - s^2} = e^{(t+s)(t-s)}$.
\end{example}

\begin{proposition}
Let $U: \{t\geq s\}\to \Bounded(X)$ be an evolution family on $X$ with growth bound $w_0$. Then
\begin{enumerate}
\item if there exist $M\geq 0, t_0>0$ such that
\[ \forall s\in\R: \forall 0\leq t \leq t_0: \quad \norm{U(s+t, s)}\leq M, \]
then $w_0\leq \frac{\ln(M_1)}{t_1}$;
\item if $U$ is exponentially bounded, it is enough to check $\norm{U(s+t_0, s)}\leq M$.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) Pick $s\leq t \in \R$. We can find $n\in \N$ and $u\leq t_0$ such that $t-s = nt_0 + u$. Then $n\leq \frac{t-s}{t_0}$. WLOG we may assume $M\geq 1$. We calculate
\begin{align*}
\norm{U(t,s)} &= \norm{U(s+(t-s), s)} \\
&= \norm{U(s+nt_0 + u, s)} \\
&\leq \norm{U(s+nt_0 + u, s+nt_0)}\;\norm{U(s+nt_0, s)} \\
&\leq M\;M^n \\
&\leq M\;M^{\frac{t-s}{t_0}} \\
&= M\;e^{\ln(M)t_0^{-1}(t-s)}.
\end{align*}

(2) Assume $\norm{U(t,s)} \leq M' e^{w'(t-s)}$ and cosider the proof in (1). We just need to be able to estimate $\norm{U(s+nt_0 + u, s+nt_0)}$ by some constant. We may take $M' e^{w't_0}$.
\end{proof}

\subsubsection{Evolution semigroups}
\begin{definition}
Let $U: \{t\geq s\}\to \Bounded(X)$ be an evolution family on a Banach space $X$. The associated \udef{evolution semigroup} is a semigroup
\[ T: \R^{\geq 0} \to \sSet{\cont(\R, X), \norm{\cdot}_\infty} \]
defined by
\[ \big(T(t)f\big)(s) \defeq U(s,s-t)f(s-t), \]
for all $s\in R$, $t\in\R^{\geq 0}$ and $f\in \sSet{\cont(\R, X), \norm{\cdot}_\infty}$.
\end{definition}

Note that the mapping of evolution families to evolution semigroups is injective.

\begin{lemma}
Evolution semigroups are semigroups. If the evolution family is exponentially bounded, then the evolution semigroup is strongly continuous.
\end{lemma}
\begin{proof}
The semigroup property is immediate: we have $\big(T(0)f\big)(s) = U(s,s)f(s) = f(s)$, so $T(0) = \id_{\cont(\R,X)}$. Also
\begin{align*}
\big(T(t_1+t_2)f\big)(s) &= U(s,s-t_1-t_2)f(s-t_1-t_2) \\
&= U(s,s-t_1)U(s-t_1,s-t_1-t_2)f(s-t_1-t_2) \\
&= U(s,s-t_1)\big(T(t_2)f\big)(s-t_1) \\
&= \Big(T(t_1)\big(T(t_2)f\big)\Big)(s).
\end{align*}


For strong continuity TODO pointwise continuity implies uniform continuity on compact sets ???
\end{proof}

\begin{proposition}
Let $T$ be a strongly continuous semigroup on $E = cont(\R,X)$ with generator $G$. Then the following are equivalent:
\begin{enumerate}
\item $T$ is an evolution semigroup;
\item TODO
\end{enumerate}
\end{proposition}

\subsubsection{Solving non-autonomous Cauchy problems}
\begin{proposition}
Let $X$ be a Banach space and $A: \R\to \Bounded(X)$ a continuous function. Consider
\[ U: \R\to \Bounded(X): t\mapsto \lim_{n\to\infty}\prod_{k=1}^ne^{\frac{t}{n}A\left(\frac{kt}{n}\right)}, \]
where the limit is taken in the strong operator topology and is uniform for $t$ in compact intervals. This limit exists for all $t$ and
\[ \dod{U(t)x}{t} = A(t)x \]
\end{proposition}
\begin{proof}

\end{proof}


\section{Regularising problems}
\subsection{Regularising ill-posed problems}
\subsection{Regularised approximation methods}


\chapter{Ordinary differential equations}
\url{https://www.mat.univie.ac.at/~gerald/ftp/book-ode/ode.pdf}
\url{file:///C:/Users/user/Downloads/978-3-030-47849-0.pdf}
\url{file:///C:/Users/user/Downloads/Polyanin%20A.,%20D.,%20Zaitsev%20V.%20F.,%20Handbook%20of%20exact%20solutions%20for%20ordinary%20differential%20equations.pdf}

\section{Classification}
\begin{definition}
An \udef{$n^\text{th}$ order (ordinary) differential equation} (or ODE) is an equation of the form
\[ F(t, u, u', u^{\prime\prime}, \ldots, u^{(n)}) \equiv 0. \]
We call a real function $u: [a,b] \to \R$ a \udef{solution} of this differential equation on $[a,b]$
if it has at least $n$ continuous derivatives such that $F(t, u(t), u'(t), u^{\prime\prime}(t), \ldots, u^{(n)}(t))$ is zero for all $t\in [a,b]$. The set of all solutions is called the \udef{general solution}.

We call the differential equation
\begin{enumerate}
\item \udef{linear} if $\md{F}{2}{u^{(i)}}{}{u^{(j)}}{} \equiv 0$ for all $i,j\in [0,n]$;
\item \udef{homogenous} if $F(t, 0,\ldots, 0) = 0$.
\end{enumerate}
Unless explicitly stated, we will always assume that $F$ can be solved for the highest derivative, such that the ODE can be written as
\[ u^{(n)} \equiv f(t,u,u',\ldots, u^{(n-1)}). \]
\end{definition}

A linear $n^\text{th}$ order differential equation can be written in the form
\[ \sum_{i=0}^n a_{i}(t)u^{(i)}(t) - g(t) = 0 \]
where $a_i, g \in (]a,b[\to\R)$.

\begin{definition}
Let $\sum_{i=0}^n a_{i}(t)u^{(i)}(t) \equiv g(t)$ be a linear differential equation. We call the functions $a_i$ the \udef{coefficients} and we say the ODE has \udef{constant coefficients} if all the $a_i$ are constants.
\end{definition}

In the linear case we can introduce the linear operator
\[ L \defeq \sum_{i=0}^n a_{i} \left(\dod{}{t}\right). \]
Then the differential equation can be written as $Lu = g$.

The differential equation is homogenous if and only if $g = 0$.

\subsection{Differential problems}
\subsubsection{Initial value problems}
\begin{definition}
An \udef{initial value problem} (IVP) is an $n^{\text{th}}$ order ODE together with \udef{initial conditions}
\[ u^{(i)}(t_0) = c_i \qquad i \in 0:n-1 \]
where $t_0$ and the $c_i$ are real numbers.
\end{definition}

TODO: replace derivatives with Lipschitz continuity.
\begin{theorem}
Let $u^{(n)} \equiv f(t,u,u',\ldots, u^{(n-1)})$ be an $n^{\text{th}}$ order ODE with initial conditions
\[ u^{(i)}(t_0) = c_i \qquad i \in 0:n-1. \]
Assume
\[ f, \pd{f}{t}, \pd{f}{u}, \pd{f}{u'}, \ldots, \pd{f}{u^{(n-1)}} \]
are defined and continuous on a neighbourhood of $(t_0, c_0, \ldots, c_{n-1})\in \R^{n+1}$.

Then there exists $\epsilon > 0$ such that the IVP has a unique solution on the interval $]t_0-\epsilon, t_0+\epsilon[$.
\end{theorem}
\begin{proof}
TODO
\end{proof}

It is possible for a solution $u$ to be defined outside the interval $]t_0-\epsilon, t_0+\epsilon[$, but not be a solution to the IVP.
\begin{example}
Consider the IVP
\[ u' = u^2 \qquad u(0) = c. \]
The function
\[ u: \R\setminus\{1/c\} \to \R: t\mapsto \frac{c}{1-ct} \]
is the solution only for $t < 1/c$.
\end{example}

\subsubsection{Boundary value problems}
\begin{definition}
A \udef{boundary value problem} (BVP) is an $n^{\text{th}}$ order ODE together with boundary conditions.
\end{definition}

The questions of existence and uniqueness are less clear than for IVPs.
\begin{example}
Consider the ODE
\[ u''(t) + u(t) = 0 \qquad 0<t<\pi. \]
The general solution is $u(t) = c_1\sin t + c_2 \cos t$. All solutions have $u(0) = u(\pi)$.
So the BVP with boundary conditions
\[ u(0) = 0 \qquad u(\pi) = 1 \]
has no solution and the BVP with boundary conditions
\[ u(0) = 0 \qquad u(\pi) = 0 \]
has infinitely many solutions.
\end{example}


\subsection{Systems of differential equations}

\section{Existence and uniqueness}
\subsection{Existence}
Generally solutions to IVPs exist if $f$ (TODO ref) is continuous. Such existence results are generally only local.

\begin{example}
Consider $u' = u^2$ with condition $u(1) = -1$. A solution is given by $u(t) = -t^{-1}$. This solution does not exist at $0$, even though $u\mapsto u^2$ is continuous.
\end{example}

\subsubsection{Picard-Lindelf theorem}
\begin{theorem}[Picard-Lindelf]
Consider $f: \R\times \R^d \to \R^d$ and the differential problem of finding $y:\R\to \R^d$ such that
\[ y' = f(t,y) \qquad y(t_0) = y_0 \qquad (t_0\in \R, y_0\in\R^d). \]
Let $R$ be the rectangle $[t_0,t_0+a]\times B(y_0, b)$ for some $a,b\in \R$.
If $f$ is continuous on $R$  and uniformly Lipschitz continuous w.r.t. $y$, then the differential problem has a unique solution $y(t)$ on $[t_0,t_0+\alpha]$, where $\alpha = \min(a,b/M)$ and $M$ is a bound for $|f(t,y)|$ on the rectangle $R$.
\end{theorem}
Any norm on $\R^d$ can be used to define $B(y_0, b)$, as they are all equivalent.
\begin{proof}
For any potential solution $y(t)$, the function $t\mapsto f(t,y(t))$ is integrable (TODO ref). So the solution must satisfy \[ y(t) = y_0 + \int_{t_0}^tf(s, y(s))\diff{s}. \]
We use this the construct a sequence of approximate solutions. Set $y_0: t\mapsto y_0$ and
\[ y_{n+1}: [t_0, t_0+a] \to \R^d: t\mapsto y_0 + \int_{t_0}^t f(s,y_n(s))\diff{s}. \]
These integrals can be taken because the graph of each $y_n$ lies in the rectangle $R$:
\[ |y_n(t) - y_0| \leq \int_{t_0}^t|f(s,y_{n-1}(s))|\diff{s} \leq M\alpha \leq b. \]

TODO
\end{proof}

\subsubsection{Peano's existence theorem}
\begin{theorem}[Peano's existence theorem]
Consider $f: \R\times \R^d \to \R^d$ and the differential problem of finding $y:\R\to \R^d$ such that
\[ y' = f(t,y) \qquad y(t_0) = y_0 \qquad (t_0\in \R, y_0\in\R^d). \]
Let $R$ be the rectangle $[t_0,t_0+a]\times B(y_0, b)$ for some $a,b\in \R$.

If $f$ is continuous on $R$ and $|f(t,y)|$ is bounded on $R$ with bound $M$, then the differential problem has at least one solution $y(t)$ on $[t_0,t_0+\alpha]$.
\end{theorem}
Any norm on $\R^d$ can be used to define $B(y_0, b)$, as they are all equivalent.
\begin{proof}
TODO
\end{proof}

\subsection{Differential inequalities}
\subsection{Dependence on initial conditions and parameters}

\section{First order differential equations}
\subsection{Existence and uniqueness}
\subsection{Qualitative properties of solutions}
\subsection{A miscellany of solutions for different types of equations}
\subsubsection{Separable equations}
\paragraph{The logistic equation.}
\subsubsection{Exact equations}
\subsubsection{Linear first order differential equations}
\subsubsection{Homogeneous equations}
\subsubsection{Bernoulli equations}

\section{Systems of equations and higher order equations}
\subsection{Problem statement and notation}
Equivalence systems and higher order
\subsection{Existence and uniqueness}
\subsection{Second order equations}
\subsection{Higher order linear equations}
\subsection{Systems of first order equations}

\section{Qualitative analysis}

\section{Solutions by infinite series and Bessel functions}

\section{Second order differential equations}
\subsection{Solutions with Green's functions}
\begin{proposition}
Consider a second order linear differential equation on an interval $[a,b]$, which is of the general form
\[ Lu = a_2u^{\prime\prime} + a_1u' + a_0u = f \]
where $a_2,a_1, a_0, f\in \cont([a,b])$.
Consider mixed homogenous boundary conditions of first, second or third type, i.e.\ of the form
\begin{align*}
B_au = c_1 u(a) + c_2 u'(a) &= 0 \\
B_bu = c_3 u(b) + c_4 u'(b) &= 0
\end{align*}
where at least one of $c_1,c_2$ and $c_3,c_4$ is non-zero.

Assume that $a_2(x) \neq 0$ for all $x\in [a,b]$, $f\in L^2([a,b])$ and the kernel of $L$ is trivial.

Then there exists a unique solution of the form
\[ u(x) = \int_{a}^b G(x,y)f(y)\diff{y} \]
where $G$ is a bounded function in $([a,b]\times [a,b] \to \C)$.
\end{proposition}
\begin{proof}
We want to find a kernel $G$ such that
\[ L(G(\cdot, y)) = \delta_y \]
as distributions for all fixed $y\in [a,b]$ and
\[ B_aG(\cdot, y) = 0 = B_bG(\cdot, y). \]
TODO
\end{proof}

\subsection{Sturm-Liouville theory}
\subsubsection{Strum-Liouville problems and operators}
\begin{definition}
A \udef{Sturm-Liouville equation} is a real second-order ODE of the form
\[ -(pu')' + qu = \lambda \omega u \]
where $\lambda\in\R$ and $p,p',q,\omega\in \cont([a,b])$ for some $a,b\in \R$. Also $p$ is assumed strictly positive on $]a,b[$ and $\omega$ strictly positive on $[a,b]$.

A \udef{Sturm-Liouville operator} is a linear operator on the Sobolev space $W^{2,2}([a,b])$ of the form
\[ L: u\mapsto \frac{1}{\omega}\Big(-(pu')' + qu\Big) \]
where $p,q, \omega$ are as above.

A \udef{Sturm-Liouville problem} is a Sturm-Liouville equation with mixed homogenous boundary conditions of first, second or third type, i.e.\ of the form
\[ c_1 u(t_b) + c_2 u'(t_b) = 0 \]
where $t_b$ is $a$ or $b$ and at least one of $c_1,c_2$ is non-zero.

We call the Sturm-Liouville problem
\begin{itemize}
\item \udef{regular} if $p$ is strictly positive on $[a,b]$ and boundary conditions are specified at $a$ and $b$;
\item \udef{singular} if any of the following hold:
\begin{itemize}
\item $p(a) = 0$ and there is no boundary condition at $a$;
\item $p(b) = 0$ and there is no boundary condition at $a$;
\item $p(a) = 0 = p(b)$ and there are no boundary conditions; or
\item $[a,b]$ is infinite.
\end{itemize}
\end{itemize}
\end{definition}
For finite $[a,b]$, all $u\in\cont([a,b])$ are square integrable: $u$ is necessarily bounded by \ref{compactConstructions} and \ref{compactImpliesBounded} and the integral is bounded by this bound times $|b-a|$. If $[a,b]$ is infinite we still require solutions to be square integrable.

We may consider $\cont([a,b]) \subset (\R\to\C)$, in which case the Sturm-Liouville operator maps real functions to real functions.

\begin{proposition}
Consider a Sturm-Liouville problem. Take the Sobolev space $W^{2,2}([a,b], \omega(x)\diff{x})$ and let $\mathcal{H}$ be the subspace of functions that obey the boundary conditions. Then the Sturm-Liouville operator $L$ restricted to $\mathcal{H}$ is self-adjoint.
\end{proposition}
We take $Lu$ to be defined if $Lu\in\cont([a,b])$. If $[a,b]$ is infinite, we 
\begin{proof}

\end{proof}

\chapter{Partial differential equations}
Transport equation, Laplace's equation, Heat equation, Wave equation
\section{Classification}
\begin{definition}
An \udef{$n^\text{th}$ order partial differential equation} (or PDE) is an equation of the form
\[ F(x, \{D^\alpha u\}_{|\alpha|\leq m}) \equiv 0. \]
We call a  function $u: \Omega \subset \R^N \to \R$ a \udef{solution} of this differential equation on $\Omega$ if $D^\alpha u$ exists and is continuous for $|\alpha|\leq m$ and $F(x, \{D^\alpha u(x)\}_{|\alpha|\leq m})$ is zero for all $x\in \Omega$.

The set of all solutions is called the \udef{general solution}.

We call the differential equation
\begin{enumerate}
\item \udef{linear} if $\md{F}{2}{(D^\alpha u)}{}{(D^\beta u)}{} \equiv 0$ for $|\alpha|,|\beta|\leq m$;
\item \udef{homogenous} if $F(x, 0,\ldots, 0) = 0$.
\end{enumerate}
\end{definition}

\begin{lemma}
A PDE is linear \textup{if and only if} it can be written in the form
\[ Lu(x) = \sum_{|\alpha|\leq m}a_\alpha(x)D^\alpha u(x) = g(x). \]
A linear PDE is homogeneous \textup{if and only if} $g = 0$.
\end{lemma}

\subsection{Elliptic, Hyperbolic and Parabolic PDEs}