\chapter{Comparing sets}
\section{Equinumerosity: comparing sets in size}
\begin{definition}
Two sets $A,B$ are \udef{equinumerous} or \udef{equal in cardinality} if there exists an bijection between them:
\[ A =_c B \defequiv \exists f: A\twoheadrightarrowtail B. \]
The set $A$ is \udef{less than or equal to $B$ in size} if it is equinumerous with some subset of $B$:
\[ A \leq_c B \defequiv \exists C: C\subseteq B \land A=_c C. \]
\end{definition}
We might think $=_c$ and $\leq_c$ are relations, but there is no set of all sets, so they are not defined on any set. If we restrict $A,B$ to be subsets of a set $U$, they become relations on $\powerset(U)$.
\begin{proposition}
For all sets $A,B,C$:
\begin{enumerate}
\item $A =_c A$;
\item if $A=_c B$, then $B =_c A$;
\item if $A=_c B$ and $B =_c C$, then $A =_c C$.
\end{enumerate}
Restricted to $U$, equinumerosity is an equivalence relation on $\powerset(U)$.
\end{proposition}

Note that $\emptyset =_c \emptyset$, because $\emptyset$ is a function $\emptyset\to \emptyset$ which is bijective.

\begin{lemma} \label{welldefinedCardinalArithemtic}
Let $A_1,A_2,B_1,B_2$ be sets such that $A_1=_c A_2$ and $B_1=_cB_2$. Then
\begin{enumerate}
\item $A_1 \sqcup B_1 =_c A_2\sqcup B_2$;
\item $A_1 \times B_1 =_c A_2\times B_2$;
\item $(A_1\to B_1) =_c (A_2\to B_2)$.
\end{enumerate}
\end{lemma}

\begin{proposition} \label{injectivityCardinality}
Let $A,B$ be sets. Then
\[ A\leq_c B \iff \exists f: f:A\rightarrowtail B. \]
TODO rewrite + add surjectivity
\end{proposition}
\begin{corollary}
If $A\subseteq B$, then $A\leq_c B$.
\end{corollary}
This follows from the existence of the inclusion map $A \hookrightarrow B$.

\begin{proposition}
For all sets $A,B,C$
\begin{enumerate}
\item $A\leq_c A$;
\item if $A\leq_c B$ and $B\leq_c C$, then $A\leq_c C$.
\end{enumerate}
Restricted to $U$, $\leq_c$ is a preorder on $\powerset(U)$.
\end{proposition}
Even restricting to $U$, $\leq_c$ is not anti-symmetric and so not generally a partial order, but the Schröder-Bernstein theorem (theorem \ref{SchroederBernstein}) does give a result in this vein (with $=_c$ instead of $=$!).

\begin{theorem}[Schröder-Bernstein] \label{SchroederBernstein}
Let $A, B$ be sets. If there exist injective functions $f: A\rightarrowtail B$ and $g: B\rightarrowtail A$, then there exists a bijective function $h: A\twoheadrightarrowtail B$.
\end{theorem}
\begin{proof}
In general $f[A]\subset B$ and $g[B]\subset A$. First we identify subsets $A^*\subset A$ and $B^*\subset B$ such that $f[A^*] = A^*$ and $g[B^*] = B$. To that end we define $A_n,B_n$ recursively
\[ \begin{cases}
A_0 = A \\ A_{n+1} = (g\circ f)[A_n],
\end{cases} \qquad \begin{cases}
B_0 = B \\ B_{n+1} = (f\circ g)[B_n].
\end{cases} \]
Then we can take
\[ A^* = \bigcap_{n=0}^\infty A_n \qquad B^* = \bigcap_{n=0}^\infty B_n. \]
By induction we can see that we have chains of inclusions:
\[ A_n\subseteq g[B_n] \subseteq A_{n+1}, \qquad B_n\subseteq g[A_n] \subseteq B_{n+1}. \]
Then $B^* = \bigcup_{n=0}^\infty f[A_n]$ by
\[ B^* = \bigcup_{n=0}^\infty B_n \subseteq \bigcup_{n=0}^\infty f[A_n]\subseteq \bigcup_{n=0}^\infty B_{n+1} = B^{*}. \]
So, because $f$ is injective, we have
\[ f[A^*] = f[\bigcup_{n=0}^\infty A_n] = \bigcup_{n=0}^\infty f[A_n] = B^* \]
as required. Similarly $g[B^*] = A^*$.

Then notice that
\begin{align*}
A &= A^* \cup \left[ \bigcup_{n=0}^\infty (A_n\setminus g[B_n])\cup (g[B_n]\setminus A_{n+1}) \right] \\
B &= B^* \cup \left[ \bigcup_{n=0}^\infty (B_n\setminus f[A_n])\cup (f[A_n]\setminus B_{n+1}) \right] \\
\end{align*}
and these are partitions of $A$ and $B$.

Finally we can construct the bijection $\pi: A\twoheadrightarrowtail B$
\[ \pi(x) = \begin{cases}
f(x) & x\in A^* \lor \exists n\in \N: x\in (A_n\setminus g[B_n]) \\
g^{-1}(x) & x\notin A^* \land \exists n\in \N: x\in (g[B_n]\setminus A_{n+1}).
\end{cases} \]
\end{proof}
We can also give a more condensed proof TODO write proof (this is not yet a proof!) and express this as fixed point?:
\begin{proof}
Define $Q = f[A]\setminus (g\circ f)[A]$,
\[ \mathcal{J} = \{ X\in \powerset(A)\;|\; Q\cup (g\circ f)[X] \subseteq X \} \]
and $T = \bigcap \mathcal{J}$. We can show that $T = Q\cup (g\circ f)[T]$. Then
\[ f[A] = Q\cup (g\circ f)[A] = Q\cup (g\circ f)[T]\cup [(g\circ f)[A]\setminus (g\circ f)[T]] = T\cup [(g\circ f)[A]\setminus (g\circ f)[T]] \]
\end{proof}
\begin{corollary}
Let $A,B$ be sets. Then $A =_c B$ \textup{if and only if} $A\leq_c B$ and $B\leq_c A$.
\end{corollary}

\begin{theorem}[Cantor's theorem] \label{Cantor}
For every set $A$,
\[ A <_c \powerset(A) \]
i.e.\ $A\leq_c \powerset(A)$ but $A\neq_c \powerset(A)$.
\end{theorem}
\begin{proof}
That $A\leq_c \powerset(A)$ follows from the existence of the injection $A\to \powerset(A): x\mapsto \{x\}$.

Assume, towards a contradiction, that there exists a surjection
\[ \pi: A\twoheadrightarrow \powerset(A), \]
and define the set $B = \{x \in A \;|\; x \notin \pi(x)\}$.
Now $B$ is a subset of $A$ and $\pi$ is a surjection, so there must exist some $b \in A$ such that $B = \pi(b)$. We get
\[ b \in B \iff b \notin B. \]
A contradiction.
\end{proof}


\subsection{Cantor's paradox}
We can use Cantor's theorem to disprove the existence of a set of all sets. It is similar to Russell's paradox, but predates it.

Assume there was a set $V$ of all sets. Consider the power set $\powerset(V)$. Since every element of $\powerset(V)$ is a set, $\powerset(V) \subseteq V$ and thus $\powerset(V) \leq_c V$. This contradicts Cantor's theorem, yielding a paradox.

Looking at the proof of Cantor's theorem, we see a strong analogy with Russell's paradox.

\subsection{Countability}
\begin{definition}
Let $A$ be a set. We say
\begin{itemize}
\item $A$ is \udef{finite} if there exists some $n\in \N$ such that
\[ A =_c \interval[co]{0, n} = \setbuilder{i\in \N}{i<n}, \]
otherwise $A$ is \udef{infinite}.
\item $A$ is \udef{countable} if $A\leq_c\N$, otherwise it is \udef{uncountable}.
\end{itemize}
\end{definition}
Notice the link between $\interval[co]{0,n}$ and the Von Neumann ordinals.

Also $\interval[co]{0,n} \leq_c \N$ for all $n\in \N$.

If we have a hundred pigeons, a hundred pigeonholes and are not allowed to put two pigeons in the same hole, all pigeonholes must be filled. This principle is formalised in the pigeonhole principle.
\begin{theorem}[Pigeonhole principle] \label{pigeonholePrinciple}
Every injection $f:A\rightarrowtail A$ of a finite set into itself is also a surjection, i.e.\ $f[A] = A$.
\end{theorem}
\begin{proof}
It is enough to prove that every injection $g: \interval[co]{0,m} \inj \interval[co]{0,m}$ is surjective. (By finiteness $A$ is bijectively related to some $\interval[co]{0,m}$.)
The proof is by induction on $m$ to prove the assertion:
\[ \forall g: \left(g: \interval[co]{0,m} \rightarrowtail \interval[co]{0,m}\right) \implies g^{\imf}(\interval[co]{0,m}) = \interval[co]{0,m}. \]
\begin{itemize}[leftmargin=2.5cm]
\item[\textbf{Basis step}] If $m=1$, there is only one such function, namely $0\mapsto 0$, which is bijective.
\item[\textbf{Induction step}] It is easy to see that $\interval[co]{0,Sm} = \interval[co]{0,m}\cup \{m\}$. Taking a $g: \interval[co]{0,m} \rightarrowtail \interval[co]{0,m}$ and letting $h = g\setminus \{(m,g(m))\}$ (which is still injective), we have three cases:
\begin{itemize}[leftmargin=2cm]
\item[$\boxed{m\notin \im(g)}$] By the induction hypothesis, $h^\imf(\interval[co]{0,m}) = \interval[co]{0,m}$. Because also $g(m)\in \interval[co]{0,m}$, $g$ would not be injective, making this case impossible.
\item[$\boxed{g(m) = m}$] Now $h^\imf(\interval[co]{0,m}) = \interval[co]{0,m}$ and $g(m)=m$, so $g^\imf(\interval[co]{0,Sm}) = \interval[co]{0,m}\cup \{m\} = \interval[co]{0,Sm}$. Thus $g$ is a surjection.
\item[$\boxed{\exists u<m: g(u) = m}$] In this case there must be a $v<m$ such that $g(m) = v$. Now we apply the induction hypothesis to
\[ h': \interval[co]{0,m} \to \interval[co]{0,m}: i\mapsto \begin{cases}
g(i) & i\neq u \\
v & i=u.
\end{cases} \]
So $h'$ is surjective and $g^{\imf}(\interval[co]{0,m}) = \interval[co]{0,m}\cup \{m\} = \interval[co]{0,Sm}$, so $g$ is surjective.
\end{itemize}
\end{itemize}
\end{proof}
\begin{corollary}
The set $\N$ of natural numbers is infinite.
\end{corollary}
\begin{proof}
The function $\N\to \N\setminus\{0\}: n\mapsto Sn$ is injective.
\end{proof}
\begin{corollary} \label{infiniteComparisonWithN}
Let $A$ be a set. If $\N\leq_c A$, then $A$ is infinite.

The converse holds assuming countable choice (TODO only weaker assumption necessary).
\end{corollary}
\begin{proof}
We prove the contraposition. Assume $A$ is finite, i.e.\ $A =_c\interval[co]{0,n}$. Assume, towards a contradiction, that $\N\leq_c A$, then $\N \leq_c \interval[co]{0,n}$. As $\interval[co]{0,n} \leq_c \N$, we have $\N =_c \interval[co]{0,n}$, which is the contradiction.

TODO prove converse using countable choice.
\end{proof}
\begin{corollary}
Let $m,n\in \N$. Then $\interval[co]{0,m} =_c \interval[co]{0,n}$ \textup{if and only if} $m=n$.
\end{corollary}
\begin{proof}
The direction $\Leftarrow$ is immediate. Now assume $\interval[co]{0,m} =_c \interval[co]{0,n}$, such that there exists a bijection $f: \interval[co]{0,m} \bij \interval[co]{0,n}$. WLOG we may assume $n \leq m$, so that $\interval[co]{0,n} \subseteq \interval[co]{0,m}$ (by \ref{naturalNumbersInequalityInclusion}) and we have the inclusion $\iota: \interval[co]{0,n} \hookrightarrow \interval[co]{0,m}$. Now $\iota \circ f$ is injective, so bijective by the pigeonhole principle. Thus $\iota \circ f\circ f^{-1} = \iota$ is also bijective, which means that $\interval[co]{0,n} = \interval[co]{0,m}$ and thus $m=n$ by \ref{naturalNumbersInequalityInclusion}.
\end{proof}
Note that it is important that the inclusion is a bijection, not just that there exists some bijection: there exist strict subsets that are equinumerous to their supersets. (In fact this is the definition of Dedekind infinity). We always have that a surjective inclusion is an identity.
\begin{corollary} \label{finiteSetNumberOfElements}
For each finite set $A$, there exists exactly one $n\in\N$ such that $A =_c \interval[co]{0,n}$. We call this $n$ the number of elements of $A$, $\#(A)$.
\end{corollary}
In other words, $A =_c \interval[co]{0,\#A}$.
\begin{corollary}
Every surjection $f:A\surj A$ of a finite set into itself is also an injection.
\end{corollary}
\begin{proof}
Let $\#(A) = n$ and $f$ be surjective. Fix a bijection $\pi: \interval[co]{0,n} \bij A$. Construct the sets
\[ X = \setbuilder{j \in \N}{\exists i<j: f(\pi(i)) = f(\pi(j))}\qquad \text{and}\qquad Y = \setbuilder{j \in \N}{\forall i<j: f(\pi(i)) \neq f(\pi(j)) }. \]
Then $X\cup Y = \interval[co]{0,n}$. Now $f': A/\sim \to A$ is a bijection and we have a bijection $A/\sim \leftrightarrow Y$ given by
\[ [a] \quad \leftrightarrow \quad \min\setbuilder{i\in \N}{\pi(i)\in [a]}, \]
so we have a bijection $A\leftrightarrow Y$ and thus $\#(Y) = n$.
Assume $f$ not injective, in which case $X$ is not empty and let $\#(X) = m \neq 0$.

Now because $X,Y$ disjunct, $\#(X\cup Y) = \#(X)+\#(Y) = m+n >n$, by the uniqueness of $\#$. This is a contradiction.
\end{proof}

\begin{proposition} \label{countableEquivalents}
The following are equivalent for every set $A$:
\begin{enumerate}
\item $A$ is countable;
\item there is a surjection $\pi:\N\twoheadrightarrow A$;
\item $A$ is finite or equinumerous with $\N$.
\end{enumerate}
We call such a $\pi$ an \udef{enumeration}. Then
\[ A = \pi^\imf(\N) = \{\pi(0),\pi(1),\pi(2) \ldots \}. \]
\end{proposition}
\begin{proof}
The proof is cyclic:
\begin{enumerate}[leftmargin=2cm]
\item[$\boxed{(1)\rightarrow (2)}$] If $A = \emptyset$, any $\pi:\N\to A$ is surjective. Assume $A\neq \emptyset$ and choose an $a_0\in A$. By lemma \ref{injectivityCardinality}, there is an $f:A\rightarrowtail$. Define
\[ \pi: \N\to A: i\mapsto \begin{cases}
a_0 & (i\notin f[A]) \\ f^{-1}(i) & (i\in f[A]).
\end{cases} \]
\item[$\boxed{(2)\rightarrow (3)}$] Assume 2, so we have a surjective $\pi:\N\twoheadrightarrow A$. We need to prove that if $A$ is not finite, it is equinumerous with $\N$. Define the function $f:\N\to A$ recursively by
\[ \begin{cases}
f(0) = \pi(0) \\
f(n+1) = \pi\left(\;\text{the least $m$ such that}\; \pi(m)\neq \{f(0),\ldots,f(n)\}\right).
\end{cases} \]
Note that because $A$ is infinite, the set $\setbuilder{m\in\N}{\pi(m)\notin \{ f(0),\ldots,f(n) \}}$ is not empty. Due to the well-ordering on $\N$, every such set has a least element.

Then $f$ is a bijection. Injectivity is obvious. Surjectivity follows from the fact that $\forall n\in \N: \pi(n)\in f[\N]$.
\item[$\boxed{(3)\rightarrow (1)}$] All intervals $[0, n[$ are subsets of $\N$ and $\N$ is a subset of $\N$.
\end{enumerate}
\end{proof}
\begin{corollary} \label{finiteComparisonWithInterval}
Let $A$ be a set and $n\in \N$. If $A\leq_c (0:n)$, then $A$ is finite.
\end{corollary}
\begin{proof}
We have $A \leq_c (0:n) \leq_c \N$, so $A$ is countable. Then either $A$ is finite or $A =_c \N$. We show that the second option is impossible: then we would have $\N \leq_c A \leq_c \N$, so $(0:n) =_c \N$, i.e.\ $\N$ is finite. But $\N$ is infinite.
\end{proof}
\begin{corollary}
There exists no set $A$ such that $\powerset(A) =_c \N$.
\end{corollary}
\begin{proof}
By Cantor's theorem.
\end{proof}

\begin{lemma}
We have the following characterisation of countable infinity:
\begin{align*}
A =_c \N \quad \Leftrightarrow \quad (\exists \mathcal{E})&[A = \bigcup \mathcal{E} \\
&\& \emptyset \in \mathcal{E} \\
&\& (\forall u\in \mathcal{E})(\exists ! y \notin u)[u\cup \{ y \}\in \mathcal{E}] \\
&\& (\forall Z)[[\emptyset \in Z \& (\forall u \in Z)(\exists ! y \notin u)u\cup \{y\} \in Z \cap \mathcal{E} \Rightarrow \mathcal{E}\subseteq Z]].
\end{align*}
This is directly in terms of the membership relation with no appeal to the defined notions of $\N$ and function.
\end{lemma}

\begin{proposition}[Cantor]
A countable union of countable sets is countable:

For each sequence $A_0, A_1 \ldots$ of countable sets, the union
\[ A = \bigcup_{n=0}^\infty A_n \]
is countable.
\end{proposition}
\begin{proof}
We may assume none of the $A_n$ are empty (otherwise we can just take a superset and if this is countable, the subset will be as well). We can find an enumeration $\pi^n: \N\twoheadrightarrow A_n$ for each $A_n$. Let $\rho^{-1}$ be an enumeration of $\N\times\N$, as in lemma \ref{pairEnumeration}. Then
\[ \N \twoheadrightarrow  \bigcup_{n=0}^\infty A_n: m\mapsto \pi^{x}(y) \]
where $x(m) = \rho^{-1}_0(m)$ and $y(m) = \rho^{-1}_1(m)$, is an enumeration.
\end{proof}

\begin{proposition}
The set of infinite, binary sequences
\[ \Delta = \{ (a_i)_{i\in\N} \;|\; \forall i\in\N: a_i=0\lor a_i=1 \} \]
is uncountable.
\end{proposition}
\begin{proof}
Assume, towards a contradiction, that there exists an enumeration $(\alpha_n)_{n\in\N}$ of $\Delta$. The diagonal argument is then to construct the binary sequence
\[ \alpha_0(0),\alpha_1(1), \alpha_2(2), \alpha_3(3), \alpha_4(4),\ldots  \]
and make every $0$ a $1$ and vice versa. This new is not an element of the enumeration by construction (it is different from every element of the enumeration in at least one digit).
\end{proof}

\subsubsection{Finite sets}
\begin{proposition} \label{minimalMaximalFiniteSet}
Let $R$ be a relation on a class $A$. Then every finite set $S\subseteq A$ has a minimal and maximal element.
\end{proposition}
\begin{proof}
We prove that $S$ has a minimal element by induction on the size of $S$. The existence of a maximal element follows by duality.

For the base step, note that the unique element of a singelton is a minimal element.

Now assume the induction hypothesis for $k\in \N$, i.e.\ that each set $S'\subseteq A$ such that $\#(S') = k$ has a minimal element.

To prove the induction step, take some arbitrary $S\subseteq A$ such that $\#(S) = k+1$. Now $S$ is non-empty, so we can take $x\in S$ and $\#(S\setminus \{x\}) = k$. Thus $S\setminus \{x\}$ has a minimal element $m$. If $x\overline{R}m$, then $m$ is also a minimal element of $S$ and thus $S$ has a minimal element.
If $xRm$, then $x$ is a minimal element of $S$: for all $y\in S\setminus\{x\}$,  $yRx$ implies $yRm$ by transitivity. By minimality of $m$ in $S\setminus\{x\}$, we have $mRy$, so $xRy$ (again by transitivity).

This proves the induction step.
\end{proof}
Note that we cannot use transfinite induction: removing one element from an infinite set does not lower the cardinality.






\chapter{Replacement}

\undline{Maximal antichain principle}: Every non-empty poset has a maximal antichain.

\chapter{Cardinals and ordinals}
\url{http://euclid.colorado.edu/~monkd/monk11.pdf}

\section{Ordinals}
\begin{definition}
The class of all well-ordered sets is denoted $\Ord$.
\end{definition}

\begin{definition}
An \udef{ordinal assignment} is a function $\operatorname{ord}$ from the class of well-ordered posets to the class of well-ordered posets such that for all well-ordered posets $A,B$,
\[ \operatorname{ord}(A) = \operatorname{ord}(B) \iff A =_o B. \]
Sets in the image of $\operatorname{ord}$ are called \udef{ordinals} or \udef{ordinal numbers}.
\end{definition}
By \ref{wellfoundednessOfWosetComparison} we have:
\begin{lemma}
The inclusion order restricted to ordinals is well-founded.
\end{lemma}

\begin{definition}
A set $S$ is a \udef{(von Neumann) ordinal} if it is transitive and all its members are transitive.
\end{definition}
The class of von Neumann ordinals is a transitive class. TODO: exclude urelements.

\url{https://en.wikipedia.org/wiki/Ordinal_number}

\section{Cardinals}

The idea behind the cardinals is to have a set of objects that witnesses the size, or potency, of sets. These two conditions define the cardinal assignment.
\begin{definition}
Define an operation $A\mapsto |A|$ on the class of sets such that
\begin{itemize}
\item $A=_c |A|$;
\item for each set of sets $\mathcal{E}$, $\{ |X|\;|\; X\in\mathcal{E} \}$ is a set.
\end{itemize}
Such an operation is called a \udef{(weak) cardinal assignment}. The class of \udef{cardinal numbers}(relative to a given
cardinal assignment), denoted $\Card$, is the image of the cardinal assigment:
\[ \kappa \in \Card \defequiv \exists A: \kappa = |A|. \]
If the cardinal assignment also satisfies
\begin{itemize}
\item if $A=_c B$, then $|A|=|B|$,
\end{itemize}
then it is called a \udef{strong cardinal assignment}.
\end{definition}
In particular, notice that cardinals are sets. Indeed the assignment $A\mapsto |A|$ is a weak cardinal assignment, so practically all results in this section hold in particular for sets.

\begin{proposition} \label{cardinalsFromOrdinals}
Given an ordinal assignment $\operatorname{ord}$, we can define a cardinal assignment
\[ |A| = \min\setbuilder{\alpha}{\alpha =_c A}. \]
In this case the cardinals are either finite or limit ordinals.
\end{proposition}
Note that this works even though $\setbuilder{\alpha}{\alpha =_c A}$ may be a class in general.
\begin{proof}
TODO.
\end{proof}

\begin{lemma}
If cardinal numbers are defined using a strong cardinal assignment, then for all cardinals $\kappa,\lambda$:
\[ |\kappa| = \kappa \quad \text{and}\quad \kappa =_c\lambda \iff \kappa = \lambda \]
\end{lemma}

\begin{lemma}
For any cardinal assignment and any two sets $A,B$,
\begin{enumerate}
\item $|A| = |B| \implies A=_c B$;
\item $|\emptyset| = \emptyset$.
\end{enumerate}
\end{lemma}

\subsection{Cardinal arithmetic without choice}
\begin{definition}
Fix a specific, possibly weak, cardinal assignment. We define the arithmetic operations on the cardinal numbers $\kappa, \lambda$ as
\begin{align*}
\kappa + \lambda &\defeq |\kappa \sqcup \lambda | & &=_c \kappa \sqcup \lambda, \\
\kappa \cdot \lambda &\defeq |\kappa \times \lambda | & &=_c \kappa \times \lambda, \\
\kappa^\lambda &\defeq |(\lambda \to \kappa) | & &=_c (\lambda \to \kappa).
\end{align*}
Also
\begin{align*}
\sum_{i\in I}\kappa_i &\defeq \left|\bigsqcup_{i\in I}\kappa_i\right|, \\
\prod_{i\in I}\kappa_i &\defeq \left| \prod_{i\in I}\kappa_i \right|.
\end{align*}
We fix the following symbols for some empty set, singleton and doubleton cardinals:
\[ 0 \defeq |\emptyset|=\emptyset \qquad 1 \defeq |\{0\}| \qquad 2\defeq |\{0,1\}|.   \]
\end{definition}
The definition of $0,1,2$ does not conflict with the natural numbers.

\begin{lemma}
Let $\kappa_1,\kappa_2,\lambda_1,\lambda_2$ be cardinal numbers such that $\kappa_1=_c \kappa_2$ and $\lambda_1=_c\lambda_2$. Then
\begin{enumerate}
\item $\kappa_1 + \lambda_1 =_c \kappa_2 + \lambda_2$;
\item $\kappa_1 \cdot \lambda_1 =_c \kappa_2\cdot \lambda_2$;
\item $\kappa_1^{\lambda_1} =_c \kappa_2^{\lambda_2}$.
\end{enumerate}
\end{lemma}
The proof is the same as for lemma \ref{welldefinedCardinalArithemtic}.

\begin{lemma}
For all sets $A,B$ and thus for all cardinals $\kappa,\lambda$:
\[ \prod_{i\in A}B = (A\to B), \qquad \prod_{i\in\lambda}\kappa = \kappa^\lambda. \]
\end{lemma}
Notice that there is equality, $=$, not just equinumerosity $=_c$.

Cardinal arithmetic has properties reminiscent of a commutative semiring (i.e.\ ring where additive inverses are not guaranteed, see later). Of course cardinal arithmatic is not defined on a set, but on a class, so this is not completely true.
\begin{lemma} \label{cardinalArithmetic}
Let $\kappa,\lambda, \mu$ be cardinal numbers. Then $+$ is like a commutative monoid:
\begin{enumerate}
\item $\kappa + (\lambda+\mu) =_c (\kappa+\lambda)+\mu$;
\item $0+\kappa =_c \kappa+0 =_c \kappa$;
\item $\kappa+\lambda =_c \lambda+\kappa$;
\end{enumerate}
and $\cdot$ is also like a commutative monoid:
\begin{enumerate}
\setcounter{enumi}{3}
\item $\kappa \cdot (\lambda\cdot\mu) =_c (\kappa\cdot\lambda)\cdot\mu$;
\item $1\cdot\kappa =_c \kappa\cdot 1 =_c \kappa$;
\item $\kappa\cdot\lambda =_c \lambda\cdot\kappa$.
\end{enumerate}
Multiplication distributes over addition:
\begin{enumerate}
\setcounter{enumi}{6}
\item $\kappa\cdot(\lambda +\mu) =_c \kappa\cdot \lambda+\kappa\cdot\mu$.
\end{enumerate}
Multiplication by $0$ annihilates:
\begin{enumerate}
\setcounter{enumi}{7}
\item $0\cdot \kappa =_c 0$.
\end{enumerate}
There are no zero divisors:
\begin{enumerate}
\setcounter{enumi}{8}
\item $\kappa\neq 0 \neq \lambda \implies \kappa\cdot\lambda \neq 0$.
\end{enumerate}
\end{lemma}
\begin{lemma}
Let $\kappa_i$ be cardinals for all $i\in I$. Then
\[ \exists i\in I: \kappa_i = 0 \implies \prod_{i\in I}\kappa_i. \]
\end{lemma}
The other implication depends on the axiom of choice!

\begin{lemma} \label{repeatedAdditionMultiplicationCardinals}
Let $\kappa, \lambda$ be cardinals. Then
\begin{enumerate}
\item $\sum_{i\in \lambda}\kappa =_c \kappa\times\lambda$;
\item $\prod_{i\in\lambda}\kappa =_c \kappa^\lambda$.
\end{enumerate}
\end{lemma}
\begin{corollary}
Let $\kappa$ be a cardinal number. Then
\[ \kappa^0 =_c 1, \qquad \kappa^1 =_c \kappa, \qquad \kappa^2 =_c \kappa\cdot \kappa. \]
\end{corollary}

\begin{lemma}
Let $\kappa,\lambda, \mu$ be cardinal numbers. Then
\begin{enumerate}
\item $(\kappa\cdot\lambda)^\mu =_c \kappa^\mu\cdot\lambda^\mu$;
\item $\kappa^{(\lambda+\mu)} =_c \kappa^\lambda\cdot \kappa^\mu$;
\item $\left(\kappa^\lambda\right)^\mu =_c \kappa^{\lambda\cdot \mu}$.
\end{enumerate}
\end{lemma}
By Cantor's theorem \ref{Cantor}, this also gives $\kappa \leq_c 2^\kappa$.

\begin{lemma}
Let $\kappa,\lambda_i$ be cardinals for all $i\in I$. Then
\[ \kappa\cdot \sum_{i\in I}\lambda_i =_c \sum_{i\in I}\kappa\cdot \lambda_i. \]
\end{lemma}
\begin{proof}
We compute
\begin{align*}
\kappa\cdot \sum_{i\in I}\lambda_i &=_c \kappa\times\left(\bigsqcup_{i\in I}\lambda_i\right) = \kappa\times \left(\bigcup_{i\in I}\{i\}\times \lambda_i\right) = \bigcup_{i\in I}\kappa\times(\{i\}\times \lambda_i) \\
&=_c \bigcup_{i\in I}\{i\}\times(\kappa\times \lambda_i) = \bigsqcup_{i\in I}\kappa\times \lambda_i =_c \sum_{i\in I}\kappa\cdot \lambda_i.
\end{align*}
\end{proof}
TODO: expand on such computations?

\begin{lemma}
Let $\kappa,\lambda, \mu$ be cardinal numbers. Then
\begin{enumerate}
\item $\kappa\leq_c \mu \implies \kappa+\lambda \leq_c \mu+\lambda$;
\item $\kappa\leq_c \mu \implies \kappa\cdot\lambda \leq_c \mu\cdot\lambda$;
\item $\kappa\leq_c \mu \implies \kappa^\lambda \leq_c \mu^\lambda$;
\item $\kappa\leq_c \mu \implies \lambda^\kappa \leq_c \lambda^\mu$ if $\lambda\neq 0$.
\end{enumerate}
\end{lemma}
These implications do not necessarily hold for strict inequalities.

For the last implication: if $\lambda = 0$, then
\[ \forall \kappa \in \operatorname{Card}: \lambda^\kappa = (\kappa\to\emptyset) = \begin{cases}
\emptyset & \kappa \neq 0 \\
\{\emptyset\} & \kappa = 0.
\end{cases} \]
So if $\kappa = 0$ and $\mu\neq 0$, there exists an injection $\kappa\to\mu$, namely $\emptyset$ and so $\kappa\leq_c \mu$, but there is no injection (in fact no function) $\{\emptyset\}\to\emptyset$, so $\lambda^\kappa \nleq_c \lambda^\mu$.

\subsection{The cardinality of natural numbers}
\begin{definition}
We define
\[ \aleph_0 \defeq |\N|. \]
This is the cardinality of countably infinite sets. If we have a strong cardinal assignment is is uniquely so.

We also define for each $n\in \N$:
\[ \kappa^n \defeq |\kappa^{(n)}|. \]
\end{definition}
We also define $\aleph_1 \defeq \aleph_0^+,\aleph_2 \defeq \aleph_1^+,\ldots $

If we take the natural numbers to be Von Neumann ordinals, then for all finite sets $A$, $\#(A) =_c A$. Then $\#$ is a strong cardinal assignment on the finite sets and all the previous results apply.


\begin{proposition} \label{stringsInCountableAlphabetCountable}
For each countably infinite set $A$ and each $n>0$,
\[A =_c A\times A =_c A^{(n)} =_c A^*. \]
The equivalent expression in cardinal arithmetic is
\[ \aleph_0 =_c \aleph_0\cdot\aleph_0 =_c \aleph_0^n =_c |\aleph_0^*|. \]
\end{proposition}
\begin{proof}
If all $=_c$ are replaced by $\leq_c$, the claim is trivial, thus, by the Schröder-Bernstein theorem \ref{SchroederBernstein}, it is enough to show $\N^*\leq_c \N$.

Choose a bijection $\rho: \N\times\N\twoheadrightarrowtail \N$ as in lemma \ref{pairEnumeration}.

Define by recursion a function $f:\N\to (\N^{(n+1)}\rightarrowtail \N): n\mapsto \pi_n$, such that
\begin{align*}
\pi_0(u) &= u(0) \\
\pi_{n+1}(u) &= \rho(\pi_n(u|_{[0,n+1[}), u(n+1)).
\end{align*}
Then the function
\[ \pi(u) = (\len(u)-1, \pi_{\len(u)-1}(u)) \]
is injective, proving
\[ \bigcup_{n=0}^\infty \N^{(n+1)}\leq_c \N\times \N. \]

Using $\rho$ we see that $\bigcup_{n=0}^\infty \N^{(n+1)}\leq_c \N$.
\end{proof}

\begin{lemma}
For all cardinals $\kappa$, $2^\kappa \neq_c \aleph_0$.
\end{lemma}
\begin{proof}
We split into two cases $\kappa$ countable and uncountable:
\begin{enumerate}
\item If $\kappa$ is countable, then either $\kappa =_c \aleph_0$ and $2^\kappa \neq_c \aleph_0$ by Cantor's theorem, \ref{Cantor}, or $\kappa$ is finite in which case $2^\kappa =_c \#(2^{\kappa}) = 2^{\#(\kappa)}$ which is finite.
\item If $\kappa$ is uncountable and $2^\kappa =_c \aleph_0$, then $\kappa \leq_c 2^\kappa =_c \aleph_0$ and $\kappa$ would be countable. A contradiction.
\end{enumerate}
\end{proof}
This is an expression of the fact that we can compare cardinals to countable cardinals, even without choice.

\subsection{Cardinal arithmetic with choice}
\[ |\mathbb{F}|^{|\beta|} > |\beta| \]
In this section we assume the axiom of choice.
\begin{definition}
Given any cardinal $\kappa$, we can define the \udef{successor cardinal} as
\[ \kappa^+ \defeq \left|\aleph(\kappa)\right|. \]
\end{definition}

\begin{lemma}
For any cardinal $\kappa$, the cardinal $\kappa^+$ is $\leq_c$-least among the cardinals bigger than $\kappa$.
\end{lemma}
\begin{proof}
By Hartogs' lemma and cardinal comparability, we know $\kappa <_c \kappa^+$. By proposition \ref{proposition:HartogsLeast} $\kappa^+$ is $\leq_o$-least (and thus $\leq_c$-least) with this property.
\end{proof}

\begin{theorem}[Tarski's theorem about choice]
The following are equivalent:
\begin{enumerate}
\item the axiom of choice;
\item $A =_c A\times A$ for every infinite set $A$.
\end{enumerate}
\end{theorem}
\begin{proof}
$\boxed{\Rightarrow}$
We now prove $A =_c A\times A$ by induction on $\Ord$. For the base case, see \ref{stringsInCountableAlphabetCountable}.

Now take $A\in\Ord$. If $A$ has a proper initial segment that has the same cardinality as $A$, then $A =_c A\times A$ is immediate from the induction hypothesis.

Now suppose each proper initial segment of $A$ has a smaller cardinality than $A$ (i.e. $A$ is a limit ordinal, so $A$ has no maximal element). Clearly $A\leq_c A\times A$, so it is enough to prove that there exists a well-ordering on $A\times A$ such that $A\times A \leq_o A$. We claim the order $\prec$ on $A\times A$ defined by
\begin{align*}
(a,b)\prec (c,d) \defequiv &\big(\max\{a,b\} < \max\{c,d\}\big)\;\lor \\ &\Big(\big(\max\{a,b\} = \max\{c,d\}\big)\land(a < c)\Big) \;\lor \\ &\Big(\big(\max\{a,b\} = \max\{c,d\}\big)\land(a = c)\land(b < d)\Big)
\end{align*}
works. It is easy to verify that it is a well-ordering.

Take some, arbitrary, proper initial segment of $A\times A$, say $\downset\{(x,y)\}$, and set $z = \max\{x,y\}$. Then $\downset\{(x,y)\} \subseteq \downset\{(z,z)\} = (\downset\{z\})\times(\downset\{z\})$. Now $\downset\{z\}$ is a proper initial segment of $A$ and thus $\downset\{z\} <_c A$. By induction hypothesis $\downset\{z\} =_c (\downset\{z\})\times(\downset\{z\})$. So we have
\[ \downset\{(x,y)\} \leq_c (\downset\{z\})\times(\downset\{z\}) =_c \downset\{z\} <_c A. \]
Thus, by \ref{ordinalInequalitiesLemma}, we have $\downset\{(x,y)\} \leq_o A$. 

As the initial segment $\downset\{(x,y)\}$ of $A\times A$ was taken arbitrarily, we have $A\times A \leq_o A$ by \ref{ordinalInequalityFromInitialSegments}.

$\boxed{\Leftarrow}$ TODO \url{https://en.wikipedia.org/wiki/Tarski%27s_theorem_about_choice}. and \url{https://math.stackexchange.com/questions/56466/for-every-infinite-s-s-s-times-s-implies-the-axiom-of-choice}
\end{proof}
\begin{corollary}
Let $\alpha,\beta$ be cardinals, at least one of which is infinite. Then $\alpha \cdot \beta = \max\{\alpha, \beta\}$. 
\end{corollary}
\begin{corollary} \label{cardinalityStringsFiniteSubsets}
Let $X$ be an infinite set. Then the following have the same cardinality as $X$:
\begin{enumerate}
\item $X^*$;
\item the set of finite subsets of $X$.
\end{enumerate}
\end{corollary}
\begin{proof}
It is clear that both are larger in cardinality than $X$ and $(2) \leq_c (1)$. Thus we just need to prove that $X^* \leq_c X$.

We first prove $X =_c X^{(n)}$ for all $n\in \N$. We prove this by induction on $n$. Assume $X =_c X^{(n-1)}$. Then, using the proposition, we have $X =_c X\times X =_c X\times X^{(n-1)} =_c X^{(n)}$. Now
\[ |X^*| =_c \sum_{n\in \N}|X^{(n)}| =_c \sum_{n\in \N}|X| = \aleph_0\cdot |X| = \max\{\aleph_0, |X|\} = |X|, \]
using \ref{repeatedAdditionMultiplicationCardinals}.
\end{proof}


\subsection{The continuum}
\begin{definition}
We define the \udef{continuum}
\[ \mathfrak{c} \defeq |\powerset(\N)| =_c 2^\aleph_0. \]
\end{definition}
The continuum hypothesis is that there are no cardinals between $\aleph_0$ and $\mathfrak{c}$. This is independent of ZFC.

From cardinal arithmetic we can immediately obtain some results, like
\[ \mathfrak{c}\cdot\mathfrak{c} =_c 2^{\aleph_0}\cdot 2^{\aleph_0} =_c 2^{\aleph_0+\aleph_0} =_c 2^{\aleph_0} =_c \mathfrak{c}\]
and
\[ \mathfrak{c} =_c 2^{\aleph_0} \leq_c \aleph_0^{\aleph_0} \leq_c \mathfrak{c}^{\aleph_0} =_c \left(2^{\aleph_0}\right)^{\aleph_0} =_c 2^{\aleph_0\cdot \aleph_0} =_c \mathfrak{c}.\]




\chapter{Going from two to many}
TODO: move up!!
\section{Functions on ordinals}
\begin{definition}
Let $\alpha$ be an ordinal and $A$ a set. We introduce special notation in this case:
\begin{itemize}
\item $A^\alpha \defeq (\alpha \to A)$;
\item if $a\in A^\alpha$, then we write $a_0, a_1, a_2 \ldots$ instead of $a(0), a(1), a(2) \ldots$
\end{itemize}
\end{definition}

\subsection{Pointwise extensions}
\begin{definition}
Let $\alpha\in\Ord$, $A,B\in\Set$ and $f\in (A\to B)$. Then
\[ f^\alpha: A^\alpha \to B^\alpha: a\mapsto f\circ a \]
is the pointwise extension of $f$ to $A^\alpha$.
\end{definition}
This is a particular instance of post-composition, $f_*$.

\section{Finite Cartesian proucts: Tuples}
\begin{definition}
Let $a_1, \ldots, a_n$ be objects. A definition of $(a_1, \ldots, a_n)$ is called an \udef{$n$-tuple operation} (or just \udef{tuple operation}) if it satisfies
\begin{itemize}
\item $(a_1, \ldots, a_n) = (b_1, \ldots, b_n) \iff \forall i\in (1:n): a_i=b_i$;
\item for all sets $A,\ldots, A_n$, $\setbuilder{(a_1,\ldots, a_n)}{\forall i\in (1:n): a_i \in A_i}$ is a set.
\end{itemize}
We call
\[ \bigtimes_{i=1}^nA_i = \setbuilder{(a_1,\ldots, a_n)}{\forall i\in (1:n): a_i \in A_i} \]
the \udef{Cartesian product} of $A_1,\ldots, A_n$.
\end{definition}

\begin{proposition} \label{pairNTupleDefinition}
Let $a_1, \ldots, a_n$ be objects. Defining $(a_1, \ldots, a_n)$ as the string $\seq{a_1, \ldots, a_n}$ of length $n$ is a valid $n$-tuple operation.
\end{proposition}

We can also directly use a pair operation to define a $n$-tuple operation.
\begin{proposition}
Let $a_1, \ldots, a_n$ be objects. Define the function $f_a$ recursively by
\[ \begin{cases}
f_a(0) = \emptyset \\
f_a(i+1) = \begin{cases}
(f_a(i), a_{i+1}) & i < n \\
(f_a(i), \emptyset) & i \geq n
\end{cases}
\end{cases} \]
Defining $(a_1, \ldots, a_n)$ as $f_a(n)$ is a valid $n$-tuple operation.
\end{proposition}

Informally, this construction can be described as follows:
\begin{itemize}
\item The $0$-tuple is defined as the empty set $\emptyset$;
\item A $1$-tuple containing $a$ is defined as $(\emptyset, a)$;
\item An $n$-tuple, with $n > 1$, is defined as an ordered pair of its last entry and an $(n - 1)$-tuple which contains the preceding entries:
\[ (a_1, \ldots, a_n) = ((a_1, \ldots, a_{n-1}), a_n) = ((\ldots((\emptyset, a_1), a_2), \ldots), a_n). \]
\end{itemize}
For example $(1,2,3,4) = ((((\emptyset, 1), 2), 3), 4)$.

\subsection{Association relations}
TODO: $((a,b),c) \approx (a,(b,c))$.


\subsection{$n$-ary relations}
\begin{definition}
Let $A_1, \ldots, A_n$ be sets and $G \subseteq \bigtimes_{i=1}^nA_i$. We call $R = (G, (A_1, \ldots, A_n))$ an \udef{$n$-ary relation} on $(A_1, \ldots, A_n)$ and $\graph(R) \defeq G$ the \udef{graph} of $R$.
\end{definition}
In particular a \udef{ternary relation} on $(A,B,C)$ is a structured sets $(G,(A,B,C))$ where $G \subset A\times B\times C$.

\begin{proposition}
Let $A_1, \ldots, A_n$ be sets and $G \subseteq \bigtimes_{i=1}^nA_i$. Using the definition of $n$-tuple in \ref{pairNTupleDefinition}, $R = (G, (A_1 \times \ldots \times A_{n-1}), A_n))$ is a binary relation.
\end{proposition}

\section{Operations on sequences of sets}
\begin{definition}
Let $I$ be an arbitrary index set, $A$ some set and let there be a surjective function $a: I\twoheadrightarrow A: i \mapsto a_i$.

Then we say $A$ is \udef{indexed by I} and we write $A = \{a_i\}_{i\in I}$. In this case we call $A$ an \udef{(indexed) family}.

In particular if $A\subseteq \powerset(X)$ for some set $X$, $A$ is an indexed family of sets.
\end{definition}
Notice we do not require the function $a$ to be injective and thus multiple indexed elements may be the same.

Sometimes the notation $(a_i)_{i\in I}$ is used, if $I$ is ordered, to emphasise the ordering of $\{a_i\}_{i\in I}$ by $I$.

\subsection{Union and intersection of indexed families of sets}
Let $\{A_i\}_{i\in I}$ be an indexed family of sets. Then we write
\begin{align*}
\bigcup_{i\in I} A_i &\defeq \bigcup A[I] \\
\bigcap_{i\in I} A_i &\defeq \bigcap A[I]
\end{align*}
If $I = \interval[co]{0,n}$, we write $\{A_i\}_{i=1}^{n} \defeq \{A_i\}_{i\in \interval[co]{0,n}}$,
\[ \bigcup_{i=1}^{n-1} A_i \defeq \bigcup_{i\in \interval[co]{0,n}} A_i \qquad \text{and} \qquad \bigcap_{i=1}^{n-1} A_i \defeq \bigcap_{i\in \interval[co]{0,n}} A_i \]
and if $I=\N$, we write $\{A_i\}_{i=1}^{n} \defeq \{A_i\}_{i\in \N}$,
\[ \bigcup_{i=1}^{\infty} A_i \defeq \bigcup_{i\in \N} A_i \qquad \text{and} \qquad \bigcap_{i=1}^{\infty} A_i \defeq \bigcap_{i\in \N} A_i. \]

\begin{lemma}
Let $A$ be a set and $\{B_i\}_{i\in I}$ an indexed family of sets. Then
\begin{align*}
A\times \bigcup_{i\in I} B_i &= \bigcup_{i\in I}A\times B_i; \\
A\times \bigcap_{i\in I} B_i &= \bigcap_{i\in I}A\times B_i.
\end{align*}
\end{lemma}

\subsubsection{Multiple indices}
If the index set $I$ is a Cartesian product $I=J\times K$, then we also write
\[ \bigcup_{(j,k)\in I} A_{j,k} = \bigcup_{\substack{j\in J \\ k\in K}} A_{j,k} \qquad\text{and}\qquad \bigcap_{(j,k)\in I} A_{j,k} = \bigcap_{\substack{j\in J \\ k\in K}} A_{j,k}. \]

If $\{A_{j,k}\}_{(j,k) \in J\times K}$ is such an indexed family of sets, then $\{A_{j,k'}\}_{j\in J}$ is an indexed family of sets for each $k\in K$by partial application of $k'$ to the second argument. This allows us to apply union and intersection pointwise: we define
\[ \bigcup_{j\in J}A_{j,k} \defeq \left(k'\mapsto \bigcup_{j\in J}A_{j,k'}\right) \qquad\text{and}\qquad \bigcap_{j\in J}A_{j,k} \defeq \left(k'\mapsto \bigcap_{j\in J}A_{j,k'}\right) \]
as well as something similar for the first argument.

\subsubsection{Associativity and commutativity}
\begin{lemma} \label{setAssociativityCommutativity}
Let $\{A_{j,k}\}_{(j,k) \in J\times K}$ be an indexed family of sets. Then
\begin{align*}
\bigcup_{j\in J}\left(\bigcup_{k\in K}A_{j,k}\right) &= \bigcup_{\substack{j\in J \\ k\in K}}A_{j,k} = \bigcup_{k\in K}\left(\bigcup_{j\in J}A_{j,k}\right) \qquad\text{and} \\
\bigcap_{j\in J}\left(\bigcap_{k\in K}A_{j,k}\right) &= \bigcap_{\substack{j\in J \\ k\in K}}A_{j,k} = \bigcap_{k\in K}\left(\bigcap_{j\in J}A_{j,k}\right).
\end{align*}
\end{lemma}
\begin{corollary}
Let $\{A_{i}\}_{i \in I}$ be an indexed family of sets and $B$ a set. Then
\[ \left(\bigcup_{i\in I}A_i\right)\cup B = \bigcup_{i\in I}(A_i\cup B) \qquad\text{and}\qquad \left(\bigcap_{i\in I}A_i\right)\cap B = \bigcap_{i\in I}(A_i\cap B). \]
\end{corollary}
\begin{proof}
Set $J\times K = I\times\{0,1\}$ and $A_{j,k} = \begin{cases}
A_j & (k=0) \\
B & \text{(else)}
\end{cases}$.
\end{proof}
\begin{corollary}
Let $\{A_{i}\}_{i \in I}$ and $\{B_{j}\}_{j \in J}$ be indexed families of sets. Then
\[ \left(\bigcup_{i\in I}A_i\right)\cup \left(\bigcup_{j\in J}B_j\right) = \bigcup_{\substack{i\in I\\j\in J}}(A_i\cup B_j) \qquad\text{and}\qquad \left(\bigcap_{i\in I}A_i\right)\cap \left(\bigcap_{j\in J}B_j\right) = \bigcap_{\substack{i\in I\\j\in J}}(A_i\cap B_j). \]
If both families are indexed by the same index set $I$, we may take the union/intersection over just $I$, not $I\times I$.
\end{corollary}

\subsubsection{Distributivity}
\begin{lemma} \label{setDistributivity}
Let $\{A_{i}\}_{i \in I}, \{B_{j}\}_{j \in J}$ be indexed families of sets and $C$ a set. Then
\[ \left(\bigcup_{i\in I}A_i\right)\cap B = \bigcup_{i\in I}(A_i\cap B) \qquad\text{and}\qquad \left(\bigcap_{i\in I}A_i\right)\cup B = \bigcap_{i\in I}(A_i\cup B). \]
Also
\[ \left(\bigcup_{i\in I}A_i\right)\cap \left(\bigcup_{j\in J}B_j\right) = \bigcup_{\substack{i\in I\\j\in J}}(A_i\cap B_j) \qquad\text{and}\qquad \left(\bigcap_{i\in I}A_i\right)\cup \left(\bigcap_{j\in J}B_j\right) = \bigcap_{\substack{i\in I\\j\in J}}(A_i\cup B_j). \]
\end{lemma}

\begin{proposition}
Let $\{A_{j,k}\}_{(j,k) \in J\times K}$ be an indexed family of sets. Then
\begin{align*}
\bigcap_{j\in J}\bigcup_{k\in K}A_{j,k} &= \bigcup_{f \in K^J}\bigcap_{j\in J}A_{j,f(j)} \\
\bigcup_{j\in J}\bigcap_{k\in K}A_{j,k} &= \bigcap_{f \in K^J}\bigcup_{j\in J}A_{j,f(j)}
\end{align*}
\end{proposition}
\begin{proof}
We have
\begin{align*}
x\in \bigcap_{j\in J}\bigcup_{k\in K}A_{j,k} &\iff \forall j\in J:\exists k\in K: x\in A_{j,k} \\
&\iff \exists f\in J^K: \forall j\in J: x\in A_{j, f(j)} \\
&\iff \bigcup_{f \in K^J}\bigcap_{j\in J}A_{j,f(j)}.
\end{align*}
\end{proof}
The $f\in J^K$ encodes which $k$ is the ``good one'' for each $j$.
\begin{corollary}
Let $\{A_{j,k}\}_{(j,k) \in J\times K}$ be an indexed family of sets. Then
\[ \bigcup_{j\in J}\left(\bigcap_{k\in K}A_{j,k}\right) \subseteq \bigcap_{k\in K}\left(\bigcup_{j\in J}A_{j,k}\right). \]
\end{corollary}
\begin{proof}
We restrict the $f$ in the proposition to the set of constant functions.
\end{proof}
In general these two sets are not equal!

\subsubsection{Union and intersection of index sets}

\begin{lemma} \label{unionIntersectionLabelSet}
Let $\mathcal{I}$ be a family of index sets and let $A_i$ be a set for all $i\in \bigcup \mathcal{I}$. Then
\begin{enumerate}
\item $\bigcup_{i\in \bigcup \mathcal{I}} A_i = \bigcup_{I\in \mathcal{I}}\bigcup_{i\in I} A_i$;
\item $\bigcap_{i\in \bigcap \mathcal{I}} A_i = \bigcap_{I\in \mathcal{I}}\bigcap_{i\in I} A_i$;
\item $\bigcup_{i\in \bigcap \mathcal{I}} A_i \subseteq \bigcap_{I\in \mathcal{I}}\bigcup_{i\in I} A_i$;
\item $\bigcap_{i\in \bigcup \mathcal{I}} A_i \supseteq \bigcup_{I\in \mathcal{I}}\bigcap_{i\in I} A_i$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) We calculate
\begin{align*}
x\in \bigcup_{i\in \bigcup \mathcal{I}} A_i &\iff \exists i\in \bigcup \mathcal{I}: x\in A_i \\
&\iff \exists i: (i\in \bigcup \mathcal{I}) \land (x\in A_i) \\
&\iff \exists i: (\exists I \in \mathcal{I}: i\in I) \land (x\in A_i) \\
&\iff \exists i: \exists I: (I \in \mathcal{I}) \land (i\in I) \land (x\in A_i) \\
&\iff \exists I\in \mathcal{I}: \exists i \in I: x\in A_i \\
&\iff x\in \bigcup_{I\in \mathcal{I}}\bigcup_{i\in I} A_i
\end{align*}

(2) Replace $\exists$ by $\forall$ and $\land$ by $\Rightarrow$ in the proof of (1).

(3) We calculate
\begin{align*}
x\in \bigcup_{i\in \bigcap \mathcal{I}} A_i &\iff \exists i\in \bigcap \mathcal{I}: x\in A_i \\
&\iff \exists i: (i\in \bigcap \mathcal{I}) \land (x\in A_i) \\
&\iff \exists i: (\forall I \in \mathcal{I}: i\in I) \land (x\in A_i) \\
&\iff \exists i: (\forall I: (I \in \mathcal{I}) \Rightarrow (i\in I)) \land (x\in A_i) \\
&\implies \exists i: \forall I: (I \in \mathcal{I}) \Rightarrow ((i\in I) \land (x\in A_i)) \\
&\implies \forall I: \exists i: (I \in \mathcal{I}) \Rightarrow ((i\in I) \land (x\in A_i)) \\
&\iff \forall I: (I \in \mathcal{I}) \Rightarrow (\exists i:(i\in I) \land (x\in A_i)) \\
&\iff \forall I\in \mathcal{I}: \exists i \in I: x\in A_i \\
&\iff x\in \bigcap_{I\in \mathcal{I}}\bigcup_{i\in I} A_i
\end{align*}

(4) TODO
\end{proof}

\subsection{Arbitrary Cartesian products}
\begin{definition}
Let $\{A_i\}_{i\in I}$ be an arbitrary indexed family of sets, then we define the \udef{Cartesian product} of $\{A_i\}_{i\in I}$ to be
\[ \prod_{i\in I}A_i \defeq \left\{ f\in \left(\left. I \to \bigcup_{i\in I}A_i \right) \; \right| \; \forall i\in I: f(i) \in A_i \right\}. \]
For each $j\in I$, the function
\[ \pi_j : \prod_{i\in I}A_i \to A_j: f\mapsto f(j) \]
is called the \udef{$j^\text{th}$ projection map}.
\end{definition}

\begin{definition}
A Cartesian product of an indexed family of sets $\{A_i\}_{i\in I}$ is called a \udef{Cartesian power} of $A$ if for all $i\in I$, $A_i$ is the same set $A$. This is denoted $A^I$.
\end{definition}
If $I = \interval[co]{0,n}$ for some $n\in \N$, we write $A^n = A^I$.

Note that
\[ A^I = \prod_{i\in I} A = (I\to A).  \]

TODO IMPORTANT $\uparrow$!

\begin{lemma}
There exists a bijection $A_0\times A_1 \leftrightarrow \prod_{i\in\{0,1\}} A_i$.
\end{lemma}
\begin{proof}
The bijection is given by
\[ (a,b) \quad\leftrightarrow\quad \{(0,a),(1,b)\} \qquad \forall a\in A_0, b\in A_1. \]
\end{proof}

\subsubsection{Distributing over unions and intersections}
\begin{lemma}
Let $\{A_{i}\}_{i \in I}$ and $\{B_{j}\}_{j \in J}$ be indexed families of sets, indexed over the same index family $I$. Then
\[ \left(\prod_{i\in I}A_i\right)\cap\left(\prod_{i\in I}B_i\right) = \prod_{i\in I}(A_i\cap B_i) \qquad\text{but}\qquad \left(\prod_{i\in I}A_i\right)\cup\left(\prod_{i\in I}B_i\right) \subset \prod_{i\in I}(A_i\cup B_i). \]
\end{lemma}

\begin{lemma}
Let $\{A_{i,j}\}_{(i,j) \in I\times J}$ be an indexed family of sets. Then
\[ \bigcap_{i\in I}\left(\prod_{j\in J}A_{i,j}\right) = \prod_{j\in J}\left(\bigcap_{i\in I}A_{i,j}\right) \qquad\text{but}\qquad \bigcup_{i\in I}\left(\prod_{j\in J}A_{i,j}\right) \subset \prod_{j\in J}\left(\bigcup_{i\in I}A_{i,j}\right). \]
\end{lemma}

\subsection{Disjoint union}
\begin{definition}
The \udef{(outer) disjoint union} of a family of sets $\{A_i\}_{i\in I}$ is defined as
\[ \bigsqcup_{i\in I}A_i \defeq \bigcup_{i\in I}\{i\}\times A_i. \]
If $A,B$ are sets, then we define
\[ A\sqcup B \defeq (\{0\}\times A)\cup (\{1\}\times B). \]
\end{definition}

Notice the difference between the inner and outer disjoint union: one is a normal union that happens to be disjoint, while the other is a separate operation that may be applied to any indexed family of sets.

\begin{lemma}
Let $\{A_i\}_{i\in I}$ be an indexed family of sets. If $\{A_i\}_{i\in I}$ is pairwise disjoint, then
\[ \bigsqcup_{i\in I}A_i \twoheadrightarrowtail \biguplus_{i\in I}A_i: (i, a) \mapsto a. \]
is a bijection.
\end{lemma}
\begin{proof}
The function is clearly surjective. Now assume, towards a contradiction, that it is not injective. Then there exist distinct $(i,a)$ and $(j,a)$ in $\bigsqcup_{i\in I}A_i$, which means $a\in A_i$ and $a\in A_j$. So $a\in A_i\cap A_j$ and $\{A_i\}_{i\in I}$ is not pairwise disjoint.
\end{proof}

\begin{lemma}
Let $\{A_i\}_{i\in I}$ be a family of sets.
\[ \bigsqcup_{i\in I}A_i = \left\{ (i,a)\in I\times \bigcup_{i\in I}A_i \;|\; a\in A_i \right\} \]
\end{lemma}

\subsection{Images and preimages}
\begin{lemma}
Let $R \subseteq A\times B$ be a relation, $\{X_i\}_{i\in I}$ a family of subsets of $A$ and $\{Y_j\}_{j\in J}$ a familiy of subsets of $B$. Then
\begin{enumerate}
\item $R\left(\bigcup_{j\in J} Y_j\right) = \bigcup_{j\in J} RY_j$;
\item $R\left(\bigcap_{j\in J} Y_j\right) \subseteq \bigcap_{j\in J} RY_j$;
\item $\left(\bigcup_{i\in I} X_i\right)R = \bigcup_{i\in I} X_iR$;
\item $\left(\bigcap_{i\in I} X_i\right)R \subseteq \bigcap_{i\in I} X_iR$.
\end{enumerate}
also
\begin{enumerate} \setcounter{enumi}{4}
\item if $R$ is functional, then $R\left(\bigcap_{j\in J} Y_j\right) = \bigcap_{j\in J} RY_j$;
\item if $R$ is injective, then $\left(\bigcap_{i\in I} X_i\right)R = \bigcap_{i\in I} X_iR$.
\end{enumerate}
\end{lemma}
In particular these result hold for functions.
