\chapter{Universal algebra}
TODO: forgetful functors.

\section{Algebras and terms}
\begin{definition}
A \udef{signature} or \udef{operational type} or \udef{operator domain} is a pair $(\Omega, \alpha)$ where $\Omega$ is a set whose elements are called \udef{operator symbols} or just operators and $\alpha: \Omega \to \N$ is a function. We call $\alpha(\omega)$ the \udef{arity} of the operator $\omega\in\Omega$. If the arity of $\omega\in\Omega$ is $n$, then we say $\omega$ is an \udef{$n$-ary} operator.
\end{definition}
We also say \udef{unary} instead of $1$-ary, \udef{binary} instead of $2$-ary and \udef{ternary} instead of $3$-ary.

\begin{definition}
A \udef{structure} of type $(\Omega,\alpha)$, also called an \udef{$\Omega$-structure} or \udef{$\Omega$-algebra}, is a set $A$, called the \udef{carrier}, equipped with a function
\[ \omega_A: A^{\alpha(\omega)}\to A \]
for each $\omega\in\Omega$. We call $\omega_A$ the \udef{interpretation} of $\omega$ in $A$.

If $\alpha(\omega) = 0$ we take $\omega_A$ to be a constant.
\end{definition}

\begin{definition}
Let $A$ be an $\Omega$-algebra. An \udef{$\Omega$-subalgebra} of $A$ is a subset that is closed under the operations of $\Omega$.
\end{definition}

\begin{lemma} \label{lemma:intersectionSubalgebra}
Let $A$ be an $\Omega$-algebra. Let $\mathcal{E}$ be a family of subalgebras. Then $\bigcap \mathcal{E}$ is also a subalgebra. 
\end{lemma}

\begin{definition}
Let $A$ be an $\Omega$-algebra and $X$ a subset of $A$. The subalgebra of $A$ \udef{generated} by $X$ is the intersection of all subalgebras containing $X$. We call $X$ the \udef{generating set} of this subalgebra.
\end{definition}
Every algebra has a (non-unique) generating set. For example the algebra itself.

\begin{definition}
The \udef{trivial} $\Omega$-algebra is the algebra generated by $\emptyset$.
\end{definition}

\subsection{Homomorphisms}
\begin{definition}
Let $A,B$ be $\Omega$-algebras. A \udef{homomorphism} of $\Omega$-algebras is a function $f:A\to B$ such that
\[ \forall \omega\in\Omega, \forall a_1,\ldots,a_{\alpha(\omega)}\in A: \quad f(\omega_A(a_1,\ldots, a_{\alpha(\omega)})) = \omega_B(f(a_1), \ldots, f(a_{\alpha(\omega)})). \]
\end{definition}

\begin{proposition}
Let $f,g:A\to B$ be two homomorphisms between $\Omega$-algebras $A,B$. If $f,g$ agree on a generating set of $A$, then they are equal.
\end{proposition}
\begin{proof}
The set $\setbuilder{x\in A}{f(x) = g(x)}$ is a subalgebra of $A$. By hypothesis it contains a generating set of $A$ and thus it is all of $A$.
\end{proof}

\begin{proposition}
Let $f:A\to B$ be a homomorphism. Then $\im f$ is a subalgebra of $B$.
\end{proposition}

\begin{proposition}
Let $(\Omega,\alpha)$ be a signature. Then the $\Omega$-algebras form a category with homomorphisms as arrows.
\end{proposition}
Consequently we have the concepts of isomorphism, endomorphism and automorphism.

\begin{proposition} \label{prop:bijectiveHomomorphism}
Let $f:A\to B$ be a bijective homomorphism. Then $f^{-1}$ is also a homomorphism and thus $f$ is an isomorphism.
\end{proposition}
\begin{proof}
Take arbitrary $\omega\in\Omega$ and $b_1,\ldots, b_{\alpha(\omega)}\in B$. We calculate
\begin{align*}
f^{-1}(\omega_B(b_1,\ldots, b_{\alpha(\omega)})) &= f^{-1}(\omega_B(ff^{-1}b_1,\ldots, ff^{-1}b_{\alpha(\omega)})) \\
&= f^{-1}f(\omega_A(f^{-1}b_1,\ldots, f^{-1}b_{\alpha(\omega)})) = \omega_A(f^{-1}b_1,\ldots, f^{-1}b_{\alpha(\omega)}).
\end{align*}
\end{proof}

\subsection{Congruences}
\subsubsection{Direct product}
\begin{definition}
Let $\{A_i\}_{i\in I}$ be a family of $\Omega$-algebras. The \udef{direct product} $\prod_{i\in I} A_i$ is the $\Omega$-algebra whose carrier is the Cartesian product of $\{A_i\}_{i\in I}$ and where operations are carried out componentwise and relations are verified pointwise.

Similarly a \udef{direct power} of $A$ is a Cartesian power of $A$ with operations and relations defined componentwise.
\end{definition}

The direct product of $\{A,B\}$ is simply written $A\times B$.

\subsubsection{Relations as algebras}
Let $A,B$ be $\Omega$-algebras. Then $A\times B$ is also an $\Omega$-algebra and subalgebras are too. Such subalgebras can be seen as a binary relation on $A,B$.

\begin{lemma}
Let $A,B,C$ be $\Omega$-algebras and $\Gamma, \Delta$ subalgebras of $A\times B$ and $B\times C$, respectively. Then
\begin{enumerate}
\item $\Gamma^{\transp} \subset B\times A$ is an $\Omega$-algebra;
\item $\Gamma;\Delta \subset A\times C$ is an $\Omega$-algebra;
\item for any subalgebra $A'$ of $A$, $A'\Gamma \subset B$ is an $\Omega$-algebra;
\item for any subalgebra $B'$ of $B$, $\Gamma B' \subset A$ is an $\Omega$-algebra.
\end{enumerate}
\end{lemma}

\subsubsection{Congruences}
\begin{definition}
Let $A$ be an $\Omega$-algebra. A \udef{congruence} $\mathfrak{q}$ on $A$ is an equivalence relation on $A$ that is a subalgebra of $A^2$.
\end{definition}

\begin{example}
Any algebra has the \udef{trivial congruences} $I_A$ and $A^2$.
\end{example}

An algebra is \udef{simple} if there are no congruences on it other than the trivial ones. We assume a simple algebra is non-trivial.

\begin{lemma} \label{lemma:basicCongruenceLemma}
Let $\mathfrak{q}$ be a congruence on an $\Omega$-algebra $A$ and $B$ an $\Omega$-subalgebra of $A$. Then
\begin{enumerate}
\item $\mathfrak{q}$ can be extended pointwise to a congruence on $A^2$, that is
\[ (a,b)\mathfrak{q}(c,d) \iff a\mathfrak{q}c \land b\mathfrak{q}d; \]
\item 
\item $\mathfrak{q}|_B^B$ is a congruence on $B$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) The extension of $\mathfrak{q}$ is an equivalence relation by \ref{lemma:relationPropertiesDirectProduct}.

We then need to prove that this extension is a subalgebra of $(A^2)^2$. This is easily verified using pointwise operations. (TODO develop easier machinery for this?)

(2) The restriction is an equivalence relation by \ref{lemma:relationPropertiesRestriction} and an $\Omega$-algebra by \ref{lemma:intersectionSubalgebra}.
\end{proof}
For simplicity we may write $B/\mathfrak{q}$ instead of $B/(\mathfrak{q}|_B^B)$.

\begin{proposition}
Let $f:A\to B$ be a homomorphism. Then $\ker f$ is a congruence on $A$.
\end{proposition}

\subsubsection{Quotient algebras}
\begin{proposition} \label{prop:quotientAlgebra}
Let $A$ be an $\Omega$-algebra and $\mathfrak{q}$ an equivalence relation. Then there exists an interpretation of $A/\mathfrak{q}$ such that the function
\[ A \to A/\mathfrak{q}: a\mapsto [a]_\mathfrak{q} \]
is a homomorphism if and only if $\mathfrak{q}$ is a congruence.

Explicitly, this interpretation is unique and given by
\[ \omega_{A/\mathfrak{q}}([a_1]_{\mathfrak{q}},\ldots,[a_{\alpha(\omega)}]_{\mathfrak{q}}) = [\omega_A(a_1,\ldots, a_{\alpha(\omega)})]_{\mathfrak{q}} \qquad \forall \omega\in\Omega. \]\end{proposition}
\begin{proof}
The requirement that $[\cdot]_\mathfrak{q}$ be a homomorphism forces the interpretation $\omega_{A/\mathfrak{q}}$ of $\omega$ to be the one given.

We just need to show that $\omega_{A/\mathfrak{q}}$ is well-defined if and only if $\mathfrak{q}$ is a congruence. To that end, choose arbitrary $a_1, \ldots, a_{\alpha(\omega)}$ and $a'_1, \ldots, a'_{\alpha(\omega)}$ such that $a_1'\in[a_1]_\mathfrak{q}, \ldots, a'_{\alpha(\omega)}\in [a_{\alpha(\omega)}]_\mathfrak{q}$. This is equivalent to choosing $(a_1,a'_1),\ldots, (a_{\alpha(\omega)},a'_{\alpha(\omega)}) \in \mathfrak{q}$. Then
\begin{align*}
[\omega_A(a_1,\ldots, a_{\alpha(\omega)})]_{\mathfrak{q}} = [\omega_A(a'_1,\ldots, a'_{\alpha(\omega)})]_{\mathfrak{q}} &\iff (\omega_A(a_1,\ldots, a_{\alpha(\omega)}),\omega_A(a'_1,\ldots, a'_{\alpha(\omega)})) \in \mathfrak{q} \\
&\iff \omega_{A^2}((a_1,a'_1),\ldots, (a_{\alpha(\omega)},a'_{\alpha(\omega)})) \in \mathfrak{q}
\end{align*}
where the first statement is the requirement of being well-defined and the last is the requirement for being a subalgebra of $A^2$.
\end{proof}
\begin{definition}
The $\Omega$-algebra $A/\mathfrak{q}$ is called the \udef{quotient algebra} of $A$ by $\mathfrak{q}$. The function $A \to A/\mathfrak{q}: a\mapsto [a]_\mathfrak{q}$ is known as the quotient map.
\end{definition}

\begin{proposition}[Factor theorem] \label{prop:factorTheorem}
Let $f:A\to B$ be a homomorphism of $\Omega$-algebras and $\mathfrak{q}$ a congruence on $A$ such that $\mathfrak{q}\subseteq \ker f$. Then
\[ f': A/\mathfrak{q} \to B: [a]_\mathfrak{q} \mapsto f'([a]_\mathfrak{q}) = f(a) \]
is a well-defined homomorphism. Further, $f'$ is injective \textup{if and only if} $\mathfrak{q} = \ker f$.
\end{proposition}
\begin{proof}
To show the function is well defined, take $a,a'\in A$ such that $[a]_\mathfrak{q} = [a']_\mathfrak{q}$, i.e. $(a,a')\in \mathfrak{q}$. This implies $(a,a')\in\ker f$, so $f(a) = f(a')$ and $f'$ is well-defined.

We see that $f'$ is a homomorphism by the calculation
\begin{align*}
f'(\omega_{A/\mathfrak{q}}([a_1], \ldots, [a_{\alpha(\omega)}])) &= f'([\omega_{A}(a_1, \ldots, a_{\alpha(\omega)})]) = f(\omega_{A}(a_1, \ldots, a_{\alpha(\omega)})) \\
&= \omega_B(f(a_1), \ldots f(a_{\alpha(\omega)})) = \omega_B(f'([a_1]), \ldots, f'([a_{\alpha(\omega)}])).
\end{align*}
Finally $f'$ is injective iff no two distinct $\mathfrak{q}$-classes are identified by $f'$, which is exactly the condition $\mathfrak{q} = \ker f$.
\end{proof}

\subsubsection{Isomorphism theorems}
\begin{theorem}[First isomorphism theorem] \label{theorem:firstIsomorphism}
Let $f:A\to B$ be a homomorphism of $\Omega$-algebras. Then we have the isomorphism
\[ A/\ker f \cong \im f. \]
\end{theorem}
\begin{proof}
From the factor theorem \ref{prop:factorTheorem} we get an injective homomorphism $f': A/\ker f \to B$ which is made surjective by restricting the codomain to $\im f$. By \ref{prop:bijectiveHomomorphism} this is an isomorphism.
\end{proof}

\begin{theorem}[Second isomorphism theorem]
Let $A$ be an $\Omega$-algebra, $B$ an $\Omega$-subalgebra of $A$ and $\mathfrak{q}$ a congruence on $A$. Then we have the isomorphism
\[ (\mathfrak{q}B)/\mathfrak{q} \cong B/(\mathfrak{q}\cap B^2). \]
\end{theorem}
Note that $\mathfrak{q}B = B\mathfrak{q}$ because $\mathfrak{q}$ is a congruence. Also $\mathfrak{q}\cap B^2 = \mathfrak{q}|_B^B$, so the quotient is well-defined by \ref{lemma:basicCongruenceLemma}. Further, $\mathfrak{q}$ should really be restricted in $(\mathfrak{q}B)/\mathfrak{q}$, as in \ref{lemma:basicCongruenceLemma}.
\begin{proof}
Take the homomorphism $[\cdot]_\mathfrak{q}:A \to A/\mathfrak{q}$ as defined in \ref{prop:quotientAlgebra} and restrict it to $B$. Applying the first isomorphism theorem \ref{theorem:firstIsomorphism} yields the required result.
\end{proof}

\begin{theorem}[Third isomorphism theorem]
Let $A$ be an $\Omega$-algebra and $\mathfrak{q},\mathfrak{r}$ congruences on $A$ such that $\mathfrak{q} \subseteq \mathfrak{r}$. Then we have the isomorphism
\[ (A/\mathfrak{q})/(\mathfrak{r}/\mathfrak{q}) \cong A/\mathfrak{r}. \]
\end{theorem}
In order to properly interpret $\mathfrak{r}/\mathfrak{q}$, we need to first extend $\mathfrak{q}$ to $A^2$ and then restrict to $\mathfrak{r}$, both as in \ref{lemma:basicCongruenceLemma}.
\begin{proof}
Applying the factor theorem \ref{prop:factorTheorem} to the homomorphism $A\to A/\mathfrak{r}$ from \ref{prop:quotientAlgebra}. We get a homomorphism $f: A/\mathfrak{q} \to A/\mathfrak{r}$. We apply the first isomorphism theorem \ref{theorem:firstIsomorphism} to this homomorphism. Then we just need to show that $\ker f = \mathfrak{r}/\mathfrak{q}$. TODO!
\end{proof}
In particular, we see that $A/\mathfrak{q}$ is simple if and only if $\mathfrak{q}$ is a maximal proper congruence on $A$.

\section{Free algebras and varieties}

\section{Algebraic theories}
\subsection{Properties of a single binary operator}
\begin{definition}
Let $(\Omega, \alpha)$ be a signature, $A$ an $\Omega$-structure and $\omega$ a binary operator. We call an interpretation $\omega_A$
\begin{itemize}
\item \udef{associative} if $\forall x,y,z\in A: \omega_A(\omega_A(x,y),z) = \omega_A(x,\omega_A(y,z))$;
\item \udef{commutative} if $\forall x,y\in A: \omega_A(x,y) = \omega_A(y,x)$;
\item \udef{idempotent} if $\forall x\in A: \omega_A(x,x) = x$.
\end{itemize}
We say
\begin{itemize}
\item $A$ has a \udef{left-identity} $e_L$ for $\omega_A$ if $\forall x\in A: \omega_A(e_L, x) = x$;
\item $A$ has a \udef{right-identity} $e_R$ for $\omega_A$ if $\forall x\in A: \omega_A(x, e_R) = x$;
\item $A$ has an \udef{identity} $e$ if $e$ is both a left- and a right-identity.
\end{itemize}
Let $A$ have an identity $e$ for $\omega_A$, then we say an element $x\in A$
\begin{itemize}
\item has a \udef{left-inverse} $y$ if $\omega_A(y,x) = e$;
\item has a \udef{right-inverse} $y$ if $\omega_A(x,y) = e$;
\item has an \udef{(two-sided) inverse} $y$ if $\omega_A(x,y) = e = \omega_A(y,x)$.
\end{itemize}
\end{definition}

\begin{lemma}
Let $(\Omega, \alpha)$ be a signature, $A$ an $\Omega$-structure and $\omega$ a binary operator. If $A$ has both a left-identity $e_L$ and a right-identity $e_R$, then $A$ has an identity $e$ and
\[ e= e_L = e_R. \]
\end{lemma}
\begin{proof}
Assume $A$ has a left- and a right-identity. Then $e_L = \omega_A(e_L, e_R) = e_R$.
\end{proof}
\begin{corollary}
A structure may have multiple left-identities or multiple right-identities, but if it has both, then the identity is unique.
\end{corollary}

\subsection{Properties of two binary operators}
\begin{definition}
Let $(\Omega, \alpha)$ be a signature, $A$ an $\Omega$-structure and $\omega, \chi$ binary operators. We say
\begin{itemize}
\item $\omega_A$ is \udef{left-distributive} over $\chi_A$ if
\[ \forall x,y,z\in A: \; \omega_A(x,\chi_A(y,z)) = \chi_A(\omega_A(x,y),\omega_A(x,z)); \]
\item $\omega_A$ is \udef{right-distributive} over $\chi_A$ if
\[ \forall x,y,z\in A: \; \omega_A(\chi_A(x,y), z) = \chi_A(\omega_A(x,z),\omega_A(y,z)); \]
\item $\omega_A$ is \udef{distributive} over $\chi_A$ if it is left- and right-distributive;
\item $\omega_A$ is \udef{self-distributive} if it is distributive over itself.
\end{itemize}
We say
\begin{itemize}
\item $\omega_A, \chi_A$ are linked by the \udef{absorption law} if
\[ \forall x,y\in A:\; \omega_A(x,\chi_A(x,y)) = x = \chi_A(x,\omega_A(x,y)) \]
\end{itemize}
\end{definition}

\begin{lemma} \label{lemma:absorptionIdempotency}
Let $(\Omega, \alpha)$ be a signature, $A$ an $\Omega$-structure and $\omega, \chi$ binary operators. If $\omega_A, \chi_A$ are linked by the absorption law, then they are both idempotent.
\end{lemma}
\begin{proof}
For all $x\in A$ we have $\omega_A(x,x) = \omega_A(x,\chi_A(x,\omega_A(x,x))) = x$.
\end{proof}

\subsection{Notation for binary operators}
Prefix, infix, postfix, Polish, necessity of brackets.


\chapter{Magmas}
\section{Semigroups}

\subsection{Bands}

\section{Monoids}

\begin{lemma}
A locally small category with a single object is a monoid.
\end{lemma}

\begin{proposition} \label{prop:leftRightInverseMonoid}
Let $(M,\cdot,1)$ be a monoid and $a\in M$. If $a$ has both a left inverse $l$ and a right inverse $r$, then $l=r$.
\end{proposition}
\begin{proof}
We calculate
\[ l = l\cdot 1 = l\cdot(a\cdot r) = (l\cdot a)\cdot r= 1\cdot r = r. \]
\end{proof}

TODO: \udef{delooping} $\cat{B}M$.

\subsection{Ordered monoids}
\begin{definition}
An \udef{ordered monoid} is a monoid $(M, \cdot, 0)$ on which a partial order $\preceq$ is defined that is compatible, i.e. $\forall x,y,z\in M$
\[ x\preceq y \implies x\cdot z \preceq y \cdot z \land z\cdot x \preceq z \cdot y. \]

Positive: $x > 0$.
\end{definition}

\subsection{The Archimedean property}
\begin{definition}
Let $(M,+,\leq)$ be a totally ordered monoid and $x,y\in M$ positive. Then
\begin{itemize}
\item $x$ is \udef{infinitesimal w.r.t.} $y$ or $y$ is \udef{infinite w.r.t.} $x$ if $nx<y$ for all $n\in\N$;
\item $M$ is \udef{Archimedean} if there is no pair $(x,y)$ such that $x$ is infinitesimal w.r.t. $y$.
\end{itemize}
\end{definition}
every submonoid is Archimedean.

abelian??

\section{Divisibility}
$m|n$ order relation.

$\sup\{n,m\} = kgv(n,m)$ and $\inf\{n,m\} = ggd(n,m)$




\chapter{Lattices}

\section{Semilattice}
\begin{definition}
A \udef{semilattice} is an algebraic structure $\seq{S,\vee}$ where $\vee$ is a binary operation on the set $S$ satisfying
\begin{itemize}[leftmargin=2.5cm]
\item[\textbf{Associativity}] $x\vee (y\vee z) = (x\vee y) \vee z$;
\item[\textbf{Commutativity}] $x \vee y = y \vee x$;
\item[\textbf{Idempotency}] $x\vee x = x$.
\end{itemize}
We call a semilattice \udef{bounded} if it contains an identity.
\end{definition}
In other words a semilattice is a commutative band.

\begin{proposition}
Let $(P,\leq)$ be a poset and let $\{x,y,z\}\subseteq P$ be such that each subset has a supremum. Then
\[ \sup\{\sup\{x,y\},z\} = \sup\{x,y,z\} = \sup\{x,\sup\{y,z\}\} \]
and, dually,
\[ \inf\{\inf\{x,y\},z\} = \inf\{x,y,z\} = \inf\{x,\inf\{y,z\}\}. \]
\end{proposition}
\begin{corollary}
Let $(P,\leq)$ be a poset.
\begin{enumerate}
\item If $\sup\{x,y\}$ exists for all $x,y\in P$, then $(P,\sup)$ is a semilattice.
\item If $\inf\{x,y\}$ exists for all $x,y\in P$, then $(P,\inf)$ is a semilattice.
\end{enumerate}
\end{corollary}
The converse to this corollary also holds:
\begin{proposition} \label{prop:orderSemilattice}
Let $\seq{L,\vee}$ be a semilattice. Define the relation $\leq$ on $L$ by
\[ \forall x,y\in L:\; x\leq y \qquad \iff \qquad x\vee y = y. \]
Then $\seq{L,\leq}$ is a poset such that $\forall x,y\in L: x\vee y = \sup\{x,y\}$.
\end{proposition}
\begin{proof}
First we prove $\seq{L,\leq}$ is a poset:
\begin{itemize}
\item Reflexivity follows from idempotency.
\item Antisymmetry follows from commutativity.
\item For transitivity: assume $x\leq y$ and $y\leq z$. This implies $x\vee y = y$ and $y\vee z = z$, and so $z = (x\vee y)\vee z =x\vee (y\vee z) =x\vee z$. This implies $x\leq z$.
\end{itemize}
If $x,y$ are comparable, the $x \vee y$ is clearly $\sup\{x,y\}$. Because $x\vee(x\vee y) = (x\vee x)\vee y = x\vee y$, we have $x\leq (x\vee y)$. So $x\vee y$ is an upper bound of $\{x,y\}$. Let $u$ be an upper bound of $\{x,y\}$. Then $u = x\vee u = x\vee (y\vee u) = (x\vee y)\vee u$. So $x\vee y \leq u$, meaning $x\vee y$ is the supremum.
\end{proof}
Dually we also have:
\begin{corollary}
Let $\seq{L,\wedge}$ be a semilattice. Define the relation $\leq$ on $L$ by
\[ x\leq y \qquad \iff \qquad x\wedge y = x. \]
Then $\seq{L,\leq}$ is a poset such that $\forall x,y\in L: x\wedge y = \inf\{x,y\}$.
\end{corollary}

\section{Lattices}
\url{file:///C:/Users/user/Downloads/Gr%C3%A4tzer,%20George%20-%20General%20lattice%20theory-Birkh%C3%A4user%20(2007).pdf}
\url{file:///C:/Users/user/Downloads/R.%20Padmanabhan,%20S.%20Rudeanu%20-%20Axioms%20for%20lattices%20and%20Boolean%20algebras-World%20Scientific%20(2008).pdf}
\begin{definition}
A \udef{lattice} is an algebraic structure $\seq{L,\vee, \wedge}$, where $\vee, \wedge$ are binary operations on the set $L$ such that $\seq{L,\vee}$ and $\seq{L,\wedge}$ are semilattices and $\vee,\wedge$ are linked by the absorption law:
\[ \forall a,b\in L: \; a \vee (a \wedge b) = a = a \wedge (a\vee b). \]
We call
\begin{itemize}
\item $\seq{L,\vee}$ the \udef{join-semilattice} and $a\vee b$ the \udef{join} of $a$ and $b$;
\item $\seq{L,\wedge}$ the \udef{meet-semilattice} and $a\wedge b$ the \udef{meet} of $a$ and $b$.
\end{itemize}
We call a lattice \udef{bounded} if both the join- and the meet-semilattice are bounded. We denote
\begin{itemize}
\item the identity of the join-semilattice by $\top$;
\item the identity of the meet-semilattice by $\bot$.
\end{itemize}
\end{definition}
By \ref{lemma:absorptionIdempotency} the absortion law renders the axiom of  idempotency of the semilattices redundant. So we just need that $\seq{L,\vee}$ and $\seq{L,\wedge}$ are commutative semigroups that are linked by the absorption law.

\begin{proposition}
Observations from universal algebra:
\begin{enumerate}
\item Subset closed under $\vee,\wedge$ is sublattice.
\item Product lattices
\item Inverse of homomorphism is homomorphism
\end{enumerate}
\end{proposition}


\subsection{Lattices and order}
As for semilattices, we can equivalently characterise lattices as posets with certain conditions.
\begin{proposition}
Let $L$ be a set.
\begin{enumerate}
\item If $\seq{L,\vee, \wedge}$ is a lattice, then $\seq{L,\leq}$ is a poset such that every two element set has a supremum and an infimum, where
\[ \forall x,y\in L:\; x\leq y \qquad \iff \qquad x\vee y = y \]
or, equivalently,
\[ \forall x,y\in L:\; x\leq y \qquad \iff \qquad x\wedge y = x. \]
\item If $\seq{L,\leq}$ is a poset such that every two element set has a supremum and an infimum, then $\seq{L,\vee, \wedge}$ is a lattice, where
\[ \forall x,y\in L: \; x\vee y = \sup\{x,y\} \quad \text{and} \quad x\wedge y = \inf\{x,y\}. \]
\end{enumerate}
The order can also be defined by
\[ \forall x,y\in L:\; x\leq y \qquad \iff \qquad x\wedge y = x. \]
\end{proposition}
\begin{proof}
Mostly this follows from \ref{prop:orderSemilattice}. We just need to show the two definitions of order are equivalent. This follows from the absorption law:
\begin{align*}
x\vee y &= y \implies x\wedge y = x\wedge (x\vee y) = x \\
x\wedge y &= x \implies x\vee y = (x\wedge y) \vee y = y.
\end{align*}
\end{proof}

\begin{lemma} \label{lemma:orderLattice}
Let $L$ be a lattice and $a,b,c,d\in L$. If $a\leq b$ and $c\leq d$, then
\[ a\vee c\leq b\vee d \qquad\text{and}\qquad a\wedge c \leq b\wedge d. \]
\end{lemma}
\begin{proof}
If $a\leq b$ and $c\leq d$, then we have
\[ \begin{cases}
a = a\wedge b \\ c = c\wedge d
\end{cases} \quad \text{and} \quad \begin{cases}
b = a\vee b \\ d = c\vee d.
\end{cases}\]
We calculate
\[ (a\vee c)\wedge (b\vee d) = (a\vee c)\wedge (a\vee b\vee c\vee d) = (a\vee c)\wedge ((a\vee c)\vee (b\vee d)) = a\vee c, \]
so $a\vee c\leq b\vee d$.
Similarly
\[ (a\wedge c)\vee (b\wedge d) = (a\wedge b\wedge c\wedge d)\vee (b\wedge d) = ((a\wedge c)\wedge (b\wedge d))\vee (b\wedge d) = b\wedge d, \]
so $a\wedge c \leq b\wedge d$.
\end{proof}
\begin{corollary} \label{corollary:orderLattice}
Let $L$ be a lattice and $a,b,c,d\in L$. Then
\begin{enumerate}
\item if $a\leq b$ then $a\vee c \leq b \vee c$ and $a\wedge c \leq b\wedge c$;
\item if $a\leq c$ and $b\leq c$, then $a\vee b \leq c$;
\item if $a\leq b$ and $a\leq c$, then $a\leq b\wedge c$.
\end{enumerate}
\end{corollary}

\begin{lemma}
Let $X$ be a set. Then $\mathcal{P}(X)$ ordered by inclusion is a lattice and $\cup, \cap$ are the corresponding join and meet operations.

In particular, for all $A,B\in \mathcal{P}(X)$:
\begin{enumerate}
\item $\inf\{A,B\} = A\cap B$;
\item $\sup\{A,B\} = A\cup B$.
\end{enumerate}
\end{lemma}

\begin{lemma}
The natural numbers forms a lattice if ordered by division. The meet and join are given by
\[ m\vee n = \lcm\{m,n\} \qquad \text{and}\qquad m\wedge n = \gcd\{m,n\}. \]
\end{lemma}

\begin{lemma}
Let $L,K$ be lattices and $f:L\to K$ a function. The following are equivalent:
\begin{enumerate}
\item $f$ is order-preserving;
\item $\forall x,y\in L:\; f(a\vee b)\geq f(a)\vee f(b)$;
\item $\forall x,y\in L:\; f(a\wedge b)\leq f(a)\wedge f(b)$.
\end{enumerate}
\end{lemma}

\begin{proposition}[Mini-max theorem]
Let $L$ be a lattice and let $\seq{a_{i,j}}\subset L$ be indexed by $i,j\in \N$. Then
\[ \bigvee_{j=1}^n \left(\bigwedge_{i=1}^m a_{i,j}\right) \leq \bigwedge_{i=1}^m \left(\bigvee_{j=1}^n a_{i,j}\right). \]
\end{proposition}
\begin{proof}
For all $k,l$ we have $a_{k,l}\leq \bigvee_{j=1}^n a_{k,j}$. This implies $\bigwedge_{i=1}^m a_{i,l} \leq \bigwedge_{i=1}^m \left(\bigvee_{j=1}^n a_{i,j}\right)$ for all $l$. Taking the supremum over $l$ gives the result.
\end{proof}
\begin{corollary}[Distributive inequalities] \label{corollary:distributiveInequality}
Let $L$ be a lattice and $a,b,c \in L$, then
\begin{align*}
(a\wedge b)\vee (a\wedge c) &\leq a\wedge (b \vee c); \\
(a\vee b)\wedge (a\vee c) &\geq a\vee (b \wedge c).
\end{align*}
In particular this also means
\[ c \leq a \implies (a\wedge b)\vee c \leq a\wedge (b\vee c).  \]
\end{corollary}
Use $a_{i,j} = \begin{pmatrix}
a & a \\ b & c 
\end{pmatrix}$ and $a_{i,j} = \begin{pmatrix}
a & b \\ a & c 
\end{pmatrix}$. The particular cases follow because in this case $a\wedge c = c$. This statement is self-dual.
\begin{corollary}[Median inequality]
Let $L$ be a lattice and $a,b,c \in L$, then
\[ (a\wedge b) \vee (b\wedge c) \vee (c\wedge a) \leq (a\vee b)\wedge (b\vee c) \wedge (c\vee a). \]
\end{corollary}
\begin{proof}
Use $a_{i,j} = \begin{pmatrix}
a & b & a \\ b & b & c \\ a & c & c
\end{pmatrix}$.
\end{proof}


\subsection{Filters and ideals}
\begin{definition}
Let $L$ be a lattice and $J\subset L$ a non-empty subset. We call $J$ 
\begin{itemize}
\item an \udef{ideal} if it is a down-set closed under join;
\item a \udef{filter} if it is an up-set closed under meet.
\end{itemize}
A filter of ideal is called \udef{proper} if it is not $L$.

The set of ideals of $L$ is denoted $\ideals(L)$ and the set of filters of $L$ is denoted $\filters(L)$.
\end{definition}
In other word $J$ is an ideal if
\begin{itemize}
\item $a,b\in J \implies a\vee b\in J$;
\item $x\in L, b\in J$ and $x\leq b$ implies $x\in J$;
\end{itemize}
and a filter if
\begin{itemize}
\item $a,b\in J \implies a\wedge b\in J$;
\item $x\in L, b\in J$ and $x\geq b$ implies $x\in J$.
\end{itemize}

\begin{lemma}
Let $L$ be a lattice and $J$ a subset. Then
\begin{enumerate}
\item $J$ is an ideal \textup{if and only if}
\begin{enumerate}
\item $\forall a,b\in J: \qquad a\vee b\in J$;
\item $\forall x\in L, \forall b\in J: \quad x\wedge b \in J$.
\end{enumerate}
\item $J$ is a filter \textup{if and only if}
\begin{enumerate}
\item $\forall a,b\in J: \qquad a\wedge b\in J$;
\item $\forall x\in L, \forall b\in J: \quad x\vee b \in J$.
\end{enumerate}
\end{enumerate}
\end{lemma}
\begin{proof}
By the equivalence $x\leq b \iff x\wedge b = x$.
\end{proof}

\begin{lemma}
Let $L$ be a lattice. Then
\begin{enumerate}
\item if $L$ contains $\top$, then an ideal in $L$ is proper \textup{if and only if} is does not contain $\top$;
\item if $L$ contains $\bot$, then a filter in $L$ is proper \textup{if and only if} is does not contain $\bot$.
\end{enumerate}
\end{lemma}

\begin{lemma}
Let $L$ be a lattice. For all $x\in L$,
\begin{enumerate}
\item $\downset x$ is an ideal;
\item $\upset x$ is a filter.
\end{enumerate}
These ideals and filters are called \udef{principle ideals} and \udef{principle filters}.
\end{lemma}

\subsection{Complete lattices}
\begin{lemma}
Let $L$ be a lattice. For every finite set $S\subset L$, $\sup(S)$ and $\inf(S)$ exist.
\end{lemma}
\begin{definition}
Let $L$ be a lattice. We call $L$ a \udef{complete lattice} if each subset $S\subseteq L$ has both a supremum and an infimum. We write
\[ \sup(S) = \bigvee S \qquad \inf(S) = \bigwedge S. \]
If we want to emphasise that the supremum/infimum of $S$ is taken as a subset of $L$, we write $\bigvee_L S$ and $\bigwedge_L S$.
\end{definition}
Clearly every finite lattice is complete.

\begin{lemma} \label{lemma:supInfFiniteSubsetsLattice}
Let $L$ be a lattice and $F\subseteq L$ a finite subset. Then $\bigvee F$ and $\bigwedge F$ exist. 
\end{lemma}

\begin{example}
For any set $X$, $\powerset(X)$ is a complete lattice.
\end{example}

\begin{lemma}
Let $P$ be an ordered set such that all relevant suprema and infima exist and $S,T\subseteq P$. Then
\begin{enumerate}
\item $\bigvee S \leq \bigwedge T$ if and only if $s\leq t$ for all $s\in S,t\in T$;
\item if $S\subseteq T$, then $\bigvee S \leq \bigvee T$ and $\bigwedge S \geq \bigwedge T$;
\item $\bigvee(S\cup T) = \left(\bigvee S\right)\vee \left(\bigvee T\right)$ and $\bigwedge(S\cup T) = \left(\bigwedge S\right)\wedge \left(\bigwedge T\right)$.
\end{enumerate}
\end{lemma}

\begin{proposition} \label{prop:completeLatticeBasic}
Let $P$ be a non-empty ordered set. Then the following are equivalent:
\begin{enumerate}
\item $P$ is a complete lattice;
\item $\bigvee S$ exists for all subsets $S\subseteq P$;
\item $\bigwedge S$ exists for all subsets $S\subseteq P$;
\item $P$ has a bottom element $\bot$ and $\bigvee S$ exists for all non-empty $S\subseteq P$;
\item $P$ has a top element $\top$ and $\bigwedge S$ exists for all non-empty $S\subseteq P$;
\item for all $x\in P$ both $\upset x$ and $\downset x$ are complete lattices.
\end{enumerate}
\end{proposition}
\begin{proof}
The only difficult implication is $(5)\Rightarrow (1)$. All infima exist because $\inf(\emptyset) = \top \in P$. New each non-empty set $S$ in $P$ has an upper bound, $\top$, so $\bigvee S$ exists in $P$ by \ref{prop:existenceSupremaInfima}. Finally $\bigvee \emptyset = \bot = \bigwedge P \in P$.
\end{proof}

\begin{theorem}[Knaster-Tarski fixed-point theorem]
Let $L$ be a complete lattice and $f:L\to L$ an order-preserving map. Then 
\[ \bigvee \setbuilder{x\in L}{x\leq f(x)} \qquad\text{and}\qquad \bigwedge \setbuilder{x\in L}{x\geq f(x)} \]
are, resp., the greatest and the least fixed point of $f$.
\end{theorem}
\begin{proof}
Let $P$ be the set of fixed points, set $H = \setbuilder{x\in L}{x\leq f(x)}$ and $\alpha = \bigvee H$. It is clear that $\alpha$ is an upper bound of $P$ because $P \subset  \setbuilder{x\in L}{x\leq f(x)}$. So we just need to show that $\alpha$ is a fixed point.

Now $f(\alpha)$ is an upper bound of $H$ due to $f$ being order preserving: $x \leq f(x) \leq  f(\alpha)$ for all $x\in P$. So $\alpha \leq f(\alpha)$.
Conversely, $f(\alpha) \leq f(f(\alpha))$ because $f$ is order preserving. This means $f(\alpha)\in H$, so $f(\alpha)\leq \alpha$. We have thus shown that $\alpha = f(\alpha)$.

The proof that $\bigwedge \setbuilder{x\in L}{x\geq f(x)}$ is the least fixed point is completely dual.
\end{proof}
\begin{corollary}
The set of fixed points of $f$ forms a complete lattice.
\end{corollary}
\begin{proof}
Let $P$ be the set of fixed points. To show $P$ is a complete lattice, take any subset $S\subset P$.
Set $w = \bigvee S$, where $S$ is considered as a subset of $L$. For all $x\in W$: $x\leq w$, which implies $x=f(x)\leq f(w)$. As $w$ is the least upper bound, we have $w\leq f(w)$. This implies $f[\upset w]\subseteq \upset w$, meaning we can view $f$ as a function on the complete lattice $\upset w$. In particular $f|_{\upset w}$ has a least fixed point by the theorem, so $S$ has a supremum in $P$. The existence of the infimum is dual.
\end{proof}
\begin{corollary}[Banach decomposition theorem]
Let $X,Y$ be sets and $f:X\to Y$ and $g:Y\to X$ functions. There exist partitions $X_1,X2$ and $Y_1,Y_2$ of $X$ and $Y$ such that
\[ f[X_1] = Y_1 \qquad\text{and}\qquad g[Y_2] = X_2. \]
\end{corollary}
\begin{proof}
Consider the map $F: \powerset(X)\to\powerset(X): S\mapsto X\setminus g[Y\setminus f[S]]$. By the theorem this map has a fixed point, which we call $X_1$. We then need to set $Y_1 = f[X_1], X_2 = X\setminus X_1$ and $Y_2 = Y\setminus Y_1$. The fact $X_1$ is a fixed point means that $X_1 = X\setminus g[Y\setminus f[X_1]] = g[Y\setminus Y_1] = g[Y_2]$.
\end{proof}
\begin{corollary}[Schröder-Bernstein]
Let $X,Y$ be sets and $f:X\rightarrowtail Y$ and $g:Y\rightarrowtail X$ injective functions. Then there exists a bijective function $h: X\twoheadrightarrowtail Y$.
\end{corollary}
\begin{proof}
Use the Banach decomposition theorem to obtain partitions $X_1,X_2$ and $Y_1,Y_2$. Then $f|_{X_1}: X_1\twoheadrightarrowtail Y_1$ and $g|_{Y_2}: Y_2 \twoheadrightarrowtail X_2$ are bijective, so we can construct
\[ h: X\twoheadrightarrowtail Y: x \mapsto \begin{cases}
f(x) & x\in X_1 \\ (g|_{Y_2})^{-1}(x) & x\in X_2
\end{cases}. \]
\end{proof}
The Schröder-Bernstein theorem was already proven in \ref{theorem:SchroederBernstein}.

\subsubsection{Chain conditions}
The following requires dependent choice:
\begin{proposition} \label{prop:ascendingDescendingChainLattice}
Let $L$ be a lattice. Then
\begin{enumerate}
\item if $L$ satisfies the ascending chain condition, then for all non-empty subsets $S\subset L$ there exists a finite set $F\subset L$ such that $\bigvee S = \bigvee F$;
\item if $L$ satisfies the descending chain condition, then for all non-empty subsets $S\subset L$ there exists a finite set $F\subset L$ such that $\bigwedge S = \bigwedge F$;
\item if $L$ has a bottom element and satisfies the ascending chain condition, then $L$ is complete;
\item if $L$ has a top element and satisfies the descending chain condition, then $L$ is complete;
\item if $L$ has no infinite chains, then $L$ is complete.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) Assume $L$ satisfies the ascending chain condition and let $S\subset L$ be non-empty. Define
\[ B = \setbuilder{\bigvee G}{\text{$G$ is a finite, non-empty subset of $S$}}. \]
This is well-defined by \ref{lemma:supInfFiniteSubsetsLattice}. Then $B$ has a maximal element $m = \bigvee F$ for some finite $F$ by \ref{prop:welfoundedACC}.

Now $m$ is an upper bound of $S$. Indeed, let $x\in S$. Then $m= \bigvee F \leq \bigvee (F\cup\{x\})$ because $F\subseteq (F\cup \{x\})$. Since $m$ is maximal in $B$, we have $m = \bigvee (F\cup\{x\}) \geq x$. It is clearly also the least upper bound, otherwise it was not the least upper bound of $F$.

(2) Dual of 1.

(3) This follows from 1. and \ref{prop:completeLatticeBasic}.

(4) Dual of 3.

(5) A lattice with no infinite chains satisfies the ascending chain condition. Also a lattice
with no infinite chains has a bottom element. (TODO: need dependent/countable choice?)
\end{proof}

\subsection{Join- and meet-irreducible elements}
\begin{definition}
Let $L$ be a lattice. We call $x\in L$ \udef{join-irreducible} if
\begin{itemize}
\item $x$ is not a least element of $L$,
\item for all $a,b\in L$: $x= a\vee b$ implies $x=a$ or $x=b$.
\end{itemize}
The definition of \udef{meet-irreducible} is dual.

We denote the set of join-irreducible elements in $L$ as $\joinIr(L)$ and the set of meet-irreducible elements in $L$ as $\meetIr(L)$.
\end{definition}

\begin{lemma}
Let $L$ be a lattice and $x\in L$ not a least element. Then the following are equivalent:
\begin{enumerate}
\item $x$ is join-irreducible;
\item for all $a,b\in L$: $x= a\vee b$ implies $x \leq a$ or $x \leq b$;
\item for all $a,b\in L$: $x > a$ and $x > b$ implies $x > a\vee b$;
\item for all finite $F\subseteq L$: $x = \bigvee F$ implies $x\in F$.
\end{enumerate}
\end{lemma}

\begin{lemma}
In a finite lattice $L$, an element is join-irreducible if and only if it
has exactly one lower cover.
\end{lemma}

\begin{example}
Consider the lattice $\seq{\N,\lcm, \gcd}$. A non-zero element of $\N$ is join irreducible if and only if it is of the form $p^r$ for some prime $p$ and $r\in\N$.
\end{example}

\begin{proposition} \label{prop:joinIrreducibilityDescendingChainLattice}
Let $L$ be a lattice satisfing the descending chain condition. Then
\begin{enumerate}
\item $\forall a,b\in L:\; a\nleq b \implies \exists x\in \joinIr(L): \; x\leq a$ and $x\nleq b$;
\item $\forall a\in L:\; a = \bigvee\setbuilder{x\in\joinIr(L)}{x\leq a}$.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) Set $S = \setbuilder{x\in L}{\text{$x\leq a$ and $x\nleq b$}}$, which is non-empty and thus contains a minimal element $m$ by \ref{prop:welfoundedACC}. We claim $m$ is join-irreducible. Assume, towards a contradiction, $x = c\vee d$ and $c < x > d$. By minimality of $x$, $c,d\notin S$. As $c,d< x \leq a$, we must have $c,d\leq b$. But this means $x\leq b$, so $x\notin S$ which is a contradiction.

(2) Set $T = \setbuilder{x\in\joinIr(L)}{x\leq a}$. Clearly $a$ is an upper bound of $T$. To see that it is the least upper bound, take a different upper bound $c$. Assume, towards a contradiction, that $a\nleq c$. Then $a\nleq a\wedge c$. By point 1. there exists an $x\in\joinIr(L)$ such that $x\leq a$ (meaning $x\in T$) and $x\nleq a\wedge c$. But if $c$ were an upper bound of $T$, then $x\leq a\wedge c$, which is a contradiction.
\end{proof}


\subsubsection{Join- and meet-dense subsets}
\begin{definition}
Let $P$ be a poset and let $Q\subset P$ be a subset. Then $Q$ is called \udef{join-dense} in $P$ if for every $x\in P$, there exists a subset $S\subset Q$ such that $x= \bigvee_P S$.

The dual of join-dense is \udef{meet-dense}.
\end{definition}

\begin{proposition}
Let $L$ be a lattice.
\begin{enumerate}
\item If $L$ satisfies the descending chain condition, then any subset $Q\supseteq \joinIr(L)$ is join-dense in $L$.
\item If $L$ satisfies the ascending chain condition and $Q$ is join-dense in $L$, then for all $a\in L$ there exists a finite subset $F$ of $Q$ such that $a = \bigvee F$.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) is a corollary of \ref{prop:joinIrreducibilityDescendingChainLattice}. (2) is a corollary of \ref{prop:ascendingDescendingChainLattice}.
\end{proof}
\begin{corollary}
Let $L$ be a lattice with no infinite chains. Then
\begin{enumerate}
\item for each $a \in L$, there exists a finite subset $F$ of $\joinIr(L)$ such that $a = F$.
\item $Q\subseteq L$ is join-dense in $L$ if and only if $Q \supseteq \joinIr(L)$.
\end{enumerate}
\end{corollary}
\begin{proof}
If $L$ has no finite chains, then it satisfies the ascending and descending chain conditions.

Only the $\Rightarrow$ direction of (2) is not immediately obvious. Assume $Q$ is join-dense and let $x\in \joinIr(L)$. By the proposition there exists a finite $F\subseteq Q$ such that $x = \bigvee F$. Since $x$ is join-irreducible, we have $x \in F$ and hence $x \in Q$. Thus, $\joinIr(L) \subseteq Q$.
\end{proof}

\subsection{Distributive lattices}
For all lattices $L$ the distributive inequalities, \ref{corollary:distributiveInequality}, hold: $\forall a,b,c \in L$:
\begin{align*}
a \vee (b\wedge c) &\leq (a\vee b) \wedge (a\vee c); \\
a\wedge (b \vee c) &\geq (a\wedge b)\vee (a\wedge c).
\end{align*}

The two corresponding equalities are equivalent:
\begin{proposition} \label{lemma:equivalenceDistributiveLaws}
Let $L$ be a lattice. Then the following are equivalent:
\begin{enumerate}
\item $\forall a,b,c \in L: \; a \vee (b\wedge c) = (a\vee b) \wedge (a\vee c)$;
\item $\forall a,b,c \in L: \; a\wedge (b \vee c) = (a\wedge b)\vee (a\wedge c)$.
\end{enumerate}
\end{proposition}
These equivalent equalities are known as the \udef{distributive laws}.
\begin{proof}
We show $(1)\Rightarrow (2)$. Then other implication follows by duality.

Assume (1). Then, for all $a,b,c \in L$:
\begin{align*}
(a\wedge b)\vee (a\wedge c) &= ((a\wedge b)\vee a) \wedge ((a\wedge b)\vee c) & \text{by (1)}\\
&= (a\wedge (c\vee (a\wedge b))  & \text{by the absorption law}\\
&= (a \wedge ((c\vee b) \wedge (c\vee a))  & \text{by (1)}\\
&= a\wedge (b\vee c) & \text{by the absorption law.}
\end{align*}
\end{proof}
Note that it is \emph{not} true that
\[ \forall a,b,c \in L: \; a \vee (b\wedge c) = (a\vee b) \wedge (a\vee c) \iff a\wedge (b \vee c) = (a\wedge b)\vee (a\wedge c). \]

\begin{definition}
A lattice $L$ is called \udef{distributive} if it satisfies the distributive laws.
\end{definition}

\begin{lemma}
A lattice is distributive \textup{if and only if} its dual is distributive.
\end{lemma}

\begin{lemma}
Let $L$ be a lattice. The following are equivalent:
\begin{enumerate}
\item $L$ is distributive;
\item for all $x,y,z,w\in L: \quad x\wedge y \leq w \;\text{and}\; x\wedge z\leq w \implies x\wedge (y\vee z) \leq w;$
\item for all $x,y,z,w\in L: \quad x\vee y \geq w \;\text{and}\; x\vee z\geq w \implies x\vee (y\wedge z) \geq w$.
\end{enumerate}
\end{lemma}
\begin{proof}
Point (1) is self-dual and points (2) and (3) are dual, so it is enough to show that (1) and (2) are equivalent.

Assume $L$ distributive. By \ref{corollary:orderLattice}, $ x\vee y \geq w$ and $x\vee z\geq w$ imply $(x\wedge y)\vee (x\wedge z) \leq w$. By distributivity, we get (2).

Conversely, we can take $w = (x\wedge y)\vee (x\wedge z)$. Then (2) gives $x\wedge (y\vee z) \leq (x\wedge y)\vee (x\wedge z)$ and the distributive inequality \ref{corollary:distributiveInequality} gives the other inequality. 
\end{proof}

\subsection{Modular lattices}
For all lattices $L$ the modular inequality holds: $\forall a,b,c \in L$:
\[ a\leq c \implies a \vee (b\wedge c) \leq (a\vee b) \wedge c. \]
See \ref{corollary:distributiveInequality}.

\begin{proposition} \label{prop:modularEquivalences}
Let $L$ be a lattice. Then the following are equivalent:
\begin{enumerate}
\item $\forall a,b,c\in L$: $a \vee (b\wedge c) = (a\vee b) \wedge c$ if $a\leq c$;
\item $\forall a,b,c\in L$: $a \vee (b\wedge c) = (a\vee b) \wedge (a\vee c)$ if $a\leq b$ or $a\leq c$; the dual of (2);
\item $\forall a,b,c\in L$: $a\vee (b\wedge (a\vee c)) = (a\vee b)\wedge (a\vee c)$; the dual of (3);
\item \textup{Shearing identity}: $\forall a,b,c\in L$: $(a\vee b) \wedge c = (a\vee (b\wedge (a\vee c)))\wedge c$; the dual of the shearing identity.
\end{enumerate}
\end{proposition}
The first of these is referred to as the \udef{modular law}. Notice that it is self-dual.
\begin{proof}
(1) is equivalent to its dual by replacing $a\leftrightarrow c$. This will imply all statements are equivalent to their duals once the equivalence with (1) has been established. 

$\boxed{(1)\Rightarrow (2)}$ Assume (1). Assume $a\leq b$ or $a\leq c$. By relabelling we can assume $a\leq c$.  Then $a\vee c = c$ and (2) clearly follows from (1).


$\boxed{(2)\Rightarrow (3)}$ Apply (2) to $a\leq a\vee c$.

$\boxed{(3)\Rightarrow (1)}$ Assume $a\leq c$. Then $a\vee c = c$ and $a\vee (b\wedge (a\vee c)) = (a\vee b)\wedge (a\vee c)$ reduces to $a \vee (b\wedge c) = (a\vee b) \wedge c$.

$\boxed{(3)\Rightarrow (4)}$ We calculate, using (3),
\[ (a\vee (b\wedge (a\vee c)))\wedge c = ((a\vee b)\wedge (a\vee c))\wedge c = (a\vee b) \wedge (a\vee c) \wedge c = (a\vee b) \wedge c. \]

$\boxed{(4)\Rightarrow (3)}$ TODO????
\end{proof}

\begin{definition}
A lattice $L$ is called \udef{modular} if it satisfies the modular law.
\end{definition}

\begin{lemma}
If a lattice is distributive, it is also modular.
\end{lemma}
\begin{proof}
If the lattice is distributive, point (2) of \ref{prop:modularEquivalences} holds unconditionally, and so in particular also conditionally.
\end{proof}

\section{Complementation}
\subsection{Disjoint elements and disjoint complement}
\begin{definition}
Let $L$ be a lattice with a bottom $\bot$.

We say $x,y\in L$ are \udef{disjoint} if $x\wedge y = \bot$. We write $x \perp y$.

Let $S\subset L$. Then the set
\[ S^\perp \defeq \setbuilder{x\in L}{\forall y\in S: x\perp y} \]
is called the \udef{disjoint complement} of $Y$.
\end{definition}

\begin{lemma}
Let $L$ be a distributive lattice with a bottom $\bot$ and $S\subset L$. Then $S^\perp$ is an ideal.
\end{lemma}
\begin{proof}
Let $a,b\in S^\perp$. Then for all $x\in S$, we have
\[ (a\vee b)\wedge x = (a\wedge x)\vee (b\wedge x) = \bot\vee \bot = \bot, \]
so $a\vee b\in S^\perp$.

It is also clear $S^\perp$ must be a down set by \ref{corollary:orderLattice}.
\end{proof}

\subsection{Complementation}
\begin{definition}
Let $L$ be a bounded lattice and $x\in L$. We call $y$ a \udef{complement} of $x$ if
\[ x \vee y = \top \qquad \text{and} \qquad x\wedge y = \bot. \]
\end{definition}

\begin{proposition} \label{prop:distributiveComplementUnique}
Let $L$ be a bounded lattice. If $L$ is distributive, then any $x\in L$ has at most one complement.
\end{proposition}
\begin{proof}
Let $y,y'$ be complements of $x$. Then
\[ y = y\vee \bot = y\vee (x\wedge y') = (y\vee x)\wedge (y\vee y') = \top \wedge (y\vee y') = y\vee y'. \]
Similarly $y' = y'\vee y$, so $y= y'$.
\end{proof}

\subsubsection{Complemented lattices}
\begin{definition}
A \udef{complemented lattice} is a bounded lattice with a function $c:L\to L$, called the \udef{complementation}, such that $c(x)$ is a complement of $x$ for all $x\in L$.

A lattice in which every element has exactly one complement is called a \udef{uniquely complemented lattice}.

A lattice with the property that every interval (viewed as a sublattice) is complemented is called a \udef{relatively complemented lattice}.
\end{definition}
A distributive complemented lattice is uniquely complemented.

\begin{lemma}
Let $L$ be a complemented lattice with complementation $c:L\to L$. Then $c(\top) = \bot$ and $c(\bot) = \top$.
\end{lemma}
\begin{proof}
For $c(\top)$ to be a complement of $\top$, we need $\top \wedge c(\top) = \bot$. But for all $x\in L$ we have $x\leq \top$, so $\top\wedge x = x$. This means we have $c(\top) = \bot$.
\end{proof}

\begin{lemma} \label{lemma:uniqueComplementInvolution}
Let $L$ be a uniquely complemented lattice. Then the complementation $c:L\to L$ is an involution.
\end{lemma}
\begin{proof}
Clearly if $c(x)$ is a complement of $x$, then $x$ is a complement of $c(x)$. By uniqueness $c(c(x)) = x$.
\end{proof}

\subsubsection{Orthocomplemented lattices}
\begin{definition}
Let $L$ be a bounded lattice. An \udef{orthocomplementation} is a function $L \to L: x \to \overline{x}$ that maps each element $x\in L$ to an \udef{orthocomplement} $\overline{x}$ such that
\begin{itemize}
\item $x$ and $\overline{x}$ are complements;
\item $x\mapsto \overline{x}$ is an involution: $\overline{\overline{x}} = x$;
\item $x\mapsto \overline{x}$ is order-reversing: $x\leq y \implies \overline{y} \leq \overline{x}$.
\end{itemize}
An \udef{orthocomplemented lattice} or \udef{ortholattice} is a bounded lattice equipped with an orthocomplementation.
\end{definition}
An orthocomplemented lattice is not necessarily uniquely complemented.

\begin{lemma}
The dual lattice of an ortholattice is an ortholattice. We can view an orthocomplementation as an isomorphism between an ortholattice and its dual.
\end{lemma}

\begin{proposition}
The cardinality of any finite ortholattice is either even or $1$.
\end{proposition}
\begin{proof}
Let $L$ be a finite ortholattice.
The orthocomplementation pairs elements $x,y$ such that $\overline{x} = y$ and $\overline{y} = x$. If for all such pairs we have $x\neq y$, then the cardinality of $L$ is even. Now assume there exists an $x\in L$ such that $\overline{x} = x$. Then 
\[ \bot = x\wedge \overline{x} = x\wedge x = x = x\vee x = x\vee \overline{x} = \top. \]
So $\bot = \top$, which is only possible if $L = \{\bot\}$.
\end{proof}

\begin{example}
\begin{itemize}
\item The lattice $\mathbf{M}_2 = \begin{tikzcd}[column sep={2em,between origins},row sep={2em,between origins}]
&\circ \ar[ld, dash] \ar[rd, dash] & \\ \circ \ar[rd, dash] && \circ \ar[ld, dash] \\ &\circ &
\end{tikzcd}$ admits a unique orthocomplementation.
\item The lattice $\mathbf{M}_3 = \begin{tikzcd}[column sep={2em,between origins},row sep={2em,between origins}]
&\circ \ar[ld, dash] \ar[d,dash] \ar[rd, dash] &\\ \circ \ar[rd, dash]& \circ \ar[d, dash] & \circ \ar[ld, dash] \\ &\circ &
\end{tikzcd}$ admits no orthocomplementations.
\item The lattice $\mathbf{M}_4 = \begin{tikzcd}[column sep={1em,between origins},row sep={2em,between origins}]
&&&\circ \ar[llld, dash] \ar[ld,dash] \ar[rd, dash] \ar[rrrd, dash] &&&\\ \circ \ar[rrrd, dash]&& \circ \ar[rd, dash] && \circ \ar[ld, dash] && \circ \ar[llld, dash] \\ &&&\circ &&&
\end{tikzcd}$ admits three orthocomplementations.
\item The hexagon lattice $\begin{tikzcd}[column sep={1.5em,between origins},row sep={1.7em,between origins}]
& \circ \ar[ld, dash] \ar[rd, dash] & \\
a \ar[d, dash] & & b \ar[d, dash] \\
c \ar[rd, dash] & & d \ar[ld, dash] \\
& \circ &
\end{tikzcd}$ admits a unique orthocomplementation, but it is not uniquely complemented. Indeed both of the functions $f: \begin{tikzcd}[column sep={1.5em,between origins},row sep={1.7em,between origins}]
& \circ \ar[ld, dash] \ar[rd, dash] & \\
a \ar[d, dash] \ar[rr, leftrightarrow] & & b \ar[d, dash] \\
c \ar[rd, dash] \ar[rr, leftrightarrow] & & d \ar[ld, dash] \\
& \circ &
\end{tikzcd}$ and $g: \begin{tikzcd}[column sep={1.5em,between origins},row sep={1.7em,between origins}]
& \circ \ar[ld, dash] \ar[rd, dash] & \\
a \ar[d, dash] \ar[rrd, leftrightarrow] & & b \ar[d, dash] \\
c \ar[rd, dash] \ar[rru, leftrightarrow] & & d \ar[ld, dash] \\
& \circ &
\end{tikzcd}$ are complementations. Only $g$ is an orthocomplementation, because $f$ does not reverse order: $a \geq c$  and $f(a) = b \geq d = f(c)$.
\end{itemize}
\end{example}

\begin{theorem}[De Morgan's laws]
Let $L$ be an ortholattice, then for all $x,y\in L$
\begin{enumerate}
\item $\overline{(x\vee y)} = \overline{x} \wedge \overline{y}$;
\item $\overline{(x\wedge y)} = \overline{x} \vee \overline{y}$.
\end{enumerate}
\end{theorem}
\begin{proof}
From $x\leq x\vee y$ and $y\leq x\vee b$, we have $\overline{(x\vee b)} \leq \overline{x}$ and $\overline{(x\vee b)} \leq \overline{y}$. By \ref{corollary:orderLattice} we have $\overline{(x\vee y)}\leq \overline{x} \wedge \overline{y}$. For the other inequality we start with $\overline{x} \geq \overline{x} \wedge \overline{y}$ and $\overline{y} \geq \overline{x} \wedge \overline{y}$ to obtain $x\vee y \leq \overline{(\overline{x} \wedge \overline{y})}$, which implies $\overline{x} \wedge \overline{y} \leq \overline{(x\vee y)}$.
\end{proof}

\begin{proposition}
Let $L$ be a complemented lattice.

If the complement is an involution and satisfies either of the de Morgan laws, then $L$ is an ortholattice.
\end{proposition}
\begin{proof}
Assume the de Morgan law $\overline{(x\vee y)} = \overline{x} \wedge \overline{y}$ holds. Assume $x\leq y$. Then $x\vee y = y$, so
\[ \overline{y} = \overline{(x\vee y)} = \overline{x} \wedge \overline{y} \]
meaning $\overline{y} \leq \overline{x}$.
\end{proof}

The requirement that the complement be an involution is important. There are lattices in which the de Morgan laws hold that are not ortholattices.

\begin{example}
The lattice $\mathbf{M}_3 = \begin{tikzcd}[column sep={2em,between origins},row sep={2em,between origins}]
&\top \ar[ld, dash] \ar[d,dash] \ar[rd, dash] &\\ a \ar[rd, dash]& b \ar[d, dash] & c \ar[ld, dash] \\ &\bot &
\end{tikzcd}$ admits a complementation $'$ such that $a' = b$, $b' = c$ and $c' = a$ that is clearly not an orthocomplementation, but does satisfy the de Morgan laws.
\end{example}

TODO Ockham algebras, De Morgan algebras, Kleene algebras, Stone algebras.

\subsection{Boolean lattices}
\begin{definition}
A distributive complemented lattice is called a \udef{Boolean lattice} or \udef{Boolean algebra}.
\end{definition}

\begin{proposition} \label{prop:BooleanComplementLargestDisjoint}
Let $L$ be a Boolean lattice. For all $x\in L$ the complement $\overline{x}$ is the largest element disjoint from $x$.
\end{proposition}
\begin{proof}
Let $x\in L$. We need to show that $y\leq \overline{x}$ for all $y\in \{x\}^\perp$, or, equivalently, $\overline{x} \vee y = \overline{x}$. By the uniqueness of the complement, \ref{prop:distributiveComplementUnique}, it is enough to prove that $\overline{x} \vee y$ is a complement. Indeed
\begin{align*}
x \vee (\overline{x} \vee y) &= (x\vee \overline{x}) \vee y = \top \vee y = \top \\
x \wedge (\overline{x} \vee y) &= (x\wedge \overline{x})\vee (x\wedge y) = \bot \vee \bot = \bot.
\end{align*}
\end{proof}

\begin{proposition}
Every Boolean lattice is an ortholattice.
\end{proposition}
\begin{proof}
By \ref{prop:distributiveComplementUnique} we know that a Boolean lattice is uniquely complemented, so its complement is an involution by \ref{lemma:uniqueComplementInvolution}. We just need to check the complementation reverses order.

Let $x\leq y$. Then $\overline{y} \wedge x \leq \overline{y} \wedge y = \bot$, so $\overline{y} \wedge x = \bot$ and thus $\overline{y}$ is disjoint from $x$. Then $\overline{y} \leq \overline{x}$ follows from \ref{prop:BooleanComplementLargestDisjoint}.
\end{proof}
\begin{corollary}
The laws of de Morgan hold in Boolean lattices.
\end{corollary}

\begin{proposition}
Let $L$ be a Boolean lattice with complement and $a,b\in L$. Then $[a,b]$ is a Boolean lattice with complementation $x\mapsto \widetilde{x} = (\overline{x} \wedge b)\vee a$. 
\end{proposition}
\begin{proof}
Clearly $[a,b]$ inherits distributivity from $L$. All we need to show is that for all $x\in [a,b]$ the complement of $x$ in $[a,b]$ is $\widetilde{x}$. We calculate
\begin{align*}
x \wedge \widetilde{x} &= x\wedge ((\overline{x} \wedge b)\vee a) = (x\wedge(\overline{x} \wedge b))\vee (x\wedge a) = (( x\wedge \overline{x}) \wedge b)\vee (x\wedge a) = (\bot \wedge b)\vee a = \bot \vee a = a \\
x \vee \widetilde{x} &= x\vee ((\overline{x} \wedge b)\vee a) = ((x\vee \overline{x}) \wedge (x\vee b))\vee a = (\top \wedge b) \vee a = b\vee a = b.
\end{align*}
\end{proof}

\begin{proposition}
An algebra of sets is a Boolean algebra with as top the unit $\Omega$, as bottom the empty set $\emptyset$ and as complement $A\mapsto A^c = \Omega\setminus A$.
\end{proposition}

\section{Completions}
TODO: Dedekind-MacNeille completion.

\section{Lattices of subgroups}

\section{Formal concept analysis}
\url{file:///C:/Users/user/Downloads/978-3-540-31881-1.pdf}
\url{file:///C:/Users/user/Downloads/978-3-662-49291-8.pdf}

\begin{definition}
A \udef{context} is a triple $\seq{G,M,I}$ where $G$ is a set of \udef{objects}, $M$ is a set of \udef{attributes} and $I\subseteq G\times M$ is a binary relation.

For $g\in G, m\in M$ we interpret $gIm$ as ``the object $g$ has the attribute $m$''.



A \udef{concept} is a pair $\seq{A,B}$ where $A\subset G$ is a set of objects and $B\subset M$ is a set of attributes such that
\begin{itemize}
\item $A = \setbuilder{g\in G}{\forall m\in B: gIm}$;
\item $B = \setbuilder{m\in M}{\forall g\in A: gIm}$
\end{itemize}
\end{definition}
The letters $G$ and $M$ come from the German: Gegenstände and Merkmale. The $I$ is for ``incidence relation'' (I think).





\chapter{Groups}
\input{groups}


\chapter{Rings}
TODO: addition, multiplication and scalar multiplication of functions: pointwise.

TODO: unital homomorphisms; unital subalgebra.

\begin{lemma}
Let $R$ be a ring and $a\in R$.
\begin{enumerate}
\item If $a$ has a left and a right inverse, they are equal. Thus $a$ has an inverse.
\item The inverse of $a$ is unique, if it exists.
\end{enumerate}
\end{lemma}
\begin{proof}
Let $l$ be a left inverse of $a$ and $r$ a right inverse. Then
\[ l = l(ar) = (la)r = r. \]
The unicity of the inverse is an easy consequence.
\end{proof}

\begin{lemma} \label{lemma:productInvertibility}
Let $R$ be a ring and $a,b\in R$. Then $a$ and $b$ are invertible \textup{if and only if} $ab$ and $ba$ are invertible.
\end{lemma}
\begin{proof}
Assume $a,b$ invertible. Then $b^{-1}a^{-1}$ is an inverse for $ab$ and $a^{-1}b^{-1}$ is an inverse for $ba$.

Assume both $ab$ and $ba$ have inverses. Then from
\begin{align*}
a[b(ab)^{-1}] &= \vec{1} & [(ba)^{-1}b]a &= \vec{1} \\
[(ab)^{-1}a]b &= \vec{1} & b[a(ba)^{-1}] &= \vec{1}
\end{align*} 
we see that both $a$ and $b$ have left and right inverses.
\end{proof}

\begin{proposition} \label{prop:everyProperIdealInMaximalIdeal}
Every proper ideal is contained in a maximal ideal.
\end{proposition}

\begin{lemma} \label{lemma:nonInvertibleGeneratedIdeals}
Let $R$ be a unital ring. If $a\in R$ is non-invertible, then the generated ideal $(a)$ is not the whole ring.
\end{lemma}
\begin{proof}
If $(a) = R$, then $1\in (a)$, implying $ab=1$ for some $b\in R$. A contradiction.
\end{proof}

\begin{proposition}
Let $f$ be a ring homomorphism. If $f$ is invertible as a function (i.e. bijective), its inverse $f^{-1}$ is also a ring homomorphism.
\end{proposition}

\begin{proposition} \label{prop:kernelIsIdeal}
Kernel of Ring Homomorphism is Ideal
\end{proposition}

\begin{definition}
A $*$-rng is a structured set $(R,+,\cdot, *)$, where $R$ is a rng and $*:R\to R$ is an involutive anti-automorphism. That is, $\forall x,y\in R$:
\begin{itemize}
\item $(xy)^* = y^*x^*$;
\item $(x+y)^* = x^* + y^*$;
\item $(x^*)^* = x$.
\end{itemize}
This is also known as an \udef{involutive rng} or \udef{rng with involution}.
\end{definition}
\begin{lemma}
If $R$ is a unital ring with involution, then $1^* = 1$.
\end{lemma}
\begin{proof}
From $1^*x = (x^*1)^* = (x^*)^* = x$, we see that $1^*$ is a multiplicative identity, which is unique.
\end{proof}
\begin{definition}
An element of a $*$-rng is \udef{self-adjoint} if $x^* = x$.
\end{definition}

\section{Group rings}
\begin{definition}
Let $G$ be a finite group and $R$ a r(i)ng. The \udef{group ring} $RG$ is the set of functions $(G\to R)$ with pointwise addition and the convolution product
\[ (x\star y)(g) = \sum_h x(h)y(h^{-1}g) = \sum_{g=hk}x(h)y(k) \]
for all $x,y\in RG$ and $g\in G$. 
\end{definition}
The a group ring can be seen as a free module generated by $G$. (TODO: this as definition?)



\chapter{Fields}
\section{Totally ordered fields}
\begin{definition}
Let $K$ be a set with binary operations $+,\cdot$ such that $(K,+,\cdot)$ is a field and a binary relation $\leq$ such that $(F,\leq)$ is a total order. Then the structured set $(K,+,\cdot,\leq)$ is a \udef{totally ordered field} if $\forall a,x,y\in K$:
\begin{enumerate}
\item $x\leq y \implies x+a \leq y+a$;
\item $x\leq y \land a\geq 0 \implies ax \leq ay$;
\item $x\leq y \land a\leq 0 \implies ax \geq ay$.
\end{enumerate}
\end{definition}

\begin{lemma}
Let $(K,+,\cdot,\leq)$ be a totally ordered field and $a,b,c,d\in K$. Then
\begin{enumerate}
\item $a\leq b \land c\leq d \implies (a+c) \leq (b+d)$;
\item $a\leq b \implies -b\leq -a$;
\item $a\geq 0 \iff -a\leq 0$;
\item $a\geq 0 \land b\geq 0 \implies ab \geq 0$;
\item $a\geq 0 \implies a^n \geq 0$ for all $n\in\N$;
\item $a\leq 0 \implies (a^{2n} \geq 0 \land a^{2n+1}\leq 0)$ for all $n\in\N$;
\item $a > 0 \iff a^{-1} > 0$ and $a < 0 \iff a^{-1} < 0$;
\item if $b \geq a>0$, then $b^{-1} \leq a^{-1}$;
\item $0<1$.
\end{enumerate}
\end{lemma}
\begin{proof}
(1) By applying point 1. of the definition twice, we get $(a+c)\leq(b+c)\leq(b+d)$.

(2) This is the result of multiplying by $-1$.

(3) Idem, using $-0=0$.

(4) Special case of point 2. of the definition.

(5) By induction on $n$ and point 2. of the definition.

(6) By induction on $n$ and point 3. of the definition.

(7) By multiplying $a \geq 0$ with $(a^{-1})^{2}$, which is positive, we get $a^{-1}\geq 0$. Also $a\neq 0 \iff a^{-1}\neq 0$.

(8) By point 7. and point 4. of the lemma $a^{-1}b^{-1}$ is positive, so multiplying $b\geq a$ by $a^{-1}b^{-1}$ yields $b^{-1} \leq a^{-1}$.

(9) Assume, towards a contradiction, that this is false, so $1\leq 0$. Then $1$ is negative and multiplying the inequality with $1$ yields $1\cdot 1 \geq 1\cdot 0$, or $1\geq 0$. Taking both inequalities gives $1=0$ by anti-symmetry, which is prohibited for fields.
\end{proof}

\begin{definition}
Let $F\subset K$ be totally ordered fields. Then we call $F$ \udef{dense} in $K$ if
\[ \forall a,b\in K: \exists x\in F: a<x<b. \]
\end{definition}
TODO: topology definition?

\chapter{Valuation theory}
Absolute values on integral domains.