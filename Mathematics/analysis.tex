\url{file:///C:/Users/user/Downloads/0-8176-4442-3.pdf}
\url{https://link.springer.com/content/pdf/10.1007%2F978-0-387-84895-2.pdf}
\url{https://zr9558.files.wordpress.com/2014/08/a-guide-to-distribution-theory-and-fourier-transforms.pdf}
\url{file:///C:/Users/user/Downloads/978-0-8176-4675-2.pdf}

Integral mean value theorem \url{https://en.wikipedia.org/wiki/Mean_value_theorem#Mean_value_theorems_for_definite_integrals}

TODO: Hölder, Monkowski, Lyapounov

\chapter{Limits}

TODO: squeeze theorem!

\section{Bachmann-Landau notation}
\subsection{Asymptotic bounds: $O, \Theta, \Omega$}
\begin{definition}
Let $(X,\mathcal{T})$ be a topological space and $(V,\norm{\cdot})$ a normed space. Let $x_0 \in X$ and $f,g: X\setminus\{x_0\}\to V$ be functions. The statement
\begin{itemize}
\item ``$f(x) = O(g(x))$ as $x\to x_0$'' means there exists a neighbourhood $S$ of $x_0$ and a constant $M\in\R$ such that
\[ \forall x\in S:\; \norm{f(x)} \leq M\norm{g(x)}; \]
\item ``$f(x) = \Omega(g(x))$ as $x\to x_0$'' means there exists a neighbourhood $S$ of $x_0$ and a constant $M\in\R$ such that
\[ \forall x\in S:\; \norm{f(x)} \geq M\norm{g(x)}; \]
\item ``$f(x) = \Theta(g(x))$ as $x\to x_0$'' means there exists a neighbourhood $S$ of $x_0$ and constants $M_1,M_2\in\R$ such that
\[ \forall x\in S:\; M_1\norm{g(x)} \leq \norm{f(x)} \leq M_2\norm{g(x)}. \]
\end{itemize}
We may add the word ``uniformly'' to these statements to mean we can take $S=X$.

We may suppress the $x$ dependence for legibility and write e.g\ $f = O(g)$ instead.
\end{definition}

\begin{lemma}
Let $(X,\mathcal{T})$ be a topological space and $(V,\norm{\cdot})$ a normed space. Let $x_0 \in X$ and $f,g: X\setminus\{x_0\}\to V$ be functions. Then
\begin{enumerate}
\item $f = O(g)$ \textup{if and only if} $g = \Omega(f)$ as $x\to x_0$;
\item $f = \Theta(g)$ \textup{if and only if} $f = O(g)$ and $f = \Omega(g)$ as $x\to x_0$.
\end{enumerate}
\end{lemma}

\begin{lemma}
Let $(X,\mathcal{T})$ be a topological space and $(V,\norm{\cdot})$ a normed space. Let $x_0 \in X$ and $f: X\setminus\{x_0\}\to V$ be functions. Then ``being $\Theta(f)$ as $x\to x_0$'' is an equivalence relation.
\end{lemma}

\begin{lemma}
Let $(X,\mathcal{T})$ be a topological space and $(V,\norm{\cdot})$ a normed space. Let $x_0 \in X$ and $f,g: X\setminus\{x_0\}\to V$ be functions. Then
\begin{enumerate}
\item $f(x) = O(g(x))$ as $x\to x_0$ \textup{if and only if} there exists a neighbourhood $S$ of $x_0$ such that $\norm{f(x)}/\norm{g(x)}$ is bounded on $S$;
\item $f(x) = \Omega(g(x))$ as $x\to x_0$ \textup{if and only if} there exists a neighbourhood $S$ of $x_0$ such that $\norm{f(x)}/\norm{g(x)}$ is bounded below on $S$ by a strictly positive constant.
\end{enumerate}
\end{lemma}

\subsection{Asymptotic domination and equality: $o,\sim,\omega$}
\begin{definition}
Let $(X,\mathcal{T})$ be a topological space and $(V,\norm{\cdot})$ a normed space. Let $x_0 \in X$ and $f,g: X\setminus\{x_0\}\to V$ be functions. The statement
\begin{itemize}
\item ``$f(x) = o(g(x))$ as $x\to x_0$'' means $\lim_{x\to x_0} \frac{\norm{f(x)}}{\norm{g(x)}} = 0$;
\item ``$f(x) \sim_{x_0} g(x)$'' means $\lim_{x\to x_0} \frac{\norm{f(x)}}{\norm{g(x)}} = 1$;
\item ``$f(x) = \omega(g(x))$ as $x\to x_0$'' means $\lim_{x\to x_0} \frac{\norm{f(x)}}{\norm{g(x)}} = \infty$.
\end{itemize}
\end{definition}

\begin{lemma}
Let $(X,\mathcal{T})$ be a topological space and $(V,\norm{\cdot})$ a normed space. Let $x_0 \in X$ and $f,g: X\setminus\{x_0\}\to V$ be functions.

Then $f = o(g)$ \textup{if and only if} $g = \omega(f)$ as $x\to x_0$.
\end{lemma}

\begin{lemma}
Let $(X,\mathcal{T})$ be a topological space and $(V,\norm{\cdot})$ a normed space. Let $x_0 \in X$ and $f,g: X\setminus\{x_0\}\to V$ be functions. Then
\begin{enumerate}
\item $f\sim_{x_0} g \iff (f-g)\in o(g)$ as $x\to x_0$;
\item $\sim_{x_0}$ is an equivalence relation;
\item $f \sim_{x_0} g \implies f = \Theta(g)$ as $x\to x_0$.
\end{enumerate}
\end{lemma}

\begin{lemma}
Let $(X,\mathcal{T})$ be a topological space and $(V,\norm{\cdot})$ a normed space. Let $x_0 \in X$ and $f,g, h,k: X\setminus\{x_0\}\to V$ be functions. Then
\begin{enumerate}
\item if $f = o(h)$ and $g = O(k)$, then $fg = o(hk)$ as $x\to x_0$;
\item if $f = O(h)$ and $g = O(k)$, then $fg = O(hk)$ as $x\to x_0$;
\item if $f = o(h)$ and $h = O(k)$, then $f = o(k)$ as $x\to x_0$.
\end{enumerate}
\end{lemma}

\chapter{Differentiation}
\url{file:///C:/Users/user/Downloads/978-1-4614-3894-6.pdf}
\url{file:///C:/Users/user/Downloads/2011_Bookmatter_TheRicciFlowInRiemannianGeomet.pdf}

\section{Derivatives of functions between normed groups}
\begin{definition}
Let $G, H$ be normed groups, $f:G\to H$ a function and $x_0\in G$. We call $f$ \udef{differentiable} if there exists a continuous homomorphism $A_{x_0}$ such that
\[ \lim_{x\to 1}\frac{\norm{f(xx_0)f(x_0)^{-1}A_{x_0}(x)^{-1}}}{\norm{x}} = 0. \]
We call $A_{x_0}$ a \udef{derivative} of $f$ at $x_0$.
\end{definition}

\begin{proposition}
Let $G, H$ be normed groups, $f:G\to H$ a function and $x_0\in G$. There exists at most one derivative of $f$ at $x_0$.
\end{proposition}
\begin{proof}
TODO
\end{proof}

\subsection{Fréchet derivatives on normed vector spaces}

\section{Directional derivatives}

\section{For real normed vector spaces}
TODO: directional / Gateaux derivative for locally convex TVSs?
\subsection{Directional derivatives}
\begin{definition}
Let $V,W$ be normed vector spaces and $f:U\subseteq V\to W$ a function defined on an open subset $U$. For $a,u\in V$, we call
\[ \partial_u f|_a \defeq \lim_{t\to 0} \frac{f(a+tu) - f(a)}{t} \]
the \udef{directional derivative} of $f$ at $a$ in the direction $u$,if it exists.

\begin{itemize}
\item If $V= \R^n$, then we define $\pd{f}{x^i}f \defeq \partial_{\vec{e}_i}f$, where $\mathcal{E} = \seq{\vec{e}_i}_{i=1}^n$ is the standard basis of $\R^n$. These directional derivatives are called the \udef{partial derivatives} w.r.t. the basis $\mathcal{E}$.
\item If $V = \R$, then there is, up to scalar multiplication, only one direction $u$. We denote the directional derivative $f'(a) \defeq \partial_u f|_a$.
\end{itemize}
\end{definition}
For a given function $f:V\to W$, the directional derivative is a partial function of both a direction and a point:
\[ (V\times V) \not\to W:\quad (u,a) \mapsto \partial_u f(a)  \]

Partial application in the first argument gives a function
\[ \partial_u f:\; V\not\to W:\; a\mapsto \partial_u f(a) \defeq \partial_u f|_a \]
that is also referred to as the \udef{directional derivative} of $f$ in the direction $u$.

\begin{lemma}
Let $f,g: V\to W$, $u\in V$ and $\lambda\in\F$, then
\begin{enumerate}
\item $\partial_u(f+g) = \partial_uf + \partial_u g$;
\item $\partial_u(fg) = (\partial_uf)g + f(\partial_u g)$;
\item $\partial_u(\lambda f) = \lambda \partial_uf$.
\end{enumerate}
\end{lemma}

\begin{proposition} \label{derivativeBilinearForm}
Let $B: V_1 \oplus V_2 \to W$ be a bilinear form. Then, for $(x,y),(a,b)\in V_1\oplus V_2$
\[ \partial_{(x,y)}B|_{(a,b)} = B(x,b) + B(a,y). \]
\end{proposition}
\begin{proof}
We calculate
\begin{align*}
\partial_{(x,y)}B|_{(a,b)} &= \lim_{t\to 0} \frac{B(a+tx, b+ty) - B(a,b)}{t} \\
&= \lim_{t\to 0} \frac{1}{t} (B(a,b) + tB(a,y) + tB(x,b) + t^2B(x,y) - B(a,b)) \\
&=B(x,b) + B(a,y) + \lim_{t\to 0} tB(x,y) \\
&= B(x,b) + B(a,y).
\end{align*}
\end{proof}

\subsubsection{Partial derivatives}
TODO notation $D^\alpha$ for multiindex $\alpha$. Also $|\alpha| = \sum_i \alpha_i$.

\subsubsection{Gateaux derivative}
\begin{definition}
Partial application of the directional derivative in the second argument gives a function
\[ \diff{_af}: V\not\to W: u\mapsto \diff{_af}(u) \defeq \partial_u f|_a = \lim_{t\to 0} \frac{f(a+tu) - f(a)}{t} \]
that is referred to as the \udef{Gateaux differential} of $f$ at the point $a$.

If $\diff{_af}: V\not\to W$ is a bounded linear map, we will refer to it as the \udef{Gateaux derivative}.
\end{definition}
The Gateaux differential is homogeneous even if it is not linear:
\begin{lemma}
Let $f:V\to W$ be a function between normed spaces and $a,u\in V$. If $\partial_u f$ is defined at $a$, then
\[ \diff{_a f}(\lambda u) = \partial_{\lambda u}f(a) = \lambda\partial_u f(a) = \lambda \diff{_a f}(u) \qquad \forall \lambda\in\F. \]
\end{lemma}
\begin{proof}
$\partial_{\lambda u}f(a) = \lim_{t\to 0} \frac{f(a+t\lambda u) - f(a)}{t} = \lim_{t\lambda\to 0} \frac{f(a+t\lambda u) - f(a)}{t \lambda / \lambda} = \lambda\partial_u f(a)$.
\end{proof}

TODO mean value theorem?

\subsection{Hadamard derivative}

\subsection{Fréchet derivative}
\begin{definition}
If a function has a (bounded linear) Gateaux derivative at $a$ and the limit in the definition of the derivative
\[ \diff{_af}: V\not\to W: u\mapsto \diff{_af}(u) \defeq \partial_u f|_a = \lim_{t\to 0} \frac{f(a+tu) - f(a)}{t} \]
is uniform in all $u$ on the $S(\vec{0},1)$, then we say the function is \udef{(Fréchet) differentiable} at $a$ and has \udef{Fréchet derivative} $\diff{_af}$.

We may also write $\diff{f}$, leaving the $a$ implicit.
\end{definition}

\begin{proposition}
Let $V,W$ be normed vector spaces and $f:U\subseteq V\to W$ a function defined on an open subset $U$. Let $a\in V$.

Then $f$ is Fréchet differentiable at $a$ \textup{if and only if} there exists a bounded linear map $A: V\to W$ such that $f(a+x)$ can be written as
\[ f(a+x) = f(a) + A(x) + o(x) \qquad \text{as} \qquad x\to 0. \]
In this case $A = \diff{_af}$.
\end{proposition}
\begin{proof}
First assume $f$ is Fréchet differentiable at $a$. Then
\begin{multline*}
\forall \varepsilon>0:\exists \delta>0: \; \forall u\in S(\vec{0},1): \forall t\in\R: \; t< \delta \implies \varepsilon > \\ \norm{\frac{f(a+tu) - f(a)}{t} - \diff{_af}(u)} = \frac{\norm{f(a+tu) - f(a)- \diff{_af}(tu)}}{|t|} = \frac{\norm{f(a+tu) - f(a)- \diff{_af}(tu)}}{\norm{tu}}.
\end{multline*}

Now each vector $x$ in $V$ can be written as $tu$ for some $t\in\R$ and $u\in S(\vec{0},1)$, so this can be written as
\[ \forall \varepsilon>0:\exists \delta>0: \; \forall x\in V: \; \norm{x}< \delta \implies  \varepsilon > \frac{\norm{f(a+x) - f(a)- \diff{_af}(x)}}{\norm{x}} \]
which is exactly the statement $f(a+x) = f(a) + \diff{_af}(x) + o(x)$ as $x\to 0$.

The logic can be reversed to obtain the equivalence.
\end{proof}

\begin{proposition}
If a function is Fréchet differentiable at a point $a$, then it is continuous at $a$.
\end{proposition}
\begin{proof}
Assume $f$ is has Fréchet derivative $A$. Then
\[ 0 = \lim_{x\to a} \norm{f(x) - f(a) - \diff{_af}(x-a)} = \norm{\lim_{x\to a}f(x) - f(a) - \diff{_af}(\lim_{x\to a} x-a)} = \norm{\lim_{x\to a}f(x) - f(a)}. \]
\end{proof}

\begin{lemma}
The Fréchet derivative is the same for equivalent norms.
\end{lemma}

\subsubsection{Link with Gateaux derivative}
\url{https://link.springer.com/content/pdf/bbm%3A978-3-642-16286-2%2F1.pdf}
\url{http://www.m-hikari.com/ams/ams-password-2008/ams-password17-20-2008/behmardiAMS17-20-2008.pdf}
\begin{proposition}
If a function between subsets of normed spaces is Fréchet differentiable, it is also Gateaux differentiable and the Fréchet derivative is equal to the Gateaux derivative.
\end{proposition}
\begin{proof}
Let $A$ be the Fréchet derivative of $f: U\subseteq V\to W$. Then for all $u\in V$
\begin{align*}
0 &= \lim_{t\to 0} \frac{\norm{f(a+tu) - f(a) - A(tu)}}{\norm{tu}} = \lim_{t\to 0} \frac{\norm{(f(a+tu) - f(a))/t - A(u)}}{\norm{u}} \\
&= \frac{\norm{\lim_{t\to 0}(f(a+tu) - f(a))/t - A(u)}}{\norm{u}} = \frac{\norm{\diff{_af}(u) - A(u)}}{\norm{u}}. 
\end{align*}
\end{proof}
For this reason we will also denote the Fréchet derivative of $f$ at $a$ as $\diff{_a f}$. We will sometimes also write $f'(a)$.

\begin{example}
TODO!

There are functions that have a Gateaux derivative, but not a Fréchet derivative at certain points. For example
\[ f: \R^2\to \R: (x,y) \mapsto \begin{cases}
\frac{xy}{x^2+y^2} & (x,y)\neq (0,0) \\0 & (x,y) = (0,0)
\end{cases} \]
which has $\partial_{\vec{u}}f(\vec{0}) = 0$ for all $\vec{u}\in \R^2$ and thus the Gateaux derivative at zero is $\diff{f} = 0$.

Composing $f$ with $t\mapsto (t,t^2)$ yields the function $t\mapsto \begin{cases}
t^{-2} & t\neq 0 \\ 0 & t=0
\end{cases}$, which is not continuous at $0$. So $f$ is not continuous at zero and a fortiori is not Fréchet differentiable.
\end{example}

\begin{proposition}
If there exists a basis $\beta$ of $V$ such that the partial derivatives of $f:U\subseteq V\to W$ w.r.t. $\beta$ exist and are continuous in $a\in V$, then $f$ is Fréchet differentiable in $a$.
\end{proposition}
\begin{proof}

\end{proof}
TODO for finite dimensions! Expand to criterion for Gateaux to Fréchet.
\begin{example}

\end{example}

\subsubsection{The Jacobian}
\begin{definition}
Let $f:U\subseteq\R^m\to\R^n$ be a function. Then $A_{\diff{f}}$ is a matrix with
\[ [A_{\diff{f}}]_{ij} = [\diff{f}\vec{e}_j]_i = \left[\pd{f}{x^j}\right]_i. \]
This matrix is called the \udef{Jacobian} $J_f$.
\end{definition}


\subsection{Differentiation of a normed algebra}

\begin{proposition}[Leibniz rule]
Let $A$ be a normed algebra and $a,b\in (\R \to A)$ elements that have derivatives. Then
\[ (ab)' = a'b + b'a. \]
\end{proposition}
\begin{proof}
We calculate
\begin{align*}
0 &= 0\cdot a'(t)b'(t) = \lim_{\epsilon \to 0} \epsilon a'(t)b'(t) \\
&= \lim_{\epsilon \to 0} \epsilon \frac{a(t+\epsilon) - a(t)}{\epsilon}\frac{b(t+\epsilon) - b(t)}{\epsilon} \\
&= \lim_{\epsilon \to 0}\frac{a(t+\epsilon)b(t+\epsilon) - a(t+\epsilon)b(t) - a(t)b(t+\epsilon) + a(t)b(t)}{\epsilon} + \frac{a(t)b(t)}{\epsilon} - \frac{a(t)b(t)}{\epsilon} \\
&= \lim_{\epsilon \to 0} \frac{a(t+\epsilon)b(t+\epsilon) - a(t)b(t)}{\epsilon} - \frac{a(t+\epsilon) - a(t)}{\epsilon}b(t) - a(t)\frac{b(t+\epsilon) - b(t)}{\epsilon} \\
&= (ab)' - a'b - ab'.
\end{align*}
\end{proof}

\begin{proposition} \label{derivativeIdempotent}
Let $A$ be an algebra and $p\in A$ such that $p^2 = p$ and $p'$ exists. Then
\begin{enumerate}
\item $p' = pp'+ p'p$;
\item $pp'p = 0$;
\item $(p')^2 = p'pp' + p(p')^2p$;
\item $p^{\prime\prime} = 2(p')^2 + pp^{\prime\prime} + p^{\prime\prime}p$;
\item $pp^{\prime\prime}p = -2p(p')^2p$.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) We calculate $p' = (p^2)' = pp'+ p'p$.

(2) Multiply (1) by $p$ on the left and right.

(3) We calculate $(p')^2 = (pp'+ p'p)(pp'+ p'p) = pp'pp' + pp'p'p + p'ppp' + p'pp'p = 0p + pp'p'p + p'pp' + p'0$.

(4) Take derivative of (1).

(5) Multiply (3) by $p$ on the left and right.
\end{proof}
\begin{corollary}
Let $\Tr$ be a trace functional on $A$ and $p\in A$ as before. Then $\Tr(p') = 0$.
\end{corollary}
\begin{proof}
$\Tr(p') = \Tr(pp'+ p'p) = \Tr(p^2p')+ \Tr(p'p^2) = \Tr(pp'p) + \Tr(pp'p) = 2Tr(0) = 0$.
\end{proof}
\begin{proposition}
Let $p_0,p_1$ be differentiable idempotents such that $p_0p_1 = 0 = p_1p_0$. Then $p_0'p_1 = -p_0p_1'$.
\end{proposition}
\begin{proof}
We have $0 = p_0p_1$, so $0 = 0' = p_0'p_1 + p_0p_1'$.
\end{proof}
\begin{corollary}
Let $p_0,p_1$ be differentiable idempotents such that $p_0p_1 = 0 = p_1p_0$. Then
\begin{enumerate}
\item $p_1p_0'p_0 = -p_1p_1'p_0$;
\item $p_1p_0'p_1 = 0$;
\item $p_1(p_0')^2p_1 = p_1p_1'p_0p_1'p_1$;
\item $p_0(p_0')^2p_1 = 0$;
\item $p_1p^{\prime\prime}_0p_1 = 2p_1(p_0')^2p_1$.
\end{enumerate}
If in addition $p_2$ is a differentiable idempotent such that $p_0p_2 = 0 p_2p_0$ and $p_1p_2 = 0 p_2p_1$, then
\begin{enumerate} \setcounter{enumi}{5}
\item $p_1p_0'p_2 = 0$.
\end{enumerate}
\end{corollary}
\begin{proof}
(1) We have
\[ p_1p_0'p_0 = p_1(p_1p_0')p_0 = -p_1(p_1'p_0)p_0 = -p_1p_1'p_0. \]

(2) We have $p_1p_0'p_1 = -(p_1'p_0)p_1 = -p_1'(p_0p_1) = 0$.

(3) We have $p_1(p_0')^2p_1 = (p_1p_1p_0')(p_0'p_1p_1) = (p_1p_1'p_0)(p_0p_1'p_1)$.

(4) We have $p_0(p_0')^2p_1 = (p_0p_0')(p_0'p_1) = -(p_0p_0')(p_0p_1') = -(p_0p_0'p_0)p_1' = 0$.

(5) We have, using \ref{derivativeIdempotent}, $p_1p^{\prime\prime}_0p_1 = p_1(2(p'_0)^2 + p_0p_0^{\prime\prime} + p_0^{\prime\prime}p_0)p_1 = 2p_1(p_0')^2p_1$.

(6) We have $(p_1p_0')p_2 = - (p_1'p_0)p_2 = - p_1'(p_0p_2) = 0$.
\end{proof}

\section{Taylor expansion}
Radius of convergence

\section{Classification of spaces}
\begin{definition}
Let $X,Y$ be subsets of normed vector spaces and $X$ be open. We call a function $f: X\to Y$
\begin{itemize}
\item \udef{smooth} at $x_0\in V$ if all derivatives of $f$ at $x_0$ exist;
\item \udef{analytic} at $x_0\in V$ if the Taylor series of $f$ at $x_0$ exists and has non-zero radius of convergence.
\end{itemize}
\end{definition}
\begin{lemma}
Let $f: X\to Y$ be a smooth function. Then all derivatives are continuous.
\end{lemma}

\begin{definition}
Let $X,Y$ be subsets of normed vector spaces and $X$ be open.
\begin{itemize}
\item $\cont^r(X,Y)$ is the space of functions in $(X \to Y)$ whose first $r$ derivatives exist and are continuous;
\item $\cont^\infty(X,Y)$ is the space of functions in $(X \to Y)$ that are smooth at all points in $X$;
\item $\cont^\omega(X,Y)$ is the space of functions in $(X \to Y)$ that are analytic at all points in $X$.
\end{itemize}
If $Y = \C$, we write $\cont^r(X), \cont^\infty(X)$ and $\cont^\omega(X)$. We can also use subscripts $_0$ and $_c$ to denote the extra conditions of vanishing at infinity and having compact support.
\end{definition}



\chapter{Non-standard analysis}
\url{http://www.lightandmatter.com/calc/}

\begin{proposition}
Let $f:\R\to\R$ be a real function. Then $f$ is continuous at $x\in\R$ \textup{if and only if} for all infinitesimal $\delta$ there exists an infinitesimal $\epsilon$ such that
\[ f(x+\delta) = f(x) + \epsilon. \]
Alternatively we can state this as
\[ f(x+\delta) \approx f(x) \]
for all infinitesimal $\delta$.
\end{proposition}

Clearly continuity is a requirement for differentiability: if $f(x+\delta) - f(x)$ is not infinitesimal, then $\frac{f(x+\delta) - f(x)}{\delta}$ will not be finite.

\begin{lemma} \label{chainLemma}
Let $f:\R\to\R$ be a real function and $y:\R\to\R$ a continuous function. Assume $f$ differentiable at $y_0\in\im(y)$. Consider $f$ as depending on $y$ and $y$ as depending on $x$. Then
\[ \left.\dod{f}{y}\right|_{y_0} = \st\left(\frac{\Delta_y f}{\Delta y}\right) = \st\left(\frac{\Delta_x f\circ y}{\Delta_x y}\right). \]
\end{lemma}
\begin{proof}
We calculate, setting $y_0 = y(x_0)$ and using continuity of $y$,
\begin{align*}
\st\left(\frac{\Delta_x f\circ y}{\Delta_x y}\right) &= \st\left(\frac{f(y(x_0+\Delta x)) -f(y(x_0))}{y(x_0+\Delta x) - y(x_0)}\right) = \st\left(\frac{f(y(x_0)+\delta) -f(y(x_0))}{y(x_0)+\delta - y(x_0)}\right) \\
&= \st\left(\frac{f(y(x_0)+\delta) -f(y(x_0))}{\delta}\right) = \left.\dod{f}{y}\right|_{y_0}.
\end{align*}
\end{proof}

\begin{proposition}[Chain rule]
Let $y,f$ be real functions, differentiable at points $x_0$ and $y_0=y(x_0)$, respectively. Then
\[ \left.\dod{f}{y}\right|_{y_0} \left.\dod{y}{x}\right|_{x_0} = \left.\dod{f\circ y}{x}\right|_{x_0}. \]
\end{proposition}
\begin{proof}
We calculate, using \ref{chainLemma},
\[ \left.\dod{f}{y}\right|_{y_0} \left.\dod{y}{x}\right|_{x_0} = \st\left(\frac{\Delta_y f}{\Delta y}\frac{\Delta_x y}{\Delta x}\right) = \st\left(\frac{\Delta_x f\circ y}{\Delta_x y}\frac{\Delta_x y}{\Delta x}\right) = \st\left(\frac{\Delta_x f\circ y}{\Delta x}\right) = \left.\dod{f\circ y}{x}\right|_{x_0}. \]
\end{proof}

\chapter{Series and sequences}
\input{series}

\chapter{Real functions}
\input{realFunctions}
\section{Transformations}
TODO + transforming the graph (translation x/y, scaling x/y)

\chapter{Real Analysis}
Dual numbers

Dini theorem

TODO: all versions of homogeneity.

The objects of study in real analysis are real functions, and more generally functions between Euclidean spaces, i.e.\ real, finite-dimensional, normed vector spaces.

\section{Limits}
In this section infinities can appear because we assume $\N$ and $\R$ are embedded in their Dedekind-MacNeille completions $\overline{\N} = \N\cup\{\infty\}$ and $\overline{\R} = \R\cup\{-\infty, +\infty\}$.

\url{https://en.wikipedia.org/wiki/Interchange_of_limiting_operations}


\subsection{Real functions}
Applying the definition of limits to functions in $\R$ gives the so-called $\varepsilon-\delta$ definition of limits:
\begin{proposition}
Let $f:A\subseteq\R\to\R$ be a real function and $p$ a limit point o $A$. Then $L\in \R$ is the limit of $f(x)$ as $x$ approaches $p$ \textup{if and only if}
\[ \forall \varepsilon>0: \exists \delta> 0: \forall x\in A: |x-p| < \delta \implies |f(x)-L|<\varepsilon. \]
\end{proposition}
TODO: criteria for limits involving infinities.

In addition we can define some special types of limits.
\begin{definition}
Let $f:A\subseteq\R\to\R$ be a function and $p$ a limit point of $A$. Then
\begin{itemize}
\item the \udef{left limit} of $f(x)$ as $x$ approaches $p$ is the limit of $f|_{A\cap]-\infty,p]}$ as $x\to p$, denoted
\[ \lim_{x\overset{<}{\to} p}f(x) \qquad \text{or} \qquad \lim_{x\to p^-}f(x); \]
\item the \udef{right limit} of $f(x)$ as $x$ approaches $p$ is the limit of $f|_{A\cap[p,+\infty[}$ as $x\to p$, denoted
\[ \lim_{x\overset{>}{\to} p}f(x) \qquad \text{or} \qquad \lim_{x\to p^+}f(x). \]
\end{itemize}
\end{definition}

\begin{lemma}
Let $f:A\subseteq\R\to\R$ be a function and $p$ a limit point of both $A\cap]-\infty,p]$ and $A\cap[p,+\infty[$. Then $\lim_{x\to p} f(x)$ exists if the left and right limit exist and are equal to each other. In this case
\[ \lim_{x\to p} f(x) = \lim_{x\to p^-} f(x) = \lim_{x\to p^+} f(x). \]
\end{lemma}

\subsection{Properties of limits}
TODO: for functions $X\to \R$.

We enumerate some of the properties for limits here. These properties are valid for all types of limit of real functions, so long as all limits in the equation are limits to the same point (or infinity, TODO elaborate!).  In fact the properties also hold true for sequences of real numbers.
\begin{itemize}
\item Taking the limit is a linear operation:
\[\lim  (f(x) + g(x)) = \lim  f(x) + \lim g(x)\]
\[\lim  (a\cdot f(x)) = a\cdot \lim  f(x) \qquad \forall a \in \R\]
\item The limit of the product:
\[ \lim (f(x)\cdot g(x)) = \left(\lim  f(x)\right) \cdot \left(\lim  g(x)\right) \]
\item The limit of the quotient (assuming $\lim  g(x) \neq 0$):
\[ \lim \left(\frac{f(x)}{g(x)}\right) = \frac{\lim  f(x)}{\lim  g(x)}  \]
\item The limit of a power (with $m$ an integer and $n$ a positive integer):
\[ \lim  [f(x)]^{m/n} = \left(\lim  f(x)\right)^{m/n} \]
\item Partial order is preserved. Assume $f(x) \leq g(x)$ on some interval containing $x_0$. Then
\[ \lim f(x) \leq \lim g(x) \]
The same is not true for the strict order $<$!
\end{itemize}

\subsubsection{The squeeze theorem}


\section{Continuity}
\begin{proposition}
Let $f:A\subseteq\R\to\R$ be a function and $p\in A\cap A'$, where $A'$ is the set of limit points of $A$. Then
\[ \text{$f$ is continuous at $p$} \quad\iff\quad \lim_{x\to p}f(x) = f(x). \]
\end{proposition}

\subsection{Left and right continuity}
TODO

\subsection{Discontinuities}
If a function $f:A\subseteq\R\to\R$ is not continuous at $p$, then $p$ is a limit point of $A$ by \ref{continuityAtIsolatedPoint} and \ref{notLimitPointSingletonOpen}.
\begin{definition}
Let $f:A\subseteq\R\to\R$ be a function and $p\in A$ such that $f$ is not continuous at $p$. Then
\begin{itemize}
\item if $\lim_{x\to p}f(x)$ exists and is finite, we call $p$ a \udef{removable discontinuity};
\item if both $\lim_{x\to p^-}f(x)$ and $\lim_{x\to p^+}f(x)$ exist and are finite, but are different, we call $p$ a \udef{jump discontinuity};
\item if either $\lim_{x\to p^-}f(x)$ or $\lim_{x\to p^+}f(x)$ do not exist, we call $p$ an \udef{essential discontinuity}.
\end{itemize}
Removable and jump discontinuities are also called \udef{discontinuities of the first kind}. Essential discontinuities are also called \udef{discontinuities of the second kind}.
\end{definition}
TODO: should discontinuities of type 1/x be considered essential?

\subsubsection{Jump discontinuities}
\begin{proposition} \label{monotoneDiscontinuities}
Let $f$ be a monotone real-valued function on an interval $I$. Then all discontinuities are jump discontinuities.
\end{proposition}
\begin{theorem}[Darboux-Froda] \label{DarbouxFroda}
Let $f$ be a monotone real-valued function on an interval $I$. Then the set of discontinuities is at most countable.
\end{theorem}

TODO: intervals must be closed / open?? In \ref{monotoneDiscontinuities} and \ref{DarbouxFroda}.


\begin{definition}
Let $f$ be a real function. We define the \udef{difference operator}
\[ \Delta_{x_0}f \defeq \lim_{x\to x_0+} f(x) - \lim_{x\to x_0-} f(x) \]
\end{definition}

\section{Functions compact subsets}
\subsection{Min-max theorem} $f(p) \leq f(x) \leq f(q)$

\subsection{Intermediate value theorem}.

\section{Derivatives}

\section{Stone-Weierstrass}
\begin{theorem}[Stone-Weierstrass] \label{StoneWeierstrass}
Let $X$ be a compact Hausdorff space. Let $A\subseteq \mathcal{C}(X)$ be a unital $*$-subalgebra. Suppose that $A$ separates points, i.e.\ for all $x\neq y$ in $X$ there exists $f\in A$ with $f(x) \neq f(y)$. Then $A$ is dense in $\mathcal{X}$ with respect to $\norm{\cdot}_\infty$.
\end{theorem}



\chapter{Measure theory}
TODO (bounded) finitely additive signed measures form Riesz spaces.
\section{Pre-measures}
\begin{definition}
Let $\mathcal{S}$ be a semi-ring on a set $\Omega$ and $\sSet{M,+,0}$ a commutative monoid. An $M$-valued \udef{pre-measure} on $\mathcal{S}$ is a map $\mu: \mathcal{S} \to M$ satisfying
\begin{itemize}
\item $\mu(\emptyset) = 0$;
\item $\mu$ is \udef{(finitely) additive}: if $A,B \in \mathcal{S}$ are disjoint, then
\[ \mu(A\cup B) = \mu(A)+\mu(B). \]
\end{itemize}
If $M = \overline{\R^+}$, then we call the pre-measure \udef{positive}.
\end{definition}
\begin{proposition}
Let $\mathcal{S}$ be a semi-ring on $\Omega$. Every pre-measure $\mu_\mathcal{S}$ on $\mathcal{S}$ extends uniquely to a pre-measure $\mu$ on $\mathfrak{R}\{\mathcal{S}\}$, the ring generated by $\mathcal{S}$.
\end{proposition}

\begin{lemma} \label{emptysetNullset}
If there exists an $A\in \mathcal{S}$ such that $\mu(A)$ is cancellative, then the requirement $\mu(\emptyset) = 0$ is redundant.
\end{lemma}
\begin{proof}
We calculate $\mu(A) = \mu(A \cup \emptyset) = \mu(A) + \mu(\emptyset)$, so $\mu(\emptyset) = 0$.
\end{proof}
For positive pre-measures this is requiement is $\mu(A) < \infty$.


\subsection{Outer measures}
\begin{definition}
Let $\Omega$ be a non-empty set. An \udef{outer measure} on $\Omega$ is a map $\nu: \powerset(\Omega)\to [0,\infty]$ satisfying
\begin{itemize}
\item $\nu(\emptyset) = 0$;
\item if $E\subseteq F\subseteq \Omega$, then $\nu(E)\leq \nu(F)$;
\item $\nu$ is \udef{$\sigma$-subadditive}: for every sequence $(E_n)$ of pairwise disjoint subsets of $\Omega$, we have
\[ \nu\left(\biguplus_{n\in\N}E_n\right) \leq \sum_{n\in\N}\nu(E_n). \]
\end{itemize}
\end{definition}
It is important to note that outer measures are not in general measures or pre-measures.



\section{$\sigma$-algebras and measurable spaces}
\begin{definition}
Let $\Omega$ be a non-empty set. A \udef{$\sigma$-algebra} $\mathcal{A}$ on $\Omega$ is a subset of $\powerset(\Omega)$ such that
\begin{itemize}
\item $\emptyset \in \mathcal{A}$;
\item if $E\in \mathcal{A}$, then $E^c\in \mathcal{A}$;
\item for any sequence $(E_n)_{n\in\N}$ in $\mathcal{A}$, one has $\bigcup_{n\in\N}E_n \in \mathcal{A}$.
\end{itemize}
The elements of a $\sigma$-algebra are called \udef{events}.

A pair $(\Omega, \mathcal{A})$ of a set and a $\sigma$-algebra on the set is called a \udef{measurable space}.
\end{definition}

\begin{example}
For any non-empty set $\Omega$, the following are $\sigma$-algebras:
\begin{itemize}
\item $\{\emptyset, \Omega\}$;
\item $\powerset(\Omega)$.
\end{itemize}
\end{example}

\begin{lemma}
A $\sigma$-algebra is closed w.r.t. all countable operations involving complements, unions, intersections and differences.
\end{lemma}
\begin{proof}
All can be expressed in terms of unions and complements:
\[ E\cap F = (E^c\cup F^c)^c\qquad E\setminus F = (E^c\cup F)^c. \]
\end{proof}

\begin{lemma}
Let $\Omega$ be a non-empty set. Let $\{\mathcal{A}_i\}_{i\in I}$ be an arbitrary family of $\sigma$-algebras. Then the intersection $\bigcap_{i\in I}\mathcal{A}_i$ is a $\sigma$-algebra.
\end{lemma}
\begin{corollary}
Let $\mathcal{S}\subset \powerset(\Omega)$. Then there exists a smallest $\sigma$-algebra containing $\mathcal{S}$.
\end{corollary}
This $\sigma$-algebra is called the $\sigma$-algebra generated by $\mathcal{S}$.

\subsection{Properties of measure spaces}
\subsubsection{Separated measure spaces}
\begin{definition}
Let $\sSet{\Omega,\mathcal{A}}$ be a measurable space and $x,y\in \Omega$. Then $x,y$ are called \udef{separated} or \udef{distinguishable} if there exists $A\in \mathcal{A}$ such that $x\in A$ and $y\notin A$.

The measurable space $\sSet{\Omega,\mathcal{A}}$ is called \udef{separated} if all distinct $x,y\in \Omega$ are separated.
\end{definition}

\begin{lemma}
The relation that relates indistinguishable points is an equivalence relation.

This relation is the identity relation \textup{if and only if} the measurable space is separated.
\end{lemma}

\subsection{Measurable functions}
\begin{definition}
Let $(\Omega_1, \mathcal{A}_1)$ and $(\Omega_2, \mathcal{A}_2)$ be measurable spaces.

A function $f:\Omega_1 \to \Omega_2$ is called \udef{measurable} if
\[ \forall E\in\mathcal{A}_2: f^{-1}[E] \in\mathcal{A}_1. \]
We may also say $f$ is \udef{$\mathcal{A}_1/\mathcal{A}_2$-measurable} to emphasise which $\sigma$-algebras are being used.

We denote the set of $\mathcal{A}_1/\mathcal{A}_2$-measurable functions by $\meas(\mathcal{A}_1, \mathcal{A}_2)$.
\end{definition}
Suppose we are moving around in $\Omega_1$ and tracking the output of the function in $\Omega_2$. We would like to be able to explore the contents of an event in $\Omega_2$ from within an event in $\Omega_1$.

\begin{lemma} \label{measurableFromGeneratingSet}
Let $(\Omega_1, \mathcal{A}_1)$ and $(\Omega_2, \mathcal{A}_2)$ be measurable spaces and $\mathcal{A}_2$ is generated by $\mathcal{S}$.

Then $f: \Omega_1\to \Omega_2$ is measurable \textup{if and only if} $\forall S\in\mathcal{S}: f^{-1}[S] \in \mathcal{A}_1$.
\end{lemma}

\subsubsection{$\sigma$-algebras generated by functions}
\begin{definition}
Let $\Omega_1$ be a set and $\sSet{\Omega_2, \mathcal{A}}$ a measurable space. Let $f: \Omega_1\to \Omega_2$ be a function. The \udef{pull-back $\sigma$-algebra} or the $\sigma$-algebra \udef{generated} by $f$ is
\[ \sigma(f) \defeq \setbuilder{f^{-1}[A]}{A\in \mathcal{A}}. \]
\end{definition}

The pull-back $\sigma$-algebra is a $\sigma$-algebra.

\begin{lemma}
Let $(\Omega_1, \mathcal{A}_1)$ and $(\Omega_2, \mathcal{A}_2)$ be measurable spaces and $f: \Omega_1\to \Omega_2$ a function. Then $f$ is $\mathcal{A}_1/\mathcal{A}_2$-measurable \textup{if and only if} $\sigma(f) \subseteq \mathcal{A}_1$.
\end{lemma}

\begin{lemma}
Let $\Omega_1$ be a set, $\sSet{\Omega_2, \mathcal{A}}$ a measurable space and $f: \Omega_1\to \Omega_2$ a function. Then $x,y\in \sSet{\Omega_1,\sigma(f)}$ are indistinguishable \textup{if and only if} $f(x), f(y) \in \sSet{\Omega_2,\mathcal{A}}$ are indistinguishable.
\end{lemma}
\begin{proof}
TODO For all $A\in\mathcal{A}$, we have $f(x)\in A \iff x\in f^{-1}[A]$ and $y\in f^{-1}[A]\iff f(y)\in A$. The indistinguishability of $x,y$ means the left-hand sides are equivalent. The indistinguishability of $f(x),f(y)$ means the right-hand sides are equivalent.
\end{proof}
\begin{corollary}
Let $\Omega_1$ be a set, $\sSet{\Omega_2, \mathcal{A}}$ a measurable space and $f: \Omega_1\to \Omega_2$ a function. Then
\begin{enumerate}
\item $\ker(f)$ is a subset of the indistinguishability relation of $\sigma(f)$;
\item if $\sSet{\Omega_2, \mathcal{A}}$ is separated, then $ker(f)$ equals the indistinguishability relation of $\sigma(f)$.
\end{enumerate}
\end{corollary}


\subsubsection{The Doob-Dynkin property}
\begin{definition}
A measurable set $\sSet{\Omega,\mathcal{A}}$ is said to have the \udef{Doob-Dynkin property} if for any set $\Omega_1$, measurable space $\sSet{\Omega_2,\mathcal{A}_2}$ and function $f: \Omega_1 \to \Omega_2$, a function $g: \Omega_1\to \Omega$ is $\sigma\{f\}/\mathcal{A}$-measurable \textup{if and only if} it factors through $f$, i.e.
\[\exists h\in \meas(\mathcal{A}_2\to \mathcal{A}):\quad g = h\circ f. \]
\end{definition}

\begin{example}
The measurable space $\sSet{\Omega, \mathcal{A}} = \sSet{\{0,1\}, \{\emptyset,\Omega\}}$ does not have the Doob-Dynkin property. 

Take, for example, any sets $\Omega_1, \Omega_2$ and equip $\Omega_2$ with the $\sigma$-algebra $\{\emptyset, \Omega_2\}$. Then for any function $f:\Omega_1 \to \Omega_2$, we have $\sigma(f) = \{\emptyset, \Omega_1\}$ and thus any function $g: \Omega_1 \to \Omega$ is measurable. Clearly it is not true that any function between arbitrary sets factors through any other function.
\end{example}


\begin{proposition}
A measurable set $\sSet{\Omega,\mathcal{A}}$ has the Doob-Dynkin property \textup{if and only if} $\mathcal{A}$ is
\begin{itemize}
\item separated; and
\item for any measurable space $\sSet{\Omega_1,\mathcal{A}_1}$, subset $D\subseteq \Omega_1$ and measurable function $f: \sSet{D,\mathcal{A}_1|_D} \to \sSet{\Omega,\mathcal{A}}$, $f$ can be extended to a measurable function on $\sSet{\Omega_1,\mathcal{A}_1}$.
\end{itemize}
\end{proposition}
\begin{proof}
TODO {functionsLeftRightRelations}

\url{http://www.numdam.org/article/SPS_1990__24__46_0.pdf}
\url{https://mathoverflow.net/questions/263863/does-the-doob-dynkin-lemma-hold-for-any-measurable-space-that-separates-points}

\url{https://math.stackexchange.com/questions/2193181/proof-of-doob-dynkin-lemma-when-x-isnt-assumed-surjective}
\end{proof}

\subsection{Borel $\sigma$-algebras}
\begin{definition}
Let $(X,\mathcal{T})$ be a topological space. The $\sigma$-algebra on $X$ generated by $\mathcal{T}$ is called the \udef{Borel $\sigma$-algebra} of $(X,\mathcal{T})$. The measurable space consisting of $X$ equipped with the Borel $\sigma$-algebra is called the \udef{Borel-measurable space}.
\end{definition}
Clearly the Borel $\sigma$-algebra is also generated by the closed sets.

\begin{lemma}
Let $(X,\mathcal{T})$ be a topological space. If $\mathcal{T}$ has a countable basis $\mathcal{B}$, then the Borel $\sigma$-algebra is generated by the basis $\mathcal{B}$.
\end{lemma}

TODO:
\begin{align*}
\mu(B) &= \sup\setbuilder{\mu(C)}{C\subseteq B, \; \text{$C$ compact}} \\
&= \inf\setbuilder{\mu(O)}{B\subseteq O, \; \text{$O$ open}}.
\end{align*}
cfr compact open topology??

\begin{lemma}
Every continuous function between topological spaces is a measurable function between Borel-measurable spaces.
\end{lemma}

\begin{proposition} \label{pointWiseConvergenceMeasurable}
Let $(\Omega,\mathcal{A})$ be a measurable space and $\sSet{X,\xi}$ a $T_1$ and $C_2$ topological space. We equip $X$ with its Borel $\sigma$-algebra $\mathcal{B}$.

Suppose that a sequence of measurable functions $f_n : \Omega \to Y$ converges pointwise to a function $f:\Omega\to X$. Then $f$ is measurable.
\end{proposition}
\begin{proof}
Pick arbitrary $B\in \mathcal{B}$. By \ref{AnySetCountableIntersectionOfOpenSets} we can write $B = \bigcap_{k\in\N}O_k$ for some sequence $\seq{O_k}$ of open sets. Then we have, using the fact that $\sSet{X,\xi}$ is a sequntial space (TODO ref),
\begin{align*}
x\in f^{\preimf}[B] &\iff f(x)\in B \\
&\iff \forall k\in\N: f(x)\in O_k\\
&\iff \forall k\in\N: \exists n_0\in\N: \forall n\geq n_0: f_n(x)\in O_k \\
&\iff \forall k\in\N: \exists n_0\in\N: \forall n\geq n_0: x\in f^{\preimf}_n[O_k] \\
&\iff x\in \bigcap_{k\in\N}\bigcup_{n_0\in\N}\bigcap_{n\geq n_0}f^{\preimf}_n[O_k].
\end{align*}
So $f^{\preimf}[B] = \bigcap_{k\in\N}\bigcup_{n_0\in\N}\bigcap_{n\geq n_0}f^{\preimf}_n[O_k]$, which is an element of $\mathcal{A}$ because all $f^{\preimf}_n[O_k]$ are in $\mathcal{A}$.
\end{proof}
TODO restate proof: prove that liminf and limsup are measurable.

\url{https://math.stackexchange.com/questions/1343860/limit-of-measurable-functions-is-measurable}

\begin{proposition}[Doob-Dynkin lemma]
TODO: $[0,1]$ and $[-\infty,\infty]$ have the Doob-Dynkin property.
\end{proposition}

\begin{proposition}
Let $\mathcal{B}$ be the Borel $\sigma$-algebra on $\R$. Then the following equalities hold:
\begin{align*}
\mathcal{B} &= \sigma\setbuilder{[a,b]}{a,b\in \R} \\
&= \sigma\setbuilder{]a,b[}{a,b\in \R} \\
&= \sigma\setbuilder{]a,b]}{a,b\in \R} \\
&= \sigma\setbuilder{[a,b[}{a,b\in \R}.
\end{align*}
\end{proposition}
\begin{proof}
TODO
\end{proof}

\section{Measure spaces}
\subsection{Measures}
\begin{definition}
Let $(\Omega,\mathcal{A})$ be a measurable space and $\sSet{M,+,0,\xi}$ a commutative convergence monoid. An $M$-valued \udef{measure} on $(\Omega,\mathcal{A})$ is a map $\mu: \mathcal{A} \to [0,\infty]$ satisfying
\begin{itemize}
\item $\mu(\emptyset) = 0$;
\item $\mu$ is \udef{$\sigma$-additive}: for every sequence $(E_n)$ in $\mathcal{A}$ of pairwise disjoint sets, we have
\[ \mu\left(\biguplus_{n\in\N}E_n\right) = \sum_{n\in\N}\mu(E_n). \]
\end{itemize}
The triple $(\Omega, \mathcal{A}, \mu)$ is called a \udef{measure space}. If
\begin{itemize}
\item $\mu(\Omega) < \infty$, we call $\mu$ a \udef{finite measure};
\item $M = [0,1]$ and $\mu(\Omega) = 1$, we call $\mu$ a \udef{probability measure} and we call $(\Omega, \mathcal{A}, \mu)$ a \udef{probability space};
\item there exists a sequence $(E_n)$ in $\mathcal{A}$ with $\Omega = \bigcup_{n\in\N}E_n$ and $\mu(E_n)<\infty$ for all $n\in\N$, then we call $\mu$ \udef{$\sigma$-finite}.
\end{itemize}
\end{definition}
We typically consider $\mathcal{A}$ as ordered by inclusion.

TODO: define finite additivity.

\begin{lemma}
Finite additivity is implied by $\sigma$-additivity.
\end{lemma}
\begin{proof}
Let $E_1,E_2\in\mathcal{A}$ be disjoint sets. Then
\begin{align*}
\mu(E_1\uplus E_2) &= \mu(E_1\uplus E_2 \uplus \emptyset \uplus \emptyset \uplus \ldots) \\
&= \mu(E_1) + \mu(E_2) + \mu(\emptyset) + \mu(\emptyset) + \ldots \\
&= \mu(E_1) + \mu(E_2).
\end{align*}
\end{proof}

As with pre-measures, if there exists an event $E$ such that $\mu(E)< \infty$, then $\mu(\emptyset) = 0$ is redundant. See \ref{emptysetNullset}.

\begin{lemma} \label{submeasurespace}
Let $(\Omega,\mathcal{A},\mu)$ be a measure space and let $E\in\mathcal{E}$. Then $\mathcal{A}' = \powerset(E)\cap\mathcal{A}$ is a $\sigma$-algebra on $E$ and $(E,\mathcal{A}',\mu|_{\mathcal{A}'})$is a measure space.
\end{lemma}
\begin{proof}
We need to show that $\mathcal{A}'$ is a $\sigma$-algebra. Now complements are w.r.t. $E$. These are still in the $\sigma$-algebra because $E\setminus A = \Omega\setminus((\Omega\setminus E)\cup A)$.
\end{proof}

\begin{proposition}
Let $(\Omega, \mathcal{A}, \mu)$ be a measure space. Then
\begin{enumerate}
\item $\mu$ is order-preserving (if $\mathcal{A}\subseteq \powerset(\Omega)$ is ordered by inclusion);
\item $\mu$ is $\sigma$-subadditive, i.e.\ for any sequence $\seq{E_n}$ in $\mathcal{A}$, we have
\[ \mu\left(\bigcup_{n\in\N}E_n\right) \leq \sum_{n\in\N}\mu(E_n). \]
\end{enumerate}
\end{proposition}
\begin{proof}
(1) Suppose $A \subseteq B$ are measurable sets, then $\mu(B) = \mu\big((B\setminus A) \uplus A\big) = \mu(B\setminus A) + \mu(A) \geq \mu(A)$.

(2) Define a new sequence $\seq{E_n'}$ by
\[ E_n' \defeq E_n\setminus \left(\bigcup_{k<n}E_k\right). \]
Then $\bigcup_{n\in\N}E_n = \biguplus_{n\in\N}E_n'$ and $\mu(E_n')\leq \mu(E_n)$ for all $n\in \N$ by (1). Thus
\[ \mu\left(\bigcup_{n\in\N}E_n\right) = \mu\left(\biguplus_{n\in\N}E_n'\right) =  \sum_{n\in\N}\mu(E'_n) \leq \sum_{n\in\N}\mu(E_n). \]
\end{proof}
\begin{corollary}
If $A\subseteq B$ and $\mu(B) < \infty$, then $\mu(B\setminus A) = \mu(B)-\mu(A)$.
\end{corollary}
\begin{proof}
We rearrange $\mu(B) = \mu\big((B\setminus A) \uplus A\big) = \mu(B\setminus A) + \mu(A)$.
\end{proof}
\begin{proposition}
Let $\sSet{\Omega, \mathcal{A}, \mu}$ be a measure space. Then
\begin{enumerate}
\item if $\seq{E_n}$ is an increasing sequence in $\mathcal{A}$, then $\seq{\mu(E_n)}$ is also increasing and
\[ \mu\left(\bigcup_{n\in\N}E_n\right) = \sup_{n\in\N}\mu(E_n) = \lim_{n\to\infty}\mu(E_n); \]
\item if $\seq{E_n}$ is a decreasing sequence in $\mathcal{A}$ and $\mu(E_1)<\infty$, then $\seq{\mu(E_n)}$ is also decreasing and
\[ \mu\left(\bigcap_{n\in\N}E_n\right) = \inf_{n\in\N}\mu(E_n) = \lim_{n\to\infty}\mu(E_n). \]
\end{enumerate}
\end{proposition}
\begin{corollary}
The measure $\mu$ is a continuous function when $\mathcal{A}$ is given the sequential modification of the Scott convergence.
\end{corollary}


\begin{proposition}
Let $\mu,\nu$ be finite measures defined on the same measure space $\seq{\Omega, \mathcal{A}}$. Assume $\mathcal{A} = \sigma\{\mathcal{F}\}$ for some $\pi$-system $\mathcal{F}$.
Then $\mu = \nu$ \textup{if and only if} $\mu(A) = \nu(A)$ for all $A\in\mathcal{F}$.
\end{proposition}
\begin{proof}
Define
\[ \mathcal{E} = \setbuilder{A\in\mathcal{A}}{\mu(A) = \nu(A)}. \]
By the $\pi-\lambda$ theorem \ref{piLambdaTheorem} it is enough to show that $\mathcal{E}$ is a Dynkin system.
\begin{itemize}
\item By assumption $\Omega\in \mathcal{E}$.
\item Assume $A\subseteq B$ are sets in $\mathcal{E}$. Then $\mu(B) = \mu(A \uplus (B\setminus A)) = \mu(A) + \mu(B\setminus A)$ implies 
\[ \mu(B\setminus A) = \mu(B) - \mu(A) = \nu(B) - \nu(A) = \nu(B\setminus A). \]
because $\mu(A) = \nu(A)$ is finite.
\item Let $\seq{A_i}$ be a monotonically increasing family of sets in $\mathcal{E}$. Then
\[ \mu\left(\bigcup_{i\in\N}A_i\right) = \sup_{i\in\N}\mu(A_i) = \sup_{i\in\N}\nu(A_i) = \nu\left(\bigcup_{i\in\N}A_i\right). \]
\end{itemize}
\end{proof}
\begin{corollary}
Let $\mu,\nu$ be measures defined on the same measure space $\seq{\Omega, \mathcal{A}}$. Assume $\mathcal{A} = \sigma\{\mathcal{F}\}$ for some $\pi$-system $\mathcal{F}$ such that
\begin{enumerate}
\item $\Omega \in \mathcal{F}$;
\item there is a sequence $\seq{A_n}$ of sets in $\mathcal{F}$ such that
\begin{enumerate}
\item $\bigcup_{n\in \N}A_n = \Omega$;
\item $\mu(A_n)$ is finite for all $n\in \N$.
\end{enumerate}
\end{enumerate}
Then $\mu = \nu$ \textup{if and only if} $\mu(A) = \nu(A)$ for all $A\in\mathcal{F}$.
\end{corollary}
Note that (2) is only possible to satisfy if $\mu$ is $\sigma$-finite.
\begin{proof}
Define $\mu_n$ and $\nu_n$ by
\[ \mu_n: B\mapsto \mu(A_n\cap B) \qquad\text{and}\qquad \nu_n: B\mapsto \nu(A_n\cap B). \]
As $\mu_n$ and $\nu_n$ are finite for all $n\in\N$, we have that $\mu_n = \nu_n$ by the proposition. Now $B\cap A_n$ is an increasing sequence of sets for all $B\in\mathcal{A}$. Thus
\begin{multline*}
\mu(B) = \mu\left(\bigcup_{n\in \N}A_n\cap B\right) = \sup_{n\in\N}\mu(A_n\cap B) = \sup_{n\in\N}\mu_n(B) = \\ \sup_{n\in\N}\nu_n(B) = \sup_{n\in\N}\nu(A_n\cap B) = \nu\left(\bigcup_{n\in \N}A_n\cap B\right) = \nu(B). 
\end{multline*}
\end{proof}

\begin{lemma} \label{measuresPositiveLinear}
Let $(\Omega,\mathcal{A})$ be a measurable space. Positive linear combinations of measures are measures: let $\mu_1,\mu_2$ be measures on $(\Omega,\mathcal{A})$ and $0 \leq c \in \R$. Then $c\mu_1 + \mu_2$ is a measure on $(\Omega,\mathcal{A})$.
\end{lemma}

\begin{example}
\begin{itemize}
\item For any non-empty set $\Omega$ define
\[ \mu: \powerset(\Omega)\to [0,\infty]: E\mapsto \begin{cases}
\#(E) & \text{($E$ is finite)} \\
\infty & \text{($E$ is infinite)}
\end{cases}. \]
Then $(\Omega, \powerset(\Omega),\mu)$ is a measure space and $\mu$ is called the \udef{counting measure}.
\item Let $(\Omega,\mathcal{A})$ be a measurable space and $x\in\Omega$ and define
\[ \delta_x: \mathcal{A}\to [0,\infty]: E\mapsto \begin{cases}
1 & (x\in E) \\ 0 & (x\notin E)
\end{cases}. \]
Then $(\Omega,\mathcal{A},\delta_x)$ is a measure space and $\delta_x$ is called a \udef{Dirac measure}.
\end{itemize}
\end{example}

\begin{lemma} \label{countingMeasureCriterion}
Let $\Omega$ be a set. A measure on $\powerset(\Omega)$ is the counting measure \textup{if and only if} $\mu(\{\omega\}) = 1$ for all $\omega\in\Omega$.
\end{lemma}
\begin{proof}
For any finite $A\subseteq \Omega$ we have $A = \biguplus_{a\in A}\{a\}$ and thus $\mu(A) = \#(A)$ be $\sigma$-additivity.

If $A\subseteq \Omega$ is infinite, take $k\in \N$. We can find a subset $B\subseteq A$ of cardinality $k$ and thus we can write $\mu(A) = \mu(B) + \mu(A\setminus B) \geq \mu(B) = k$. Thus $\mu(A) \geq k$ for all $k\in \N$, meaning $\mu(A)$ is infinite.
\end{proof}

\begin{proposition}[Pushforward measure] \label{pushforwardMeasure}
Let $\sSet{\Omega_1, \mathcal{A}, \mu}$ be a measure space and $\sSet{\Omega_2, \mathcal{B}}$ a measurable space. Let $f: \Omega_1 \to \Omega_2$ be a measurable function. Then
\[ \nu = \mu\circ f^{-1}|_{\mathcal{B}}: \mathcal{B}\to [0,\infty]: B \mapsto \mu(f^{-1}[B]) \]
is a measure on $\sSet{\Omega_2, \mathcal{B}}$.
\end{proposition}
\begin{proof}
Clearly this is well-defined due to $f$ being measurable. We have
\[ \nu(\emptyset) = \mu(f^{-1}[\emptyset])  = \mu(\emptyset) = 0 \]
for every sequence $(E_n)$ in $\mathcal{B}$ of pairwise disjoint sets, we have
\[ \nu\left(\biguplus_{n\in\N}E_n\right) = \mu\left(f^{-1}\left[\biguplus_{n\in\N}E_n\right]\right) = \mu\biguplus_{n\in\N} f^{-1}[E_n]  = \sum_{n\in\N}\mu(f^{-1}[E_n]) = \sum_{n\in\N}\nu(E_n). \]
\end{proof}

\subsection{Null sets}
\begin{definition}
Let $\sSet{\Omega, \mathcal{A}, \mu}$ be a measure space. A set $A\subseteq \Omega$ is a \udef{null set} if there exists a measurable set $B\in\mathcal{A}$ such that $A\subseteq B$ and $\mu(B) = 0$.
\end{definition}

\begin{lemma}
Let $\sSet{\Omega, \mathcal{A}, \mu}$ be a measure space. If $A$ is a measurable null set, then $\mu(A) = 0$.
\end{lemma}
\begin{proof}
Let $B\supseteq A$ be a measurable set with $\mu(B) = 0$. Then $\mu(A) \leq \mu(B) = 0$.
\end{proof}

\begin{lemma}
Let $\sSet{\Omega, \mathcal{A}, \mu}$ be a measure space and $\seq{A_i}$ a sequence of measurable null sets. Then
\[ \mu\left(\bigcup_{i\in\N}A_i\right) = 0. \]
\end{lemma}
\begin{proof}
This follows by $\sigma$-sub-additivity:
\[ \mu\left(\bigcup_{i\in\N}A_i\right) \leq \sum_{i=1}^\infty \mu(A_i) = 0. \]
\end{proof}

\subsubsection{Completeness}
\begin{definition}
A measure space $\sSet{\Omega, \mathcal{A}, \mu}$ is called \udef{complete} if very null set is
measurable.

The closure of $\sSet{\Omega, \mathcal{A}, \mu}$ in the lattice of complete measure spaces with universe $\Omega$ is called the \udef{completion} of $\sSet{\Omega, \mathcal{A}, \mu}$ and is denoted $\sSet{\Omega, \overline{\mathcal{A}}, \overline{\mu}}$.
\end{definition}



\begin{proposition}
Let $\sSet{\Omega, \mathcal{A}, \mu}$ be a measure space. Then for all $X\subseteq \Omega$
\[ X\in \overline{\mathcal{A}} \iff \exists A,B \in \mathcal{A}: \; \mu(A) = \mu(B) \land A \subseteq X\subseteq B. \]
In this case $\overline{\mu}(X) = \mu(A) = \mu(B)$.
\end{proposition}

\subsubsection{Almost everywhere (a.e.)}
\begin{definition}
Let $\sSet{\Omega, \mathcal{A}, \mu}$ be a measure space.

A proposition $P(x)$ referencing some $x\in\Omega$ is said to be true \udef{almost everywhere} (or a.e.) if $\setbuilder{x\in\Omega}{\text{$P(x)$ is false}}$ is a null set.
\end{definition}

\subsection{Convergence on measure spaces}
\begin{definition}
Let $\sSet{\Omega, \mathcal{A}, \mu}$ be a measure space and $\sSet{Y,\xi}$ a convergence space. Let $F$ be a filter in $\powerfilters(\Omega\to Y)$ and $f\in (\Omega\to Y)$.
\begin{itemize}
\item The \udef{almost everywhere convergence} (a.e.) on $((\Omega\to Y))$ is defined by
\[ f\in \lim_{a.e.} F \quad\iff\quad \exists \;\text{null set $A$}: \forall x\in A^c: \; f(x) \in \lim_\xi \evalMap_x(F) \]
\end{itemize}
\end{definition}
TODO initial convergence

\subsection{Finitely additive measures}

\subsection{Outer measures}
\begin{definition}
Let $\Omega$ be a set. An \udef{outer measure} on $\Omega$ is a function $m: \powerset(\Omega) \to [0,\infty]$ satisfying
\begin{itemize}
\item $m(\emptyset) = 0$;
\item $A\subseteq B \implies m(A) \leq m(B)$ for all $A,B\in\powerset(\Omega)$;
\item for any sequence $\seq{A_n}$ in $\powerset(\Omega)$, we have
\[ m\left(\bigcup_{n\in\N}A_n\right) \leq \sum_{n\in\N}m(A_n). \]
\end{itemize}
\end{definition}

\subsubsection{Sets measurable w.r.t.\ an outer measure}
\begin{definition}
Let $\Omega$ be a set and $m$ an outer measure on $\Omega$. A subset $A\subseteq \Omega$ is called \udef{$m$-measurable} (or measurable w.r.t.\ $m$) if
\[ \forall B\in\powerset{\Omega}: \qquad m(B) = m(B\cap A) + m(B\cap A^c). \]
\end{definition}
Note that it is enough to check $m(B) \geq m(B\cap A) + m(B\cap A^c)$, because the opposite inequality follows from subadditivity. Thus it is also enough to check the condition for $B$ such that $m(B) < +\infty$.

\begin{theorem}
Let $\Omega$ be a set and $m$ an outer measure on $\Omega$. Consider the set $\mathcal{A}_m$ of $m$-measurable subsets of $\Omega$. Then
\begin{enumerate}
\item $\mathcal{A}_m$ is a $\sigma$-algebra;
\item the restriction $m|_{\mathcal{A}_m}$ of $m$ to $\mathcal{A}_m$ is a measure on the measurable space $\sSet{\Omega,\mathcal{A}_m}$.
\end{enumerate}
\end{theorem}
\begin{proof}
We first prove $\mathcal{A}_m$ is an algebra, using \ref{setAlgebraCriteria}:
\begin{itemize}
\item For all $B\in \powerset(\Omega)$ we have
\[ m(B) = m(B\cap \Omega) + 0 = m(B\cap \Omega) + m(\emptyset) = m(B\cap \Omega) + m(B\cap \emptyset^c), \]
so $\Omega\in \mathcal{A}_m$.
\item If $A\in \mathcal{A}_m$, then clearly $A^c\in \mathcal{A}_m$.
\item Assume $A_1,A_2 \in \mathcal{A}_m$. Take arbitrary $B\in\powerset(\Omega)$. Then
\begin{align*}
m(B) &= m(B\cap A_1) + m(B\cap A_1^c) \\
&= m(B\cap A_1) + m(B\cap A_1^c\cap A_2) + m(B\cap A_1^c\cap A_2^c) \\
&= m(B\cap A_1) + m(B\cap A_1^c\cap A_2) + m\big(B\cap (A_1\cup A_2)^c\big) \\
&= m\big(B\cap (A_1\cup A_2)\cap A_1\big) + m\big(B\cap (A_1\cup A_2)A_1^c\big) + m\big(B\cap (A_1\cup A_2)^c\big) \\
&= m\big(B\cap (A_1\cup A_2)\big) + m\big(B\cap (A_1\cup A_2)^c\big),
\end{align*}
so $A_1\cup A_2\in \mathcal{A}_m$.
\end{itemize}
To show $\mathcal{A}_m$ is a $\sigma$-algebra, it is enough to show closure under countable disjoint unions by \ref{conditionAlgebraIsSigmaAlgebra}. Let $\seq{A_n}$ be a sequence of pairwise disjoint sets in $\mathcal{A}_m$. We show by induction that for all $B\in \powerset(\Omega)$
\begin{equation} m(B) = \sum_{i=0}^nm(B\cap A_i) + m\big(B\cap (\bigcap_{i=0}^nA_i^c)\big). \label{eq:sumMearuableSetsOuterMeasure}\end{equation}
Indeed the base case $n=0$ is just the $m$-measurability of $A_0$. For the induction step, we calculate
\begin{align*}
m(B) &= \sum_{i=0}^nm(B\cap A_i) + m\big(B\cap (\bigcap_{i=0}^nA_i^c)\big) \\
&= \sum_{i=0}^nm(B\cap A_i) + m\big(B\cap (\bigcap_{i=0}^nA_i^c)\cap A_{n+1}\big) + m\big(B\cap (\bigcap_{i=0}^nA_i^c)\cap A_{n+1}^c\big) \\
&= \sum_{i=0}^nm(B\cap A_i) + m\big(B\cap A_{n+1}\big) + m\big(B\cap (\bigcap_{i=0}^{n+1}A_i^c)\big) \\
&= \sum_{i=0}^{n+1}m(B\cap A_i) + m\big(B\cap (\bigcap_{i=0}^{n+1}A_i^c)\big).
\end{align*}
We conclude \eqref{eq:sumMearuableSetsOuterMeasure} by induction.

Then by monotonicity, we have
\[ m(B) \geq \sum_{i=0}^nm(B\cap A_i) + m\big(B\cap (\bigcap_{i=0}^\infty A_i^c)\big) \]
for all $n\in \N$. Thus
\[ m(B) \geq \sum_{i=0}^\infty m(B\cap A_i) + m\big(B\cap (\bigcup_{i=0}^\infty A_i)^c\big) \geq m\big(B\cap (\bigcup_{i=0}^\infty A_i)\big) + m\big(B\cap (\bigcup_{i=0}^\infty A_i)^c\big), \]
which is enough to prove the $m$-measurability of $\bigcup_{i=0}^\infty A_i$.

Finally to show $m|_{\mathcal{A}_m}$ is a measure, we just need to subadditivity. Let $\seq{A_n}$ be a sequence of pairwise disjoint sets in $\mathcal{A}_m$. We use \eqref{eq:sumMearuableSetsOuterMeasure} to calculate
\begin{align*}
m(\bigcup_{i=0}^\infty A_i) &= \sum_{i=0}^nm\big((\bigcup_{i=0}^\infty A_i)\cap A_i\big) + m\big((\bigcup_{i=0}^\infty A_i)\cap (\bigcup_{i=0}^nA_i)^c\big) \\
&= \sum_{i=0}^nm(A_i) + m\big((\bigcup_{i=0}^\infty A_i)\cap (\bigcup_{i=0}^nA_i)^c\big) \\
&\geq \sum_{i=0}^nm(A_i)
\end{align*}
for all $n\in \N$. Thus $m(\bigcup_{i=0}^\infty A_i) \geq \sum_{i=0}^\infty m(A_i)$. The opposite inequality follows from subadditivity.
\end{proof}


\begin{lemma}
Let $\Omega$ be a set, $m$ an outer measure on $\Omega$ and $A\subseteq \Omega$ a subset. If $m(A) = 0$ or $m(A^c) = 0$, then $A$ is $m$-measurable.
\end{lemma}
\begin{proof}
Take arbitrary $B\in\powerset{\Omega}$. By monotonicity $m(B) \geq m(B\cap A)$ and $m(B) \geq m(B\cap A^c)$. Also either $m(B\cap A) = 0$ or $m(B\cap A^c) = 0$. Thus $m(B) \geq m(B\cap A) + m(B\cap A^c)$.
\end{proof}
\begin{corollary}
Any measure derived from an outer measure is complete.
\end{corollary}

\subsubsection{An outer measure from a (pre-)measure}
\begin{proposition}
Let $\mathcal{R}$ be a ring with universe set $\Omega$ and $\mu$ a pre-measure on $\mathcal{R}$. Then
\[ \mu^*: \powerset(\Omega)\to [0,\infty]: E\mapsto \inf\setbuilder{\sum^\infty_{n=0}\mu(E_n)}{(E_n)_{n\in\N}\subseteq \mathcal{R}\;\text{with}\;E\subseteq \bigcup_{n\in\N}E_n} \]
with the convention that $\inf\emptyset = \infty$, defines an outer measure on $\Omega$.
\end{proposition}
\begin{proof}

\end{proof}

\subsection{Measures on topological spaces}
\begin{definition}
Let $\sSet{X, \topology_X}$ be a topological space. Any measure on the Borel-measurable space is called a \udef{Borel} measure. 
\end{definition}


\begin{definition}
Let $\sSet{X, \topology_X}$ be a topological space with Borel $\sigma$-algebra $\mathcal{B}$. A measure $\mu: \mathcal{B} \to [0,\infty]$ is called \udef{locally finite} if every $x\in X$ has a neighbourhood $U_x$ such that $\mu(U_x)$ is finite.
\end{definition}

\subsubsection{Radon measures}
\begin{definition}
Let $\sSet{X, \topology_X}$ be a topological space with associated Borel $\sigma$-algebra $\mathcal{B}$. A \udef{(outer) Radon measure} is a measure $\mu: \mathcal{B}\to [0,\infty]$ such that
\begin{itemize}
\item $\mu$ is locally finite;
\item $\mu(A) = \inf\{\mu(U)\}{\text{$U\supseteq A$ is open}}$ for all $A\in \mathcal{B}$;
\item $\mu(A) = \sup\{\mu(K)\}{\text{$K\subseteq A$ is compact}}$ for all \emph{open} $A\in \mathcal{B}$.
\end{itemize}
We say $\mu$ is \udef{outer regular} and \udef{weakly inner regular}.
\end{definition}

\subsubsection{The Lebesgue measure}
\begin{definition}
Define $\mathfrak{I}$ as the subset of sequences $\seq{(a_n,b_n)}$ in $(\overline{\R}\times\overline{\R})^\N$ such that
\[ \ldots < b_{n-1}< a_n < b_n < a_{n+1} < \ldots \]

The \udef{Lebesgue outer measure} on $\R$, denoted by $\lambda^*$ is defined by
\[ \lambda^*(A) = \inf\setbuilder{\sum_{n\in \N}(b_n-a_n)}{\text{$\seq{(a_n,b_n)}\in \mathfrak{I}$ such that $A \subseteq \bigcup_{n\in\N} ]a_n, b_n[$}}. \]

The set of $\lambda^*$-measurable sets is called the \udef{Lebesgue $\sigma$-algebra} and the associated measure $\lambda$ is called the \udef{Lebegue measure}.
\end{definition}
We say $\seq{(a_n,b_n)}\in \mathfrak{I}$ covers $A$ if $A \subseteq \bigcup_{n\in\N} ]a_n, b_n[$.

\begin{lemma}
The Lebesgue outer measure on $\R$ is an outer measure on $\R$ and for all $a
\leq b$
\[ \lambda^*([a,b]) = \lambda^*(]a,b]) = \lambda^*([a,b[) = \lambda^*(]a,b[) = b-a. \]
The Lebesgue outer measure of any unbounded interval is $+\infty$.
\end{lemma}
\begin{proof}
We verify the three points in the definition of an outer measure:
\begin{itemize}
\item We have that $\emptyset \subseteq ]0,\epsilon[$ for all $\epsilon > 0$, so  $0 = \inf\setbuilder{\epsilon}{\epsilon > 0} \geq \lambda^*(\emptyset) \geq 0$.
\item If $A\subseteq B$, then any cover of $B$ is a cover of $A$.
\item Let $\seq{A_n}$ be an arbitrary sequence in $\powerset(\Omega)$. If $\sum_{n\in\N}\lambda^*(A_n) = +\infty$, then subadditivity is necessarily satisfied. Now assume $\sum_{n\in\N}\lambda^*(A_n)$ is finite, then each $\lambda^*(A_n)$ is finite. Fix an arbitrary constant $\epsilon > 0$. We can find a $\seq{(a_{n,k},b_{n,k})}_{k\in\N}\in \mathfrak{I}$ that covers $A_n$ and is such that
\[ \sum_{k=0}^\infty(b_{n,k} - a_{n,k}) < \lambda^*(A_n) + \epsilon/2^n. \]
Now $\bigcup_{n\in \N}A_n$ is covered by $\seq{(a_{n,k},b_{n,k})}_{n,k\in\N}$ and
\[ \sum_{n,k \in\N} (b_{n,k} - a_{n,k}) < \sum_{n\in \N}(\lambda^*(A_n) + \epsilon/2^n) = \sum_{n\in \N}\lambda^*(A_n) + \epsilon. \]
Thus $\lambda^*\left(\bigcup_{n\in \N}A_n\right) \leq \sum_{n,k \in\N} (b_{n,k} - a_{n,k}) < \sum_{n\in \N}\lambda^*(A_n) + \epsilon$ for all $\epsilon > 0$. Thus $\lambda^*\left(\bigcup_{n\in \N}A_n\right) \leq \sum_{n\in \N}\lambda^*(A_n)$.
\end{itemize}
It is clear that $\lambda^*(]a,b[) \leq b-a$. For the converse, it is enough to notice that any sequence covering $]a,b[$ must contain a term $(c,d)$ with $c\leq a$ and $d\geq b$. 

We now show $\lambda^*([a,b]) = b-a$. Considering covers of the form $(a-\epsilon, b+\epsilon)$ for arbitrary $\epsilon > 0$, gives $\lambda^*([a,b]) \leq b-a$. For the reverse inequality, we have $b-a = \lambda^*(]a,b[) \leq \lambda^*([a,b])$.

The results for the halfopen intervals follow because 
\[ b-a = \lambda^*([a,b]) \geq \lambda^*(]a,b]) \leq \lambda^*(]a,b[) = b-a \]
and similarly for $\lambda^*([a,b[)$.

The reasoning for unbounded intervals is similar.
\end{proof}
\begin{corollary}
The Lebesgue measure is a measure.
\end{corollary}

\begin{proposition}
Let $\mathcal{B}$ be the Borel $\sigma$-algebra on $\R$ and $\mathcal{A}_{\lambda^*}$ the Lebesgue $\sigma$-algebra.

Then $\sSet{\R, \mathcal{A}_{\lambda^*}, \lambda}$ is the completion of $\sSet{\R, \mathcal{B}, \lambda}$.
\end{proposition}
\begin{proof}
TODO
\end{proof}

\begin{example}
Cantor set: $\sSet{\R, \mathcal{B}, \lambda}$ is not complete.
\end{example}

\begin{proposition}
The Lebesgue measure (restricted to the Borel $\sigma$-algebra) is the only measure $\mu$ on the Borel $\sigma$-algebra such that $\mu([a,b]) = b-a$.
\end{proposition}
\begin{proof}
TODO
\end{proof}

\begin{proposition}
The Lebesgue measure is regular.
\end{proposition}
\begin{proof}
TODO
\end{proof}

\chapter{Integration theory}
\section{Riemann integration}
See also Reed/Simon and \ref{BLT}.
\subsection{Riemann-Stieltjes}

\section{Lebesgue integration}
\url{https://math.stackexchange.com/questions/2218114/theoretical-advantages-of-lebesgue-integration}
\url{https://math.stackexchange.com/questions/3202630/what-are-the-advantages-of-the-riemann-vs-lebesgue-integral}

We want to define an integral functional $I(f)$.

Riemann: $I(f) = \lim_n I_n(f)$

Lebesgue $I(f) = \lim_n I(f_n)$.


\subsection{Simple functions}
TODO order on function spaces

\begin{definition}
Let $\Omega$ be a set. A \udef{simple function} (or \udef{step function}) on $\Omega$ is a function with a range of finite cardinality.

Let $B$ be a set. We denote the subset of simple functions in $(\Omega\to B)$ by $\SF(\Omega,B)$
\end{definition}

\begin{lemma}
Let $s:\Omega\to Y$ be a simple function into a vector space. Then $s$ can be written as
\[ s(x) = \sum_{\lambda \in s[\Omega]}\lambda\cdot \chi_{s^{-1}[\lambda]}(x). \]
Additionally for some $k\in\N$ we can write $s[\Omega] = \bigcup_{i=1}^k\{\lambda_i\}$ and $A_i = s^{-1}[\lambda_i]$. Then the $A_i$ form a partition of $\Omega$ and
\[ s(x) = \sum_{i=1}^k\lambda_i\cdot \chi_{A_i}(x). \]
This is known as the \udef{canonical form} of $s$. Conversely every function of this form is a simple function.
\end{lemma}

\begin{lemma}
Let $(\Omega, \mathcal{A})$ and $(Y, \mathcal{B})$ be measurable spaces such that $\mathcal{B}$ contains all singleton sets. Let $s:\Omega\to Y$ be a simple function.

Then $s$ is measurable \textup{if and only if} $s^{-1}[\lambda]\in\mathcal{A}$ for all $\lambda\in s[\Omega]$.

This is equivalent to saying the partition $\{A_i\}_{i=1}^k$ is a subset of $\mathcal{A}$.
\end{lemma}
\begin{proof}
The direction $\boxed{\Rightarrow}$ is clear, since $\mathcal{B}$ is assumed to contain all singleton sets.

For the $\boxed{\Leftarrow}$ direction, let $B\in \mathcal{B}$. Then
\[ s^{-1}[B] = \bigcup_{\lambda\in s[\Omega]}s^{-1}[B\cap \{\lambda\}], \]
which is a finite union of measurable sets.
\end{proof}

\begin{lemma}
Let $\Omega$ be a set, $G$ an abelian group and $s,t\in\SF(\Omega,G)$. If $s$ and $t$ have canonical forms
\[ s = \sum_{i=1}^k a_i\cdot\chi_{A_i} \qquad\text{and}\qquad t = \sum_{j=1}^l b_j\cdot\chi_{B_j}, \]
then $s+t$ has canonical form
\[ s+t = \sum_{i=1}^k\sum_{j=1}^l (a_i+b_j)\chi_{A_i}\chi_{B_j} = \sum_{i,j \in (1:k)\times(1:l)}(a_i+b_j)\chi_{A_i\cap B_j}. \]
\end{lemma}

\begin{proposition}
Let $(\Omega,\mathcal{A})$ be a measurable set. Every measurable function $f:\Omega\to \R$ is the pointwise limit of a sequence of simple functions.
\end{proposition}
TODO: generalise??
\begin{proof}
\url{https://proofwiki.org/wiki/Measurable_Function_is_Pointwise_Limit_of_Simple_Functions}
\end{proof}

\subsubsection{Integration of simple functions}
\begin{definition}
Let $(\Omega, \mathcal{A}, \mu)$ be a measure space and $Y$ a vector space. Let
\[ s:\Omega \to Y: x\mapsto \sum_{\lambda \in s[\omega]}\lambda\cdot \chi_{s^{-1}[\lambda]}(x) = \sum_{i=1}^k\lambda_i\cdot\chi_{A_i}(x)  \]
be a measurable simple function. We define the \udef{integral} of $s$ over $\Omega$ w.r.t. $\mu$ as
\[ \int_\Omega s\diff{\mu} \defeq \sum_{\lambda \in s[\omega]}\lambda\cdot \mu(s^{-1}[\lambda]) = \sum_{i=1}^k\mu(A_i)\cdot\lambda_j. \]
Using the convention that $0\times \infty = 0$. (TODO: clarify)

We call $s$ \udef{integrable} if the integral is finite (TODO clarify + below).
\end{definition}

The integral can be seen as a map $\SF(\Omega,Y)\to \overline{Y}$, where $\overline{Y}$ is the Dedekind-MacNeille completion (TODO!).

For any $E\in\mathcal{A}$ we also define the integral over $E$ as the map
\[ \int_E\diff{\mu}: \SF(\Omega,Y) \to \overline{Y}: s\mapsto \int_E s|_E \diff{\mu|_E}. \]
Where the last integral is taken over the measure space $(E,\mathcal{A}',\mu|_{\mathcal{A}'})$ as defined in \ref{submeasurespace}.

\begin{proposition} \label{integrationLinear} \label{integrationOrderPreserving}
Let $(\Omega, \mathcal{A}, \mu)$ be a measure space and $Y$ a vector space over $\F$. Then
\begin{enumerate}
\item the integral is linear: $\forall c\in \F$ and $\forall s,t\in\SF(\Omega, Y)$:
\[ \int_\Omega (c\cdot s + t)\diff{\mu} = c\cdot \int_\Omega s\diff{\mu} + \int_\Omega t\diff{\mu}. \]
\end{enumerate}
If $Y$ is a normed space, then
\begin{enumerate} \setcounter{enumi}{1}
\item for all $s\in\SF(\Omega, Y)$:
\[ \int_\Omega \norm{s}\diff{\mu} \leq \norm{\int_\Omega s \diff{\mu}}; \]
\item if $E_1\subseteq E_2$ are events in $\mathcal{A}$, then
\[ \int_{E_1}\norm{s}\diff{\mu} \leq \int_{E_2}\norm{s}\diff{\mu}. \]
\end{enumerate} \setcounter{enumi}{3}
If $Y$ is an ordered space, then
\begin{enumerate}
\item if $s(x)\leq t(x)$ for all $x\in\Omega$, then
\[ \int_\Omega s\diff{\mu} \leq \int_\Omega t\diff{\mu}. \]
\end{enumerate}
\end{proposition}
\begin{proof}
(1) Let $s,t$ have canonical forms
\[ s = \sum_{i=1}^k a_i\cdot\chi_{A_i} \qquad\text{and}\qquad t = \sum_{i=1}^k b_i\cdot\chi_{B_i}. \]
Then we calculate
\begin{align*}
\int_\Omega (c\cdot s + t)\diff{\mu} &= \sum_{i=1}^k\sum_{j=1}^l\mu(A_i\cap B_j)\cdot(c a_i + b_j) \\
&= c\sum_{i=1}^k\sum_{j=1}^l\mu(A_i\cap B_j)\cdot a_i +  \sum_{i=1}^k\sum_{j=1}^l\mu(A_i\cap B_j) \cdot b_j \\
&= c\sum_{i=1}^k\mu(A_i)\cdot a_i +  \sum_{j=1}^l\mu(B_j) \cdot b_j \\
&= c\int_\Omega s\diff{\mu} + \int_\Omega t\diff{\mu}.
\end{align*}

The property (2) is just the triangle inequality. The other properties can be proven in a similar fashion to (1).
\end{proof}

\begin{proposition}
Let $(\Omega, \mathcal{A}, \mu)$ be a measure space and $s:\Omega\to [0,+\infty[$ a measurable simple function. The map
\[ \nu:\mathcal{A}\to [0,+\infty]: E\mapsto \int_E s\diff{\mu} = \int_\Omega s\cdot \chi_E\diff{\mu} \]
defines a measure.
\end{proposition}
\begin{proof}
From the positive linearity of both measures and integration (\ref{measuresPositiveLinear}, \ref{integrationLinear}) it is enough to consider $s = \chi_A$ for some $A\in\mathcal{A}$. In this case
\[ \nu(E) = \int_\Omega\chi_A\chi_B \diff{\mu} = \int_\Omega\chi_{A\cap B} \diff{\mu} = \mu(A\cap E). \]
It is clear that $\nu(\emptyset) = 0$. For $\sigma$-additivity, let $(E_n)$ be a sequence of disjoint sets in $\mathcal{A}$ and calculate
\[ \nu\left(\biguplus_{n\in\N}E_n\right) = \mu\left(A\cap \biguplus_{n\in\N}E_n\right) = \mu\left(\biguplus_{n\in\N}(A\cap E_n)\right) = \sum_{n\in\N}\mu(A\cap E_n) = \sum_{n\in\N}\nu(E_n). \]
\end{proof}
\begin{corollary} \label{integralContinuousInDomain}
Let $(\Omega, \mathcal{A}, \mu)$ be a measure space, $s:\Omega\to[0,+\infty]$a measurable simple function and $(E_n)$ a converging sequence in $\mathcal{A}$. Then
\[ \lim_{n\to\infty}\int_{E_n}s\diff{\mu} = \int_{\lim_{n\to\infty} E_n}s\diff{\mu}. \]
\end{corollary}
\begin{proof}
Define the measure $\nu: E\mapsto \int_E s\diff{\mu}$. Then by TODO ref
\[ \lim_{n\to\infty}\int_{E_n}s\diff{\mu} = \lim_{n\to\infty}\nu(E_n) = \nu(\lim_{n\to\infty}E_n) =\int_{\lim_{n\to\infty}E_n}s\diff{\mu}. \]
\end{proof}

\subsection{Positive real functions}
\begin{definition}
Let $(\Omega, \mathcal{A}, \mu)$ be a measure space and let $f:\Omega\to[0,+\infty]$ be a positive measurable function. Define

We define the \udef{Lebesgue integral} of $f$ on $\Omega$ w.r.t. $\mu$ as
\[ \int_\Omega f \diff{\mu} \defeq \sup\setbuilder{\int_\Omega s \diff{\mu}}{s\in\SF(\Omega, [0,+\infty[)\;\land\; s\leq f}. \]
We call $f$ \udef{integrable} when $\int_\Omega f \diff{\mu} < \infty$.
\end{definition}
For simple functions this definition corresponds to the previous one by \ref{integrationOrderPreserving}.

This definition a priori makes sense even when $f$ is not assumed to be measurable. However the integral has undesirable properties in this case, such as not being additive.

\begin{example}
If $\delta_x$ is the Dirac measure associated to a point $x\in\Omega$ in a measurable space, then
\[ \int_\Omega f \diff{\delta_x} = f(x). \]
\end{example}

\begin{lemma} \label{integralOverSubset}
Let $(\Omega, \mathcal{A}, \mu)$ be a measure space, $E\in\mathcal{A}$ and $f:\Omega\to[0,+\infty]$ be a measurable function. Then
\[ \int_E f \diff{\mu} = \int_\Omega f\cdot\chi_{E} \diff{\mu} \qquad\text{and}\qquad \int_\Omega f\diff{\mu} = \int_{\Omega\setminus E} f\diff{\mu}+\int_E f\diff{\mu}. \]
\end{lemma}

\begin{proposition}
Let $(\Omega, \mathcal{A}, \mu)$ be a measure space and let $f:\Omega\to[0,+\infty]$ be a positive function.

If $f$ is measurable, then there exists an increasing sequence of positive measurable step functions $(s_n)$ that converges point-wise to $f$.
\end{proposition}
The converse is also true and is given by \ref{pointWiseConvergenceMeasurable}.
\begin{proof}
Assume $f$ measurable. If we can find an increasing sequence of positive measurable step functions $(t_n)$ that converges point-wise to $\id:[0,+\infty]\to[0,+\infty]$, then
\[ f = \id\circ f = \lim_{n\to\infty} t_n\circ f = \sup_{n\in\N}(t_n\circ f) \]
and so $s_n = t_n\circ f$ gives the sequence we are looking for. And we can find such a sequence $(t_n)$. For example
\[ t_n = n\chi_{[n,+\infty[}+\sum_{k=1}^{n2^n}\frac{k-1}{2^n}\chi_{[\frac{k-1}{2^n},\frac{k}{2^n}[}. \]
\end{proof}

\begin{proposition} \label{propertiesIntegralPositiveFunctions}
Let $(\Omega, \mathcal{A}, \mu)$ be a measure space and let $f,g:\Omega\to[0,+\infty]$ be positive measurable functions. Then
\begin{enumerate}
\item if $f\leq g$, then $\int_\Omega f\diff{\mu} \leq \int_\Omega g\diff{\mu}$;
\item if $E_1\subseteq E_2$ are events in $\mathcal{A}$, then $\int_{E_1}f\diff{\mu} \leq \int_{E_2}f\diff{\mu}$;
\item \textup{(Beppo Levi's lemma)} if $(f_n)$  is an increasing sequence of positive functions that converges to $f$ point-wise, then $(\int_\Omega f_n\diff{\mu})_n$ is an increasing sequence and
\[ \lim_{n\to\infty}\int_\Omega f_n\diff{\mu} = \int_\Omega \lim_{n\to\infty}f_n\diff{\mu} = \int_\Omega f\diff{\mu}; \]
\item the integral is positive linear: $\forall c\geq 0$:
\[ \int_\Omega(cf+g)\diff{\mu} = c\int_\Omega f\diff{\mu} + \int_\Omega g\diff{\mu}. \]
\end{enumerate}
\end{proposition}
\begin{proof}
(1) For all $s\in \SF(\Omega, [0,+\infty[)$ we have that $s\leq f$ implies $s\leq g$.

(2) This follows from $f\cdot\chi_{E_1}\leq f\cdot\chi_{E_2}$ and \ref{integralOverSubset}.

(3) That the sequence $(\int_\Omega f_n\diff{\mu})_n$ is increasing follows from point 1. For increasing sequences the limits are suprema, by monotone convergence \ref{sequenceMonotoneConvergence}. Also, for all $m\in\N$, we have $f_m\leq\sup_{n\in\N}f_n$, which implies, by point 1., that $\int_\Omega f_m\diff{\mu}\leq \int_\Omega \sup_{n\in\N}f_n\diff{\mu}$. So
\[ \lim_{n\to\infty}\int_\Omega f_n\diff{\mu} = \sup_{n\in\N}\int_\Omega f_n\diff{\mu} \leq \int_\Omega \sup_{n\in\N}f_n\diff{\mu} = \int_\Omega \lim_{n\to\infty}f_n\diff{\mu}. \]
For the other inequality, it is enough to prove that $c\int_\Omega s\diff{\mu} \leq \lim_{n\to\infty}\int_\Omega f_n\diff{\mu}$ for all $0<c<1$ and $s\in\SF(\Omega,[0,+\infty[)$ such that $s\leq f$. Fix such a $c$ and $s = \sum_{i=1}^k\lambda_i\chi_{A_i}$. Consider the sets
\[ E_n = \setbuilder{x\in\Omega}{cs(x)\leq f_n(x)} = \bigcup_{i=1}^k \left(f^{-1}_n[\,[c\lambda_i, +\infty]\,]\cap A_i\right). \]
Then $(E_n)$ is an increasing sequence in $\mathcal{A}$ with $\Omega= \bigcup_{n\in\N}E_n$ and
\[ c\int_\Omega s\diff{\mu} = \int_{\bigcup_n E_n} cs\diff{\mu} = \lim_{n\to\infty}\int_{E_n} cs\diff{\mu} \]
by \ref{integralContinuousInDomain}. Also 
\[ \int_{E_n} cs\diff{\mu} \leq \int_{E_n} f_n\diff{\mu} \leq \int_{\Omega} f_n\diff{\mu} \]
by the previous points and so the result follows from the fact that limits preserve inequalities, \ref{limitPreservesInequality}.

(4) Take sequences $(s_n)$ and $(t_n)$ of positive measurable step functions
that increase pointwise to $f$ and $g$, respectively. Then $cs_n+t_n$ converges pointwise to $cf+g$ by the linearity of the limit and
\begin{align*}
\int_\Omega(cf+g)\diff{\mu} &= \lim_{n\to\infty}\int_\Omega(cs_n+t_n)\diff{\mu} \\
&= \lim_{n\to\infty}\left(c\int_\Omega s_n\diff{\mu}+\int_\Omega t_n\diff{\mu}\right) \\
&= c\lim_{n\to\infty}\int_\Omega s_n\diff{\mu}+\lim_{n\to\infty}\int_\Omega t_n\diff{\mu} \\
&= c\int_\Omega f\diff{\mu} + \int_\Omega g\diff{\mu}.
\end{align*}
\end{proof}

\begin{proposition}[Fatou's lemma] \label{FatouLemma}
Let $(\Omega, \mathcal{A}, \mu)$ be a measure space and $(h_n)$ any sequence of positive measurable functions in $(\Omega\to[0,+\infty])$. Then
\[ f: \Omega\to[0,+\infty]: x\mapsto \liminf_{n\to\infty}h_n(x) \]
is measurable and
\[ \int_\Omega \liminf_{n\to\infty}h_n\diff{\mu} \leq \liminf_{n\to\infty}\int_\Omega h_n\diff{\mu}. \]
\end{proposition}
\begin{proof}
Consider the sequence $(f_n)$ defined by $f_n(x) = \inf_{k\geq n}h_k(x)$. This is an increasing sequence of positive functions and $f_n \leq h_n$ for all $n\in\N$. Each $f_n$ is measurable because
\[ f_n^{-1}[\,[t,+\infty]\,] = \bigcap_{k=n}^\infty h_k^{-1}[\,[t,+\infty]\,]. \]
This shows that $f$ is measurable by \ref{pointWiseConvergenceMeasurable}. Then we can use Beppo Levi's lemma \ref{propertiesIntegralPositiveFunctions} to obtain
\[ \int_\Omega\liminf_{n\to\infty}h_n\diff{\mu} = \lim_{n\to\infty}\int_\Omega f_n\diff{\mu} = \liminf_{n\to\infty}\int_\Omega f_n\diff{\mu} \leq \liminf_{n\to\infty}\int_\Omega h_n\diff{\mu} \]
using monotonicity of the integral \ref{propertiesIntegralPositiveFunctions} and liminf \ref{propertiesIntegralPositiveFunctions} for the last inequality.
\end{proof}

\begin{proposition} \label{functionPropertiesFromIntegral}
Let $\seq{\Omega, \mathcal{A}, \mu}$ be a measure space and $f:\Omega\to[0,+\infty]$ a positive measurable function. Then
\begin{enumerate}
\item $\int_\Omega f\diff{\mu} = 0$ \textup{if and only if} $f(x) = 0$ a.e.;
\item if $f$ is integrable, then $f(x)< +\infty$ a.e.\
\end{enumerate}
\end{proposition}
\begin{proof}(1) Set $E = \setbuilder{x\in\R}{f(x) \neq 0}$. Then $f(x) = 0$ a.e.\ is equivalent to $\mu(E) = 0$.

Assume $\mu(E) = 0$, then 
\[ \int_\Omega f\diff{\mu} = \int_{\Omega\setminus E} f\diff{\mu} + \int_E f\diff{\mu} = 0+\int_E f\diff{\mu} \leq \sup_{x\in E}(f(x)). \]
Now for all $s\in\SF(\Omega\to [0,+\infty[)\cap \downset f$ we have
\[ 0\leq \int_E s \diff{\mu}\leq \max_x(s(x))\mu(E) = 0  \]
and so the supremum $\int_E f\diff{\mu}$ is zero as well.

Now assume $\int_\Omega f\diff{\mu} = 0$. Consider the sets $E_n = f^{-1}[\,]\frac{1}{n},+\infty]\,]$. Then $\frac{1}{n}\chi_{E_n}\in \downset f$ is simple. Hence $\frac{1}{n}\mu(E_n)\leq \int_\Omega f\diff{\mu} = 0$, meaning $\mu(E_n) = 0$ for all $n$. So $\mu(E) = \sup_{n\in\N}\mu(E_n) = 0$.

(2) Towards contraposition, assume the set $E = \setbuilder{x\in\R}{f(x) = +\infty}$ has non-zero measure. Then $a/\mu(E)\chi_E\in\SF(\Omega, [0,+\infty[)\cap \downset f$ for all real $a>0$ and
\[  \int_\Omega f\diff{\mu} \geq \int_\Omega \frac{a\chi_E}{\mu(E)}\diff{\mu} = a  \]
so $f$ is not integrable.
\end{proof}

\subsubsection{Product measures}
Fubini!

\subsection{Real functions}
Let $\Omega$ be a set and $f:\Omega \to \C$ a function.  Then we can uniquely decompose $f$ into $f= u+iv$ where $u,v: \Omega\to \R$. We can further decompose
\[ \begin{cases}
u = u^+ - u^- & \text{such that $u^+u^- = 0$} \\
v = v^+ - v^- & \text{such that $v^+v^- = 0$.}
\end{cases} \]
If $\Omega $ carries a $\sigma$-algebra such that $f$ is measurable, then $u^+,u^-,v^+,v^-$ are also measurable.
\begin{definition}
Let $\seq{\Omega, \mathcal{A},\mu}$ be a measure space. We say a measurable function $f: \Omega \to \C$ is \udef{integrable}, if $|f|:\Omega\to [0,\infty[$ is integrable. In this case we define the \udef{integral} of $f$ as
\[ \int_\Omega f\diff{\mu} = \int_\Omega u^+\diff{\mu} - \int_\Omega u^-\diff{\mu} + i\int_\Omega v^+\diff{\mu} - i\int_\Omega v^-\diff{\mu}. \]
The set of all integrable functions in $(\Omega \to \C)$ is denoted $\mathcal{L} ^1(\Omega,\mathcal{A},\mu)$ or $\mathcal{L} ^1(\mu)$.
\end{definition}

TODO
\begin{proposition}[Reverse Fatou lemma]
Let $(\Omega, \mathcal{A}, \mu)$ be a measure space and $(h_n)$ any sequence of measurable functions that is dominated by a positive integrable function $g$ (i.e.\ $h_n\leq g$ for all $n\in\N$). Then
\[ f: \Omega\to[0,+\infty]: x\mapsto \limsup_{n\to\infty}h_n(x) \]
is measurable and
\[ \int_\Omega f\diff{\mu} \geq \limsup_{n\to\infty}\int_\Omega h_n\diff{\mu}. \]
\end{proposition}
\begin{proof}
By the corollary $g(x)<+\infty$ a.e.\ and so also $g-h_n<+\infty$ a.e. Applying Fatou's lemma \ref{FatouLemma} gives
\[ \int\liminf g-h_n \leq \liminf\int g-h_n\]
\end{proof}


\subsection{Integration of vector-valued functions}
TODO: define integration by
\[ \inner{u, \int T(t)\diff{t} v} \defeq \int\inner{u,T(t)v}\diff{t} \]
??
This case Riemann?? Or only finite dim??

\subsubsection{Weak and strong measurability}
TODO is Bochner measurable measurable with $Y$ given Borel $\sigma$-algebra?

A function $f:X\to B$ is called Bochner-measurable if it is equal $\mu$-almost everywhere to a function $g$ taking values in a separable subspace $B_{0}$ of $B$, and such that the inverse image $g^{-1}[U]$ of every open set $U$ in $B$ belongs to $\Sigma$. Equivalently, $f$ is limit $\mu$-almost everywhere of a sequence of simple functions. 

\begin{theorem}[Pettis measurability theorem]
Let $(\Omega, \mathcal{A},\mu)$ be a measure space and $Y$ a normed vector space. Then $f$ is strongly measurable \textup{if and only if} $f$ is weakly measurable and almost surely separably valued.
\end{theorem}

\subsubsection{Bochner integration}
TODO: the Bochner integral is the unique extension of the integral of simple functions to the set of Bochner measurable functions???? (i.e.\ simple functions dense in Bochner space, with $L^1$ metric)
\begin{definition}
Let $(\Omega, \mathcal{A},\mu)$ be a measure space and $Y$ a normed vector space. Then a Bochner measurable function $f:\Omega\to Y$ is called \udef{Bochner integrable} if there exists a sequence of integrable simple functions $\seq{s_n}\subset\SF(\Omega,Y)$ such that
\[ \lim_{n\to\infty}\int_\Omega \norm{f-s_n}\diff{\mu} = 0. \]
Take such a sequence $\seq{s_n}$. The \udef{Bochner integral} of $f$ on $\Omega$ w.r.t. $\mu$ is defined as
\[ \int_\Omega f\diff{\mu} \defeq \lim_{n\to\infty}\int_\Omega s_n\diff{\mu}. \]
\end{definition}

\begin{lemma}
The Bochner integral is well-defined: let $\seq{s_n},\seq{t_n}\in \prescript{\N}{}{\SF(\Omega,Y)}$ be sequences such that
\[ \lim_{n\to\infty}\int_\Omega \norm{f-s_n}\diff{\mu} = 0 = \lim_{n\to\infty}\int_\Omega \norm{f-t_n}\diff{\mu}.  \]
Then
\begin{enumerate}
\item the limits $\lim_{n\to\infty}\int_\Omega s_n\diff{\mu}$ and $\lim_{n\to\infty}\int_\Omega t_n\diff{\mu}$ exist;
\item $\lim_{n\to\infty}\int_\Omega s_n\diff{\mu} = \lim_{n\to\infty}\int_\Omega t_n\diff{\mu}$.
\end{enumerate}
\end{lemma}
\begin{proof}
TODO
\end{proof}

\begin{proposition}[Bochner integrability criterion]
Let $(\Omega, \mathcal{A},\mu)$ be a measure space and $Y$ a normed vector space.

A Bochner measurable function $f$ is Bochner integrable \textup{if and only if}
\[ \int_\Omega \norm{f} \diff{\mu} < \infty. \]
\end{proposition}

\begin{proposition}
Linearity and monotonicity.
\end{proposition}

\begin{proposition}
Let $(\Omega, \mathcal{A},\mu)$ be a measure space $Y$ a normed vector space and $T$ a closed operator on $Y$. If $T\circ f$ is integrable, then
\[ \int_\Omega (T\circ f)\diff{\mu} = T\left(\int_\Omega f\diff{\mu}\right). \]
\end{proposition}
\begin{proof}
TODO
\end{proof}
\begin{corollary}
If $T$ is bounded, then $T\circ f$ is integrable and
\[ \int_\Omega (T\circ f)\diff{\mu} = T\left(\int_\Omega f\diff{\mu}\right). \]
\end{corollary}

TODO Dominated convergence.

\subsubsection{Pettis integration}


\section{Further topics}
TODO rename!

\subsection{Absolute continuity and mutual singularity}
\begin{definition}
Let $\mu,\nu$ be measures on the measurable space $(\Omega,\mathcal{A})$. We say
\begin{itemize}
\item $\nu$ is \udef{absolutely continuous} w.r.t. $\mu$ if $\mu(A)=0\implies \nu(A) = 0$ for all $A\in\mathcal{A}$;
\item $\mu$ and $\nu$ are \udef{mutually singular} if there exists a set $A\in\mathcal{A}$ with $\mu(A) = 0$ and $\nu(A^c) = 0$.
\end{itemize}
\end{definition}

\begin{theorem}[Radon-Nikodym]
Let $\mu,\nu$ be measures on the measurable space $(\Omega,\mathcal{A})$. Then $\nu$ is absolutely continuous w.r.t. $\mu$ \textup{if and only if} there exists a measurable function $f:\Omega\to\R$ (or $\C$?) such that
\[ \nu(A) = \int_\Omega f\cdot \chi_A \diff{\mu} \qquad \forall A\in\mathcal{A}. \]
The function $f$ is uniquely determined a.e.\ (w.r.t. $\mu$).
\end{theorem}

\subsection{Lebesgue decomposition}
\begin{theorem}[Lebesgue decomposition theorem]
Let $\mu, \nu$ be two measures on a measurable space $(\Omega, \mathcal{A})$. Then $\nu$ can be written uniquely as
\[ \nu = \nu_\text{ac} + \nu_\text{sing} \]
where $\mu$ and $\nu_\text{sing}$ are mutually singular and $\nu_\text{ac}$ is absolutely continuous w.r.t. $\mu$. 

\end{theorem}

\subsection{Convolution}
TODO Young's convolution inequality

\section{Duality in integration}
Distributions with kernels will be example.

\chapter{Complex analysis}
\begin{definition}
A \udef{complex function} is a function in $(U\subseteq \C \to \C)$.
\end{definition}
\section{The complex numbers as a real algebra}
The set of complex numbers $\C$ is isomorphic to the algebra $\R^2$ where multiplication is defined by
\[ (a, b)\cdot (x, y) \defeq (ax-by, ay+bx). \]
Thus the regular representation $\rho_{(a,b)}$ has matrix
\[ \begin{pmatrix}
a & -b \\ b & a
\end{pmatrix}. \]

\section{Holomorphic functions}
\begin{definition}
Let $f:U\subseteq \C \to \C$ be a complex function. We say
\begin{enumerate}
\item $f$ is \udef{holomorphic  at $z\in U$} if the limit $\lim_{h\to 0} \dfrac{f(z+h) - f(z)}{h}$
exists;
\item $f$ is \udef{holomorphic in $S\subset U$} if it is holomorphic at every point in $S$;
\item $f$ is \udef{holomorphic} if it is holomorphic at every point in $U$;
\item $f$ is \udef{entire} if $U=\C$ and it is holomorphic at every point in $\C$.
\end{enumerate}
\end{definition}

\begin{lemma}
Holomorphic functions are continuous.
\end{lemma}
\begin{lemma}
Let $f,g$ be holomorphic. Then
\begin{enumerate}
\item $f+g$ is holomorphic and $(f+g)' = f'+g'$;
\item $fg$ is holomorphic and $(fg)' = f'g+fg'$;
\item if $g(z_0)\neq 0$, then $f/g$ is holomorphic at $z_0$ and
\[ (f/g)' = \frac{f'g - fg'}{g^2}; \]
\item the chain rule holds.
\end{enumerate}
\end{lemma}

\subsection{Cauchy-Riemann equations}
The space of complex numbers $\C$ is a real $2$-dimensional vector space.

\begin{lemma}
Let $f: U\subseteq \C \to C$ be a complex function. Then $f$ is holomorphic \textup{if and only if} it is Fréchet differentiable as a function $F: V\subseteq \R^2 \to \R^2$ and $\diff F$ is the regular representation of some $z\in \C$.
\end{lemma}
\begin{corollary}[Cauchy-Riemann equations]
Let $f: U\subseteq \C \to C$ be a complex function. Then $f$ is complex differentiable at $z_0 = a+bi$ \textup{if and only if} the real derivatives
\[ \pd{\Re(f(a + ib))}{a},\; \pd{\Re(f(a + ib))}{b},\;
\pd{\Im(f(a + ib))}{a} \;\;\text{and}\;\; \pd{\Im(f(a + ib))}{b}. \]
exist, are continuous and the equations
\[
\pd{\Re(f(a + ib))}{a} = \pd{\Im(f(a + ib))}{b} \quad\text{and}\quad \pd{\Re(f(a + ib))}{b} = -\pd{\Im(f(a + ib))}{a} \]
hold. In particular
\[ |f'(z_0)|^2 = \det J_f(a,b) \]
where $\det J_f(a,b)$ is the Jacobian determinant of $f$ as a function $V\subseteq \R^2 \to \R^2$.
\end{corollary}
\begin{proof}
We need the Jacobian
\[ \begin{pmatrix}
\pd{\Re(f(a + ib))}{a} & \pd{\Re(f(a + ib))}{b} \\
\pd{\Im(f(a + ib))}{a} & \pd{\Im(f(a + ib))}{b}
\end{pmatrix} \]
to be of the form $\begin{pmatrix}
x & -y \\ y & x
\end{pmatrix}$ in order for it to be a regular representation of some $f' =\pd{\Re(f(a + ib))}{a} + i\pd{\Im(f(a + ib))}{a} \in \C$. TODO ref requirement continuously differentiable.

The Jacobian determinant is a simple calculation:
\begin{align*}
\det J_f(a,b) &= \pd{\Re(f(a + ib))}{a}\pd{\Im(f(a + ib))}{b} - \pd{\Im(f(a + ib))}{a}\pd{\Re(f(a + ib))}{b} \\
&= \pd{\Re(f(a + ib))}{a}^2 + \pd{\Im(f(a + ib))}{a}^2 = |f'|^2.
\end{align*}
\end{proof}

\subsection{Cauchy's theorem, Morera's theorem and the integral formula}

\begin{theorem}[Cauchy's theorem] \label{CauchyTheorem}
Let $f: U\subseteq \C \to \C$ be a holomorphic complex function and $\gamma$ a simple closed Jordan curve whose interior lies in $U$. Then
\[ \oint_\gamma f(z)\diff{z} = 0. \]
\end{theorem}
TODO: looser requirements for $\gamma$
\begin{proof}
TODO: generalised Stokes + Cauchy-Riemann!
\end{proof}
\begin{corollary}
Let $f: U\subseteq \C \to \C$ be a holomorphic complex function. Then there exists a primitive $F: U\to \C$ such that $\od{F}{z} = f$.
\end{corollary}
\begin{proof}
The integral $\int_\gamma f(z)\diff{z}$ depends only on the endpoints of $\gamma$.
\end{proof}

\begin{theorem}[Morera's theorem]
Let $f: U\subseteq \C \to \C$ be a complex function on an open set $U$ such that
\[ \oint_\gamma f(z) \diff{z} = 0 \]
for every closed, piecewise $C^1$ curve $\gamma$ in $U$, then $f$ is holomorphic.
\end{theorem}
\begin{proof}
$\int f(z)\diff{z}$ is a primitive, so $f$ is complex differentiable.
\end{proof}
TODO: triangles enough!

\begin{theorem}[Cauchy's integral formula]
Let $f: U\subseteq \C \to \C$ be a holomorphic complex function and $\gamma$ a simple closed Jordan curve whose interior lies in $U$. Then
\[ f(z) = \frac{1}{2\pi i}\oint_\gamma \frac{f(\zeta)}{\zeta - z}\diff{\zeta} \]
for any point $z$ in the interior of $\gamma$.
\end{theorem}
\begin{proof}
Let $C_{z,\epsilon}$ be a small circle inside $\gamma$ around $z$ of radius $\epsilon$ and opposite orientation (TODO explicate!). Then $\frac{f(\zeta)}{\zeta - z}$ is holomorphic in the region between $\gamma$ and $C_{z,\epsilon}$, so
\begin{align}
\oint_\gamma \frac{f(\zeta)}{\zeta - z}\diff{\zeta} &= -\oint_{C_{z,\epsilon}} \frac{f(\zeta)}{\zeta - z}\diff{\zeta} \\
&= -\oint_{C_{z,\epsilon}} \frac{f(\zeta)-f(z)}{\zeta - z} + \frac{f(z)}{\zeta - z}\diff{\zeta} \\
&= -\oint_{C_{z,\epsilon}} \frac{f(\zeta)-f(z)}{\zeta - z}\diff{\zeta} -\oint_{C_{z,\epsilon}}\frac{f(z)}{\zeta - z}\diff{\zeta}.
\end{align}
In the limit $\epsilon \to 0$, the first part is bounded by
\[ |\oint_{C_{z,\epsilon}} \frac{f(\zeta)-f(z)}{\zeta - z}\diff{\zeta}| \leq \sup_\zeta\left|\frac{f(\zeta)-f(z)}{\zeta - z}\right| \cdot |2\pi\epsilon| \to 0 \]
because $\frac{f(\zeta)-f(z)}{\zeta - z}$ remains bounded. For the second part, we have
\begin{align*}
-\oint_{C_{z,\epsilon}} \frac{f(z)}{\zeta - z}\diff{\zeta} &= f(z)\oint_{C_{z,\epsilon}} \frac{\diff{\zeta}}{\zeta - z} \\
&= f(z)\int_0^{2\pi}\frac{\epsilon ie^{-it}}{\epsilon e^{-it}}\diff{t} \\
&= f(z)2\pi i.
\end{align*}
\end{proof}
\begin{corollary}
Let $f: U\subseteq \C \to \C$ be a holomorphic complex function. Then $f$ has infinitely many complex derivatives and
\[ f^{(n)}(z) = \frac{n!}{2\pi i}\oint_\gamma \frac{f(\zeta)}{(\zeta-z)^{n+1}}\diff{\zeta} \]
for all $z$ in the interior of $\gamma$.
\end{corollary}
\begin{proof}
TODO
\end{proof}

\begin{proposition}
Let $f$ be holomorphic in an open set $\Omega$ and $D$ a
disc centered at $z_0$ whose closure is contained in $\Omega$. Then $f$ has a power series expansion at $z_0$
\[ f(z) = \sum_{n=0}^\infty a_n(z-z_0)^n \]
for all $z\in D$. The coefficients are given by
\[ a_n = \frac{f^{(n)}(z_0)}{n!} \qquad \text{for all $n\geq 0$}. \]
\end{proposition}
\begin{proof}
TODO
\end{proof}
\begin{corollary}
If $f$ is holomorphic in an open
set that contains the closure of a disc $D$ centered at $z_0$ and of radius $R$,
then
\[  |f^{(n)}(z_0)| \leq \frac{n!\norm{f}_C}{R^n}, \]
where $\norm{f}_C = \sup_{z\in C}|f(z)|$.
\end{corollary}
\begin{proof}
TODO
\end{proof}
Thus the distance from $z_0$ to the nearest singular point is the radius of convergence of the power series.
\begin{corollary}[Liouville's theorem] \label{liouvilleTheoremAnalysis}
If $f$ is entire and bounded, then $f$ is contant.
\end{corollary}
\begin{proof}
It suffices to show that $f'(z_0) = 0$. This can be seen by taking $R\to\infty$ in the previous inequality.
\end{proof}
\begin{corollary}[Fundamental theorem of algebra]
Let $P(z) = a_nz^n + \ldots + a_0$ be a polynomial of degree $n\geq 1$ with complex coefficients. Then $P(z)$ has precisely $n$ roots. If these roots are denoted $w_1, \ldots, w_n$, then we can write
\[ P(z = a_n(z-w_1)(z-w_2)\ldots(z-w_n). \]
\end{corollary}

\begin{proposition}
Let $f: \Omega\subseteq \C\to \C$ be a complex function that is holomorphic in a region $U\subseteq \Omega$ that contains a closed annulus $\setbuilder{z\in \C}{r\leq|z-z_0|\leq R}$ for some $z_0\in \C$ and $r,R\in \R$. Then $f$ has a Laurent series expansion that converges in the interior of the annulus:
\[ f(z) = \sum_{i=-\infty}^\infty a_i(z-z_0)^i \]
for all $z\in \setbuilder{z\in \C}{r < |z-z_0| < R}$.
\end{proposition}
\begin{proof}
TODO
\end{proof}
TODO uniqueness ??? \url{https://en.wikipedia.org/wiki/Laurent_series#Uniqueness}

\subsection{Analytic continuation}
\begin{proposition}
Let $f:\Omega\subseteq \C\to \C$ be a holomorphic function on a connected open set $\Omega$. Suppose there exists a sequence of distinct points with limit point in $\Omega$ on which $f$ vanishes. Then $f = \underline{0}$.
\end{proposition}
\begin{proof}
TODO
\end{proof}
\begin{corollary}
Let $f,g:\Omega\subseteq \C\to \C$ be holomorphic functions on a connected open set $\Omega$. Suppose there exists a sequence of distinct points $\seq{z_n}$ with limit point in $\Omega$ such that $f(z_n) = g(z_n)$ for all $n$. Then $f = g$.
\end{corollary}
In particular this holds if $f$ and $g$ agree on some non-empty open subset of $\Omega$.
\begin{corollary}
Let $f:\Omega\subseteq \C\to \C$ be a holomorphic function on an open set $\Omega$ and $\Omega'\supseteq \Omega$ a connected open subset of $\C$. Then there exists at most one holomorphic function $f'$ on $\Omega'$ such that $f'|_\Omega = f$.
\end{corollary}

\begin{definition}
In this case the function $f'$ is called an \udef{analytic continuation} of $f$ into $\Omega'$.
\end{definition}

\begin{proposition}[Symmetry principle] \label{symmetryPrinciple}
Let $\Omega$ be an open subset of $\C$ such that $\overline{\Omega} = \Omega$. Denote by $\Omega^+$ the part of $\Omega$ that lies in the upper half plane and by $\Omega^-$ the part lying in the lower half plane. Set $I = \R \cap \Omega$.

Let $f^+: \Omega^+ \to \C$ and $f^-: \Omega^- \to \C$ be holomorphic functions that extend continuously to $I$ and
\[ \forall x\in I: \; f^+(x) = f^-(x). \]
Then the compound function
\[ f: \Omega \to \C: z\mapsto f(z) = \begin{cases}
f^+(z) & z\in \Omega^+ \\
f^+(z) = f^-(z) & z\in I \\
f^-(z) & z\in \Omega^-
\end{cases} \]
is holomorphic on all of $\Omega$.
\end{proposition}

\begin{proposition}[Schwarz reflection principle]
Let $\Omega, \Omega^+, \Omega^-$ and $I$ be as in \ref{symmetryPrinciple} and $f: \Omega^+ \to \C$ a holomorphic function that extends continuously to $I$. Then there exists a holomorphic function $g: \Omega\to \C$ such that $g|_{\Omega^+} = f$.
\end{proposition}
\begin{proof}
Idea: define $g|_{\Omega^-}(z) = \overline{f(\overline{z})}$. TODO details.
\end{proof}

\subsubsection{Analytic continuation along a curve}
\begin{theorem}[Monodromy theorem]
Let $f:D\subseteq \C \to \C$ be a holomorphic function and $\Omega$ the set of all points that admit an analytic continuation.

If two curves are homotopic in $\Omega$, then they give the same analytic continuation.
\end{theorem}

\subsection{Limits and holomorphic functions}
\begin{proposition}
Let $\seq{f_n}$ be a sequence of holomorphic functions on $\Omega$ that converges uniformly to a function $f$ in every compact subset of $\Omega$. Then
\begin{enumerate}
\item $f$ is holomorphic in $\Omega$;
\item $\seq{f_n'}$ converges uniformly to $f'$ on every compact subset of $\Omega$;
\item for all $k\in \N$, the sequence $\seq{f_n^{(k)}}$ converges uniformly to $f^{(k)}$ on every compact subset of $\Omega$.
\end{enumerate}
\end{proposition}
\begin{proof}
(1) TODO (+ \url{https://www.math.wustl.edu/~sk/limits.pdf})

(2) TODO

(3) By induction on $k$.
\end{proof}
TODO: this is part of the motivation for the compact-open topology (use this terminology?).

\begin{proposition}
Let $\Omega$ be a open set in $\C$ and $F: \Omega\times[0,1]\to \C$ a function such that
\begin{itemize}
\item $F(\cdot,s)$ is holomorphic (in the first variable) for all $s\in [0,1]$;
\item $F$ is continuous.
\end{itemize}
Then the function
\[ f: \Omega \to \C: z\mapsto f(z) = \int_0^1F(z,s)\diff{s} \]
is holomorphic.
\end{proposition}

\begin{proposition}[Runge's approximation theorem]
Let $K\subseteq \C$ be compact.
\begin{enumerate}
\item Any function holomorphic in a neighbourhood of $K$ can be approximated uniformly on $K$ by rational functions whose singularities are in $K^c$.
\item If $K^c$ is connected, then the approximating functions can be taken to be polynomials.
\item If $K^c$ is not connected, then there exists a function $f$ holomorphic on a neighbourhood of $K$ that cannot be approximated uniformly by polynomials on $K$.
\end{enumerate}
\end{proposition}
If inner and outer part of annulus then Laurent series (i.e.\ particular form of approximating rationals)

\section{Singularities}
\subsection{Laurent series}
\begin{proposition}
Let $f:\Omega \to \C$ be a holomorphic function and let $\Omega$ contain two concentric circles with center $z_0$ and radii $0<r< R$. Then $f$ has a Laurent expansion
\[ f(z) = \sum_{n=-\infty}^{\infty}a_n(z-z_0)^n \]
that converges on the annulus between the concentric circles.
\end{proposition}
\begin{proof}
Call the outer circle $C_1$ and the inner $C_2$. Then we can use the integral formula to write
\[ f(z) = \frac{1}{2\pi i}\oint_{C_1}\frac{f(\zeta)}{\zeta - z}\diff{\zeta} - \frac{1}{2\pi i}\oint_{C_2}\frac{f(\zeta)}{\zeta - z}\diff{\zeta} \]
TODO
\end{proof}

\subsection{Isolated singularities}

\subsection{Non-isolated singularities}

\section{Meromorphic functions}
\subsection{Zeros and poles}
\begin{lemma} \label{holomorphicZeroLemma}
Let $f:\Omega\to \C$ be a holomorphic function on an open set $\Omega$ that has a zero at $z_0\in \Omega$ and does not vanish identically on $\Omega$. Then there exists an open neighbourhood $U\subseteq \Omega$ of $z_0$ such that
\[ f|_U(z) = (z-z_0)^ng(z) \]
for all $z\in U$, some holomorphic $g:U\to \C\setminus\{0\}$ and $n\in \N$.

Additionally, the $n$ is uniquely determined by $f$ and $z_0$; it is independent of $U$.
\end{lemma}
\begin{proof}
TODO
\end{proof}

\begin{definition}
Let $f:\Omega\to \C$ be a function on an open set $\Omega$.
\begin{itemize}
\item If $f$ is holomorphic with a zero at $z_0$, the $n$ in \ref{holomorphicZeroLemma} is called the \udef{multiplicity} or \udef{order} of the zero $z_0$.
\item If $\lim_{z\to z_0} 1/f(z) = 0$ and is $1/f$ holomorphic in a neighbourhood of $z_0$, then $z_0$ is called a \udef{pole} of $f$. The $n$ in the expansion \ref{holomorphicZeroLemma} of $1/f$ is called the \udef{multiplicity} or \udef{order} of the pole $z_0$.
\end{itemize}
If $n = 1$, we call the zero or pole \udef{simple}. 
\end{definition}

Poles lie in $\overline{\Omega}\setminus\Omega$. TODO sort out definition meromorphic function.

\begin{lemma}
Let $f:\Omega\to \C$ be a function on an open set $\Omega$ that has a pole at $z_0\in \overline{\Omega}$. Then there exists a neighbourhood $U$ of $z_0$ such that $f$ is holomorphic on $U\setminus\{z_0\}$.
\end{lemma}
This means a pole in necessarily an isolated singularity (TODO ref later)

\begin{definition}
Let $f: \Omega\subseteq \C \to \C$ be a function. We call $f$ \udef{meromorphic} if either $f$ or $1/f$ is holomorphic at each point $z\in \Omega$.
\end{definition}

\begin{lemma}
Let $f: \Omega\subseteq \C \to \C$ be a function. Then $f$ is meromorphic \textup{if and only if} for each point $z\in \Omega$, either $f$ is holomorphic or $z$ is a pole.
\end{lemma}

\subsection{Laurent series and residues}
\begin{proposition}
Let $f:\Omega\to \C$ be a function on an open set $\Omega$ that has a pole of order $n$ at $z_0$, then the Laurent series of $f$ at $z_0$ is of the form
\[  f(z) = \sum_{i=-n}^\infty a_i(z-z_0)^i \]
and converges on a punctured disk $B(z_0, \epsilon)\setminus\{z_0\}$.
\end{proposition}
\begin{proof}
By \ref{holomorphicZeroLemma} we have that 
\[ (1/f)|_{B(z_0,\epsilon)}(z) = (z-z_0)^ng(z) \]
for some holomorphic, non-vanishing $g$. Thus $f|_{B(z_0,\epsilon)}(z) = (z-z_0)^{-n}1/g(z)$. Now $1/g$ is holomorphic, so we can expand it as a power series. This makes the product a Laurent series starting at $-n$.

To conclude, we remark that the inner radius of the annulus on which the Laurent series converges is zero: by \ref{LaurentSeriesConvergence}
\[ r = \limsup_{i\to\infty}\left(|a_{-i}|^{1/i}\right) = 0. \]
\end{proof}
TODO: pole iff Laurent series has finite principal part!

\subsubsection{Partial fraction decomposition}
\begin{proposition}[Partial fraction decomposition] \label{partialFractionDecomposition}
Let $f: \Omega\subseteq \C \to \C$ be a meromorphic function with finitely many poles $z_0, \ldots z_n$. Let $P_{z_k}(z)$ be the principal part of the Laurent expansion around $z_k$. Then we have the decomposition
\[ f(z) = \sum_{k=0}^nP_k(z) + F(z) \]
where $F(z)$ is a holomorphic function.
\end{proposition}
\begin{proof}
The function $F(z) = f(z) - \sum_{k=0}^nP_k(z)$ has no poles and thus is holomorphic. Indeed, for all $z\in\Omega \setminus \{z_0, \ldots z_n\}$, both $f(z)$ and $\sum_{k=0}^nP_k(z)$ are holomorphic, meaning that $F(z)$ is too.

Take some pole $z_k$. Then the Laurent series of $F(z)$ around $z_k$ is of the form
\[ F(z) = P_k(z) + \sum_{i=0}^\infty a_{k,i}(z-z_k)^i - \sum_{j=0}^n P_j(z) = \sum_{i=0}^\infty a_{k,i}(z-z_k)^i - \sum_{\substack{j=0\\ j\neq k}}^n P_j(z), \]
which has no singularity at $z_k$.
\end{proof}

TODO link with integrals of fractional functions.

\subsubsection{Residues}
\begin{definition}
Let $f: \Omega\subseteq \C \to \C$ have a pole at $z_0$. Given the Laurent series expansion
\[  f(z) = \sum_{i=-n}^\infty a_i(z-z_0)^i, \]
the coefficient $a_{-1}$ is called the \udef{residue} at the pole $z_0$. We write $\Res_{z_0}f \defeq a_{-1}$.
\end{definition}

\begin{proposition}
Let $f$ have a pole of order $n$ at $z_0$, then
\[ \Res_{z_0}f = \lim_{z\to z_0}\frac{1}{(n-1)!}\left(\od{}{z}\right)^{n-1}(z-z_0)f(z). \]
\end{proposition}
\begin{proof}
This follows straight from the series expansion
\[ (z-z_0)^nf(z) = a_{-n} + a_{-n+1}(z-z_0) + \ldots + a_{-1}(z-z_0)^{n-1} + a_0(z-z_0)^n + \ldots \]
\end{proof}
\begin{corollary}
If $f$ has a simple pole at $z_0$, then $\Res_{z_0} f = \lim_{z\to z_0}(z-z_0)f(z)$.
\end{corollary}

\begin{proposition}
Let $f: \Omega\subseteq \C\to \C$ be a meromorphic function that has one pole at $z_0$. Let $\gamma$ be a simple curve such that $z_0\in \int\gamma \subseteq \Omega$. Then
\[ \oint_\gamma f(z) \diff{z} = 2\pi i \Res_{z_0}f. \]
\end{proposition}
\begin{proof}
By truncated Laurent expansion. TODO
\end{proof}
\begin{corollary}[Residue formula]
Let $f: \Omega\subseteq \C\to \C$ be a meromorphic function and $\gamma$ a simple curve that encompasses $N$ poles $z_1, \ldots, z_N$. Then
\[ \oint_{\gamma} f(z)\diff{z} = 2\pi i \sum_{k=1}^N\Res_{z_k}f. \]
\end{corollary}

\subsection{The argument principle}
\begin{proposition}[Argument principle]
Let $f$ be a meromorphic function in an open set containing a simple curve $\gamma$ and its interior. Assume $f$ has no poles or zeros on $\gamma$. Then
\[ \frac{1}{2\pi i}\oint_\gamma \frac{f'(z)}{f(z)}\diff{z} = \text{number of zeros of $f$ inside $\gamma$} \;-\; \text{number of poles of $f$ inside $\gamma$} \]
where the poles and zeros are counted with their multiplicities.
\end{proposition}
\begin{proof}
TODO
\end{proof}

\begin{theorem}[Rouché's theorem]
Let $f$ and $g$ be holomorphic functions on an open set that contains a closed simple curve $\gamma$ and its interior. If
\[ |f(z)| > |g(z)| \qquad \forall z\in \gamma, \]
then $f$ and $f+g$ have the same number of zeros inside $\gamma$.
\end{theorem}
\begin{proof}
For $t\in [0, 1]$ we define
\[ f_t(z) = f(z) + tg(z). \]
This means $f_0 = f$ and $f_1 = f+g$. The condition $|f(z)| > |g(z)|$ ensures that $f_t$ has no zeros on $\gamma$. Also $f_t$ is holomorphic and thus has no poles. So the number of zeros $n_t$ of $f_t$ inside $\gamma$ is given by
\[ n_t = \frac{1}{2\pi i}\oint_\gamma \frac{f_t'(z)}{f_t(z)}\diff{z}. \]
It is then enough to observe that $n_t$ is continuous as a real function of $t$.
\end{proof}
\begin{corollary}[Open mapping theorem]
If $f$ is holomorphic and non-constant, then it is an open map.
\end{corollary}
\begin{proof}
TODO
\end{proof}

\begin{proposition}[Maximum modulus principle]
If $f$ is a non-constant holomorphic function in a simply connected region $\Omega$, then $|f(z)|$ cannot attain a maximum in $\Omega$.
\end{proposition}
\begin{proof}
TODO
\end{proof}
\begin{corollary}
Let $\Omega$ be a simply connected open set with compact closure $\overline{\Omega}$. If $f$ is holomorphic on $\Omega$ and continuous on $\overline{\Omega}$, then
\[ \sup_{z\in \Omega}|f(z)| \leq \sup_{z\in \overline{\Omega}\setminus\Omega}|f(z)|. \]
\end{corollary}

\subsection{The ring of polynomials over $\meromorphic_\Omega$}

\begin{definition}
Let $\Omega\subseteq \C$ be an open set. Let $\meromorphic_\Omega$ be the set of meromorphic functions in $(Omega \to \C)$.
\end{definition}

\begin{proposition}
For any $\Omega \subseteq \C$, the set $\meromorphic_\Omega$ is a field. With
\begin{itemize}
\item as zero the constant function $\underline{0}$;
\item as identity the constant function $\underline{1}$.
\end{itemize}
\end{proposition}

\subsubsection{Poles and roots}
\begin{definition}
We say a polynomial in $\meromorphic_\Omega[X]$ has a pole at $z\in \Omega$, if one of its coefficients has a pole at $z$.
\end{definition}

\begin{lemma} \label{polesProductPolynomial}
Let $p,q\in \meromorphic_\Omega[X]$ be monic and $r = pq$. If either $p$ or $q$ has a pole at $z_0\in \Omega$, then $r$ has a pole at $z_0$ as well.
\end{lemma}
\begin{proof}
Let $h$ be the maximal order of $z_0$ as a pole among the coefficients of $p$ and $k$ the maximal order of $z_0$ as a pole among the coefficients of $q$. Then both $\lim_{z\to z_0}(z-z_0)^h p(z)$ and $\lim_{z\to z_0}(z-z_0)^k q(z)$ are non-zero polynomials (due to being monic) with constant coefficients and $h+k \geq 1$. 

Now assume $r(z)$ is holomorphic at $z_0$, then
\[ 0 = \lim_{z\to z_0}(z-z_0)^{h+k}r(z) = \Big(\lim_{z\to z_0}(z-z_0)^h p(z)\Big)\Big(\lim_{z\to z_0}(z-z_0)^k q(z)\Big) \neq 0, \]
which is a contradiction.
\end{proof}
\begin{corollary}
Let $p \in \meromorphic_\Omega[x]$ be monic and have a prime decomposition $p = \prod_{k=1}^nq_k^{m_k}$. Then $z_0\in \Omega$ is a pole of $p(z)$ \textup{if and only if} it is a pole of one of the $q_k(z)$.
\end{corollary}

\begin{proposition}
Let $p,q\in \meromorphic_\Omega[x]$ be monic and relatively prime, then $p(z)$ and $q(z)$ are relatively prime as polynomials in $\C[X]$ for all $z\in \Omega \setminus (S_p \cup S_q \cup H)$, where
\begin{itemize}
    \item $S_p$ is the set of poles of $p$;
    \item $S_q$ is the set of poles of $q$;
    \item $H$ is isolated and closed in $\Omega$.
\end{itemize}
\end{proposition}
\begin{proof}
By Bézout's identity, we can write $\alpha[x](z)p[x](z) + \beta[x](z)q[x](z) = f(z)$ for some monic $\alpha,\beta\in \meromorphic_\Omega[x]$. Let $H$ be the set of poles and zeros of $f(z)$ (which contains $S_p \cup S_q$ by \ref{polesProductPolynomial}). For all $z_0\notin H$ we have
\[ \left(\frac{\alpha[x](z_0)}{f(z_0)}\right)p[x](z_0) + \left(\frac{\beta[x](z_0)}{f(z_0)}\right)q[x](z_0) = 1, \]
meaning $p[x](z_0)$ and $q[x](z_0)$ are relatively prime (TODO ref).
\end{proof}
\begin{corollary}
Let $p\in \meromorphic_\Omega[x]$ be monic and irreducible. Then $p(z)$ has simple roots for all $z\in\Omega\setminus H$ for some isolated and closed set $H\subseteq \Omega$.
\end{corollary}
\begin{proof}
If the degree of $p$ is $1$, then the result is immediate. Assume the degree of $p$ is greater than $1$.

For any $z\in \Omega$, any non simple root of $p[x](z)$ must also be a root of $\pd{p[x](z)}{x}$. As $p[x]$ is irreducible, $p[x]$ and $\pd{p[x]}{x}$ are relatively prime. By the proposition $p[x](z_0)$ and $\pd{p[x](z_0)}{x}$ are relatively prime for all $z_0\in \Omega\setminus H$, which means they do not share roots.
\end{proof}

\subsubsection{Algebroid functions}

\subsubsection{Puiseux series}

\section{Conformal mappings}

\chapter{Calculus}
\input{calculus}


\chapter{Distributions}
\section{The space of test functions}
\subsection{Canonical LF topology}
\subsubsection{Convergence}
\subsection{The space of test functions}
\begin{definition}
Let $X$ be an open subset of a normed vector space. The space of \udef{test functions} on $X$ is $\cont^\infty_c(X)$ equipped with the canonical LF topology. This space is also commonly denoted $\testFuncs(X)$.
\end{definition}

\begin{example}
The \udef{bump function}
\[ \phi: \R\to\R: x\mapsto \begin{cases}
e^{1/(x^2-1)} & |x|<1 \\ 0 & |x| \geq 1
\end{cases} \]
is a test function in $\testFuncs(\R)$.
\end{example}

\begin{lemma}
Every test function is bounded.
\end{lemma}
\begin{proof}
TODO
\end{proof}

\section{The module of distributions}
\begin{definition}
    Let $X$ be an open subset of a normed vector space.
    A linear map $T: \testFuncs(X) \to \C$ is a \udef{distribution} on $X$ is an element of the topological dual of $\testFuncs(X)$ equipped with the strong dual topology. It is denoted $\dists(X)$.
\end{definition}

\begin{proposition}
    The space of distributions $\dists(X)$ is a module over the ring $\cont^\infty(X)$.
    
    If $T\in \dists(X)$ and $a\in \cont^\infty(X)$, then the multiplication is defined by
    \[ (aT)(\phi) = T(a\phi) \qquad \forall \phi \in \testFuncs(X). \]
\end{proposition}

\subsection{Types of distributions}
\subsubsection{Regular distributions}
\begin{lemma}
Let $X$ be an open subset of a normed vector space and $f: X\to\C$ a locally integrable function in $L^1_\text{loc}(X)$. Then
\[ T_f: \testFuncs(X) \to \C: \phi \mapsto \int_X f(x)\phi(x)\diff{x} \]
is a distribution.
\end{lemma}
\begin{proof}
TODO We just need to show continuity (from boundedness)
\end{proof}

\begin{definition}
Distributions of the form $T_f$ for some $f\in L^1_\text{loc}(X)$ are called \udef{regular distributions}.
\end{definition}


\begin{lemma} \label{uniquenessIntegratedFunction}
Let $f,g: X\to \C$ be locally, absolutely integrable functions. If $T_f = T_g$, then $f(x) = g(x)$ a.e.
\end{lemma}

\subsubsection{Dirac delta distribution}
\begin{definition}
    Let $X$ be an open subset of a normed vector space and $x_0\in X$. The \udef{Dirac delta distribution} at $x_0$ is the distribution
    \[ \delta_{x_0}: \testFuncs(X) \to \C: \phi \mapsto \phi(x_0). \]
    We write $\delta \defeq \delta_0$.
\end{definition}

\begin{proposition}
Let $X$ be an open subset of a normed vector space containing $0$. Suppose $\seq{f_n: X\to \C}$ is a sequence of functions such that
\begin{enumerate}
\item $\int_X f_n(x)\diff{x} = 1$ for all $n$;
\item there exists a constant $C$ such that $\int_X |f_n(x)|\diff{x} \leq C$ for all $n$;
\item $\lim_{n\to \infty} \int_{|x|>r}|f_n(x)|\diff{x} = 0 $ for all $r > 0$.
\end{enumerate}
If $\phi$ is bounded on $X$ and continuous at $0$, then
\[ \lim_{n\to \infty} \int_X f_n(x)\phi(x)\diff{x} = \phi(0) \]
and in particular $f_n\to \delta$ in $\dists(X)$.
\end{proposition}
Notice that the condition of $\phi$ being bounded on $X$ and continuous at $0$ is much less strong than $\phi\in\testFuncs$.
\begin{proof}
TODO + iff? Then we could define delta sequences as sequences that converge to $\delta$.

TODO link with (and formulation of integral mean value theorem)
\end{proof}
Sequences $\seq{f_n}$ satisfying the assumptions of the proposition are called \udef{delta sequences}.

\begin{lemma}
If $f_n$ is such that $\int f_n(x) \diff{x} = 1$ and the support shrinks to zero, then $f_n$ is a delta sequence.
\end{lemma}

\begin{lemma}
Let $f: \R^N\to\C$ be an integrable function with $\int_{\R^N}f(x)\diff{x} = 1$. Then $\seq{n^Nf(nx)}_{n\in \N}$ is a delta sequence.
\end{lemma}

\subsection{The derivative of a distribution}
\begin{definition}
Let $X$ be an open subset of a normed vector space $V$ and let $T\in \dists(X)$. For $u\in V$ we define the directional derivative of $T$ as
\[ \partial_u(T) \defeq - T\circ \partial_u. \]

In particular, if $V = \R$, we define
\[ T' \defeq \od{}{x}(T) \defeq - T\circ \od{}{x}. \]
\end{definition}

\begin{lemma}
Let $T_f$ be an integral distribution such that $\partial_u(f)$ is well-defined on $X$, then
\[ \partial_u(T_f) = T_{\partial_{u}(f)}. \]
\end{lemma}
\begin{proof}
TODO by partial integration.
\end{proof}

\begin{lemma}
Let $X$ be an open subset of $\R^N$ and let $T\in \dists(X)$. Then
\[ D^\alpha T = (-1)^{|\alpha|}T\circ D^\alpha. \]
\end{lemma}

\begin{proposition}
    Let $X$ be an open subset of a normed vector space $V$, $T\in \dists(X)$ and $u\in V$. Then
    \begin{enumerate}
    \item $\partial_{u}T \in \dists(X)$;
    \item $\partial_{u}$ is linear on the module $\dists(X)$.
    \end{enumerate}
\end{proposition}

\begin{proposition}
Let $\theta$ be the Heaviside function. Then
\[ (T_\theta)' = \delta. \]
\end{proposition}

\subsubsection{Jump discontinuities in integral distributions}
\begin{proposition}
Let $f$ be a function that is $\cont^1$ on $]-\infty, x_0[$ and $]x_0, +\infty[$ for some $x_0\in\R$. Then
the derivative of $f$ as distribution is given by
\[ f' = (f|_{\R\setminus\{x_0\}})' + (\Delta_{x_0}f)\delta_{x_0}. \]
\end{proposition}
Note that if $f$ is continuous at $x_0$, this gives $f' = (f|_{\R\setminus\{x_0\}})'$ as distributions.
\begin{proof}
Let $\phi\in\testFuncs(\R)$. Then we calculate
\begin{align*}
f'(\phi) &= \int_{-\infty}^\infty f(x)\phi'(x)\diff{x} = \int_{-\infty}^{x_0} f(x)\phi'(x)\diff{x} + \int_{x_0}^\infty f(x)\phi'(x)\diff{x} \\
&= \Big[f(x)\phi(x)\Big]_{-\infty}^{x_0} - \int_{-\infty}^{x_0} f'(x)\phi(x)\diff{x} + \Big[f(x)\phi(x)\Big]_{x_0}^{+\infty} - \int_{x_0}^{+\infty} f'(x)\phi(x)\diff{x} \\
&= -\int_{\R\setminus\{x_0\}} f'(x)\phi(x)\diff{x} + \lim_{x\to x_0+}f(x)\phi(x)-\lim_{x\to x_0-}f(x)\phi(x) \\
&= \int_{\R}f|_{\R\setminus\{x_0\}}\phi'(x)\diff{x} + \phi(x_0)\lim_{x\to x_0+}f(x)- \phi(x_0)\lim_{x\to x_0-}f(x) = \int_{\R}(f|_{\R\setminus\{x_0\}})'\phi(x)\diff{x} + (\Delta_{x_0}f)\delta_{x_0}.
\end{align*}
\end{proof}
\begin{corollary}
Let $f$ be a function that is $\cont^1$ on $]-\infty, x_0[$ and $]x_0, +\infty[$ for some $x_0\in\R$. Then
the $k^\text{th}$ derivative of $f$ as distribution is given by
\[ f^{(k)} = (f|_{\R\setminus\{x_0\}})^{(k)} + \sum_{j=0}^{k-1}(\Delta_{x_0}f^{(j)})\delta^{(k-1-j)}_{x_0}. \]
\end{corollary}

\subsection{Convolution}


\section{Sobolev spaces}
TODO: after $L^p$ spaces.
\subsection{Weak and strong derivatives}
\begin{definition}
    Let $X$ be an open subset of a normed vector space, $f\in L^p(X)$ and $D^\alpha$ a derivative on $X$. If there exists $g\in L^q(X)$ such that $D^\alpha T_f = T_g$, then $g$ is the \udef{weak $\alpha$ derivative} of $f$ in $L^q(X)$.
\end{definition}
The weak $\alpha$ derivative is unique if it exists, due to \ref{uniquenessIntegratedFunction}.

The definition of weak derivative translates to the requirement
\[ \int_X f D^\alpha \phi \diff{x} = (-1)^{|\alpha|}\int_X g\phi\diff{x} \qquad \forall \phi\in\testFuncs(X). \]

\begin{definition}
    Let $X$ be an open subset of a normed vector space, $f\in L^p(X)$ and $D^\alpha$ a derivative on $X$. We call $g\in L^q(X)$ a \udef{strong $\alpha$ derivative} if there exists a sequence $\seq{f_n} \subset \cont^\infty(X)$  such that
    \begin{itemize}
    \item $f_n \to f$ in $L^p(X)$; and
    \item $D^{\alpha}f_n \to g$ in $L^q(X)$.
    \end{itemize}
\end{definition}

\begin{theorem}
Let $f\in L^p(X)$. Then $g\in L^q(X)$ is a weak $\alpha$ derivative \textup{if and only if} it is a strong $\alpha$ derivative.
\end{theorem}

\subsection{Sobolev spaces}
\begin{definition}
Let $X$ be an open subset of a normed vector space, $1\leq p \leq \infty$ and $k\in\N$. Then the \udef{Sobolev space} $W^{k,p}(X)$ is defined as
\[ W^{k,p}(X) \defeq \setbuilder{T\in \dists(X)}{\text{$T$ has a weak $\alpha$ derivative in $L^p(X)$ for all $|\alpha|\leq k$}}.
 \]
\end{definition}
In particular each distribution in $W^{k,p}(X)$ is an integral distribution $T_f$ for some $f$ in $L^p(X)$.

\begin{lemma}
    Let $X$ be an open subset of a normed vector space, $1\leq p \leq \infty$ and $k\in\N$. Then
    \[ \testFuncs(X) \subset W^{k,p}(X) \subset L^p(X), \]
    so that $W^{p,k}(X)$ is a dense subspace of $L^p(X)$.
\end{lemma}

\begin{proposition}
A Sobolev space $W^{k,p}(X,\diff{\mu})$ is a Banach space with norm
\[ \norm{f}_{W^{k,p}(X,\diff{\mu})} = \begin{cases}
\left(\sum_{|\alpha|\leq k}\norm{D^\alpha f}^p_{L^{p}(X, \diff{\mu})}\right)^{1/p} & 1\leq p < \infty \\
\max_{|\alpha|\leq k} \norm{D^\alpha f}_{L^{\infty}(X, \diff{\mu})} & p = \infty.
\end{cases} \]
If the measure is clear, we may also write $W^{k,p}(X)$.

In particular $W^{k,2}(X, \diff{\mu})$ is a Hilbert space with inner product
\[ \inner{f,g} \sum_{|\alpha| \leq k} \int_X D^\alpha f(x) \overline{D^\alpha g(x)}\diff{\mu(x)}. \]
The Hilbert space $W^{k,2}(X, \diff{\mu})$ is more commonly denoted $H^k(X, \diff{\mu})$.
\end{proposition}
TODO: alternative definition: use ordinary derivative and take completion???

\begin{proposition}
Let $X$ be an open subset of a normed vector space, $1\leq p < \infty$ and $k\in\N$. Then $W^{k,p}(X)$ coincides with the closure of $\cont^\infty(X) \cap W^{k,p}(X)$ in the $W^{k,p}(X)$-norm.
\end{proposition}

\begin{definition}
Let $X$ be an open subset of a normed vector space, $1\leq p < \infty$ and $k\in\N$. We define $W_0^{k,p}(X)$ to be the closure of $\cont^\infty_c(X)$ in the $W^{k,p}(X)$-norm.
\end{definition}